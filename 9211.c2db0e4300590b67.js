"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[9211],{59211:(Q,E,e)=>{e.d(E,{Z:()=>N});var p=e(15861),v=e(50484),M=e(73514),Z=e(57964),T=e(14007),m=e(79412),x=e(6785),y=e(80543),g=(e(4703),e(65311),e(10141)),G=e(33721),F=e(11642),A=e(46054),j=e(15462),L=e(24859),B=(e(2189),e(82784)),l=e(91866),c=e(26894);function t(){return(t=(0,p.Z)(function*(s,r,u){const h=(0,j.en)(s),O=yield(0,B.Vr)(h,l.Z.from(r),{...u}),R=O.data.extent;return!R||isNaN(R.xmin)||isNaN(R.ymin)||isNaN(R.xmax)||isNaN(R.ymax)?{count:O.data.count,extent:null}:{count:O.data.count,extent:c.Z.fromJSON(R)}})).apply(this,arguments)}var n=e(61375),i=e(46708),f=e(36026),S=e(93792);let D=class extends M.Z{constructor(s){super(s),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,x.mN)(this.url)}execute(s,r){var u=this;return(0,p.Z)(function*(){const h=yield u.executeJSON(s,r);return u.featureSetFromJSON(s,h,r)})()}executeJSON(s,r){var u=this;return(0,p.Z)(function*(){const h=u._normalizeQuery(s),O=null!=s.outStatistics?.[0],R=(0,T.Z)("featurelayer-pbf-statistics"),U=!O||R;let I;if(u.pbfSupported&&U)try{I=yield(0,f.t)(u.url,h,r)}catch(V){if("query:parsing-pbf"!==V.name)throw V;u.pbfSupported=!1}return u.pbfSupported&&U||(I=yield(0,i.F)(u.url,h,r)),u._normalizeFields(I.fields),I})()}featureSetFromJSON(s,r,u){var h=this;return(0,p.Z)(function*(){if(!h._queryIs3DObjectFormat(s)||null==h.infoFor3D||!r.features)return S.Z.fromJSON(r);const{meshFeatureSetFromJSON:O}=yield(0,m.Hl)(Promise.all([e.e(1716),e.e(1317),e.e(1868),e.e(8777)]).then(e.bind(e,16022)),u);return O(s,h.infoFor3D,r)})()}executeForCount(s,r){return(0,L.P)(this.url,this._normalizeQuery(s),r)}executeForExtent(s,r){return function d(s,r,u){return t.apply(this,arguments)}(this.url,this._normalizeQuery(s),r)}executeForIds(s,r){return(0,n.G)(this.url,this._normalizeQuery(s),r)}executeRelationshipQuery(s,r){var u=this;return(0,p.Z)(function*(){const[{default:h},{executeRelationshipQuery:O}]=yield(0,m.Hl)(Promise.all([Promise.resolve().then(e.bind(e,46556)),e.e(3005).then(e.bind(e,83005))]),r);return s=h.from(s),(u.gdbVersion||u.dynamicDataSource)&&((s=s.clone()).gdbVersion=s.gdbVersion||u.gdbVersion,s.dynamicDataSource=s.dynamicDataSource||u.dynamicDataSource),O(u.url,s,r)})()}executeRelationshipQueryForCount(s,r){var u=this;return(0,p.Z)(function*(){const[{default:h},{executeRelationshipQueryForCount:O}]=yield(0,m.Hl)(Promise.all([Promise.resolve().then(e.bind(e,46556)),e.e(3005).then(e.bind(e,83005))]),r);return s=h.from(s),(u.gdbVersion||u.dynamicDataSource)&&((s=s.clone()).gdbVersion=s.gdbVersion||u.gdbVersion,s.dynamicDataSource=s.dynamicDataSource||u.dynamicDataSource),O(u.url,s,r)})()}executeAttachmentQuery(s,r){var u=this;return(0,p.Z)(function*(){const{executeAttachmentQuery:h,fetchAttachments:O,processAttachmentQueryResult:R}=yield(0,m.Hl)(e.e(4662).then(e.bind(e,4662)),r),U=(0,j.en)(u.url);return R(U,yield u.queryAttachmentsSupported?h(U,s,r):O(U,s,r))})()}executeTopFeaturesQuery(s,r){var u=this;return(0,p.Z)(function*(){const{executeTopFeaturesQuery:h}=yield(0,m.Hl)(Promise.all([e.e(8592),e.e(8218)]).then(e.bind(e,38778)),r);return h(u.parsedUrl,s,u.sourceSpatialReference,r)})()}executeForTopIds(s,r){var u=this;return(0,p.Z)(function*(){const{executeForTopIds:h}=yield(0,m.Hl)(Promise.all([e.e(8592),e.e(8009)]).then(e.bind(e,98009)),r);return h(u.parsedUrl,s,r)})()}executeForTopExtents(s,r){var u=this;return(0,p.Z)(function*(){const{executeForTopExtents:h}=yield(0,m.Hl)(Promise.all([e.e(8592),e.e(8080)]).then(e.bind(e,78080)),r);return h(u.parsedUrl,s,r)})()}executeForTopCount(s,r){var u=this;return(0,p.Z)(function*(){const{executeForTopCount:h}=yield(0,m.Hl)(Promise.all([e.e(8592),e.e(4032)]).then(e.bind(e,34032)),r);return h(u.parsedUrl,s,r)})()}_normalizeQuery(s){let r=l.Z.from(s);r.sourceSpatialReference=r.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(r=r===s?r.clone():r,r.gdbVersion=s.gdbVersion||this.gdbVersion,r.dynamicDataSource=s.dynamicDataSource?A.n.from(s.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:u}=this;if(null!=u&&this._queryIs3DObjectFormat(s)){r=r===s?r.clone():r,r.formatOf3DObjects=null;const{supportedFormats:h,queryFormats:O}=u,R=(0,F.S0)("model/gltf-binary",h)??(0,F.Ow)("glb",h),U=(0,F.S0)("model/gltf+json",h)??(0,F.Ow)("gltf",h);for(const I of O){if(I===R){r.formatOf3DObjects=I;break}I!==U||r.formatOf3DObjects||(r.formatOf3DObjects=I)}if(!r.formatOf3DObjects)throw new Z.Z("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(r.outSpatialReference&&!(0,G.fS)(r.outSpatialReference,this.sourceSpatialReference))throw new Z.Z("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(null==r.outFields||!r.outFields.includes("*")){r=r===s?r.clone():r,null==r.outFields&&(r.outFields=[]);const{originX:I,originY:V,originZ:z,translationX:J,translationY:W,translationZ:K,scaleX:H,scaleY:$,scaleZ:X,rotationX:Y,rotationY:_,rotationZ:w,rotationDeg:k}=u.transformFieldRoles;r.outFields.push(I,V,z,J,W,K,H,$,X,Y,_,w,k)}}return r}_normalizeFields(s){if(null!=this.fieldsIndex&&null!=s)for(const r of s){const u=this.fieldsIndex.get(r.name);u&&Object.assign(r,u.toJSON())}}_queryIs3DObjectFormat(s){return null!=this.infoFor3D&&!0===s.returnGeometry&&"xyFootprint"!==s.multipatchOption&&!s.outStatistics}};(0,v._)([(0,y.Cb)({type:A.n})],D.prototype,"dynamicDataSource",void 0),(0,v._)([(0,y.Cb)()],D.prototype,"fieldsIndex",void 0),(0,v._)([(0,y.Cb)()],D.prototype,"gdbVersion",void 0),(0,v._)([(0,y.Cb)()],D.prototype,"infoFor3D",void 0),(0,v._)([(0,y.Cb)({readOnly:!0})],D.prototype,"parsedUrl",null),(0,v._)([(0,y.Cb)()],D.prototype,"pbfSupported",void 0),(0,v._)([(0,y.Cb)()],D.prototype,"queryAttachmentsSupported",void 0),(0,v._)([(0,y.Cb)()],D.prototype,"sourceSpatialReference",void 0),(0,v._)([(0,y.Cb)({type:String})],D.prototype,"url",void 0),D=(0,v._)([(0,g.j)("esri.layers.graphics.sources.support.QueryTask")],D);const N=D},11642:(Q,E,e)=>{e.d(E,{$6:()=>B,$z:()=>M,F7:()=>v,Ow:()=>x,S0:()=>m,d1:()=>y,dm:()=>C});const p=[["binary","application/octet-stream","bin",""]];function v(l,c){return null!=F(c.name,l?.supportedFormats??[])}function M(l,c){if(!l)return!1;const d=C(c,l.supportedFormats??[]);return null!=d&&l.editFormats.includes(d)}function m(l,c){return A(function G(l,c){const d=l.toLowerCase();return P(c).find(t=>j(t)===d)}(l,c))}function x(l,c){return A(F(l,c))}function y(l,c){return j(function g(l,c){return P(c).find(d=>A(d)===l)}(l,c))}function C(l,c){return x(l.name,c)??m(l.type,c)}function P(l){return[...p,...l]}function F(l,c){const d=l.toLowerCase();return P(c).find(t=>function L(l){return l?.[2].split(",").map(c=>c.toLowerCase())??[]}(t).some(n=>d.endsWith(n)))}function A(l){return l?.[0]}function j(l){return l?.[1].toLowerCase()}function B(l){return l.tables?.find(c=>"assetMaps"===c.role)}},24859:(Q,E,e)=>{e.d(E,{P:()=>T});var p=e(15861),v=e(15462),M=e(82784),Z=e(91866);function T(x,y,C){return m.apply(this,arguments)}function m(){return(m=(0,p.Z)(function*(x,y,C){const P=(0,v.en)(x),{data:g}=yield(0,M.hH)(P,Z.Z.from(y),C);return g.count})).apply(this,arguments)}},61375:(Q,E,e)=>{e.d(E,{G:()=>T});var p=e(15861),v=e(15462),M=e(82784),Z=e(91866);function T(x,y,C){return m.apply(this,arguments)}function m(){return(m=(0,p.Z)(function*(x,y,C){const P=(0,v.en)(x),{data:g}=yield(0,M.Ev)(P,Z.Z.from(y),C);return g.objectIds})).apply(this,arguments)}},46708:(Q,E,e)=>{e.d(E,{F:()=>y,e:()=>m});var p=e(15861),v=e(15462),M=e(82784),Z=e(93792),T=e(91866);function m(P,g,G){return x.apply(this,arguments)}function x(){return(x=(0,p.Z)(function*(P,g,G){const F=yield y(P,g,G);return Z.Z.fromJSON(F)})).apply(this,arguments)}function y(P,g,G){return C.apply(this,arguments)}function C(){return(C=(0,p.Z)(function*(P,g,G){const F=(0,v.en)(P),A={...G},j=T.Z.from(g),{data:L}=yield(0,M.JT)(F,j,j.sourceSpatialReference,A);return L})).apply(this,arguments)}},36026:(Q,E,e)=>{e.d(E,{t:()=>l});var p=e(15861),v=e(15462),M=e(51172),Z=e(53456),T=e(10842);function m(d,t){return t}function x(d,t,n,i){switch(n){case 0:return g(d,t+i,0);case 1:return"lowerLeft"===d.originPosition?g(d,t+i,1):function G({translate:d,scale:t},n,i){return d[i]-n*t[i]}(d,t+i,1)}}function y(d,t,n,i){return 2===n?g(d,t,2):x(d,t,n,i)}function C(d,t,n,i){return 2===n?0===t?0:g(d,t,3):x(d,t,n,i)}function P(d,t,n,i){return 3===n?0===t?0:g(d,t,3):y(d,t,n,i)}function g({translate:d,scale:t},n,i){return d[i]+n*t[i]}class F{constructor(t){this._options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=m,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const n=(0,Z.k)(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(null!=n)for(const i of t.features)n(i.geometry)}createSpatialReference(){return{}}addField(t,n){const i=t.fields;(0,M.O3)(i),i.push(n);const f=i.map(S=>S.name);this._attributesConstructor=function(){for(const S of f)this[S]=null}}addFeature(t,n){t.features.push(n)}prepareFeatures(t){switch(this._transform=t.transform,this._options.applyTransform&&t.transform&&(this._applyTransform=this._deriveApplyTransform(t)),this._mValueOffset=null,this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),t.geometryType){case"esriGeometryPoint":this.addCoordinate=(n,i,f)=>this.addCoordinatePoint(n,i,f),this.createGeometry=n=>this.createPointGeometry(n);break;case"esriGeometryPolygon":this.addCoordinate=(n,i,f)=>this._addCoordinatePolygon(n,i,f),this.createGeometry=n=>this._createPolygonGeometry(n);break;case"esriGeometryPolyline":this.addCoordinate=(n,i,f)=>this._addCoordinatePolyline(n,i,f),this.createGeometry=n=>this._createPolylineGeometry(n);break;case"esriGeometryMultipoint":this.addCoordinate=(n,i,f)=>this._addCoordinateMultipoint(n,i,f),this.createGeometry=n=>this._createMultipointGeometry(n)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,n,i){0===this._lengths.length&&(this._toAddInCurrentPath=n),this._lengths.push(n)}addQueryGeometry(t,n){const{queryGeometry:i,queryGeometryType:f}=n,S=(0,T.$g)(i.clone(),i,!1,!1,this._transform),D=(0,T.di)(S,f,!1,!1);t.queryGeometryType=f,t.queryGeometry={...D}}createPointGeometry(t){const n={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(n.z=0),t.hasM&&(n.m=0),n}addCoordinatePoint(t,n,i){switch(n=this._applyTransform(this._transform,n,i,0),i){case 0:t.x=n;break;case 1:t.y=n;break;case 2:"z"in t?t.z=n:t.m=n;break;case 3:t.m=n}}_transformPathLikeValue(t,n){let i=0;return n<=1&&(i=this._previousCoordinate[n],this._previousCoordinate[n]+=t),null!==this._mValueOffset&&0===t&&n>0&&!(n%this._mValueOffset)?0:this._applyTransform(this._transform,t,n,i)}_addCoordinatePolyline(t,n,i){this._dehydratedAddPointsCoordinate(t.paths,n,i)}_addCoordinatePolygon(t,n,i){this._dehydratedAddPointsCoordinate(t.rings,n,i)}_addCoordinateMultipoint(t,n,i){0===i&&t.points.push([]);const f=this._transformPathLikeValue(n,i);t.points[t.points.length-1].push(f)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,n,i){0===i&&0==this._toAddInCurrentPath--&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const f=this._transformPathLikeValue(n,i),S=t[t.length-1];0===i&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),S.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=f}_deriveApplyTransform(t){const{hasZ:n,hasM:i}=t;return n&&i?P:n?y:i?C:x}}var A=e(82784),L=(e(93792),e(91866));function l(d,t,n){return c.apply(this,arguments)}function c(){return(c=(0,p.Z)(function*(d,t,n){const i=(0,v.en)(d),f={...n},S=L.Z.from(t),D=!S.quantizationParameters,{data:N}=yield(0,A.qp)(i,S,new F({sourceSpatialReference:S.sourceSpatialReference,applyTransform:D}),f);return N})).apply(this,arguments)}}}]);