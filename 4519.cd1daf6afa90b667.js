"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[4519],{657:(xe,ce,h)=>{h.d(ce,{$c:()=>U,Hg:()=>w,jW:()=>z,uD:()=>H});var B=h(73514),x=h(83944),oe=h(49301);const fe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function he(S){return S instanceof B.Z}function ue(S){return S instanceof x.Z?Object.keys(S.items):he(S)?(0,oe.vw)(S).keys():S?Object.keys(S):[]}function J(S,R){return S instanceof x.Z?S.items[R]:S[R]}function Y(S){return S?S.declaredClass:null}function A(S,R){const ye=S.diff;if(ye&&"function"==typeof ye)return ye(S,R);const W=ue(S),K=ue(R);if(0===W.length&&0===K.length)return;if(!W.length||!K.length||function q(S,R){return!(!Array.isArray(S)||!Array.isArray(R))&&S.length!==R.length}(S,R))return{type:"complete",oldValue:S,newValue:R};const Q=K.filter(te=>!W.includes(te)),O=W.filter(te=>!K.includes(te)),b=W.filter(te=>K.includes(te)&&J(S,te)!==J(R,te)).concat(Q,O).sort(),Z=Y(S);if(Z&&fe.has(Z)&&b.length)return{type:"complete",oldValue:S,newValue:R};let ee;const ae=he(S)&&he(R);for(const te of b){const _=J(S,te),g=J(R,te);let T;if((ae||"function"!=typeof _&&"function"!=typeof g)&&_!==g&&(null!=_||null!=g)){if(ye&&ye[te]&&"function"==typeof ye[te])T=ye[te]?.(_,g);else if(_ instanceof Date&&g instanceof Date){if(_.getTime()===g.getTime())continue;T={type:"complete",oldValue:_,newValue:g}}else T="object"==typeof _&&"object"==typeof g&&Y(_)===Y(g)?A(_,g):{type:"complete",oldValue:_,newValue:g};null!=T&&(null!=ee?ee.diff[te]=T:ee={type:"partial",diff:{[te]:T}})}}return ee}function z(S,R){return H(S,R)}function H(S,R){if(null==S)return!1;const ye=R.split(".");let W=S;for(const K of ye){if("complete"===W.type)return!0;if("partial"!==W.type)return!1;{const Q=W.diff[K];if(!Q)return!1;W=Q}}return!0}function U(S,R){if(!S)return!1;if("partial"===S.type){const ye=Object.keys(S.diff);return 1===ye.length&&ye[0]===R}return!1}function w(S,R){if("function"!=typeof S&&"function"!=typeof R&&(null!=S||null!=R))return null==S||null==R||"object"==typeof S&&"object"==typeof R&&Y(S)!==Y(R)?{type:"complete",oldValue:S,newValue:R}:A(S,R)}},26540:(xe,ce,h)=>{h.d(ce,{Q:()=>he});var B=h(57678),oe=(h(14007),h(43029)),fe=h(4758);class he{constructor(g=9,T){this._compareMinX=H,this._compareMinY=de,this._toBBox=v=>v,this._maxEntries=Math.max(4,g||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),T&&("function"==typeof T?this._toBBox=T:this._initFormat(T)),this.clear()}destroy(){this.clear(),K.prune(),Q.prune(),O.prune(),b.prune()}all(g){J(this._data,g)}search(g,T){let v=this._data;const C=this._toBBox;if(ye(g,v))for(K.clear();v;){for(let E=0,j=v.children.length;E<j;E++){const D=v.children[E],N=v.leaf?C(D):D;ye(g,N)&&(v.leaf?T(D):R(g,N)?J(D,T):K.push(D))}v=K.pop()}}collides(g){let T=this._data;const v=this._toBBox;if(!ye(g,T))return!1;for(K.clear();T;){for(let C=0,E=T.children.length;C<E;C++){const j=T.children[C],D=T.leaf?v(j):j;if(ye(g,D)){if(T.leaf||R(g,D))return!0;K.push(j)}}T=K.pop()}return!1}load(g){if(!g.length)return this;if(g.length<this._minEntries){for(let v=0,C=g.length;v<C;v++)this.insert(g[v]);return this}let T=this._build(g.slice(0,g.length),0,g.length-1,0);if(this._data.children.length)if(this._data.height===T.height)this._splitRoot(this._data,T);else{if(this._data.height<T.height){const v=this._data;this._data=T,T=v}this._insert(T,this._data.height-T.height-1,!0)}else this._data=T;return this}insert(g){return g&&this._insert(g,this._data.height-1),this}clear(){return this._data=new ae([]),this}remove(g){if(!g)return this;let T,v=this._data,C=null,E=0,j=!1;const D=this._toBBox(g);for(O.clear(),b.clear();v||O.length>0;){if(v||(v=O.pop(),C=O.data[O.length-1],E=b.pop()??0,j=!0),v.leaf&&(T=(0,B.cq)(v.children,g,v.children.length,v.indexHint),-1!==T))return v.children.splice(T,1),O.push(v),this._condense(O),this;j||v.leaf||!R(v,D)?C?(E++,v=C.children[E],j=!1):v=null:(O.push(v),b.push(E),E=0,C=v,v=v.children[0])}return this}toJSON(){return this._data}fromJSON(g){return this._data=g,this}_build(g,T,v,C){const E=v-T+1;let j=this._maxEntries;if(E<=j){const V=new ae(g.slice(T,v+1));return Y(V,this._toBBox),V}C||(C=Math.ceil(Math.log(E)/Math.log(j)),j=Math.ceil(E/j**(C-1)));const D=new te([]);D.height=C;const N=Math.ceil(E/j),F=N*Math.ceil(Math.sqrt(j));W(g,T,v,F,this._compareMinX);for(let V=T;V<=v;V+=F){const k=Math.min(V+F-1,v);W(g,V,k,N,this._compareMinY);for(let me=V;me<=k;me+=N){const $=Math.min(me+N-1,k);D.children.push(this._build(g,me,$,C-1))}}return Y(D,this._toBBox),D}_insert(g,T,v){const E=v?g:(0,this._toBBox)(g);O.clear();const j=function ue(_,g,T,v){for(;v.push(g),!0!==g.leaf&&v.length-1!==T;){let C,E=1/0,j=1/0;for(let D=0,N=g.children.length;D<N;D++){const F=g.children[D],V=U(F),k=X(_,F)-V;k<j?(j=k,E=V<E?V:E,C=F):k===j&&V<E&&(E=V,C=F)}g=C||g.children[0]}return g}(E,this._data,T,O);for(j.children.push(g),z(j,E);T>=0&&O.data[T].children.length>this._maxEntries;)this._split(O,T),T--;!function q(_,g,T){for(let v=T;v>=0;v--)z(g.data[v],_)}(E,O,T)}_split(g,T){const v=g.data[T],C=v.children.length,E=this._minEntries;this._chooseSplitAxis(v,E,C);const j=this._chooseSplitIndex(v,E,C);if(!j)return;const D=v.children.splice(j,v.children.length-j),N=v.leaf?new ae(D):new te(D);N.height=v.height,Y(v,this._toBBox),Y(N,this._toBBox),T?g.data[T-1].children.push(N):this._splitRoot(v,N)}_splitRoot(g,T){this._data=new te([g,T]),this._data.height=g.height+1,Y(this._data,this._toBBox)}_chooseSplitIndex(g,T,v){let C,E,j;C=E=1/0;for(let D=T;D<=v-T;D++){const N=A(g,0,D,this._toBBox),F=A(g,D,v,this._toBBox),V=S(N,F),k=U(N)+U(F);V<C?(C=V,j=D,E=k<E?k:E):V===C&&k<E&&(E=k,j=D)}return j}_chooseSplitAxis(g,T,v){const C=g.leaf?this._compareMinX:H,E=g.leaf?this._compareMinY:de;this._allDistMargin(g,T,v,C)<this._allDistMargin(g,T,v,E)&&g.children.sort(C)}_allDistMargin(g,T,v,C){g.children.sort(C);const E=this._toBBox,j=A(g,0,T,E),D=A(g,v-T,v,E);let N=w(j)+w(D);for(let F=T;F<v-T;F++){const V=g.children[F];z(j,g.leaf?E(V):V),N+=w(j)}for(let F=v-T-1;F>=T;F--){const V=g.children[F];z(D,g.leaf?E(V):V),N+=w(D)}return N}_condense(g){for(let T=g.length-1;T>=0;T--){const v=g.data[T];if(0===v.children.length)if(T>0){const C=g.data[T-1],E=C.children;E.splice((0,B.cq)(E,v,E.length,C.indexHint),1)}else this.clear();else Y(v,this._toBBox)}}_initFormat(g){const T=["return a"," - b",";"];this._compareMinX=new Function("a","b",T.join(g[0])),this._compareMinY=new Function("a","b",T.join(g[1])),this._toBBox=new Function("a","return {minX: a"+g[0]+", minY: a"+g[1]+", maxX: a"+g[2]+", maxY: a"+g[3]+"};")}}function J(_,g){let T=_;for(Q.clear();T;){if(!0===T.leaf)for(const v of T.children)g(v);else Q.pushArray(T.children);T=Q.pop()??null}}function Y(_,g){A(_,0,_.children.length,g,_)}function A(_,g,T,v,C){C||(C=new ae([])),C.minX=1/0,C.minY=1/0,C.maxX=-1/0,C.maxY=-1/0;for(let E,j=g;j<T;j++)E=_.children[j],z(C,_.leaf?v(E):E);return C}function z(_,g){_.minX=Math.min(_.minX,g.minX),_.minY=Math.min(_.minY,g.minY),_.maxX=Math.max(_.maxX,g.maxX),_.maxY=Math.max(_.maxY,g.maxY)}function H(_,g){return _.minX-g.minX}function de(_,g){return _.minY-g.minY}function U(_){return(_.maxX-_.minX)*(_.maxY-_.minY)}function w(_){return _.maxX-_.minX+(_.maxY-_.minY)}function X(_,g){return(Math.max(g.maxX,_.maxX)-Math.min(g.minX,_.minX))*(Math.max(g.maxY,_.maxY)-Math.min(g.minY,_.minY))}function S(_,g){const T=Math.max(_.minX,g.minX),v=Math.max(_.minY,g.minY),C=Math.min(_.maxX,g.maxX),E=Math.min(_.maxY,g.maxY);return Math.max(0,C-T)*Math.max(0,E-v)}function R(_,g){return _.minX<=g.minX&&_.minY<=g.minY&&g.maxX<=_.maxX&&g.maxY<=_.maxY}function ye(_,g){return g.minX<=_.maxX&&g.minY<=_.maxY&&g.maxX>=_.minX&&g.maxY>=_.minY}function W(_,g,T,v,C){const E=[g,T];for(;E.length;){const j=E.pop(),D=E.pop();if(j-D<=v)continue;const N=D+Math.ceil((j-D)/v/2)*v;(0,fe.q)(_,N,D,j,C),E.push(D,N,N,j)}}const K=new oe.Z,Q=new oe.Z,O=new oe.Z,b=new oe.Z({deallocator:void 0});class Z{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class ee extends Z{constructor(){super(...arguments),this.height=1,this.indexHint=new B.SO}}class ae extends ee{constructor(g){super(),this.children=g,this.leaf=!0}}class te extends ee{constructor(g){super(),this.children=g,this.leaf=!1}}},46872:(xe,ce,h)=>{h.d(ce,{H:()=>q});var B=h(14007),x=h(26540),oe=h(45425);const he={minX:0,minY:0,maxX:0,maxY:0};class q{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new x.Q(9,(0,B.Z)("esri-csp-restrictions")?A=>({minX:A[0],minY:A[1],maxX:A[2],maxY:A[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const A=new Array(this._idByBounds.size);let z=0;this._idByBounds.forEach((H,de)=>{A[z++]=de}),this._indexInvalid=!1,this._index.clear(),this._index.load(A)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(A=>this._idByBounds.has(A))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const A=(0,oe.cS)();for(const z of this._boundsById.values())z&&(A[0]=Math.min(z[0],A[0]),A[1]=Math.min(z[1],A[1]),A[2]=Math.max(z[2],A[2]),A[3]=Math.max(z[3],A[3]));return A}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(A){const z=this._boundsById.get(A);this._boundsById.delete(A),z&&(this._idByBounds.delete(z),this._indexInvalid||this._index.remove(z))}forEachInBounds(A,z){this._loadIndex(),function J(Y,A,z){(function ue(Y){he.minX=Y[0],he.minY=Y[1],he.maxX=Y[2],he.maxY=Y[3]})(A),Y.search(he,z)}(this._index,A,H=>z(this._idByBounds.get(H)))}get(A){return this._boundsById.get(A)}has(A){return this._boundsById.has(A)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(A,z){if(!this._indexInvalid){const H=this._boundsById.get(A);H&&(this._index.remove(H),this._idByBounds.delete(H))}this._boundsById.set(A,z),z&&(this._idByBounds.set(z,A),this._indexInvalid||(this._boundsToLoad.push(z),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},84726:(xe,ce,h)=>{h.d(ce,{Z:()=>H});var B=h(57678),x=h(57964),oe=h(88278),fe=h(4703),he=h(27048),ue=h(45425),J=h(10842),q=h(46872),Y=h(29085),A=h(14309);const z=(0,he.Ue)();class H{constructor(U){this.geometryInfo=U,this._boundsStore=new q.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new oe.Z,this.featureAdapter=A.n}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let U=0;return this._featuresById.forEach(w=>{null!=w.geometry&&w.geometry.coords&&(U+=w.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:U/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(U){if(null==this.fullBounds)return null;const[w,X,S,R]=this.fullBounds;return{xmin:w,ymin:X,xmax:S,ymax:R,spatialReference:(0,Y.S2)(U)}}add(U){this._add(U),this._emitChanged()}addMany(U){for(const w of U)this._add(w);this._emitChanged()}upsertMany(U){const w=U.map(X=>this._upsert(X));return this._emitChanged(),w.filter(B.pC)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(U){const w=this._featuresById.get(U);return w?(this._remove(w),this._emitChanged(),w):null}removeManyById(U){this._boundsStore.invalidateIndex();for(const w of U){const X=this._featuresById.get(w);X&&this._remove(X)}this._emitChanged()}forEachBounds(U,w){for(const X of U){const S=this._boundsStore.get(X.objectId);S&&w((0,he.JR)(z,S))}}getFeature(U){return this._featuresById.get(U)}has(U){return this._featuresById.has(U)}forEach(U){this._featuresById.forEach(w=>U(w))}forEachInBounds(U,w){this._boundsStore.forEachInBounds(U,X=>{w(this._featuresById.get(X))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let U=!1;this._featuresById.forEach((w,X)=>{this._markedIds.has(X)||(U=!0,this._remove(w))}),this._markedIds.clear(),U&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(U){if(!U)return;const w=U.objectId;if(null==w)return void fe.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new x.Z("featurestore:invalid-feature","feature id is missing",{feature:U}));const X=this._featuresById.get(w);let S;if(this._markedIds.add(w),X?(U.displayId=X.displayId,S=this._boundsStore.get(w),this._boundsStore.delete(w)):null!=this.onFeatureAdd&&this.onFeatureAdd(U),!U.geometry?.coords?.length)return this._boundsStore.set(w,null),void this._featuresById.set(w,U);S=(0,J.$)(S??(0,ue.Ue)(),U.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=S&&this._boundsStore.set(w,S),this._featuresById.set(w,U)}_upsert(U){const w=U?.objectId;if(null==w)return fe.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new x.Z("featurestore:invalid-feature","feature id is missing",{feature:U})),null;const X=this._featuresById.get(w);if(!X)return this._add(U),U;this._markedIds.add(w);const{geometry:S,attributes:R}=U;for(const ye in R)X.attributes[ye]=R[ye];return S&&(X.geometry=S,this._boundsStore.set(w,(0,J.$)((0,ue.Ue)(),S,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),X}_remove(U){null!=this.onFeatureRemove&&this.onFeatureRemove(U);const w=U.objectId;return this._markedIds.delete(w),this._boundsStore.delete(w),this._featuresById.delete(w),U}}},60324:(xe,ce,h)=>{h.d(ce,{Dm:()=>q,Hq:()=>A,MS:()=>z,bU:()=>he});var B=h(14007),x=h(34222),oe=h(85559),fe=h(19579);function he(H){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===H||"esriGeometryMultipoint"===H?fe.I4:"esriGeometryPolyline"===H?fe.ET:fe.lF}}}const ue=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let J=1;function q(H,de){if((0,B.Z)("esri-csp-restrictions"))return()=>({[de]:null,...H});try{let U=`this${Y(de)} = null;`;for(const X in H)U+=`this${Y(X)} = ${JSON.stringify(H[X])};`;const w=new Function(`\n      return class AttributesClass$${J++} {\n        constructor() {\n          ${U};\n        }\n      }\n    `)();return()=>new w}catch{return()=>({[de]:null,...H})}}function Y(H){return ue.test(H)?`.${H}`:`["${H}"]`}function A(H={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,x.d9)(H)}}]}function z(H,de){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:H},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:de,supportsDelete:de,supportsEditing:de,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:de,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:oe.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:de,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},10579:(xe,ce,h)=>{h.d(ce,{Qc:()=>v,Fd:()=>T,TD:()=>_,Cn:()=>g,zS:()=>ae,WZ:()=>te});var B=h(15861),x=h(50484),fe=(h(2189),h(73514)),he=h(57964),ue=h(4703),J=h(8611),q=h(38955),Y=h(80543),H=(h(14007),h(65311),h(10141)),de=h(5391),U=h(83821),w=h(33721),X=h(10842),S=h(83502),R=h(40637);class K{constructor(){this._featureLookup=new Map}static getInstance(){return K.instance||(K.instance=new K),K.instance}static resetInstance(){K.instance&&(K.instance=null)}deleteFromStore(E){E.forEach(j=>{this._featureLookup.delete(j)})}readFromStoreByList(E){const j=[];return E.forEach(D=>{const N=this.readFromStoreById(D);N&&j.push(N)}),j}readFromStoreById(E){return this._featureLookup.get(E)??null}writeToStore(E,j,D){const N=[];return E.forEach(F=>{if(!F?.id)return;F.properties||(F.properties=[]);let V,k=null;if(D&&F.properties[D]&&(k=(0,X.GH)(F.properties[D])),"originId"in F&&"destinationId"in F&&(F.properties.ESRI__ORIGIN_ID=F.originId,F.properties.ESRI__DESTINATION_ID=F.destinationId),F.properties[j]=F.id,F.id&&this._featureLookup.has(F.id)&&this._featureLookup.get(F.id).attributes){const me=this._featureLookup.get(F.id),$=JSON.parse(JSON.stringify(Object.assign(me.attributes,F.properties)));D&&F.properties[D]&&($[D]=(0,R.im)(F.properties[D])),V=new S.u_(k?JSON.parse(JSON.stringify(k)):me?.geometry?JSON.parse(JSON.stringify(me.geometry)):null,$,null,F.properties[j])}else V=new S.u_(k?JSON.parse(JSON.stringify(k)):null,F.properties,null,F.properties[j]);this._featureLookup.set(F.id,V),N.push(V)}),N}}var Q=h(3660),O=h(56380),b=h(6383),Z=h(91866),ee=h(26894);const ae="ESRI__ID",te="ESRI__ORIGIN_ID",_="ESRI__DESTINATION_ID",g="ESRI__LAYOUT_GEOMETRY",T="ESRI__AGGREGATION_COUNT";let v=class extends fe.Z{constructor(C){super(C),this._processingCacheUpdatesLookup=new Map,this.knowledgeGraph=null,this.inclusionModeDefinition={generateAllSublayers:!0,namedTypeDefinitions:new Map},this.entityTypeNames=new Set,this.relationshipTypeNames=new Set,this.geographicLookup=new Map,this.sublayerCaches=new Map,this.nodeConnectionsLookup=new Map,this.relationshipConnectionsLookup=new Map,this.memberIdTypeLookup=new Map;const E=new Map;C.knowledgeGraph.dataModel.entityTypes?.forEach(j=>{j.name&&(E.set(j.name,"entity"),this._processingCacheUpdatesLookup.set(j.name,[]),C.inclusionModeDefinition&&!C.inclusionModeDefinition?.generateAllSublayers||this.entityTypeNames.add(j.name),j.properties?.forEach(D=>{D.geometryType&&"esriGeometryNull"!==D.geometryType&&this.geographicLookup.set(j.name,{name:D.name??"",geometryType:D.geometryType})}))}),C.knowledgeGraph.dataModel.relationshipTypes?.forEach(j=>{j.name&&(E.set(j.name,"relationship"),this._processingCacheUpdatesLookup.set(j.name,[]),C.inclusionModeDefinition&&!C.inclusionModeDefinition?.generateAllSublayers||this.relationshipTypeNames.add(j.name),j.properties?.forEach(D=>{D.geometryType&&"esriGeometryNull"!==D.geometryType&&this.geographicLookup.set(j.name,{name:D.name??"",geometryType:D.geometryType})}))}),C.inclusionModeDefinition?.namedTypeDefinitions.forEach((j,D)=>{if("entity"===E.get(D))this.entityTypeNames.add(D);else{if("relationship"!==E.get(D))return ue.Z.getLogger(this).warn(`A named type, ${D}, was in the inclusion list that wasn't in the data model and will be removed`),void C.inclusionModeDefinition?.namedTypeDefinitions.delete(D);this.relationshipTypeNames.add(D)}const N=new Map;j.members?.forEach(F=>{(0,J.s1)(this.memberIdTypeLookup,F.id,()=>new Set).add(D);const V=this.getById(F.id);V&&N.set(F.id,V)}),this.sublayerCaches.set(D,N)})}addToLayer(C){C.forEach(({typeName:E,id:j})=>{if(!this.inclusionModeDefinition)throw new he.Z("knowledge-graph:layer-data-manager","You cannot add to a layer's exclusion list if it was not created with an exclusion list originally");if(this.inclusionModeDefinition.namedTypeDefinitions.has(E)){if(this.inclusionModeDefinition.namedTypeDefinitions.has(E)){const D=this.inclusionModeDefinition.namedTypeDefinitions.get(E);D.members||(D.members=new Map),D.members.set(j,{id:j}),(0,J.s1)(this.memberIdTypeLookup,j,()=>new Set).add(E)}}else{const D=new Map;D.set(j,{id:j}),this.inclusionModeDefinition.namedTypeDefinitions.set(E,{useAllData:!1,members:D}),(0,J.s1)(this.memberIdTypeLookup,j,()=>new Set).add(E)}})}getById(C){return K.getInstance().readFromStoreById(C)}getData(C,E,j){var D=this;return(0,B.Z)(function*(){if(E.objectType.name&&D.inclusionModeDefinition?.namedTypeDefinitions&&D.inclusionModeDefinition.namedTypeDefinitions.size>0&&!D.inclusionModeDefinition.namedTypeDefinitions.has(E.objectType.name))return[];let N;if(N=C||new Z.Z({where:"1=1",outFields:["*"]}),"link-chart"===E.parentCompositeLayer.type){const F=E.parentCompositeLayer,V=D._processingCacheUpdatesLookup.get(E.objectType.name??""),k=N.outFields;k&&1===k.length&&k[0]===ae&&"1=1"===N.where||(yield Promise.all(V??[]));const me=D.sublayerCaches.has(E.objectType.name??"")?Array.from(D.sublayerCaches.get(E.objectType.name)?.values()):[],$=[];return me.forEach(pe=>{pe.geometry=D.relationshipTypeNames.has(E.objectType.name)?F.relationshipLinkChartDiagramLookup.get(pe.attributes[E.objectIdField]):F.entityLinkChartDiagramLookup.get(pe.attributes[E.objectIdField]),pe.attributes[g]=pe.geometry,$.push(pe)}),$}return D.retrieveDataFromService(N,E,j)})()}getConnectedRecordIds(C,E){var j=this;return(0,B.Z)(function*(){const D=[];let N="";const F=[],V=new Map;if(C.forEach(k=>{if(j.memberIdTypeLookup.has(k))for(const me of j.memberIdTypeLookup.get(k)){if(!j.entityTypeNames.has(me))return;V.has(me)?V.get(me)?.push(k):V.set(me,[k])}}),E&&0!==E?.length){for(const k of E)N=N+k+"|";N=N.slice(0,-1)}return V.forEach((k,me)=>{let $;$=E&&0!==E?.length?`MATCH (n:${me})-[r:${N}]-(m) WHERE id(n) IN $ids RETURN id(r), type(r), id(m), labels(m)[0]`:`MATCH (n:${me})-[r]-(m) WHERE id(n) IN $ids RETURN id(r), type(r), id(m), labels(m)[0]`;const pe=new Promise(we=>{(0,B.Z)(function*(){const Ne=(yield(0,O.executeQueryStreaming)(j.knowledgeGraph,new b.Z({openCypherQuery:$,bindParameters:{ids:k}}))).resultRowsStream.getReader();try{for(;;){const{done:je,value:Fe}=yield Ne.read();if(je)break;for(let _e=0;_e<Fe.length;_e++){const le=Fe[_e];D.push({id:le[0],typeName:le[1]}),D.push({id:le[2],typeName:le[3]})}}}catch(je){if("AbortError"!==je.name)throw je;ue.Z.getLogger(j).info("Request aborted as expected")}})().then(()=>{we()})});F.push(pe)}),j.refreshCacheContent(),yield Promise.all(F),D})()}getAttachedRelationships(C,E){var j=this;return(0,B.Z)(function*(){const D=[],F=(yield(0,O.executeQueryStreaming)(j.knowledgeGraph,new b.Z({openCypherQuery:"MATCH (n)-[r]->(m) WHERE id(n) IN $nodeIds AND id(m) in $nodeIds AND NOT id(r) IN $relationshipExclusionIds return id(r), type(r)",bindParameters:{nodeIds:C,relationshipExclusionIds:E}}))).resultRowsStream.getReader();try{for(;;){const{done:V,value:k}=yield F.read();if(V)break;for(let me=0;me<k.length;me++){const $=k[me];D.push({id:$[0],typeName:$[1]})}}}catch(V){if("AbortError"!==V.name)throw V;ue.Z.getLogger(j).info("Request aborted as expected")}return D})()}refreshCacheContent(C,E,j,D=!0){var N=this;return(0,B.Z)(function*(){const F=K.getInstance(),V=[],k=new Map,me=new Map;N.knowledgeGraph.dataModel.entityTypes?.forEach($=>{$.name&&me.set($.name,$)}),N.knowledgeGraph.dataModel.relationshipTypes?.forEach($=>{$.name&&me.set($.name,$)}),C||N.inclusionModeDefinition?C?C.forEach($=>{if(N.memberIdTypeLookup.has($))for(const pe of N.memberIdTypeLookup.get($))k.has(pe)?k.get(pe)?.push($):k.set(pe,[$])}):N.inclusionModeDefinition?.namedTypeDefinitions?.forEach(($,pe)=>{$.useAllData?k.set(pe,null):$.members&&$.members.forEach(we=>{k.has(pe)&&null!==k.get(pe)?k.get(pe)?.push(we.id):k.set(pe,[we.id])})}):(N.knowledgeGraph.dataModel.entityTypes?.forEach($=>{$.name&&k.set($.name,null)}),N.knowledgeGraph.dataModel.entityTypes?.forEach($=>{$.name&&k.set($.name,null)}));for(const[$,pe]of k){const we=new Promise(Ne=>{(function(){var Fe=(0,B.Z)(function*(){const _e=new Set,le=[];let Pe,Ce="",be=!1;if(E||me.get($)?.properties?.forEach(ge=>{ge.name&&_e.add(ge.name)}),j&&N.geographicLookup.has($)){const ge=N.geographicLookup.get($)?.name;ge&&_e.add(ge)}if(N.entityTypeNames.has($))Ce=`MATCH (n:${$}) ${pe?"WHERE id(n) IN $ids ":""}return ID(n)`,_e.forEach(ge=>{Ce+=`, n.${ge}`,le.push(ge)});else{if(!N.relationshipTypeNames.has($))throw new he.Z("knowledge-graph:layer-data-manager",`The graph type of ${$} could not be determined. Was this type set in the KG data model and inclusion definition?`);be=!0,Ce=`MATCH ()-[n:${$}]->() ${pe?"WHERE id(n) IN $ids ":""}return ID(n), id(startNode(n)), id(endNode(n))`,_e.forEach(ge=>{Ce+=`, n.${ge}`,le.push(ge)})}Pe=new b.Z(pe?{openCypherQuery:Ce,bindParameters:{ids:pe}}:{openCypherQuery:Ce});const Me=(yield(0,O.executeQueryStreaming)(N.knowledgeGraph,Pe)).resultRowsStream.getReader();for(;;){const{done:ge,value:De}=yield Me.read();if(ge)break;const ie=[];for(let Se=0;Se<De.length;Se++){const Ue=De[Se];let Ae=0,Ke=0;const m={properties:{}};for(m.id=Ue[Ae],Ae++,Ke++,be&&(m.originId=Ue[Ae],Ae++,Ke++,m.destinationId=Ue[Ae],Ae++,Ke++,(0,J.s1)(N.nodeConnectionsLookup,m.originId,()=>new Set).add(m.id),(0,J.s1)(N.nodeConnectionsLookup,m.destinationId,()=>new Set).add(m.id),(0,J.s1)(N.relationshipConnectionsLookup,m.id,()=>[m.originId,m.destinationId]));Ae<Ue.length;Ae++)m.properties[le[Ae-Ke]]=Ue[Ae];ie.push(m)}const Oe=F.writeToStore(ie,ae,N.geographicLookup.get($)?.name);N.sublayerCaches.has($)||N.sublayerCaches.set($,new Map),D&&!N.inclusionModeDefinition?.namedTypeDefinitions.has($)&&N.inclusionModeDefinition?.namedTypeDefinitions.set($,{useAllData:!1,members:new Map}),D&&!N.inclusionModeDefinition?.namedTypeDefinitions.get($).members&&(N.inclusionModeDefinition.namedTypeDefinitions.get($).members=new Map);const Be=N.sublayerCaches.get($);Oe.forEach(Se=>{Be?.set(Se.attributes[ae],Se),D&&!N.inclusionModeDefinition?.namedTypeDefinitions.get($).members.has(Se.attributes[ae])&&(N.inclusionModeDefinition?.namedTypeDefinitions.get($).members.set(Se.attributes[ae],{id:Se.attributes[ae]}),(0,J.s1)(N.memberIdTypeLookup,Se.attributes[ae],()=>new Set).add($))})}});return function(){return Fe.apply(this,arguments)}})()().then(()=>{Ne(null)})});V.push(we),N._processingCacheUpdatesLookup.get($)?.push(we)}yield Promise.all(V)})()}removeFromLayer(C){const E=new Set,j=new Set(C.map(D=>D.id));for(const D of C)E.add(D.typeName),1===this.memberIdTypeLookup.get(D.id)?.size?this.memberIdTypeLookup.delete(D.id):this.memberIdTypeLookup.get(D.id)?.delete(D.typeName),this.inclusionModeDefinition?.namedTypeDefinitions.forEach((N,F)=>{F===D.typeName&&N.members?.has(D.id)&&N.members.delete(D.id)});E.forEach(D=>{this.sublayerCaches.get(D)?.forEach((N,F)=>{j.has(F)&&this.sublayerCaches.get(D)?.delete(F)})})}retrieveDataFromService(C,E,j){var D=this;return(0,B.Z)(function*(){const N=K.getInstance(),F=new Set,V=[];let k,me="",$=[];const pe="relationship"===E.graphType,we=D.inclusionModeDefinition?.namedTypeDefinitions?.get(E.objectType.name)?.useAllData,Ne=E.parentCompositeLayer.sublayerIdsCache.get(E.objectType.name);let je=!we&&Ne?Array.from(Ne).sort():null;if(D.inclusionModeDefinition?.namedTypeDefinitions?.get(E.objectType.name)?.useAllData)D.inclusionModeDefinition?.namedTypeDefinitions?.get(E.objectType.name)?.useAllData&&null!=C.objectIds&&(je=C.objectIds);else if(null!=C.objectIds&&je&&je.length>0){const _e=C.objectIds;C.objectIds=je.filter(le=>_e.includes(le))}else if(null!=C.objectIds)je=C.objectIds;else{if(D.inclusionModeDefinition?.namedTypeDefinitions.has(E.objectType.name)&&(!D.inclusionModeDefinition.namedTypeDefinitions.get(E.objectType.name)?.members||D.inclusionModeDefinition.namedTypeDefinitions.get(E.objectType.name)?.members?.size<1))return C.objectIds=[],[];C.objectIds=je}if(null!=C.outFields){const _e=C.outFields;_e.includes("*")?E.fields.forEach(le=>{F.add(le.name)}):_e.forEach(le=>{le!==ae&&le!==E.geometryFieldName&&F.add(le)})}if(null!=C.geometry){const _e=C.geometry;let le;const Pe=E.parentCompositeLayer.dataManager.knowledgeGraph.serviceDefinition,Ce=Pe?.spatialReference,be=Pe?.serviceCapabilities?.geometryCapabilities;let Me=be?.geometryMaxBoundingRectangleSizeX,ge=be?.geometryMaxBoundingRectangleSizeY;if(_e?.extent?.spatialReference&&!_e.spatialReference?.isWGS84?(yield(0,U.initializeProjection)(_e.extent.spatialReference,w.YU),le=(0,U.project)(_e.extent,w.YU)):le=_e.extent,Me&&ge&&Ce){if(4326!==Ce.wkid){const De=new ee.Z({spatialReference:Ce,xmax:Me,ymax:ge}),ie=(0,U.project)(De,w.YU);Me=ie.xmax,ge=ie.ymax}if(le.xmax-le.xmin>Me)throw new he.Z("knowledge-graph:layer-data-manager",`Extent x bounds should be within ${Me}\xb0 latitude, limit exceeded`);if(le.ymax-le.ymin>ge)throw new he.Z("knowledge-graph:layer-data-manager",`Extent y bounds should be within ${ge}\xb0 longitude, limit exceeded`)}if(null!=C.where&&"1=1"!==C.where){const De=yield(0,q.E)(C.where.toUpperCase(),E.fieldsIndex);E.fields.forEach(ie=>{De.fieldNames.includes(ie.name)&&F.add(ie.name)})}me=pe?`Match ()-[n:${E.objectType.name}]->() WHERE esri.graph.ST_Intersects($param_filter_geom, n.${E.geometryFieldName}) return ID(n), id(startNode(r)), id(endNode(r))`:`Match (n:${E.objectType.name}) WHERE esri.graph.ST_Intersects($param_filter_geom, n.${E.geometryFieldName}) return ID(n)`,E.geometryFieldName&&F.add(E.geometryFieldName),F.forEach(De=>{me+=`, n.${De}`,V.push(De)}),k=new b.Z({openCypherQuery:me,bindParameters:{param_filter_geom:new de.Z({rings:(0,Q.MM)(le)})}})}else{let _e="";if(null!=C.where&&"1=1"!==C.where){const Ce=yield(0,q.E)(C.where,E.fieldsIndex);E.fields.forEach(ie=>{Ce.fieldNames.includes(ie.name)&&F.add(ie.name)});const be=new Set(["column-reference","string","number","binary-expression"]),Me=new Set(["=","<","<=","<>",">",">=","AND","OR","LIKE"]);let ge=!1;const De=ie=>{if("column-reference"===ie.type)return`n.${ie.column}`;if("string"===ie.type)return`'${ie.value}'`;if("number"===ie.type)return`${ie.value}`;if("binary-expression"===ie.type&&be.has(ie.left.type)&&be.has(ie.right.type)&&Me.has(ie.operator))return`${De(ie.left)} ${ie.operator} ${De(ie.right)}`;if("binary-expression"===ie.type&&"LIKE"===ie.operator){let Oe="";if("function"===ie.left.type&&"column-reference"===ie.left.args.value[0].type)Oe+=`lower(n.${ie.left.args.value[0].column})`;else{if("column-reference"!==ie.left.type)return ge=!0,"";Oe+=`lower(n.${ie.left.column})`}if(Oe+=" CONTAINS (","string"!==ie.right.type)return ge=!0,"";{let Be=ie.right.value;"%"===Be.charAt(0)&&(Be=Be.slice(1)),"%"===Be.charAt(Be.length-1)&&(Be=Be.slice(0,-1)),Oe+=`'${Be.toLowerCase()}')`}return Oe}return ge=!0,""};_e=De(Ce.parseTree),ge&&(_e="")}let le="";le=pe?`Match ()-[n:${E.objectType.name}]->()`:`Match (n:${E.objectType.name})`;let Pe=!1;je&&(Pe=!0,le+=" WHERE ID(n) IN $ids"),_e&&(le+=Pe?" AND":" WHERE",le+=` ${_e}`),le+=" return ID(n)",pe&&(le+=", id(startNode(n)), id(endNode(n))"),C.returnGeometry&&E.geometryFieldName&&F.add(E.geometryFieldName),F.forEach(Ce=>{le+=`, n.${Ce}`,V.push(Ce)}),k=new b.Z(je?{openCypherQuery:le,bindParameters:{ids:je}}:{openCypherQuery:le})}const Fe=(yield(0,O.executeQueryStreaming)(E.parentCompositeLayer.dataManager.knowledgeGraph,k,j)).resultRowsStream.getReader();for(;;){const{done:_e,value:le}=yield Fe.read();if(_e)break;const Pe=[];for(let Ce=0;Ce<le.length;Ce++){const be=le[Ce];let Me=0,ge=0;const De={properties:{}};for(De.id=be[Me],Me++,ge++,pe&&(De.originId=be[Me],Me++,ge++,De.destinationId=be[Me],Me++,ge++);Me<be.length;Me++)De.properties[V[Me-ge]]=be[Me];Pe.push(De)}$=$.concat(N.writeToStore(Pe,ae,E.parentCompositeLayer.dataManager.geographicLookup.get(E.objectType.name)?.name))}return $})()}};(0,x._)([(0,Y.Cb)()],v.prototype,"knowledgeGraph",void 0),(0,x._)([(0,Y.Cb)()],v.prototype,"inclusionModeDefinition",void 0),(0,x._)([(0,Y.Cb)()],v.prototype,"entityTypeNames",void 0),(0,x._)([(0,Y.Cb)()],v.prototype,"relationshipTypeNames",void 0),(0,x._)([(0,Y.Cb)()],v.prototype,"geographicLookup",void 0),(0,x._)([(0,Y.Cb)()],v.prototype,"sublayerCaches",void 0),(0,x._)([(0,Y.Cb)()],v.prototype,"nodeConnectionsLookup",void 0),(0,x._)([(0,Y.Cb)()],v.prototype,"relationshipConnectionsLookup",void 0),(0,x._)([(0,Y.Cb)()],v.prototype,"memberIdTypeLookup",void 0),v=(0,x._)([(0,H.j)("esri.layers.knowledgeGraph.KnowledgeGraphLayerDataManager")],v)},2295:(xe,ce,h)=>{h.d(ce,{Z:()=>P});var B=h(15861),x=h(50484),fe=(h(2189),h(62691)),de=(h(36699),h(12610),h(53722),h(82752),h(28999),h(38748),h(50923),h(42212),h(91963)),U=h(41007),w=h(34222),X=h(3233),R=(h(36885),h(80543)),K=(h(14007),h(4703),h(10141)),Q=h(7547),O=h(60301),b=h(83821),Z=h(43814),ee=h(33721),ae=h(95060),te=h(84726),_=h(48238),g=h(60324),T=h(10579);h(65311);const E=(0,h(27969).v)(),j=I=>{let M=class extends I{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return(0,x._)([(0,R.Cb)(E.fields)],M.prototype,"fields",void 0),(0,x._)([(0,R.Cb)(E.fieldsIndex)],M.prototype,"fieldsIndex",void 0),M=(0,x._)([(0,K.j)("esri.layers.knowledgeGraph.KnowledgeGraphSublayerBase")],M),M};var D=h(19855),N=h(12621),F=h(78601),V=h(32250),k=h(25836),me=h(29717),$=h(12522),pe=h(56956),we=h(72523),Ne=h(81247),je=h(85295),Fe=h(40591),_e=h(75421),le=h(93792),Pe=h(91866),Ce=h(33331),be=h(30668),Me=h(26894),ge=h(5391),De=h(64222),ie=h(31709);function Oe(I){if(!I.json)return I;I.json.write=Be(I.json.write);const M=I.json.origins;if(!M)return I;let L;for(L in M){const G=M[L];G&&(G.write=Be(G.write))}return I}function Be(I){return"object"==typeof I&&I?(!1!==I.enabled&&(I.overridePolicy=function Se(I){const{target:M,writer:L,overridePolicy:G,...ne}=I;return function(se,re){const Te=Ae.call(this,se,re);return Te.enabled?{...ne,...Te}:Te}}(I)),I):!0===I?Ue():I}function Ue(){return{overridePolicy:Ae}}function Ae(I,M){const L=!!this.geometryType;let G={enabled:L};return L&&(G={...G,...Ke.call(this,I,M)}),G}function Ke(I,M){return{ignoreOrigin:this.originIdOf(M)>O.s3.DEFAULTS}}let m=class extends(j((0,F.M)((0,N.b)((0,D.h7)((0,V.c)((0,$.n)((0,me.M)((0,k.Q)((0,X.R)(ae.Z)))))))))){constructor(I){super(I),this.blendMode="normal",this.capabilities=(0,g.MS)(!1,!1),this.charts=null,this.definitionExpression=null,this.displayField="",this.effect=null,this.elevationInfo=null,this.featureEffect=null,this.graphType=null,this.labelsVisible=!0,this.labelingInfo=null,this.layerType=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.objectIdField=T.zS,this.objectType=null,this.opacity=1,this.orderBy=null,this.parentCompositeLayer=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.refreshInterval=0,this.source={openPorts:()=>this.load().then(()=>{const M=new MessageChannel;return new be.Z(M.port1,{channel:M,client:{queryFeatures:(L,G={})=>{const ne=Pe.Z.fromJSON(L);return this.queryFeaturesJSON(ne,G)}}}),[M.port2]})},this.title=null,this.type="knowledge-graph-sublayer",this.useViewTime=!0,this.visible=!0}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(I){const M=this._normalizeFeatureReduction(I);this._set("featureReduction",M)}get fields(){const I=[];return this.objectType?.properties?.forEach(M=>{I.push(Ne.Z.fromJSON({name:M.name,type:"esriFieldTypeOID"===M.fieldType?"esriFieldTypeInteger":M.fieldType,alias:M.alias,defaultValue:M.defaultValue,editable:M.editable,nullable:M.nullable}))}),I.push(Ne.Z.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1}),Ne.Z.fromJSON({name:T.Fd,type:"esriFieldTypeInteger",alias:T.Fd,editable:!1})),I}get geometryType(){if("link-chart"===this.parentCompositeLayer?.type)return"relationship"===this.graphType?"polyline":"point";const I=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),M=I?.geometryType;return M&&"esriGeometryNull"!==M?ie.M.fromJSON(M):null}get geometryFieldName(){return"link-chart"===this.parentCompositeLayer?.type?T.Cn:this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name)?.name??null}get graphTypeName(){return this.objectType?.name}get hasM(){const I=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),M=I?.name;return(M?this.objectType?.properties?.[M]:null)?.hasM??!1}get hasZ(){const I=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),M=I?.name;return(M?this.objectType?.properties?.[M]:null)?.hasZ??!1}set renderer(I){(0,je.YN)(I,this.fieldsIndex),this._set("renderer",I)}get renderer(){return this._isOverridden("renderer")?this._get("renderer"):(0,de.i)("link-chart"===this.parentCompositeLayer?.type?"relationship"===this.graphType?(0,g.bU)(ie.M.toJSON("polyline")).renderer:(0,g.bU)(ie.M.toJSON("point")).renderer:(0,g.bU)(ie.M.toJSON(this.geometryType)).renderer)}get spatialReference(){return this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel?.spatialReference??Z.Z.WGS84}writeTitle(I,M){M.title=I??"Layer"}createPopupTemplate(I){return(0,Ce.eZ)(this,I)}createQuery(){return new Pe.Z({where:"1=1",outFields:["*"]})}getField(I){for(let M=0;M<this.fields.length;M++)if(this.fields[M].name===I)return this.fields[M];return null}getFieldDomain(I,M){return null}queryFeatures(I,M){var L=this;return(0,B.Z)(function*(){const{resolvedQuery:G,queryEngine:ne}=yield L._setupQueryObjects(I),se=le.Z.fromJSON(yield ne.executeQuery(G.toJSON(),M?.signal));return se.features.forEach(re=>{re.sourceLayer=L}),se})()}queryFeaturesJSON(I,M){var L=this;return(0,B.Z)(function*(){const{resolvedQuery:G,queryEngine:ne}=yield L._setupQueryObjects(I);return yield ne.executeQuery(G.toJSON(),M?.signal)})()}queryFeatureCount(I,M){var L=this;return(0,B.Z)(function*(){const{resolvedQuery:G,queryEngine:ne}=yield L._setupQueryObjects(I);return ne.executeQueryForCount(G.toJSON(),M?.signal)})()}queryExtent(I={},M){var L=this;return(0,B.Z)(function*(){const G={...I,returnGeometry:!0},{resolvedQuery:ne,queryEngine:se}=yield L._setupQueryObjects(G),re=yield se.executeQueryForExtent(ne.toJSON(),M?.signal);let Te;return Te=null!=re.extent?.xmin&&null!=re.extent?.xmax&&null!=re.extent?.ymin&&null!=re.extent?.ymax?new Me.Z(re.extent):new Me.Z,{count:re.count,extent:Te}})()}queryObjectIds(I,M){var L=this;return(0,B.Z)(function*(){const G=Pe.Z.from(I);let ne;if("link-chart"===L.parentCompositeLayer.type&&L._cachedQueryEngine)ne=L._cachedQueryEngine;else{const se=yield L.parentCompositeLayer.dataManager.getData(G,L,M);ne=L.loadQueryEngine(se)}return ne.executeQueryForIds(G.toJSON(),M?.signal)})()}loadQueryEngine(I){const M=new te.Z({geometryType:ie.M.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),L=new _.q({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:ie.M.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:this.spatialReference.toJSON(),timeInfo:null,featureStore:M});return L.featureStore.addMany(I),L}refreshCachedQueryEngine(){var I=this;return(0,B.Z)(function*(){const M=yield I.parentCompositeLayer.dataManager.getData(new Pe.Z({where:"1=1",outFields:[T.zS]}),I);I._cachedQueryEngine=I.loadQueryEngine(M)})()}_setupQueryObjects(I,M){var L=this;return(0,B.Z)(function*(){const G=Pe.Z.from(I),ne=G.geometry;let se;if(ne&&!ne.spatialReference?.isWGS84&&(yield(0,b.initializeProjection)(ne.spatialReference,ee.YU),G.geometry=(0,b.project)(ne instanceof ge.Z||ne instanceof De.Z?ne:ne.extent,ee.YU)),"link-chart"===L.parentCompositeLayer.type&&L._cachedQueryEngine)se=L._cachedQueryEngine;else{const re=yield L.parentCompositeLayer.dataManager.getData(G,L,M);se=L.loadQueryEngine(re)}return{resolvedQuery:G,queryEngine:se}})()}};(0,x._)([(0,R.Cb)(Oe((0,w.d9)(D.nE)))],m.prototype,"blendMode",void 0),(0,x._)([(0,R.Cb)()],m.prototype,"capabilities",void 0),(0,x._)([(0,R.Cb)({json:{origins:{"web-scene":{write:!1}},write:Ue()}})],m.prototype,"charts",void 0),(0,x._)([(0,R.Cb)({readOnly:!0})],m.prototype,"defaultPopupTemplate",null),(0,x._)([(0,R.Cb)({type:String,json:{origins:{service:{read:!1}},name:"layerDefinition.definitionExpression",write:{ignoreOrigin:!0}}})],m.prototype,"definitionExpression",void 0),(0,x._)([(0,R.Cb)()],m.prototype,"displayField",void 0),(0,x._)([(0,R.Cb)(Oe((0,w.d9)(D.qu)))],m.prototype,"effect",void 0),(0,x._)([(0,R.Cb)()],m.prototype,"elevationInfo",void 0),(0,x._)([(0,R.Cb)(Oe((0,w.d9)(N.d)))],m.prototype,"featureEffect",void 0),(0,x._)([(0,R.Cb)(Oe((0,w.d9)(we.d)))],m.prototype,"featureReduction",null),(0,x._)([(0,R.Cb)()],m.prototype,"fields",null),(0,x._)([(0,R.Cb)()],m.prototype,"geometryType",null),(0,x._)([(0,R.Cb)()],m.prototype,"geometryFieldName",null),(0,x._)([(0,R.Cb)({type:["entity","relationship"],nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],m.prototype,"graphType",void 0),(0,x._)([(0,R.Cb)({type:String,nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],m.prototype,"graphTypeName",null),(0,x._)([(0,R.Cb)()],m.prototype,"hasM",null),(0,x._)([(0,R.Cb)()],m.prototype,"hasZ",null),(0,x._)([(0,R.Cb)({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],m.prototype,"id",void 0),(0,x._)([(0,R.Cb)(Oe((0,w.d9)(pe.iR)))],m.prototype,"labelsVisible",void 0),(0,x._)([(0,R.Cb)({type:[Fe.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:_e.r,write:Ue()}})],m.prototype,"labelingInfo",void 0),(0,x._)([(0,R.Cb)({readOnly:!0,json:{read:!1,write:{writer(I,M){M.layerType=this.geometryType?"KnowledgeGraphSubLayer":"KnowledgeGraphSubTable"},isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],m.prototype,"layerType",void 0),(0,x._)([(0,R.Cb)(Oe((0,w.d9)(pe.rn)))],m.prototype,"legendEnabled",void 0),(0,x._)([(0,R.Cb)(Oe((0,w.d9)(pe.u1)))],m.prototype,"maxScale",void 0),(0,x._)([(0,R.Cb)(Oe((0,w.d9)(pe.rO)))],m.prototype,"minScale",void 0),(0,x._)([(0,R.Cb)()],m.prototype,"objectIdField",void 0),(0,x._)([(0,R.Cb)()],m.prototype,"objectType",void 0),(0,x._)([(0,R.Cb)(Oe((0,w.d9)(pe.Oh)))],m.prototype,"opacity",void 0),(0,x._)([(0,R.Cb)(Oe((0,w.d9)(V.l)))],m.prototype,"orderBy",void 0),(0,x._)([(0,R.Cb)()],m.prototype,"parentCompositeLayer",void 0),(0,x._)([(0,R.Cb)(Oe((0,w.d9)(pe.C_)))],m.prototype,"popupEnabled",void 0),(0,x._)([(0,R.Cb)({type:fe.Z,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],m.prototype,"popupTemplate",void 0),(0,x._)([(0,R.Cb)({type:Number,json:{write:{overridePolicy:Ke}}})],m.prototype,"refreshInterval",void 0),(0,x._)([(0,R.Cb)({types:U.A,json:{name:"layerDefinition.drawingInfo.renderer",write:Ue()}})],m.prototype,"renderer",null),(0,x._)([(0,R.Cb)()],m.prototype,"source",void 0),(0,x._)([(0,R.Cb)()],m.prototype,"spatialReference",null),(0,x._)([(0,R.Cb)({type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],m.prototype,"title",void 0),(0,x._)([(0,Q.c)("title")],m.prototype,"writeTitle",null),(0,x._)([(0,R.Cb)({json:{read:!1}})],m.prototype,"type",void 0),(0,x._)([(0,R.Cb)(Oe((0,w.d9)($.I)))],m.prototype,"useViewTime",void 0),(0,x._)([(0,R.Cb)({type:Boolean,json:{name:"visibility",write:Ue()}})],m.prototype,"visible",void 0),m=(0,x._)([(0,K.j)("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],m);const P=m},3660:(xe,ce,h)=>{h.d(ce,{MM:()=>N,Ag:()=>we,bv:()=>F,jR:()=>_e});var Q,m,b,Z,B=h(15861),x=h(66476),oe=h(57964),fe=h(8611),ue=(h(10842),h(56380)),J=h(6383);h(2189),h(43814),(m=Q||(Q={})).ELEMENTUID="ELEMENTUID",m.TYPENAME="TYPENAME",function(m){m[m.ELEMENTUID=0]="ELEMENTUID",m[m.TYPENAME=1]="TYPENAME"}(b||(b={})),function(m){m[m.ELEMENTUID=0]="ELEMENTUID",m[m.TYPENAME=1]="TYPENAME",m[m.FROMUID=2]="FROMUID",m[m.TOUID=3]="TOUID"}(Z||(Z={}));var te,_,g,T,ee=h(66606);function N(m){if(!m.spatialReference.isWGS84)throw new oe.Z("knowledge-graph:layer-support-utils","The extentToInBoundsRings function only supports WGS84 spatial references.");return m.clone().normalize().map(P=>[[P.xmin,P.ymin],[P.xmin,P.ymax],[P.xmax,P.ymax],[P.xmax,P.ymin],[P.xmin,P.ymin]])}function F(m,P){return V.apply(this,arguments)}function V(){return V=(0,B.Z)(function*(m,P){const I=[],M=new Map,L=[];if(P.dataModel?.relationshipTypes)for(const G of P.dataModel.relationshipTypes)G.name&&M.set(G.name,[]);for(const G of m)M.has(G.typeName)&&M.get(G.typeName)?.push(G.id);for(const[G,ne]of M){if(ne.length<1)continue;const se=new J.Z({openCypherQuery:`MATCH (n)-[r:${G}]->(m) WHERE id(r) in $ids RETURN id(n), labels(n)[0], id(m), labels(m)[0]`,bindParameters:{ids:ne}});L.push((0,ue.executeQueryStreaming)(P,se).then(function(){var re=(0,B.Z)(function*(Te){const ve=Te.resultRowsStream.getReader();for(;;){const{done:Ie,value:Re}=yield ve.read();if(Ie)break;for(const Ee of Re)I.push({id:Ee[0],typeName:Ee[1]}),I.push({id:Ee[2],typeName:Ee[3]})}});return function(Te){return re.apply(this,arguments)}}()))}return yield Promise.all(L),I}),V.apply(this,arguments)}function we(m,P){return Ne.apply(this,arguments)}function Ne(){return Ne=(0,B.Z)(function*(m,P){P??=!1;const I={generateAllSublayers:P,namedTypeDefinitions:new Map};return yield function ie(m){return Oe.apply(this,arguments)}(m).then(M=>{!function Ae(m,P){for(const[I,M]of m){const L=(0,fe.s1)(P.namedTypeDefinitions,I,()=>({useAllData:!1,members:new Map}));for(const G of M)L.members.has(G)||L.members.set(G,{id:G})}return P}(M,I)}),I}),Ne.apply(this,arguments)}function _e(m){return le.apply(this,arguments)}function le(){return le=(0,B.Z)(function*(m){const P=yield(0,ee.$G)(),I=new P.MapOfObjectIdentifierSets;!function Ce(m,P,I){for(const[M,L]of I.namedTypeDefinitions){if(!L.members||L.useAllData)continue;const G=L.members.keys(),ne=new P.GlobalIdArray,se=new P.ObjectIdentifierSet;for(const re of G)ne.add_globalid(re);se.set_globalid_array(ne),ne.delete(),m.put_identifier_set(M,se),se.delete()}}(I,P,m);const M=new P.MapOfObjectIdentifierSetsEncoder;try{M.set_map_of_identifier_sets(I),M.encode();const L=M.get_encoding_result();if(0!==L.error.error_code)throw new oe.Z("knowledge-graph:layer-support-utils",L.error.error_message);const G=structuredClone(L.get_byte_buffer());return M.delete(),G}finally{I.delete()}}),le.apply(this,arguments)}function Oe(){return Oe=(0,B.Z)(function*(m){const P=yield(0,x.Z)(m,{responseType:"array-buffer"}),I=yield P.data;return function Be(m){return Se.apply(this,arguments)}(new Uint8Array(I))}),Oe.apply(this,arguments)}function Se(){return Se=(0,B.Z)(function*(m){const P=new((yield(0,ee.$G)()).MapOfObjectIdentifierSetsDecoder),I=P.decode(new Uint8Array(m)),M=new Map;if(0!==I.error_code)throw new oe.Z("knowledge-graph:layer-support-utils",I.error_message);const L=P.get_map_of_identifier_sets(),G=L.keys,ne=G.size();for(let se=0;se<ne;se++){const re=G.get(se),Te=L.query_identifier_set(re),ve=[];if(Te.id_array_type.value===T.GLOBALID_ARRAY){const Ie=Te.get_globalid_array(),Re=Ie.count();for(let Ee=0;Ee<Re;Ee++)ve.push(Ie.get_globalid_at(Ee))}else{if(Te.id_array_type.value!==T.IDENTIFIER_ARRAY)throw new oe.Z("knowledge-graph:layer-support-utils","Tried to encode an unexpected ID Array type.");{const Ie=Te.get_identifier_array(),Re=Ie.count();for(let Ee=0;Ee<Re;Ee++)ve.push(Ie.get_identifier_at(Ee).toString())}}M.set(re,ve)}return P.delete(),M}),Se.apply(this,arguments)}h(60623),function(m){m[m.featureResult=0]="featureResult",m[m.countResult=1]="countResult",m[m.idsResult=2]="idsResult"}(te||(te={})),function(m){m[m.upperLeft=0]="upperLeft",m[m.lowerLeft=1]="lowerLeft"}(_||(_={})),function(m){m[m.sqlTypeBigInt=0]="sqlTypeBigInt",m[m.sqlTypeBinary=1]="sqlTypeBinary",m[m.sqlTypeBit=2]="sqlTypeBit",m[m.sqlTypeChar=3]="sqlTypeChar",m[m.sqlTypeDate=4]="sqlTypeDate",m[m.sqlTypeDecimal=5]="sqlTypeDecimal",m[m.sqlTypeDouble=6]="sqlTypeDouble",m[m.sqlTypeFloat=7]="sqlTypeFloat",m[m.sqlTypeGeometry=8]="sqlTypeGeometry",m[m.sqlTypeGUID=9]="sqlTypeGUID",m[m.sqlTypeInteger=10]="sqlTypeInteger",m[m.sqlTypeLongNVarchar=11]="sqlTypeLongNVarchar",m[m.sqlTypeLongVarbinary=12]="sqlTypeLongVarbinary",m[m.sqlTypeLongVarchar=13]="sqlTypeLongVarchar",m[m.sqlTypeNChar=14]="sqlTypeNChar",m[m.sqlTypeNVarChar=15]="sqlTypeNVarChar",m[m.sqlTypeOther=16]="sqlTypeOther",m[m.sqlTypeReal=17]="sqlTypeReal",m[m.sqlTypeSmallInt=18]="sqlTypeSmallInt",m[m.sqlTypeSqlXml=19]="sqlTypeSqlXml",m[m.sqlTypeTime=20]="sqlTypeTime",m[m.sqlTypeTimestamp=21]="sqlTypeTimestamp",m[m.sqlTypeTimestamp2=22]="sqlTypeTimestamp2",m[m.sqlTypeTinyInt=23]="sqlTypeTinyInt",m[m.sqlTypeVarbinary=24]="sqlTypeVarbinary",m[m.sqlTypeVarchar=25]="sqlTypeVarchar"}(g||(g={})),function(m){m[m.OID_ARRAY=0]="OID_ARRAY",m[m.GLOBALID_ARRAY=1]="GLOBALID_ARRAY",m[m.STRING_ARRAY=2]="STRING_ARRAY",m[m.IDENTIFIER_ARRAY=3]="IDENTIFIER_ARRAY"}(T||(T={}))},32250:(xe,ce,h)=>{h.d(ce,{c:()=>H,l:()=>z});var B=h(50484),x=h(71763),oe=h(80543),J=(h(14007),h(4703),h(65311),h(10141)),q=h(35469);const z={type:[q.Z],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:function Y(de,U,w){if(!de)return null;const X=de.find(R=>!!R.field);if(!X)return null;const S=new q.Z;return S.read(X,w),[S]}},write:{writer:function A(de,U,w,X){const S=de.find(R=>!!R.field);S&&(0,x.RB)(w,[S.toJSON()],U)}}}},H=de=>{let U=class extends de{constructor(){super(...arguments),this.orderBy=null}};return(0,B._)([(0,oe.Cb)(z)],U.prototype,"orderBy",void 0),U=(0,B._)([(0,J.j)("esri.layers.mixins.OrderedLayer")],U),U}},25836:(xe,ce,h)=>{h.d(ce,{Q:()=>te});var B=h(15861),x=h(50484),fe=(h(14007),h(4703)),he=h(79412),ue=h(80543),J=h(73018),Y=(h(65311),h(10141)),A=h(76215),z=h(83944),w=(h(37636),h(57964),h(12926),h(43571));const X=new z.Z,S=new WeakMap;function K(_,g){return Number.isFinite(_)&&Number.isFinite(g)?g<=0?_:K(g,_%g):0}let Q=0,O=0;function b(){const _=Date.now();let g=!1;for(const T of X){const v=T.deref();v?v.refreshInterval&&_-(S.get(v)??0)+5>=6e4*v.refreshInterval&&(S.set(v,_),v.refresh(_)):g=!0}if(g)for(let T=X.length-1;T>=0;T--)X.at(T).deref()||X.removeAt(T)}(0,w.EH)(()=>{const _=Date.now();let g=0;for(const T of X){const v=T.deref();v&&(g=K(Math.round(6e4*v.refreshInterval),g),v.refreshInterval?S.get(v)||S.set(v,_):S.delete(v))}if(g!==O){if(O=g,clearInterval(Q),0===O)return void(Q=0);Q=setInterval(b,O)}});const te=_=>{let g=class extends _{constructor(...T){super(...T),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,he.Ds)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||function R(_){(function W(_){return null!=_&&"object"==typeof _&&"refreshInterval"in _&&"refresh"in _})(_)&&X.push(new WeakRef(_))}(this)},()=>{})}destroy(){!function ye(_){const g=X.find(T=>T.deref()===_);g&&X.remove(g)}(this)}castRefreshInterval(T){return T>=.1?T:T<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(T=Date.now()){(0,he.R8)(this._debounceHasDataChanged()).then(v=>{v&&this._set("refreshTimestamp",T),this.emit("refresh",{dataChanged:v})},v=>{fe.Z.getLogger(this).error(v),this.emit("refresh",{dataChanged:!1,error:v})})}hasDataChanged(){return(0,B.Z)(function*(){return!0})()}get test(){}};return(0,x._)([(0,ue.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:A.C}}}}})],g.prototype,"refreshInterval",void 0),(0,x._)([(0,J.p)("refreshInterval")],g.prototype,"castRefreshInterval",null),(0,x._)([(0,ue.Cb)({readOnly:!0})],g.prototype,"refreshTimestamp",void 0),(0,x._)([(0,ue.Cb)({readOnly:!0})],g.prototype,"refreshParameters",null),g=(0,x._)([(0,Y.j)("esri.layers.mixins.RefreshableLayer")],g),g}},35469:(xe,ce,h)=>{h.d(ce,{Z:()=>H});var Y,B=h(50484),x=h(84303),oe=h(89317),fe=h(80543),q=(h(14007),h(4703),h(65311),h(10141));const A=new x.X({asc:"ascending",desc:"descending"});let z=Y=class extends oe.wq{constructor(de){super(de),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new Y({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,B._)([(0,fe.Cb)({type:String,json:{write:!0}})],z.prototype,"field",void 0),(0,B._)([(0,fe.Cb)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],z.prototype,"valueExpression",void 0),(0,B._)([(0,fe.Cb)({type:A.apiValues,json:{type:A.jsonValues,read:A.read,write:A.write}})],z.prototype,"order",void 0),z=Y=(0,B._)([(0,q.j)("esri.layers.support.OrderByInfo")],z);const H=z},56761:(xe,ce,h)=>{h.d(ce,{UG:()=>z,UO:()=>w,YI:()=>U,dI:()=>X,el:()=>Q,hV:()=>de,z7:()=>H});var B=h(72578);const x="__begin__",oe="__end__",fe=new RegExp(x,"ig"),he=new RegExp(oe,"ig"),ue=new RegExp("^"+x,"i"),J=new RegExp(oe+"$","i"),q='"',Y=q+" + ",A=" + "+q;function z(O){return O.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function H(O){return O.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function de(O){const b={expression:"",type:"none"};return O.labelExpressionInfo?O.labelExpressionInfo.value?(b.expression=O.labelExpressionInfo.value,b.type="conventional"):O.labelExpressionInfo.expression&&(b.expression=O.labelExpressionInfo.expression,b.type="arcade"):null!=O.labelExpression&&(b.expression=z(O.labelExpression),b.type="conventional"),b}function U(O){const b=de(O);if(!b)return null;switch(b.type){case"conventional":return X(b.expression);case"arcade":return b.expression}return null}function w(O){const b=de(O);if(!b)return null;switch(b.type){case"conventional":return function R(O){return O?.match(S)?.[1].trim()||null}(b.expression);case"arcade":return Q(b.expression)}return null}function X(O){let b;return O?(b=(0,B.gx)(O,Z=>x+'$feature["'+Z+'"]'+oe),b=ue.test(b)?b.replace(ue,""):q+b,b=J.test(b)?b.replace(J,""):b+q,b=b.replaceAll(fe,Y).replaceAll(he,A)):b='""',b}const S=/^\s*\{([^}]+)\}\s*$/i,ye=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,W=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,K=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Q(O){if(!O)return null;let b=ye.exec(O)||W.exec(O);return b?b[1]||b[3]:(b=K.exec(O),b?b[2]:null)}},59720:(xe,ce,h)=>{h.d(ce,{Z:()=>z});var B=h(50484),oe=(h(2189),h(80543)),J=(h(14007),h(4703),h(65311),h(10141)),q=h(45660),Y=h(44107);let A=class extends q.Z{constructor(H){super(H),this.layoutGeometry=null}};(0,B._)([(0,oe.Cb)({type:Y.Z,json:{write:!0}})],A.prototype,"layoutGeometry",void 0),A=(0,B._)([(0,J.j)("esri.rest.knowledgeGraph.Entity")],A);const z=A},45660:(xe,ce,h)=>{h.d(ce,{Z:()=>Y});var B=h(50484),x=h(80543),ue=(h(14007),h(4703),h(65311),h(10141)),J=h(79021);let q=class extends J.Z{constructor(A){super(A),this.typeName=null,this.id=null}};(0,B._)([(0,x.Cb)({type:String,json:{write:!0}})],q.prototype,"typeName",void 0),(0,B._)([(0,x.Cb)({type:String,json:{write:!0}})],q.prototype,"id",void 0),q=(0,B._)([(0,ue.j)("esri.rest.knowledgeGraph.GraphNamedObject")],q);const Y=q},79021:(xe,ce,h)=>{h.d(ce,{Z:()=>Y});var B=h(50484),x=h(89317),oe=h(80543),J=(h(14007),h(4703),h(65311),h(10141));let q=class extends x.wq{constructor(A){super(A),this.properties=null}};(0,B._)([(0,oe.Cb)({json:{write:!0}})],q.prototype,"properties",void 0),q=(0,B._)([(0,J.j)("esri.rest.knowledgeGraph.GraphObject")],q);const Y=q},6383:(xe,ce,h)=>{h.d(ce,{Z:()=>z});var B=h(50484),x=h(80543),ue=(h(14007),h(4703),h(65311),h(10141)),J=h(73514);let q=class extends J.Z{constructor(H){super(H),this.openCypherQuery=""}};(0,B._)([(0,x.Cb)()],q.prototype,"openCypherQuery",void 0),q=(0,B._)([(0,ue.j)("esri.rest.knowledgeGraph.GraphQuery")],q);const Y=q;let A=class extends Y{constructor(H){super(H),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,B._)([(0,x.Cb)()],A.prototype,"bindParameters",void 0),(0,B._)([(0,x.Cb)()],A.prototype,"bindGeometryQuantizationParameters",void 0),(0,B._)([(0,x.Cb)()],A.prototype,"outputQuantizationParameters",void 0),(0,B._)([(0,x.Cb)()],A.prototype,"outputSpatialReference",void 0),(0,B._)([(0,x.Cb)()],A.prototype,"provenanceBehavior",void 0),A=(0,B._)([(0,ue.j)("esri.rest.knowledgeGraph.GraphQueryStreaming")],A);const z=A},88325:(xe,ce,h)=>{h.d(ce,{Z:()=>Y});var B=h(50484),ue=(h(4703),h(14007),h(65311),h(57964),h(10141)),J=h(79021);let q=class extends J.Z{constructor(A){super(A)}};q=(0,B._)([(0,ue.j)("esri.rest.knowledgeGraph.ObjectValue")],q);const Y=q},15889:(xe,ce,h)=>{h.d(ce,{Z:()=>A});var B=h(50484),x=h(89317),oe=h(80543),J=(h(14007),h(4703),h(65311),h(10141)),q=h(79021);let Y=class extends x.wq{constructor(z){super(z),this.path=null}};(0,B._)([(0,oe.Cb)({type:[q.Z],json:{write:!0}})],Y.prototype,"path",void 0),Y=(0,B._)([(0,J.j)("esri.rest.knowledgeGraph.Path")],Y);const A=Y},75443:(xe,ce,h)=>{h.d(ce,{Z:()=>z});var B=h(50484),oe=(h(2189),h(80543)),J=(h(14007),h(4703),h(65311),h(10141)),q=h(45660),Y=h(64222);let A=class extends q.Z{constructor(H){super(H),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,B._)([(0,oe.Cb)({type:String,json:{write:!0}})],A.prototype,"originId",void 0),(0,B._)([(0,oe.Cb)({type:String,json:{write:!0}})],A.prototype,"destinationId",void 0),(0,B._)([(0,oe.Cb)({type:Y.Z,json:{write:!0}})],A.prototype,"layoutGeometry",void 0),A=(0,B._)([(0,J.j)("esri.rest.knowledgeGraph.Relationship")],A);const z=A},93792:(xe,ce,h)=>{h.d(ce,{Z:()=>ye});var X,B=h(50484),x=h(2189),oe=h(35458),fe=h(84303),he=h(89317),ue=h(34222),J=h(80543),A=(h(14007),h(4703),h(62185)),z=h(10141),H=h(7547),de=h(43814),U=h(40637),w=h(81247);const S=new fe.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let R=X=class extends he.wq{constructor(W){super(W),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(W,K){const Q=de.Z.fromJSON(K.spatialReference),O=[];for(let b=0;b<W.length;b++){const Z=W[b],ee=oe.Z.fromJSON(Z),ae=Z.geometry?.spatialReference;null==ee.geometry||ae||(ee.geometry.spatialReference=Q);const te=Z.aggregateGeometries,_=ee.aggregateGeometries;if(te&&null!=_)for(const g in _){const T=_[g],v=te[g],C=v?.spatialReference;null==T||C||(T.spatialReference=Q)}O.push(ee)}return O}writeGeometryType(W,K,Q,O){if(W)return void S.write(W,K,Q,O);const{features:b}=this;if(b)for(const Z of b)if(null!=Z?.geometry)return void S.write(Z.geometry.type,K,Q,O)}readQueryGeometry(W,K){if(!W)return null;const Q=!!W.spatialReference,O=(0,U.im)(W);return O&&!Q&&K.spatialReference&&(O.spatialReference=de.Z.fromJSON(K.spatialReference)),O}writeSpatialReference(W,K){if(W)return void(K.spatialReference=W.toJSON());const{features:Q}=this;if(Q)for(const O of Q)if(O&&null!=O.geometry&&O.geometry.spatialReference)return void(K.spatialReference=O.geometry.spatialReference.toJSON())}clone(){return new X(this.cloneProperties())}cloneProperties(){return(0,ue.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(W){const K=this.write();if(K.features&&Array.isArray(W)&&W.length>0)for(let Q=0;Q<K.features.length;Q++){const O=K.features[Q];if(O.geometry){const b=W?.[Q];O.geometry=b?.toJSON()||O.geometry}}return K}quantize(W){const{scale:[K,Q],translate:[O,b]}=W,ae=this.features,te=this._getQuantizationFunction(this.geometryType,_=>Math.round((_-O)/K),_=>Math.round((b-_)/Q));for(let _=0,g=ae.length;_<g;_++)te?.(ae[_].geometry)||(ae.splice(_,1),_--,g--);return this.transform=W,this}unquantize(){const{geometryType:W,features:K,transform:Q}=this;if(!Q)return this;const{translate:[O,b],scale:[Z,ee]}=Q;let _=null,g=null;if(this.hasZ&&null!=Q?.scale?.[2]){const{translate:[,,v],scale:[,,C]}=Q;_=E=>E*C+v}if(this.hasM&&null!=Q?.scale?.[3]){const{translate:[,,,v],scale:[,,,C]}=Q;g=E=>null==E?E:E*C+v}const T=this._getHydrationFunction(W,v=>v*Z+O,v=>b-v*ee,_,g);for(const{geometry:v}of K)null!=v&&T&&T(v);return this.transform=null,this}_quantizePoints(W,K,Q){let O,b;const Z=[];for(let ee=0,ae=W.length;ee<ae;ee++){const te=W[ee];if(ee>0){const _=K(te[0]),g=Q(te[1]);_===O&&g===b||(Z.push([_-O,g-b]),O=_,b=g)}else O=K(te[0]),b=Q(te[1]),Z.push([O,b])}return Z.length>0?Z:null}_getQuantizationFunction(W,K,Q){return"point"===W?O=>(O.x=K(O.x),O.y=Q(O.y),O):"polyline"===W||"polygon"===W?O=>{const b=(0,U.oU)(O)?O.rings:O.paths,Z=[];for(let ee=0,ae=b.length;ee<ae;ee++){const _=this._quantizePoints(b[ee],K,Q);_&&Z.push(_)}return Z.length>0?((0,U.oU)(O)?O.rings=Z:O.paths=Z,O):null}:"multipoint"===W?O=>{const b=this._quantizePoints(O.points,K,Q);return b&&b.length>0?(O.points=b,O):null}:"extent"===W?O=>O:null}_getHydrationFunction(W,K,Q,O,b){return"point"===W?Z=>{Z.x=K(Z.x),Z.y=Q(Z.y),O&&(Z.z=O(Z.z))}:"polyline"===W||"polygon"===W?Z=>{const ee=(0,U.oU)(Z)?Z.rings:Z.paths;let ae,te;for(let _=0,g=ee.length;_<g;_++){const T=ee[_];for(let v=0,C=T.length;v<C;v++){const E=T[v];v>0?(ae+=E[0],te+=E[1]):(ae=E[0],te=E[1]),E[0]=K(ae),E[1]=Q(te)}}if(O&&b)for(let _=0,g=ee.length;_<g;_++){const T=ee[_];for(let v=0,C=T.length;v<C;v++){const E=T[v];E[2]=O(E[2]),E[3]=b(E[3])}}else if(O)for(let _=0,g=ee.length;_<g;_++){const T=ee[_];for(let v=0,C=T.length;v<C;v++){const E=T[v];E[2]=O(E[2])}}else if(b)for(let _=0,g=ee.length;_<g;_++){const T=ee[_];for(let v=0,C=T.length;v<C;v++){const E=T[v];E[2]=b(E[2])}}}:"extent"===W?Z=>{Z.xmin=K(Z.xmin),Z.ymin=Q(Z.ymin),Z.xmax=K(Z.xmax),Z.ymax=Q(Z.ymax),O&&null!=Z.zmax&&null!=Z.zmin&&(Z.zmax=O(Z.zmax),Z.zmin=O(Z.zmin)),b&&null!=Z.mmax&&null!=Z.mmin&&(Z.mmax=b(Z.mmax),Z.mmin=b(Z.mmin))}:"multipoint"===W?Z=>{const ee=Z.points;let ae,te;for(let _=0,g=ee.length;_<g;_++){const T=ee[_];_>0?(ae+=T[0],te+=T[1]):(ae=T[0],te=T[1]),T[0]=K(ae),T[1]=Q(te)}if(O&&b)for(let _=0,g=ee.length;_<g;_++){const T=ee[_];T[2]=O(T[2]),T[3]=b(T[3])}else if(O)for(let _=0,g=ee.length;_<g;_++){const T=ee[_];T[2]=O(T[2])}else if(b)for(let _=0,g=ee.length;_<g;_++){const T=ee[_];T[2]=b(T[2])}}:null}};(0,B._)([(0,J.Cb)({type:String,json:{write:!0}})],R.prototype,"displayFieldName",void 0),(0,B._)([(0,J.Cb)({type:Boolean,json:{write:{overridePolicy:W=>({enabled:W})}}})],R.prototype,"exceededTransferLimit",void 0),(0,B._)([(0,J.Cb)({type:[oe.Z],json:{write:!0}})],R.prototype,"features",void 0),(0,B._)([(0,A.r)("features")],R.prototype,"readFeatures",null),(0,B._)([(0,J.Cb)({type:[w.Z],json:{write:!0}})],R.prototype,"fields",void 0),(0,B._)([(0,J.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:S.read}}})],R.prototype,"geometryType",void 0),(0,B._)([(0,H.c)("geometryType")],R.prototype,"writeGeometryType",null),(0,B._)([(0,J.Cb)({type:Boolean,json:{write:{overridePolicy:W=>({enabled:W})}}})],R.prototype,"hasM",void 0),(0,B._)([(0,J.Cb)({type:Boolean,json:{write:{overridePolicy:W=>({enabled:W})}}})],R.prototype,"hasZ",void 0),(0,B._)([(0,J.Cb)({types:x.qM,json:{write:!0}})],R.prototype,"queryGeometry",void 0),(0,B._)([(0,A.r)("queryGeometry")],R.prototype,"readQueryGeometry",null),(0,B._)([(0,J.Cb)({type:de.Z,json:{write:!0}})],R.prototype,"spatialReference",void 0),(0,B._)([(0,H.c)("spatialReference")],R.prototype,"writeSpatialReference",null),(0,B._)([(0,J.Cb)({json:{write:!0}})],R.prototype,"transform",void 0),R=X=(0,B._)([(0,z.j)("esri.rest.support.FeatureSet")],R),R.prototype.toJSON.isDefaultToJSON=!0;const ye=R}}]);