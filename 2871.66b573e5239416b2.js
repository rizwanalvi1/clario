"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[2871],{51310:(Pe,ee,i)=>{function I(g){return null!=z(g)||null!=y(g)}function k(g){return T.test(g)}function w(g){return z(g)??y(g)}function y(g){const O=new Date(g);return function K(g,O){if(Number.isNaN(g.getTime()))return!1;let u=!0;if(S&&/\d+\W*$/.test(O)){const _=O.match(/[a-zA-Z]{2,}/);if(_){let M=!1,F=0;for(;!M&&F<=_.length;)M=!Z.test(_[F]),F++;u=!M}}return u}(O,g)?Number.isNaN(O.getTime())?null:O.getTime()-6e4*O.getTimezoneOffset():null}function z(g){const O=T.exec(g);if(!O?.groups)return null;const u=O.groups,_=+u.year,M=+u.month-1,F=+u.day,v=+(u.hours??"0"),U=+(u.minutes??"0"),R=+(u.seconds??"0");if(v>23||U>59||R>59)return null;const d=u.ms??"0",m=d?+d.padEnd(3,"0").substring(0,3):0;let j;return j=u.isUTC||!u.offsetSign?Date.UTC(_,M,F,v,U,R,m):6e4*("+"===u.offsetSign?-1:1)*(60*+u.offsetHours+ +u.offsetMinutes)+Date.UTC(_,M,F,v,U,R,m),Number.isNaN(j)?null:j}i.d(ee,{mu:()=>k,of:()=>I,sG:()=>w});const T=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,Z=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,S=!Number.isNaN(new Date("technology 10").getTime())},78642:(Pe,ee,i)=>{i.d(ee,{O3:()=>Te,lG:()=>je,my:()=>de,q9:()=>Z});var I=i(51310),k=i(57964),w=i(33721),y=i(83502),z=i(62209),T=i(85295);const K={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function Z(e){return K[e]}function*S(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const n of e.features)n&&(yield n)}}function*g(e){if(e)switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const n of e.coordinates)yield*n;break;case"MultiPolygon":for(const n of e.coordinates)for(const s of n)yield*s}}function u(e){for(const n of e)if(n.length>2)return!0;return!1}function F(e){let n=0;for(let s=0;s<e.length;s++){const l=e[s],h=e[(s+1)%e.length];n+=l[0]*h[1]-h[0]*l[1]}return n<=0}function v(e){const n=e[0],s=e[e.length-1];return n[0]===s[0]&&n[1]===s[1]&&n[2]===s[2]||e.push(n),e}function U(e,n,s){switch(n.type){case"LineString":return function R(e,n,s){return H(e,n.coordinates,s),e}(e,n,s);case"MultiLineString":return function d(e,n,s){for(const l of n.coordinates)H(e,l,s);return e}(e,n,s);case"MultiPoint":return function m(e,n,s){return H(e,n.coordinates,s),e}(e,n,s);case"MultiPolygon":return function j(e,n,s){for(const l of n.coordinates){L(e,l[0],s);for(let h=1;h<l.length;h++)J(e,l[h],s)}return e}(e,n,s);case"Point":return function re(e,n,s){return ae(e,n.coordinates,s),e}(e,n,s);case"Polygon":return function p(e,n,s){const l=n.coordinates;L(e,l[0],s);for(let h=1;h<l.length;h++)J(e,l[h],s);return e}(e,n,s)}}function L(e,n,s){const l=v(n);!function _(e){return!F(e)}(l)?H(e,l,s):le(e,l,s)}function J(e,n,s){const l=v(n);!function M(e){return F(e)}(l)?H(e,l,s):le(e,l,s)}function H(e,n,s){for(const l of n)ae(e,l,s);e.lengths.push(n.length)}function le(e,n,s){for(let l=n.length-1;l>=0;l--)ae(e,n[l],s);e.lengths.push(n.length)}function ae(e,n,s){const[l,h,W]=n;e.coords.push(l,h),s.hasZ&&e.coords.push(W||0)}function ce(e){switch(typeof e){case"string":return(0,I.mu)(e)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function Te(e,n=4326){if(!e)throw new k.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new k.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:s}=e;if(!s)return;const l="string"==typeof s?s:"name"===s.type?s.properties.name:"EPSG"===s.type?s.properties.code:null,h=(0,w.oR)({wkid:n})?new RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${n})$`,"i");if(!l||!h.test(l))throw new k.Z("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:s})}function de(e,n={}){const s=[],l=new Set,h=new Set;let W,oe=!1,D=null,G=!1,{geometryType:B=null}=n,fe=!1;for(const ie of S(e)){const{geometry:b,properties:$,id:t}=ie;if((!b||(B||(B=Z(b.type)),Z(b.type)===B))&&(oe||(oe=u(g(b))),G||(G=null!=t,G&&(W=typeof t,$&&(D=Object.keys($).filter(o=>$[o]===t)))),$&&D&&G&&null!=t&&(D.length>1?D=D.filter(o=>$[o]===t):1===D.length&&(D=$[D[0]]===t?D:[])),!fe&&$)){let o=!0;for(const r in $){if(l.has(r))continue;const a=$[r];if(null==a){o=!1,h.add(r);continue}const c=ce(a);if("unknown"===c){h.add(r);continue}h.delete(r),l.add(r);const E=(0,T.q6)(r);E&&s.push({name:E,alias:r,type:c})}fe=o}}const pe=(0,T.q6)(1===D?.length&&D[0]||null)??void 0;if(pe)for(const ie of s)if(ie.name===pe&&(0,T.H7)(ie)){ie.type="esriFieldTypeOID";break}return{fields:s,geometryType:B,hasZ:oe,objectIdFieldName:pe,objectIdFieldType:W,unknownFields:Array.from(h)}}function je(e,n){return Array.from(function*O(e,n={}){const{geometryType:s,objectIdField:l}=n;for(const h of e){const{geometry:W,properties:oe,id:D}=h;if(W&&Z(W.type)!==s)continue;const G=oe||{};let B;l&&(B=G[l],null==D||B||(G[l]=B=D)),yield new y.u_(W?U(new z.Z,W,n):null,G,null,B??void 0)}}(S(e),n))}},60324:(Pe,ee,i)=>{i.d(ee,{Dm:()=>Z,Hq:()=>g,MS:()=>O,bU:()=>z});var I=i(14007),k=i(34222),w=i(85559),y=i(19579);function z(u){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===u||"esriGeometryMultipoint"===u?y.I4:"esriGeometryPolyline"===u?y.ET:y.lF}}}const T=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let K=1;function Z(u,_){if((0,I.Z)("esri-csp-restrictions"))return()=>({[_]:null,...u});try{let M=`this${S(_)} = null;`;for(const v in u)M+=`this${S(v)} = ${JSON.stringify(u[v])};`;const F=new Function(`\n      return class AttributesClass$${K++} {\n        constructor() {\n          ${M};\n        }\n      }\n    `)();return()=>new F}catch{return()=>({[_]:null,...u})}}function S(u){return T.test(u)?`.${u}`:`["${u}"]`}function g(u={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,k.d9)(u)}}]}function O(u,_){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:u},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:_,supportsDelete:_,supportsEditing:_,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:_,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:w.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:_,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},42726:(Pe,ee,i)=>{i.d(ee,{O0:()=>O,av:()=>K,b:()=>U,d1:()=>S,og:()=>M});var I=i(15861),k=i(51310),w=i(33721),y=i(85295);class z{constructor(){this.code=null,this.description=null}}class T{constructor(m){this.error=new z,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=m}}function K(d){return new T(d)}class Z{constructor(m){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=m}}function S(d){return new Z(d)}const g=new Set;function O(d,m,j,re=!1){g.clear();for(const p in j){const L=d.get(p);if(!L)continue;const J=u(L,j[p]);if(g.add(L.name),L&&(re||L.editable)){const H=(0,y.Qc)(L,J);if(H)return K((0,y.vP)(H,L,J));m[L.name]=J}}for(const p of d?.requiredFields??[])if(!g.has(p.name))return K(`missing required field "${p.name}"`);return null}function u(d,m){let j=m;return(0,y.H7)(d)&&"string"==typeof m?j=parseFloat(m):(0,y.qN)(d)&&null!=m&&"string"!=typeof m?j=String(m):(0,y.y2)(d)&&"string"==typeof m&&(j=(0,k.sG)(m)),(0,y.Pz)(j)}let _;function M(d,m){if(!d||!(0,w.JY)(m))return d;if("rings"in d||"paths"in d){if(null==_)throw new TypeError("geometry engine not loaded");return _.simplify(m,d)}return d}function v(){return(v=(0,I.Z)(function*(){return null==_&&(_=yield Promise.all([i.e(9465),i.e(8592),i.e(7545)]).then(i.bind(i,49574))),_})).apply(this,arguments)}function U(d,m){return R.apply(this,arguments)}function R(){return R=(0,I.Z)(function*(d,m){!(0,w.JY)(d)||"esriGeometryPolygon"!==m&&"esriGeometryPolyline"!==m||(yield function F(){return v.apply(this,arguments)}())}),R.apply(this,arguments)}},62871:(Pe,ee,i)=>{i.d(ee,{$9:()=>re,G4:()=>ae,Lu:()=>j,WW:()=>h,d:()=>n,eS:()=>je,gp:()=>Te,j:()=>H,w9:()=>L,yN:()=>s});var I=i(15861),w=(i(2189),i(66476)),y=i(57964),z=i(4703),T=i(6785),K=i(33721),Z=i(48230),S=i(10842),g=i(40620),O=i(78642),u=i(60324),_=i(42726),M=i(40100),F=i(51217),v=i(764),U=i(43814);const R=()=>z.Z.getLogger("esri.layers.ogc.ogcFeatureUtils"),d="startindex",m=new Set([d,"offset"]),j="http://www.opengis.net/def/crs/",re=`${j}OGC/1.3/CRS84`;var p,t;function L(t,o){return J.apply(this,arguments)}function J(){return(J=(0,I.Z)(function*(t,o,r={},a=5){const{links:c}=t,E=b(c,"items",p.geojson)||b(c,"http://www.opengis.net/def/rel/ogc/1.0/items",p.geojson);if(null==E)throw new y.Z("ogc-feature-layer:missing-items-page","Missing items url");const{apiKey:x,customParameters:Q,signal:V}=r,A=(0,T.hF)(E.href,t.landingPage.url),ne={limit:a,...Q,token:x},me=(0,T.fl)(A,ne),Me={accept:p.geojson},{data:_e}=yield(0,w.Z)(me,{signal:V,headers:Me}),ye=function $(t,o,r){if(!r)return;const a=b(r,"next",p.geojson),c=(0,T.mN)(a?.href)?.query;if(!c)return;const E=(0,T.mN)(t).query,x=Object.keys(E??{});return Object.entries(c).filter(([A])=>!x.includes(A)).find(([A,ne])=>m.has(A.toLowerCase())&&Number.parseInt(ne,10)===o)?.[0]}(me,a,_e.links)??d;(0,O.O3)(_e);const N=(0,O.my)(_e,{geometryType:o.geometryType}),te=o.fields||N.fields||[],De=null!=o.hasZ?o.hasZ:N.hasZ,Y=N.geometryType,X=o.objectIdField||N.objectIdFieldName||"OBJECTID";let P=o.timeInfo;const ge=te.find(({name:f})=>f===X);if(ge)ge.editable=!1,ge.nullable=!1;else{if(!N.objectIdFieldType)throw new y.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");te.unshift({name:X,alias:X,type:"number"===N.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}if(X!==N.objectIdFieldName){const f=te.find(({name:C})=>C===N.objectIdFieldName);f&&(f.type="esriFieldTypeInteger")}te===N.fields&&N.unknownFields.length>0&&R().warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:N.unknownFields}});for(const f of te){if(null==f.name&&(f.name=f.alias),null==f.alias&&(f.alias=f.name),"esriFieldTypeOID"!==f.type&&"esriFieldTypeGlobalID"!==f.type&&(f.editable=null==f.editable||!!f.editable,f.nullable=null==f.nullable||!!f.nullable),!f.name)throw new y.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:f});if(!F.v.jsonValues.includes(f.type))throw new y.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${f.name}"`,{field:f})}if(P){const f=new M.Z(te);if(P.startTimeField){const C=f.get(P.startTimeField);C?(P.startTimeField=C.name,C.type="esriFieldTypeDate"):P.startTimeField=null}if(P.endTimeField){const C=f.get(P.endTimeField);C?(P.endTimeField=C.name,C.type="esriFieldTypeDate"):P.endTimeField=null}if(P.trackIdField){const C=f.get(P.trackIdField);C?P.trackIdField=C.name:(P.trackIdField=null,R().warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:P}}))}P.timeReference||={timeZoneIANA:v.pt},P.startTimeField||P.endTimeField||(R().warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:P}}),P=void 0)}return{drawingInfo:Y?(0,u.bU)(Y):null,extent:ie(t),geometryType:Y,fields:te,hasZ:!!De,objectIdField:X,paginationParameter:ye,timeInfo:P}})).apply(this,arguments)}function H(t){return le.apply(this,arguments)}function le(){return(le=(0,I.Z)(function*(t,o={}){const{links:r,url:a}=t,c=b(r,"data",p.json)||b(r,"http://www.opengis.net/def/rel/ogc/1.0/data",p.json);if(null==c)throw new y.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:E,customParameters:x,signal:Q}=o,V=(0,T.hF)(c.href,a),{data:A}=yield(0,w.Z)(V,{signal:Q,headers:{accept:p.json},query:{...x,token:E}});for(const ne of A.collections)ne.landingPage=t;return A})).apply(this,arguments)}function ae(t){return ce.apply(this,arguments)}function ce(){return(ce=(0,I.Z)(function*(t,o={}){const{links:r,url:a}=t,c=b(r,"conformance",p.json)||b(r,"http://www.opengis.net/def/rel/ogc/1.0/conformance",p.json);if(null==c)throw new y.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:E,customParameters:x,signal:Q}=o,V=(0,T.hF)(c.href,a),{data:A}=yield(0,w.Z)(V,{signal:Q,headers:{accept:p.json},query:{...x,token:E}});return A})).apply(this,arguments)}function Te(t){return de.apply(this,arguments)}function de(){return(de=(0,I.Z)(function*(t,o={}){const{apiKey:r,customParameters:a,signal:c}=o,{data:E}=yield(0,w.Z)(t,{signal:c,headers:{accept:p.json},query:{...a,token:r}});return E.url=t,E})).apply(this,arguments)}function je(t){return e.apply(this,arguments)}function e(){return(e=(0,I.Z)(function*(t,o={}){const{links:r,url:a}=t,c=b(r,"service-desc",p.openapi);if(null==c)return R().warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:E,customParameters:x,signal:Q}=o,V=(0,T.hF)(c.href,a),{data:A}=yield(0,w.Z)(V,{signal:Q,headers:{accept:p.openapi},query:{...x,token:E}});return A})).apply(this,arguments)}function n(t){const o=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(t),r=o?.groups;if(!r)return null;const{authority:a,code:c}=r;switch(a.toLowerCase()){case"ogc":switch(c.toLowerCase()){case"crs27":return U.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return U.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const E=Number.parseInt(c,10);return Number.isNaN(E)?null:E}default:return null}}function s(t,o,r){return l.apply(this,arguments)}function l(){return(l=(0,I.Z)(function*(t,o,r){const a=yield h(t,o,r);return(0,S.cn)(a)})).apply(this,arguments)}function h(t,o,r){return W.apply(this,arguments)}function W(){return(W=(0,I.Z)(function*(t,o,r){const{collection:{links:a,landingPage:{url:c}},layerDefinition:E,maxRecordCount:x,queryParameters:{apiKey:Q,customParameters:V},spatialReference:A,supportedCrs:ne}=t,me=b(a,"items",p.geojson)||b(a,"http://www.opengis.net/def/rel/ogc/1.0/items",p.geojson);if(null==me)throw new y.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:Me,num:_e,start:ye,timeExtent:N,where:te}=o;if(o.objectIds)throw new y.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with object ids are not supported");const De=U.Z.fromJSON(A),Y=o.outSpatialReference??De,X=Y.isWGS84?null:D(Y,ne),P=function pe(t,o){if(!function oe(t){return null!=t&&"extent"===t.type}(t))return null;const{spatialReference:r}=t;if(!r||r.isWGS84)return{bbox:G(t)};const a=D(r,o);return null!=a?{bbox:G(t),"bbox-crs":a}:r.isWebMercator?{bbox:G((0,Z.iV)(t,U.Z.WGS84))}:null}(Me,ne),ge=function B(t){if(null==t)return null;const{start:o,end:r}=t;return`${null!=o?o.toISOString():".."}/${null!=r?r.toISOString():".."}`}(N),f=function fe(t){return null!=t&&t&&"1=1"!==t?t:null}(te),C=_e??(null==ye?x:10),Fe=0===ye?void 0:ye,{fields:be,geometryType:Oe,hasZ:Ie,objectIdField:he,paginationParameter:ve}=E,Ce=(0,T.hF)(me.href,c),{data:we}=yield(0,w.Z)(Ce,{...r,query:{...V,...P,crs:X,datetime:ge,query:f,limit:C,[ve]:Fe,token:Q},headers:{accept:p.geojson}}),Ee=(0,O.lG)(we,{geometryType:Oe,hasZ:Ie,objectIdField:he}),Ue=Ee.length===C&&!!b(we.links??[],"next",p.geojson),Re=new M.Z(be);for(const q of Ee){const ue={};(0,_.O0)(Re,ue,q.attributes),ue[he]=q.attributes[he],q.attributes=ue}if(!X&&Y.isWebMercator)for(const q of Ee)if(null!=q.geometry&&null!=Oe){const ue=(0,S.di)(q.geometry,Oe,Ie,!1);ue.spatialReference=U.Z.WGS84,q.geometry=(0,S.GH)((0,Z.iV)(ue,Y))}for(const q of Ee)q.objectId=q.attributes[he];const Ae=X||!X&&Y.isWebMercator?Y.toJSON():K.YU,se=new g.Z;return se.exceededTransferLimit=Ue,se.features=Ee,se.fields=be,se.geometryType=Oe,se.hasZ=Ie,se.objectIdFieldName=he,se.spatialReference=Ae,se})).apply(this,arguments)}function D(t,o){const{isWebMercator:r,wkid:a}=t;if(!a)return null;const c=r?o[3857]??o[102100]??o[102113]??o[900913]:o[t.wkid];return c?`${j}${c}`:null}function G(t){if(null==t)return"";const{xmin:o,ymin:r,xmax:a,ymax:c}=t;return`${o},${r},${a},${c}`}function ie(t){const o=t.extent?.spatial;if(!o)return null;const r=o.bbox[0],a=4===r.length,[c,E]=r;return{xmin:c,ymin:E,xmax:a?r[2]:r[3],ymax:a?r[3]:r[4],zmin:a?void 0:r[2],zmax:a?void 0:r[5],spatialReference:U.Z.WGS84.toJSON()}}function b(t,o,r){return t.find(({rel:a,type:c})=>a===o&&c===r)??t.find(({rel:a,type:c})=>a===o&&!c)}(t=p||(p={})).json="application/json",t.geojson="application/geo+json",t.openapi="application/vnd.oai.openapi+json;version=3.0"}}]);