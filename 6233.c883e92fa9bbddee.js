"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[6233],{52540:(Y,F,M)=>{M.d(F,{z:()=>P});var v=M(39921);class P{constructor(E,O){this._storage=new v.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=E,this._storage.register(this),O&&this._storage.registerRemoveFunc("",O)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(E,O,W=1){this._storage.put(this,E,O,W,1)}pop(E){return this._storage.pop(this,E)}get(E){return this._storage.get(this,E)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(E){this._storage.maxSize=E}resetHitRate(){}}},39921:(Y,F,M)=>{M.d(F,{WJ:()=>W,Xq:()=>O});var E,A,v=M(43029);(A=E||(E={}))[A.ALL=0]="ALL",A[A.SOME=1]="SOME";class O{constructor(u,c,_){this.name=u,this._storage=c,this.id=U+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),_&&(this._storage.registerRemoveFunc(this.id,_),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(u){return this._storage.getSize(this,u)}resetHitRate(){this._hit=this._miss=0}put(u,c,_,p=0){this._storage.put(this,u,c,_,p)}pop(u){const c=this._storage.pop(this,u);return void 0===c?++this._miss:++this._hit,c}get(u){const c=this._storage.get(this,u);return void 0===c?++this._miss:++this._hit,c}peek(u){return this._storage.peek(this,u)}updateSize(u,c,_){this._storage.updateSize(this,u,c,_)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class W{get size(){return this._size}constructor(u=10485760){this._maxSize=u,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new v.Z,this._users=new v.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(u){this._users.push(u)}deregister(u){this._users.removeUnordered(u)}registerRemoveFunc(u,c){this._removeFuncs.push([u,c])}deregisterRemoveFunc(u){this._removeFuncs.filterInPlace(c=>c[0]!==u)}get maxSize(){return this._maxSize}set maxSize(u){this._maxSize=Math.max(u,-1),this._checkSize()}getSize(u,c){return this._db.get(u.id+c)?.size??0}put(u,c,_,p,z){const g=this._db.get(c=u.id+c);if(g&&(this._size-=g.size,u.size-=g.size,this._db.delete(c),g.entry!==_&&this._notifyRemove(c,g.entry,g.size,E.ALL)),p>this._maxSize)return void this._notifyRemove(c,_,p,E.ALL);if(void 0===_)return void console.warn("Refusing to cache undefined entry ");if(!p||p<0)return console.warn(`Refusing to cache entry with size ${p} for key ${c}`),void this._notifyRemove(c,_,0,E.ALL);const I=1+Math.max(z,-4)- -3;this._db.set(c,new K(_,p,I)),this._size+=p,u.size+=p,this._checkSize()}updateSize(u,c,_,p){const z=this._db.get(c=u.id+c);if(z&&z.entry===_){for(this._size-=z.size,u.size-=z.size;p>this._maxSize;){const g=this._notifyRemove(c,_,p,E.SOME);if(!(null!=g&&g>0))return void this._db.delete(c);p=g}z.size=p,this._size+=p,u.size+=p,this._checkSize()}}pop(u,c){const _=this._db.get(c=u.id+c);if(_)return this._size-=_.size,u.size-=_.size,this._db.delete(c),++this._hit,_.entry;++this._miss}get(u,c){const _=this._db.get(c=u.id+c);if(void 0!==_)return this._db.delete(c),_.lives=_.lifetime,this._db.set(c,_),++this._hit,_.entry;++this._miss}peek(u,c){const _=this._db.get(u.id+c);return _?++this._hit:++this._miss,_?.entry}get performanceInfo(){const u={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},c={},_=new Array;this._db.forEach((g,I)=>{const m=g.lifetime;_[m]=(_[m]||0)+g.size,this._users.forAll(e=>{const{id:i,name:y}=e;I.startsWith(i)&&(c[y]=(c[y]||0)+g.size)})});const p={};this._users.forAll(g=>{const I=g.name;"hitRate"in g&&"number"==typeof g.hitRate&&!isNaN(g.hitRate)&&g.hitRate>0?(c[I]=c[I]||0,p[I]=Math.round(100*g.hitRate)+"%"):p[I]="0%"});const z=Object.keys(c);z.sort((g,I)=>c[I]-c[g]),z.forEach(g=>u[g]=Math.round(c[g]/2**20)+"MB / "+p[g]);for(let g=_.length-1;g>=0;--g){const I=_[g];I&&(u["Priority "+(g+-3-1)]=Math.round(I/this._size*100)+"%")}return u}resetStats(){this._hit=this._miss=0,this._users.forAll(u=>u.resetHitRate())}clear(u){const c=u.id;this._db.forEach((_,p)=>{p.startsWith(c)&&(this._size-=_.size,this._db.delete(p),this._notifyRemove(p,_.entry,_.size,E.ALL))}),u.size=0}clearAll(){this._db.forEach((u,c)=>this._notifyRemove(c,u.entry,u.size,E.ALL)),this._users.forAll(u=>u.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(u,c,_,p){let z;return this._removeFuncs.some(g=>{if(u.startsWith(g[0])){const I=g[1](c,p,_);return"number"==typeof I&&(z=I),!0}return!1}),z}_checkSize(){this._users.forAll(u=>this._checkSizeLimits(u)),this._checkSizeLimits()}_checkSizeLimits(u){const c=u??this;if(c.maxSize<0||c.size<=c.maxSize)return;const _=u?.id;let p=!0;for(;p;){p=!1;for(const[z,g]of this._db)if(0===g.lifetime&&(!_||z.startsWith(_))){if(this._purgeItem(z,g,u),c.size<=.9*c.maxSize)return;p||=this._db.has(z)}}for(const[z,g]of this._db)if((!_||z.startsWith(_))&&(this._purgeItem(z,g,u),c.size<=.9*c.maxSize))return}_purgeItem(u,c,_=this._users.find(p=>u.startsWith(p.id))){if(this._db.delete(u),c.lives<=1){this._size-=c.size,_&&(_.size-=c.size);const p=this._notifyRemove(u,c.entry,c.size,E.SOME);null!=p&&p>0&&(this._size+=p,_&&(_.size+=p),c.lives=c.lifetime,c.size=p,this._db.set(u,c))}else--c.lives,this._db.set(u,c)}}let U=0;class K{constructor(u,c,_){this.entry=u,this.size=c,this.lifetime=_,this.lives=_}}},657:(Y,F,M)=>{M.d(F,{$c:()=>z,Hg:()=>g,jW:()=>c,uD:()=>_});var v=M(73514),P=M(83944),x=M(49301);const E=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function O(m){return m instanceof v.Z}function W(m){return m instanceof P.Z?Object.keys(m.items):O(m)?(0,x.vw)(m).keys():m?Object.keys(m):[]}function U(m,e){return m instanceof P.Z?m.items[e]:m[e]}function A(m){return m?m.declaredClass:null}function u(m,e){const i=m.diff;if(i&&"function"==typeof i)return i(m,e);const y=W(m),a=W(e);if(0===y.length&&0===a.length)return;if(!y.length||!a.length||function K(m,e){return!(!Array.isArray(m)||!Array.isArray(e))&&m.length!==e.length}(m,e))return{type:"complete",oldValue:m,newValue:e};const h=a.filter(S=>!y.includes(S)),b=y.filter(S=>!a.includes(S)),R=y.filter(S=>a.includes(S)&&U(m,S)!==U(e,S)).concat(h,b).sort(),D=A(m);if(D&&E.has(D)&&R.length)return{type:"complete",oldValue:m,newValue:e};let j;const B=O(m)&&O(e);for(const S of R){const w=U(m,S),T=U(e,S);let Z;if((B||"function"!=typeof w&&"function"!=typeof T)&&w!==T&&(null!=w||null!=T)){if(i&&i[S]&&"function"==typeof i[S])Z=i[S]?.(w,T);else if(w instanceof Date&&T instanceof Date){if(w.getTime()===T.getTime())continue;Z={type:"complete",oldValue:w,newValue:T}}else Z="object"==typeof w&&"object"==typeof T&&A(w)===A(T)?u(w,T):{type:"complete",oldValue:w,newValue:T};null!=Z&&(null!=j?j.diff[S]=Z:j={type:"partial",diff:{[S]:Z}})}}return j}function c(m,e){return _(m,e)}function _(m,e){if(null==m)return!1;const i=e.split(".");let y=m;for(const a of i){if("complete"===y.type)return!0;if("partial"!==y.type)return!1;{const h=y.diff[a];if(!h)return!1;y=h}}return!0}function z(m,e){if(!m)return!1;if("partial"===m.type){const i=Object.keys(m.diff);return 1===i.length&&i[0]===e}return!1}function g(m,e){if("function"!=typeof m&&"function"!=typeof e&&(null!=m||null!=e))return null==m||null==e||"object"==typeof m&&"object"==typeof e&&A(m)!==A(e)?{type:"complete",oldValue:m,newValue:e}:u(m,e)}},52830:(Y,F,M)=>{M.d(F,{ZB:()=>p,iW:()=>u});var v=M(66599),P=M(25896);function u(e){const i=[];return c((0,P.be)(e),i),i.length?new v.Z((0,P.oY)(i[0])):null}function c(e,i){if(!e)return;let y;y="CIMTextSymbol"===e.type?e.symbol:e;const a="CIMPolygonSymbol"===e.type;if(y?.symbolLayers)for(const h of y.symbolLayers)if(!(h.colorLocked||a&&((0,P.yL)(h)||(0,P.zL)(h)&&h.markerPlacement&&(0,P.gJ)(h.markerPlacement))))switch(h.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":h.tintColor&&_(i,h.tintColor);break;case"CIMVectorMarker":h.markerGraphics?.forEach(b=>{c(b.symbol,i)});break;case"CIMSolidStroke":case"CIMSolidFill":_(i,h.color);break;case"CIMHatchFill":c(h.lineSymbol,i)}}function _(e,i){for(const y of e)if(y.join(".")===i.join("."))return;e.push(i)}function p(e,i,y){i instanceof v.Z||(i=new v.Z(i));const a=(0,P.be)(e);a&&z(a,i,y)}function z(e,i,y){if(!e)return;let a;a="CIMTextSymbol"===e.type?e.symbol:e;const h="CIMPolygonSymbol"===a?.type;if(a?.symbolLayers)for(const b of a.symbolLayers){if(b.colorLocked)continue;if(h)if(y){const{layersToColor:D}=y;if(((0,P.yL)(b)||(0,P.zL)(b)&&b.markerPlacement&&(0,P.gJ)(b.markerPlacement))&&"fill"===D||(0,P.k5)(b)&&"outline"===D)continue}else if((0,P.yL)(b)||(0,P.zL)(b)&&b.markerPlacement&&(0,P.gJ)(b.markerPlacement))continue;const R=i.toArray();switch(b.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":b.tintColor=R;break;case"CIMVectorMarker":b.markerGraphics?.forEach(D=>{z(D.symbol,i,y)});break;case"CIMSolidStroke":case"CIMSolidFill":b.color=R;break;case"CIMHatchFill":z(b.lineSymbol,i,y)}}}},1010:(Y,F,M)=>{M.d(F,{Ne:()=>y,Od:()=>I,Sp:()=>i,_M:()=>g,iI:()=>e,mx:()=>m});var v=M(98930),P=M(66599),x=M(66476),E=M(52540),O=M(55768),W=M(52830);const U="picture-fill",K="simple-fill",A="simple-line",u="simple-marker",c="text",_="cim",p=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),z=new E.z(1e3);function g(a){const h=a.style;let b=null;if(a)switch(a.type){case u:"cross"!==h&&"x"!==h&&(b=a.color);break;case K:h&&"solid"!==h?"none"!==h&&(b={type:"pattern",x:0,y:0,src:(0,v.V)(`esri/symbols/patterns/${h}.png`),width:5,height:5}):b=a.color;break;case U:b={type:"pattern",src:a.url,width:(0,O.F2)(a.width)*a.xscale,height:(0,O.F2)(a.height)*a.yscale,x:(0,O.F2)(a.xoffset),y:(0,O.F2)(a.yoffset)};break;case c:b=a.color;break;case _:b=(0,W.iW)(a)}return b}function I(a,h){const b=a+"-"+h;return void 0!==z.get(b)?Promise.resolve(z.get(b)):(0,x.Z)(a,{responseType:"image"}).then(R=>{const D=R.data,j=D.naturalWidth,B=D.naturalHeight,S=document.createElement("canvas");S.width=j,S.height=B;const w=S.getContext("2d");w.fillStyle=h,w.fillRect(0,0,j,B),w.globalCompositeOperation="destination-in",w.drawImage(D,0,0);const T=S.toDataURL();return z.put(b,T),T})}function m(a){if(!a)return null;let h=null;switch(a.type){case K:case U:case u:h=m(a.outline);break;case A:{const b=(0,O.F2)(a.width);null!=a.style&&"none"!==a.style&&0!==b&&(h={color:a.color,style:i(a.style),width:b,cap:a.cap,join:"miter"===a.join?(0,O.F2)(a.miterLimit):a.join},h.dashArray=e(h).join(",")||"none");break}default:h=null}return h}function e(a){if(!a?.style)return[];const{dashArray:h,style:b,width:R}=a;if("string"==typeof h&&"none"!==h)return h.split(",").map(B=>Number(B));const D=R??0,j=p.has(b)?p.get(b).map(B=>B*D):[];if("butt"!==a.cap)for(const[B,S]of j.entries())j[B]=B%2==1?S+D:Math.max(S-D,1);return j}const i=(()=>{const a={};return h=>{if(a[h])return a[h];const b=h.replaceAll("-","");return a[h]=b,b}})(),y=new P.Z([128,128,128])},62616:(Y,F,M)=>{M.d(F,{BR:()=>ot,Q8:()=>rt,Y6:()=>z,YW:()=>g,_h:()=>m,e3:()=>it,nf:()=>I,tb:()=>h,wJ:()=>nt});var v=M(15861),P=M(66599),x=M(71950),E=M(37636),W=(M(14007),M(55768)),U=M(73145),K=M(53984),A=M(52830),u=M(1010),c=M(41647);const _=new P.Z("white");function z(l){if(!l)return 0;if((0,x.dU)(l)){const f=function p(l){const f=l.symbolLayers?.at(-1);if(f&&"outline"in f)return f?.outline?.size}(l);return f??0}return(0,W.Wz)((0,u.mx)(l)?.width)}function g(l){if(null==l||!("symbolLayers"in l)||null==l.symbolLayers)return!1;switch(l.type){case"point-3d":return l.symbolLayers.some(f=>"object"===f.type);case"line-3d":return l.symbolLayers.some(f=>"path"===f.type);case"polygon-3d":return l.symbolLayers.some(f=>"object"===f.type||"extrude"===f.type);default:return!1}}function I(l){return l.resource?.href??""}function m(l,f){if(!l)return null;let d=null;return(0,x.dU)(l)?d=function e(l){const f=l.symbolLayers;if(!f)return null;let d=null;return f.forEach(C=>{"object"===C.type&&C.resource?.href||(d="water"===C.type?C.color:C.material?C.material.color:null)}),d?new P.Z(d):null}(l):(0,x.cT)(l)&&(d="cim"===l.type?(0,A.iW)(l):l.color?new P.Z(l.color):null),d?i(d,f):null}function i(l,f){if(null==f||null==l)return l;const d=l.toRgba();return d[3]=d[3]*f,new P.Z(d)}function h(l,f,d){l&&(f||null!=d)&&(f&&(f=new P.Z(f)),(0,x.dU)(l)?function y(l,f,d){const C=l.symbolLayers;if(!C)return;const k=L=>i(f=f??L??(null!=d?_:null),d);C.forEach(L=>{if("object"!==L.type||!L.resource?.href||f)if("water"===L.type)L.color=k(L.color);else{const H=k(null!=L.material?L.material.color:null);null==L.material?L.material=new c.b({color:H}):L.material.color=H,null!=d&&"outline"in L&&null!=L.outline?.color&&(L.outline.color=i(L.outline.color,d))}})}(l,f,d):(0,x.cT)(l)&&function a(l,f,d){(f=f??l.color)&&(l.color=i(f,d)),null!=d&&"outline"in l&&l.outline?.color&&(l.outline.color=i(l.outline.color,d))}(l,f,d))}function R(){return R=(0,v.Z)(function*(l,f){const d=l.symbolLayers;d&&(yield(0,E.Ed)(d,function(){var C=(0,v.Z)(function*(k){return function D(l,f){return j.apply(this,arguments)}(k,f)});return function(k){return C.apply(this,arguments)}}()))}),R.apply(this,arguments)}function j(){return j=(0,v.Z)(function*(l,f){switch(l.type){case"extrude":!function w(l,f){l.size="number"==typeof f[2]?f[2]:0}(l,f);break;case"icon":case"line":case"text":!function B(l,f){const d=S(f);null!=d&&(l.size=d)}(l,f);break;case"path":!function tt(l,f){const d=Q(f,U.hq,[l.width,void 0,l.height]);l.width=X(f[0],l.width,1,d),l.height=X(f[2],l.height,1,d)}(l,f);break;case"object":yield function T(l,f){return Z.apply(this,arguments)}(l,f)}}),j.apply(this,arguments)}function S(l){for(const f of l)if("number"==typeof f)return f;return null}function Z(){return Z=(0,v.Z)(function*(l,f){const{resourceSize:d,symbolSize:C}=yield function et(l){return J.apply(this,arguments)}(l),k=Q(f,d,C);l.width=X(f[0],C[0],d[0],k),l.depth=X(f[1],C[1],d[1],k),l.height=X(f[2],C[2],d[2],k)}),Z.apply(this,arguments)}function Q(l,f,d){for(let C=0;C<3;C++){const k=l[C];switch(k){case"symbol-value":{const L=d[C];return null!=L?L/f[C]:1}case"proportional":break;default:if(k&&f[C])return k/f[C]}}return 1}function J(){return(J=(0,v.Z)(function*(l){const{computeObjectLayerResourceSize:f}=yield M.e(6207).then(M.bind(M,36207)),d=yield f(l,10),{width:C,height:k,depth:L}=l,V=[C,L,k];let H=1;for(let G=0;G<3;G++){const q=V[G];if(null!=q){H=q/d[G];break}}for(let G=0;G<3;G++)null==V[G]&&(V[G]=d[G]*H);return{resourceSize:d,symbolSize:V}})).apply(this,arguments)}function X(l,f,d,C){switch(l){case"proportional":return d*C;case"symbol-value":return f??d;default:return l}}function it(l,f){return N.apply(this,arguments)}function N(){return N=(0,v.Z)(function*(l,f){if(l&&f)return(0,x.dU)(l)?function b(l,f){return R.apply(this,arguments)}(l,f):void((0,x.cT)(l)&&function st(l,f){const d=S(f);if(null!=d)switch(l.type){case"simple-marker":l.size=d;break;case"picture-marker":{const C=l.width/l.height;C>1?(l.width=d,l.height=d*C):(l.width=d*C,l.height=d);break}case"simple-line":l.width=d;break;case"text":l.font.size=d}}(l,f))}),N.apply(this,arguments)}function ot(l,f,d){if(l&&null!=f)if((0,x.dU)(l)){const C=l.symbolLayers;C&&C.forEach(k=>{if(k&&"object"===k.type)switch(d){case"tilt":k.tilt=(k.tilt??0)+f;break;case"roll":k.roll=(k.roll??0)+f;break;default:k.heading=(k.heading??0)+f}})}else(0,x.cT)(l)&&("simple-marker"!==l.type&&"picture-marker"!==l.type&&"text"!==l.type||(l.angle+=f))}function nt(l){if(!l)return null;const f=l.effects.filter(d=>"bloom"!==d.type).map(d=>d.toJSON());return(0,K.rM)(f)}function rt(l,f){return $.apply(this,arguments)}function $(){return($=(0,v.Z)(function*(l,f){return(yield l.fetchSymbol(f))||l.fetchCIMSymbol(f)})).apply(this,arguments)}}}]);