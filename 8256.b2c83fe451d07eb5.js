"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[8256,5398,9005],{657:(_e,te,l)=>{l.d(te,{$c:()=>$,Hg:()=>q,jW:()=>k,uD:()=>R});var L=l(73514),P=l(83944),ee=l(49301);const Q=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function w(I){return I instanceof L.Z}function v(I){return I instanceof P.Z?Object.keys(I.items):w(I)?(0,ee.vw)(I).keys():I?Object.keys(I):[]}function T(I,d){return I instanceof P.Z?I.items[d]:I[d]}function Z(I){return I?I.declaredClass:null}function N(I,d){const h=I.diff;if(h&&"function"==typeof h)return h(I,d);const f=v(I),M=v(d);if(0===f.length&&0===M.length)return;if(!f.length||!M.length||function W(I,d){return!(!Array.isArray(I)||!Array.isArray(d))&&I.length!==d.length}(I,d))return{type:"complete",oldValue:I,newValue:d};const m=M.filter(j=>!f.includes(j)),_=f.filter(j=>!M.includes(j)),c=f.filter(j=>M.includes(j)&&T(I,j)!==T(d,j)).concat(m,_).sort(),E=Z(I);if(E&&Q.has(E)&&c.length)return{type:"complete",oldValue:I,newValue:d};let b;const D=w(I)&&w(d);for(const j of c){const g=T(I,j),x=T(d,j);let U;if((D||"function"!=typeof g&&"function"!=typeof x)&&g!==x&&(null!=g||null!=x)){if(h&&h[j]&&"function"==typeof h[j])U=h[j]?.(g,x);else if(g instanceof Date&&x instanceof Date){if(g.getTime()===x.getTime())continue;U={type:"complete",oldValue:g,newValue:x}}else U="object"==typeof g&&"object"==typeof x&&Z(g)===Z(x)?N(g,x):{type:"complete",oldValue:g,newValue:x};null!=U&&(null!=b?b.diff[j]=U:b={type:"partial",diff:{[j]:U}})}}return b}function k(I,d){return R(I,d)}function R(I,d){if(null==I)return!1;const h=d.split(".");let f=I;for(const M of h){if("complete"===f.type)return!0;if("partial"!==f.type)return!1;{const m=f.diff[M];if(!m)return!1;f=m}}return!0}function $(I,d){if(!I)return!1;if("partial"===I.type){const h=Object.keys(I.diff);return 1===h.length&&h[0]===d}return!1}function q(I,d){if("function"!=typeof I&&"function"!=typeof d&&(null!=I||null!=d))return null==I||null==d||"object"==typeof I&&"object"==typeof d&&Z(I)!==Z(d)?{type:"complete",oldValue:I,newValue:d}:N(I,d)}},15398:(_e,te,l)=>{l.d(te,{A4:()=>ee,L9:()=>Q,yV:()=>P});var L=l(25037);class P{}function ee(v){return v instanceof L.ld?v===P.instance:"unknown"===v?.toString().toLowerCase()}function Q(v){return ee(v)?P.instance:v}P.instance=new L.vF("Etc/UTC")},66398:(_e,te,l)=>{function P(u){return u?{originPosition:"upper-left"===u.originPosition?"upperLeft":"lower-left"===u.originPosition?"lowerLeft":u.originPosition,scale:u.tolerance?[u.tolerance,u.tolerance,1,1]:[1,1,1,1],translate:null!=u.extent?[u.extent.xmin,u.extent.ymax,u.extent.zmin??0,u.extent.mmin??0]:[0,0,0,0]}:null}function Q(u){if(function ee(u){return"lowerLeft"===u.originPosition&&4===u.scale.length&&4===u.translate.length}(u))return u;const{originPosition:i,scale:a,translate:O}=u,C=a[1]??1;return{originPosition:"lowerLeft",scale:[a[0]??1,"lowerLeft"===i?C:-C,a[2]??1,a[3]??1],translate:[O[0]??0,O[1]??0,O[2]??0,O[3]??0]}}function I({scale:u,translate:i},a){return a*u[0]+i[0]}function d({scale:u,translate:i},a){return a*u[1]+i[1]}function h({scale:u,translate:i},a){return(a??0)*u[2]+i[2]}function f({scale:u,translate:i},a){return a?a*u[3]+i[3]:0}function M(u,i){return u&&i?E:u&&!i?_:!u&&i?c:m}l.d(te,{G6:()=>Pe,Ie:()=>Me,J9:()=>ge,RF:()=>ce,U1:()=>Oe,vY:()=>P}),l(40637);const m=(u,i)=>{const a=new Array(i.length);if(!i.length)return a;const O=i[0];let S=I(u,O[0]),C=d(u,O[1]);a[0]=[S,C];const{scale:z,originPosition:X}=u,ne=z[0],oe="lowerLeft"===X?z[1]:-z[1];for(let Y=1;Y<i.length;Y++){const[re,ie]=i[Y];S+=ne*re,C+=oe*ie,a[Y]=[S,C]}return a},_=(u,i)=>{const a=new Array(i.length);if(!i.length)return a;const O=i[0];let S=I(u,O[0]),C=d(u,O[1]);a[0]=[S,C,h(u,O[2])];const{scale:z,originPosition:X}=u,ne=z[0],oe="lowerLeft"===X?z[1]:-z[1];for(let Y=1;Y<i.length;Y++){const[re,ie,le]=i[Y];S+=ne*re,C+=oe*ie,a[Y]=[S,C,h(u,le)]}return a},c=(u,i)=>{const a=new Array(i.length);if(!i.length)return a;const O=i[0];let S=I(u,O[0]),C=d(u,O[1]);a[0]=[S,C,f(u,O[2])];const{scale:z,originPosition:X}=u,ne=z[0],oe="lowerLeft"===X?z[1]:-z[1];for(let Y=1;Y<i.length;Y++){const[re,ie,le]=i[Y];S+=ne*re,C+=oe*ie,a[Y]=[S,C,f(u,le)]}return a},E=(u,i)=>{const a=new Array(i.length);if(!i.length)return a;const O=i[0];let S=I(u,O[0]),C=d(u,O[1]);a[0]=[S,C,h(u,O[2]),f(u,O[3])];const{scale:z,originPosition:X}=u,ne=z[0],oe="lowerLeft"===X?z[1]:-z[1];for(let Y=1;Y<i.length;Y++){const[re,ie,le,ye]=i[Y];S+=ne*re,C+=oe*ie,a[Y]=[S,C,h(u,le),f(u,ye)]}return a};function b(u,i,a){const O=new Array(a.length);for(let S=0;S<a.length;S++)O[S]=i(u,a[S]);return O}function ce(u,i,a){const O=Q(u);return i.x=function w({scale:u,translate:i},a){return Math.round((a-i[0])/u[0])}(O,a.x),i.y=function v({scale:u,translate:i},a){return Math.round((a-i[1])/u[1])}(O,a.y),null!=a.z&&(i.z=function T({scale:u,translate:i},a){return Math.round(((a??0)-i[2])/u[2])}(O,a.z)),null!=a.m&&(i.m=function W({scale:u,translate:i},a){return a?Math.round((a-i[3])/u[3]):0}(O,a.m)),i}function ge(u,i,a,O=a?.hasZ??!1,S=a?.hasM??!1){if(null!=a){const C=Q(u);i.points=M(O,S)(C,a.points),i.hasZ=O,i.hasM=S}return i}function Oe(u,i,a,O=null!=a?.z,S=null!=a?.m){if(null==a)return i;const C=Q(u);return i.x=I(C,a.x),i.y=d(C,a.y),O&&(i.z=h(C,a.z)),S&&(i.m=f(C,a.m)),i}function Me(u,i,a,O=a?.hasZ??!1,S=a?.hasM??!1){if(null!=a){const C=Q(u);i.rings=b(C,M(O,S),a.rings),i.hasZ=O,i.hasM=S}return i}function Pe(u,i,a,O=a?.hasZ??!1,S=a?.hasM??!1){if(null!=a){const C=Q(u);i.paths=b(C,M(O,S),a.paths),i.hasZ=O,i.hasM=S}return i}},71413:(_e,te,l)=>{l.d(te,{O:()=>f});var L=l(15861),P=l(50484),ee=l(66476),Q=l(8611),w=l(79412),v=l(6785),T=l(93960),W=l(80543),R=(l(14007),l(4703),l(65311),l(62185)),G=l(10141),$=l(60301),q=l(26894),H=l(43814),I=l(89713),d=l(56956),h=l(50318);const f=M=>{let m=class extends M{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(_,c){const E=c.capabilities&&c.capabilities.split(",").map(Ee=>Ee.toLowerCase().trim());if(!E)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const b=this.type,D="tile"!==b&&!!c.supportsDynamicLayers,j=E.includes("query"),g=E.includes("map"),x=!!c.exportTilesAllowed,U=E.includes("tilemap"),V=E.includes("data"),A="tile"!==b&&(!c.tileInfo||D),J="tile"!==b&&(!c.tileInfo||D),ce="tile"!==b,pe=c.cimVersion&&T.G.parse(c.cimVersion),he=pe?.since(1,4)??!1,me=pe?.since(2,0)??!1;return{operations:{supportsExportMap:g,supportsExportTiles:x,supportsIdentify:j,supportsQuery:V,supportsTileMap:U},exportMap:g?{supportsArcadeExpressionForLabeling:he,supportsSublayersChanges:ce,supportsDynamicLayers:D,supportsSublayerVisibility:A,supportsSublayerDefinitionExpression:J,supportsCIMSymbols:me}:null,exportTiles:x?{maxExportTilesCount:+c.maxExportTilesCount}:null}}readVersion(_,c){let E=c.currentVersion;return E||(E=c.hasOwnProperty("capabilities")||c.hasOwnProperty("tables")?10:c.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),E}fetchRelatedService(_){var c=this;return(0,L.Z)(function*(){const E=c.portalItem;if(!E||!(0,h.Fj)(E))return null;c._relatedFeatureServicePromise||(c._relatedFeatureServicePromise=E.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},_).then(D=>D.find(j=>"Feature Service"===j.type)??null,()=>null));const b=yield c._relatedFeatureServicePromise;return(0,w.k_)(_),b?{itemId:b.id,url:b.url}:null})()}fetchSublayerInfo(_,c){var E=this;return(0,L.Z)(function*(){const{source:b}=_;if(E?.portalItem&&"tile"===E.type&&"map-layer"===b?.type&&(0,h.Fj)(E.portalItem)&&_.originIdOf("url")<$.s3.SERVICE){const g=yield E.fetchRelatedService(c);g&&(_.url=(0,v.v_)(g.url,b.mapLayerId.toString()),_.layerItemId=g.itemId)}const{url:D}=_;let j;if("data-layer"===b.type)j=(yield(0,ee.Z)(D,{responseType:"json",query:{f:"json",...E.customParameters,token:E.apiKey},...c})).data;else if(D&&_.originIdOf("url")>$.s3.SERVICE)try{const g=yield E._fetchAllLayersAndTablesFromService(D),x=(0,I.Qc)(D)?.sublayer??b.mapLayerId;j=g.get(x)}catch{}else{let g=_.id;"map-layer"===b?.type&&(g=b.mapLayerId);try{j=(yield E.fetchAllLayersAndTables(c)).get(g)}catch{}}return j})()}fetchAllLayersAndTables(_){var c=this;return(0,L.Z)(function*(){return c._fetchAllLayersAndTablesFromService(c.parsedUrl?.path,_)})()}_fetchAllLayersAndTablesFromService(_,c){var E=this;return(0,L.Z)(function*(){yield E.load(c),E._allLayersAndTablesMap||=new Map;const b=(0,I.Qc)(_),D=(0,Q.s1)(E._allLayersAndTablesMap,b?.url.path,()=>(0,ee.Z)((0,v.v_)(b?.url.path,"/layers"),{responseType:"json",query:{f:"json",...E.customParameters,token:E.apiKey}}).then(g=>{const x=new Map,{layers:U,tables:V}=g.data,A=[...U??[],...V??[]];for(const J of A)x.set(J.id,J);return{result:x}},g=>({error:g}))),j=yield D;if((0,w.k_)(c),"result"in j)return j.result;throw j.error})()}};return(0,P._)([(0,W.Cb)({readOnly:!0})],m.prototype,"capabilities",void 0),(0,P._)([(0,R.r)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],m.prototype,"readCapabilities",null),(0,P._)([(0,W.Cb)({json:{read:{source:"copyrightText"}}})],m.prototype,"copyright",void 0),(0,P._)([(0,W.Cb)({type:q.Z})],m.prototype,"fullExtent",void 0),(0,P._)([(0,W.Cb)(d.id)],m.prototype,"id",void 0),(0,P._)([(0,W.Cb)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],m.prototype,"legendEnabled",void 0),(0,P._)([(0,W.Cb)(d.C_)],m.prototype,"popupEnabled",void 0),(0,P._)([(0,W.Cb)({type:H.Z})],m.prototype,"spatialReference",void 0),(0,P._)([(0,W.Cb)({readOnly:!0})],m.prototype,"version",void 0),(0,P._)([(0,R.r)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],m.prototype,"readVersion",null),m=(0,P._)([(0,G.j)("esri.layers.mixins.ArcGISMapService")],m),m}},93702:(_e,te,l)=>{l.d(te,{x:()=>d});var L=l(50484),P=l(83944),ee=l(5603),Q=l(57964),w=l(4703),v=l(77675),T=l(80543),N=(l(14007),l(65311),l(49301)),k=l(10141),R=l(60301),G=l(25740),$=l(45859);const H=P.Z.ofType(G.Z);function I(h,f){h&&h.forEach(M=>{f(M),M.sublayers&&M.sublayers.length&&I(M.sublayers,f)})}const d=h=>{let f=class extends h{constructor(...M){super(...M),this.allSublayers=new ee.Z({getCollections:()=>[this.sublayers],getChildrenFunction:m=>m.sublayers}),this.sublayersSourceJSON={[R.s3.SERVICE]:{},[R.s3.PORTAL_ITEM]:{},[R.s3.WEB_SCENE]:{},[R.s3.WEB_MAP]:{}},this.subtables=null,this.addHandles([(0,v.YP)(()=>this.sublayers,(m,_)=>this._handleSublayersChange(m,_),v.Z_),(0,v.YP)(()=>this.subtables,(m,_)=>this._handleSublayersChange(m,_),v.Z_)])}destroy(){this.allSublayers.destroy()}readSublayers(M,m){if(!m||!M)return;const{sublayersSourceJSON:_}=this,c=(0,R.M9)(m.origin);if(c<R.s3.SERVICE||(_[c]={context:m,visibleLayers:M.visibleLayers||_[c].visibleLayers,layers:M.layers||_[c].layers},c>R.s3.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:E,origin:b}=this.createSublayersForOrigin("web-document"),D=(0,N.vw)(this);D.setDefaultOrigin(b),this._set("sublayers",new H(E)),D.setDefaultOrigin("user")}findSublayerById(M){return this.allSublayers.find(m=>m.id===M)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(M){const m=(0,R.M9)("web-document"===M?"web-map":M);let _=R.s3.SERVICE,c=this.sublayersSourceJSON[R.s3.SERVICE].layers,E=this.sublayersSourceJSON[R.s3.SERVICE].context,b=null;const D=[R.s3.PORTAL_ITEM,R.s3.WEB_SCENE,R.s3.WEB_MAP].filter(A=>A<=m);for(const A of D){const J=this.sublayersSourceJSON[A];(0,$.ac)(J.layers)&&(_=A,c=J.layers,E=J.context,J.visibleLayers&&(b={visibleLayers:J.visibleLayers,context:J.context}))}const j=[R.s3.PORTAL_ITEM,R.s3.WEB_SCENE,R.s3.WEB_MAP].filter(A=>A>_&&A<=m);let g=null;for(const A of j){const{layers:J,visibleLayers:ce,context:pe}=this.sublayersSourceJSON[A];J&&(g={layers:J,context:pe}),ce&&(b={visibleLayers:ce,context:pe})}const x=function q(h,f){const M=[],m={};return h&&h.forEach(_=>{const c=new G.Z;if(c.read(_,f),m[c.id]=c,null!=_.parentLayerId&&-1!==_.parentLayerId){const E=m[_.parentLayerId];E.sublayers||(E.sublayers=[]),E.sublayers.unshift(c)}else M.unshift(c)}),M}(c,E),U=new Map,V=new Set;if(g)for(const A of g.layers)U.set(A.id,A);if(b?.visibleLayers)for(const A of b.visibleLayers)V.add(A);return I(x,A=>{g&&A.read(U.get(A.id),g.context),b&&A.read({defaultVisibility:V.has(A.id)},b.context)}),{origin:(0,R.x3)(_),sublayers:new H({items:x})}}read(M,m){super.read(M,m),this.readSublayers(M,m)}_handleSublayersChange(M,m){m&&(m.forEach(_=>{_.parent=null,_.layer=null}),this.removeHandles("sublayers-owner")),M&&(M.forEach(_=>{_.parent=this,_.layer=this}),this.addHandles([M.on("after-add",({item:_})=>{_.parent=this,_.layer=this}),M.on("after-remove",({item:_})=>{_.parent=null,_.layer=null})],"sublayers-owner"),"tile"===this.type&&this.addHandles(M.on("before-changes",_=>{w.Z.getLogger("esri.layers.TileLayer").error(new Q.Z("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),_.preventDefault()}),"sublayers-owner"))}};return(0,L._)([(0,T.Cb)({readOnly:!0})],f.prototype,"allSublayers",void 0),(0,L._)([(0,T.Cb)({readOnly:!0,type:P.Z.ofType(G.Z)})],f.prototype,"serviceSublayers",void 0),(0,L._)([(0,T.Cb)({value:null,type:H,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],f.prototype,"sublayers",void 0),(0,L._)([(0,T.Cb)({readOnly:!0})],f.prototype,"sublayersSourceJSON",void 0),(0,L._)([(0,T.Cb)({type:H,json:{read:{source:"tables"}}})],f.prototype,"subtables",void 0),f=(0,L._)([(0,k.j)("esri.layers.mixins.SublayersOwner")],f),f}},50243:(_e,te,l)=>{l.d(te,{Z:()=>$});var L=l(50484),P=l(25387),ee=l(89317),Q=l(80543),W=(l(14007),l(4703),l(65311),l(62185)),Z=l(10141),N=l(7547),k=l(59300),R=l(30457);let G=class extends((0,P.J)(ee.wq)){constructor(q){super(q),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(q){const H={};for(const I of Object.keys(q))H[I]=(0,k.im)(q[I]);return H}writeDomains(q,H){const I={};for(const d of Object.keys(q))q[d]&&(I[d]=q[d]?.toJSON());H.domains=I}};(0,L._)([(0,Q.Cb)({json:{write:!0}})],G.prototype,"id",void 0),(0,L._)([(0,Q.Cb)({json:{write:!0}})],G.prototype,"name",void 0),(0,L._)([(0,Q.Cb)({json:{write:!0}})],G.prototype,"domains",void 0),(0,L._)([(0,W.r)("domains")],G.prototype,"readDomains",null),(0,L._)([(0,N.c)("domains")],G.prototype,"writeDomains",null),(0,L._)([(0,Q.Cb)({type:[R.Z],json:{write:!0}})],G.prototype,"templates",void 0),G=(0,L._)([(0,Z.j)("esri.layers.support.FeatureType")],G);const $=G},40100:(_e,te,l)=>{l.d(te,{Z:()=>G});var L=l(57964),P=l(89317),ee=l(4703),Q=l(8611),w=l(15398),v=l(85295),T=l(764),W=l(25037);const R=new Map;class G{static fromJSON(h){return new G(h.fields,h.timeZoneByFieldName)}static fromLayer(h){return new G(h.fields??[],I(h))}static fromLayerJSON(h){return new G(h.fields??[],I(h))}constructor(h=[],f){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=h||[],this._timeZoneByFieldName=f?new Map(f):null;const M=[];for(const m of this.fields){const _=m?.name,c=q(_);if(_&&c){const E=$(_);this._fieldsMap.set(_,m),this._fieldsMap.set(E,m),this._normalizedFieldsMap.set(c,m),M.push(`${E}:${m.type}:${this._timeZoneByFieldName?.get(_)}`),(0,v.y2)(m)?(this.dateFields.push(m),this._dateFieldsSet.add(m)):(0,v.H7)(m)&&(this._numericFieldsSet.add(m),this.numericFields.push(m)),(0,v.Dl)(m)||(0,v.Se)(m)||(m.editable=null==m.editable||!!m.editable,m.nullable=null==m.nullable||!!m.nullable)}}M.sort(),this.uid=M.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const h of this.fields)(0,v.Dl)(h)||(0,v.Se)(h)||h.nullable||void 0!==(0,v.os)(h)||this._requiredFields.push(h)}return this._requiredFields}equals(h){return this.uid===h?.uid}has(h){return null!=this.get(h)}get(h){if(!h)return;let f=this._fieldsMap.get(h);return f||(f=this._fieldsMap.get($(h))??this._normalizedFieldsMap.get(q(h)),f&&this._fieldsMap.set(h,f),f)}getTimeZone(h){const f=this.get(h&&"string"!=typeof h?h.name:h);return f?this._timeZoneByFieldName?this._timeZoneByFieldName.get(f.name):"date"===f.type||"esriFieldTypeDate"===f.type?(ee.Z.getLogger("esri.layers.support.FieldsIndex").error(new L.Z("getTimeZone:no-timezone-information",`no time zone information for field '${f.name}'`)),T.pt):H.has(f.type)?T._4:null:null}getLuxonTimeZone(h){const f=this.getTimeZone(h);return f?f===T._4?w.yV.instance:f===T.pt?W.Qf.utcInstance:(0,Q.s1)(R,f,()=>W.vF.create(f)):null}isDateField(h){return this._dateFieldsSet.has(this.get(h))}isTimeOnlyField(h){return(0,v.sX)(this.get(h))}isNumericField(h){return this._numericFieldsSet.has(this.get(h))}normalizeFieldName(h){return this.get(h)?.name??void 0}toJSON(){return{fields:this.fields.map(h=>(0,P.AK)(h)?h.toJSON():h),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function $(d){return d.trim().toLowerCase()}function q(d){return(0,v.q6)(d)?.toLowerCase()??""}const H=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function I(d){const h=new Map;if(!d.fields)return h;const f=!0===d.datesInUnknownTimezone,{timeInfo:M,editFieldsInfo:m}=d,_=(M?"startField"in M?M.startField:M.startTimeField:"")??"",c=(M?"endField"in M?M.endField:M.endTimeField:"")??"",E=function k(d){return"dateFieldsTimeZone"in d}(d)?d.dateFieldsTimeZone??null:d.dateFieldsTimeReference?(0,T.Jv)(d.dateFieldsTimeReference):null,b=m?function Z(d){return"timeZone"in d}(m)?m.timeZone??E:m.dateFieldsTimeReference?(0,T.Jv)(m.dateFieldsTimeReference):E??T.pt:null,D=M?function N(d){return"timeZone"in d}(M)?M.timeZone??E:M.timeReference?(0,T.Jv)(M.timeReference):E:null,j=new Map([[$(m?.creationDateField??""),b],[$(m?.editDateField??""),b],[$(_),D],[$(c),D]]);for(const{name:g,type:x}of d.fields)if(H.has(x))h.set(g,T._4);else if("date"!==x&&"esriFieldTypeDate"!==x)h.set(g,null);else if(f)h.set(g,T._4);else{const U=j.get($(g??""))??E;h.set(g,U)}return h}},25740:(_e,te,l)=>{l.d(te,{Z:()=>Se});var re,L=l(15861),P=l(50484),Q=(l(2189),l(62691)),$=(l(36699),l(12610),l(53722),l(82752),l(28999),l(38748),l(50923),l(42212),l(91963),l(41007)),q=l(66476),H=l(71950),I=l(83944),d=l(57964),h=l(14007),f=l(84373),M=l(34222),m=l(67016),_=l(4703),c=l(3233),E=l(38955),b=l(6785),D=l(80543),j=l(73018),g=l(62185),x=l(10141),U=l(7547),V=l(1535),A=l(60301),J=l(49301),ce=l(59211),pe=l(78818),he=l(50243),me=l(81247),Ee=l(40100),ge=l(85295),Oe=l(40591),Me=l(75421),Pe=l(39557),u=l(58748),i=l(37556),a=l(46054),O=l(59341),S=l(15462),C=l(12768),z=l(91866),X=l(33331),ne=l(26894),oe=l(43814),Y=l(31709);function ie(s){return"esriSMS"===s?.type}function le(s,y,p){const F=this.originIdOf(y)>=(0,A.M9)(p.origin);return{ignoreOrigin:!0,allowNull:F,enabled:!!p&&"map-image"===p.layer?.type&&(p.writeSublayerStructure||F)}}function ye(s,y,p){return{enabled:!!p&&"tile"===p.layer?.type&&(p.origin&&this.originIdOf(y)>=(0,A.M9)(p.origin)||this._isOverridden(y))}}function ae(s,y,p){return{ignoreOrigin:!0,enabled:p&&p.writeSublayerStructure||!1}}function fe(s,y,p){return{ignoreOrigin:!0,enabled:!!p&&(p.writeSublayerStructure||this.originIdOf(y)>=(0,A.M9)(p.origin))}}let ve=0;const be=new Set(["layer","parent","loaded","loadStatus","loadError","loadWarnings"]);let B=re=class extends((0,c.R)((0,f.IG)(m.Z))){constructor(s){super(s),this.capabilities=void 0,this.maxScaleRange={minScale:0,maxScale:0},this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.isTable=!1,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.spatialReference=null,this.title=null,this.typeIdField=null,this.type="sublayer",this.types=null,this._lastParsedUrl=null}load(s){var y=this;return(0,L.Z)(function*(){return y.addResolvingPromise((0,L.Z)(function*(){const{layer:p,url:F}=y;if(!p&&!F)throw new d.Z("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:y});const K=p?yield p.fetchSublayerInfo(y,s):(yield(0,q.Z)(F,{responseType:"json",query:{f:"json"},...s})).data;K&&(y.sourceJSON=K,y.read({layerDefinition:K},{origin:"service",layer:p,url:(0,S.en)(F)}))})()),y})()}readCapabilities(s,y){y=y.layerDefinition||y;const{operations:{supportsQuery:p,supportsQueryAttachments:F},query:{supportsFormatPBF:K,supportsOrderBy:se,supportsPagination:ue},data:{supportsAttachment:de},queryRelated:Ie}=(0,i.h)(y,this.url);return{exportMap:{supportsModification:!!y.canModifyLayer},operations:{supportsQuery:p,supportsQueryAttachments:F},data:{supportsAttachment:de},query:{supportsFormatPBF:K,supportsOrderBy:se,supportsPagination:ue},queryRelated:Ie}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(s){this._setAndNotifyLayer("definitionExpression",s)}get effectiveScaleRange(){const{minScale:s,maxScale:y}=this;return{minScale:s,maxScale:y}}readMaxScaleRange(s,y){return{minScale:(y=y.layerDefinition||y).minScale??0,maxScale:y.maxScale??0}}get fieldsIndex(){return new Ee.Z(this.fields||[])}set floorInfo(s){this._setAndNotifyLayer("floorInfo",s)}readGlobalIdFieldFromService(s,y){if((y=y.layerDefinition||y).globalIdField)return y.globalIdField;if(y.fields)for(const p of y.fields)if("esriFieldTypeGlobalID"===p.type)return p.name}get id(){return this._get("id")??ve++}set id(s){this._get("id")!==s&&(!1!==this.layer?.capabilities?.exportMap?.supportsDynamicLayers?this._set("id",s):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}readIsTable(s,y){return"Table"===y.type}set labelingInfo(s){this._setAndNotifyLayer("labelingInfo",s)}writeLabelingInfo(s,y,p,F){s&&s.length&&(y.layerDefinition={drawingInfo:{labelingInfo:s.map(K=>K.write({},F))}})}set labelsVisible(s){this._setAndNotifyLayer("labelsVisible",s)}set layer(s){this._set("layer",s),this.sublayers?.forEach(y=>y.layer=s)}set listMode(s){this._set("listMode",s)}set minScale(s){this._setAndNotifyLayer("minScale",s)}readMinScale(s,y){return y.minScale||y.layerDefinition?.minScale||0}set maxScale(s){this._setAndNotifyLayer("maxScale",s)}readMaxScale(s,y){return y.maxScale||y.layerDefinition?.maxScale||0}readObjectIdFieldFromService(s,y){return(y=y.layerDefinition||y).objectIdField?y.objectIdField:y.fields?.find(F=>"esriFieldTypeOID"===F.type)?.name}set opacity(s){this._setAndNotifyLayer("opacity",s)}readOpacity(s,y){const{layerDefinition:p}=y;return 1-.01*(p?.transparency??p?.drawingInfo?.transparency??0)}writeOpacity(s,y,p,F){y.layerDefinition={drawingInfo:{transparency:100-100*s}}}writeParent(s,y){y.parentLayerId=this.parent&&this.parent!==this.layer?(0,V.vU)(this.parent.id):-1}get queryTask(){if(!this.layer)return null;const{capabilities:s,fieldsIndex:y,layer:p,url:F}=this,{spatialReference:K}=p,se="gdbVersion"in p?p.gdbVersion:void 0,ue=(0,h.Z)("featurelayer-pbf")&&s?.query.supportsFormatPBF;return new ce.Z({fieldsIndex:y,gdbVersion:se,pbfSupported:ue,queryAttachmentsSupported:s?.operations?.supportsQueryAttachments??!1,sourceSpatialReference:K,url:F})}set renderer(s){if((0,ge.YN)(s,this.fieldsIndex),s)for(const y of s.getSymbols())if((0,H.dU)(y)){_.Z.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",s)}get source(){return this._get("source")||new O.R({mapLayerId:this.id})}set source(s){this._setAndNotifyLayer("source",s)}set sublayers(s){this._handleSublayersChange(s,this._get("sublayers")),this._set("sublayers",s)}castSublayers(s){return(0,V.se)(I.Z.ofType(re),s)}writeSublayers(s,y,p){this.sublayers?.length&&(y[p]=this.sublayers.map(F=>F.id).toArray().reverse())}readTitle(s,y){return y.layerDefinition?.name??y.name}readTypeIdField(s,y){let p=(y=y.layerDefinition||y).typeIdField;if(p&&y.fields){p=p.toLowerCase();const F=y.fields.find(K=>K.name.toLowerCase()===p);F&&(p=F.name)}return p}get url(){const s=this.layer?.parsedUrl??this._lastParsedUrl,y=this.source;if(!s)return null;if(this._lastParsedUrl=s,"map-layer"===y?.type)return`${s.path}/${y.mapLayerId}`;const p={layer:JSON.stringify({source:this.source})};return`${s.path}/dynamicLayer?${(0,b.B7)(p)}`}set url(s){this._overrideIfSome("url",s)}set visible(s){this._setAndNotifyLayer("visible",s)}writeVisible(s,y,p,F){y[p]=this.getAtOrigin("defaultVisibility","service")||s}clone(){const{store:s}=(0,J.vw)(this),y=new re;return(0,J.vw)(y).store=s.clone(be),this.commitProperty("url"),y._lastParsedUrl=this._lastParsedUrl,y}createPopupTemplate(s){return(0,X.eZ)(this,s)}createQuery(){return new z.Z({returnGeometry:!0,where:this.definitionExpression||"1=1"})}createFeatureLayer(){var s=this;return(0,L.Z)(function*(){if(s.hasOwnProperty("sublayers"))return null;const y=(yield Promise.all([l.e(8410),l.e(5594),l.e(373)]).then(l.bind(l,90373))).default,{layer:p,url:F}=s;let K;if(F&&s.originIdOf("url")>A.s3.SERVICE)K=new y({url:F});else{if(!p?.parsedUrl)throw new d.Z("createFeatureLayer:missing-information","Cannot create a FeatureLayer without a url or a parent layer");{const se=p.parsedUrl;K=new y({url:se.path}),se&&s.source&&("map-layer"===s.source.type?K.layerId=s.source.mapLayerId:K.dynamicDataSource=s.source)}}return null!=p?.refreshInterval&&(K.refreshInterval=p.refreshInterval),s.definitionExpression&&(K.definitionExpression=s.definitionExpression),s.floorInfo&&(K.floorInfo=(0,M.d9)(s.floorInfo)),s.originIdOf("labelingInfo")>A.s3.SERVICE&&(K.labelingInfo=(0,M.d9)(s.labelingInfo)),s.originIdOf("labelsVisible")>A.s3.DEFAULTS&&(K.labelsVisible=s.labelsVisible),s.originIdOf("legendEnabled")>A.s3.DEFAULTS&&(K.legendEnabled=s.legendEnabled),s.originIdOf("visible")>A.s3.DEFAULTS&&(K.visible=s.visible),s.originIdOf("minScale")>A.s3.DEFAULTS&&(K.minScale=s.minScale),s.originIdOf("maxScale")>A.s3.DEFAULTS&&(K.maxScale=s.maxScale),s.originIdOf("opacity")>A.s3.DEFAULTS&&(K.opacity=s.opacity),s.originIdOf("popupTemplate")>A.s3.DEFAULTS&&(K.popupTemplate=(0,M.d9)(s.popupTemplate)),s.originIdOf("renderer")>A.s3.SERVICE&&(K.renderer=(0,M.d9)(s.renderer)),"data-layer"===s.source?.type&&(K.dynamicDataSource=s.source.clone()),s.originIdOf("title")>A.s3.DEFAULTS&&(K.title=s.title),"map-image"===p?.type&&p.originIdOf("customParameters")>A.s3.DEFAULTS&&(K.customParameters=p.customParameters),"tile"===p?.type&&p.originIdOf("customParameters")>A.s3.DEFAULTS&&(K.customParameters=p.customParameters),K})()}getField(s){return this.fieldsIndex.get(s)}getFeatureType(s){return(0,pe.KL)(this.types,this.typeIdField,s)}getFieldDomain(s,y){const p=y?.feature,F=this.getFeatureType(p);if(F){const K=F.domains&&F.domains[s];if(K&&"inherited"!==K.type)return K}return this._getLayerDomain(s)}queryAttachments(s,y){var p=this;return(0,L.Z)(function*(){yield p.load(),s=C.Z.from(s);const F=p.capabilities;if(!F?.data?.supportsAttachment)throw new d.Z("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:K,objectIds:se,globalIds:ue,num:de,size:Ie,start:Te,where:De}=s;if(!F?.operations?.supportsQueryAttachments&&(K?.length>0||ue?.length>0||Ie?.length>0||de||Te||De))throw new d.Z("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",s);if(!(se?.length||ue?.length||De))throw new d.Z("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",s);return p.queryTask.executeAttachmentQuery(s,y)})()}queryFeatureCount(s=this.createQuery(),y){var p=this;return(0,L.Z)(function*(){if(yield p.load(),!p.capabilities.operations.supportsQuery)throw new d.Z("queryFeatureCount:not-supported","this layer doesn't support queries.");if(!p.url)throw new d.Z("queryFeatureCount:not-supported","this layer has no url.");const F=p.layer?.apiKey;return yield p.queryTask.executeForCount(s,{...y,query:{...p.layer?.customParameters,token:F}})})()}queryFeatures(s=this.createQuery(),y){var p=this;return(0,L.Z)(function*(){if(yield p.load(),!p.capabilities.operations.supportsQuery)throw new d.Z("queryFeatures:not-supported","this layer doesn't support queries.");if(!p.url)throw new d.Z("queryFeatures:not-supported","this layer has no url.");const F=yield p.queryTask.execute(s,{...y,query:{...p.layer?.customParameters,token:p.layer?.apiKey}});if(F?.features)for(const K of F.features)K.sourceLayer=p;return F})()}queryObjectIds(s=this.createQuery(),y){var p=this;return(0,L.Z)(function*(){if(yield p.load(),!p.capabilities.operations.supportsQuery)throw new d.Z("queryObjectIds:not-supported","this layer doesn't support queries.");if(!p.url)throw new d.Z("queryObjectIds:not-supported","this layer has no url.");const F=p.layer?.apiKey;return yield p.queryTask.executeForIds(s,{...y,query:{...p.layer?.customParameters,token:F}})})()}queryRelatedFeatures(s,y){var p=this;return(0,L.Z)(function*(){if(yield p.load(),!p.capabilities.operations.supportsQuery)throw new d.Z("queryRelatedFeatures:not-supported","this layer doesn't support queries.");if(!p.url)throw new d.Z("queryRelatedFeatures:not-supported","this layer has no url.");const F=p.layer?.apiKey;return yield p.queryTask.executeRelationshipQuery(s,{...y,query:{...p.layer?.customParameters,token:F}})})()}queryRelatedFeaturesCount(s,y){var p=this;return(0,L.Z)(function*(){if(yield p.load(),!p.capabilities.operations.supportsQuery)throw new d.Z("queryRelatedFeaturesCount:not-supported","this layer doesn't support queries.");if(!p.capabilities.queryRelated.supportsCount)throw new d.Z("queryRelatedFeaturesCount:not-supported","this layer doesn't support query related counts.");if(!p.url)throw new d.Z("queryRelatedFeaturesCount:not-supported","this layer has no url.");const F=p.layer?.apiKey;return yield p.queryTask.executeRelationshipQueryForCount(s,{...y,query:{...p.layer?.customParameters,token:F}})})()}toExportImageJSON(s){const y={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},p=(0,E._)(s,this.definitionExpression);null!=p&&(y.definitionExpression=p);const F=["renderer","labelingInfo","opacity","labelsVisible"].reduce((se,ue)=>(se[ue]=this.originIdOf(ue),se),{});if(Object.keys(F).some(se=>F[se]>A.s3.SERVICE)){const se=y.drawingInfo={};if(F.renderer>A.s3.SERVICE&&(se.renderer=this.renderer?this.renderer.toJSON():null),F.labelsVisible>A.s3.SERVICE&&(se.showLabels=this.labelsVisible),this.labelsVisible&&F.labelingInfo>A.s3.SERVICE)if(this.labelingInfo){!this.loaded&&this.labelingInfo?.some(de=>!de.labelPlacement)&&_.Z.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let ue=this.labelingInfo;null!=this.geometryType&&(ue=(0,Me.a)(this.labelingInfo,Y.M.toJSON(this.geometryType))),se.showLabels=!0,se.labelingInfo=ue.filter(de=>de.labelPlacement).map(de=>de.toJSON({origin:"service",layer:this.layer}))}else se.showLabels=!1;F.opacity>A.s3.SERVICE&&(se.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(se.renderer)}return y}_assignDefaultSymbolColors(s){this._forEachSimpleMarkerSymbols(s,y=>{y.color||"esriSMSX"!==y.style&&"esriSMSCross"!==y.style||(y.color=y.outline?.color?y.outline.color:[0,0,0,0])})}_forEachSimpleMarkerSymbols(s,y){if(s){const p=("uniqueValueInfos"in s?s.uniqueValueInfos:"classBreakInfos"in s?s.classBreakInfos:null)??[];for(const F of p)ie(F.symbol)&&y(F.symbol);"symbol"in s&&ie(s.symbol)&&y(s.symbol),"defaultSymbol"in s&&ie(s.defaultSymbol)&&y(s.defaultSymbol)}}_setAndNotifyLayer(s,y){const p=this.layer,F=this._get(s);let K,se;switch(s){case"definitionExpression":case"floorInfo":K="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":K="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":K="supportsDynamicLayers",se="supportsModification"}const ue=(0,J.vw)(this).getDefaultOrigin();if("service"!==ue){if(K&&!1===this.layer?.capabilities?.exportMap?.[K])return void this._logLockedError(s,`capability not available 'layer.capabilities.exportMap.${K}'`);if(se&&!1===this.capabilities?.exportMap[se])return void this._logLockedError(s,`capability not available 'capabilities.exportMap.${se}'`)}"source"!==s||"not-loaded"===this.loadStatus?(this._set(s,y),"service"!==ue&&F!==y&&p&&p.emit&&p.emit("sublayer-update",{propertyName:s,target:this})):this._logLockedError(s,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(s,y){y&&(y.forEach(p=>{p.parent=null,p.layer=null}),this.removeAllHandles()),s&&(s.forEach(p=>{p.parent=this,p.layer=this.layer}),this.addHandles([s.on("after-add",({item:p})=>{p.parent=this,p.layer=this.layer}),s.on("after-remove",({item:p})=>{p.parent=null,p.layer=null}),s.on("before-changes",p=>{(this.layer?.capabilities?.exportMap?.supportsSublayersChanges??1)||(_.Z.getLogger(this).error(new d.Z("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),p.preventDefault())})]))}_logLockedError(s,y){const{layer:p,declaredClass:F}=this;_.Z.getLogger(F).error(new d.Z("sublayer:locked",`Property '${String(s)}' can't be changed on Sublayer from the layer '${p?.id}'`,{reason:y,sublayer:this,layer:p}))}_getLayerDomain(s){return this.fieldsIndex.get(s)?.domain??null}};B.test={isMapImageLayerOverridePolicy:s=>s===ae||s===le,isTileImageLayerOverridePolicy:s=>s===ye},(0,P._)([(0,D.Cb)({readOnly:!0})],B.prototype,"capabilities",void 0),(0,P._)([(0,g.r)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],B.prototype,"readCapabilities",null),(0,P._)([(0,D.Cb)()],B.prototype,"defaultPopupTemplate",null),(0,P._)([(0,D.Cb)({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:le}}})],B.prototype,"definitionExpression",null),(0,P._)([(0,D.Cb)({readOnly:!0})],B.prototype,"effectiveScaleRange",null),(0,P._)([(0,g.r)("service","maxScaleRange",["minScale","maxScale"])],B.prototype,"readMaxScaleRange",null),(0,P._)([(0,D.Cb)({type:[me.Z],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],B.prototype,"fields",void 0),(0,P._)([(0,D.Cb)({readOnly:!0})],B.prototype,"fieldsIndex",null),(0,P._)([(0,D.Cb)({type:Pe.Z,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:le},origins:{"web-scene":{read:!1,write:!1}}}})],B.prototype,"floorInfo",null),(0,P._)([(0,D.Cb)({type:ne.Z,json:{read:{source:"layerDefinition.extent"}}})],B.prototype,"fullExtent",void 0),(0,P._)([(0,D.Cb)({type:Y.M.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:Y.M.read}}}}})],B.prototype,"geometryType",void 0),(0,P._)([(0,D.Cb)({type:String})],B.prototype,"globalIdField",void 0),(0,P._)([(0,g.r)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],B.prototype,"readGlobalIdFieldFromService",null),(0,P._)([(0,D.Cb)({type:V.z8,json:{write:{ignoreOrigin:!0}}})],B.prototype,"id",null),(0,P._)([(0,D.Cb)({readOnly:!0})],B.prototype,"isTable",void 0),(0,P._)([(0,g.r)("service","isTable",["type"])],B.prototype,"readIsTable",null),(0,P._)([(0,D.Cb)({value:null,type:[Oe.Z],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:ae}}})],B.prototype,"labelingInfo",null),(0,P._)([(0,U.c)("labelingInfo")],B.prototype,"writeLabelingInfo",null),(0,P._)([(0,D.Cb)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:ae}}})],B.prototype,"labelsVisible",null),(0,P._)([(0,D.Cb)({value:null})],B.prototype,"layer",null),(0,P._)([(0,D.Cb)({type:String,json:{write:{overridePolicy:ye}}})],B.prototype,"layerItemId",void 0),(0,P._)([(0,D.Cb)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:fe}}})],B.prototype,"legendEnabled",void 0),(0,P._)([(0,D.Cb)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],B.prototype,"listMode",null),(0,P._)([(0,D.Cb)({type:Number,value:0,json:{write:{overridePolicy:ae}}})],B.prototype,"minScale",null),(0,P._)([(0,g.r)("minScale",["minScale","layerDefinition.minScale"])],B.prototype,"readMinScale",null),(0,P._)([(0,D.Cb)({type:Number,value:0,json:{write:{overridePolicy:ae}}})],B.prototype,"maxScale",null),(0,P._)([(0,g.r)("maxScale",["maxScale","layerDefinition.maxScale"])],B.prototype,"readMaxScale",null),(0,P._)([(0,D.Cb)()],B.prototype,"objectIdField",void 0),(0,P._)([(0,g.r)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],B.prototype,"readObjectIdFieldFromService",null),(0,P._)([(0,D.Cb)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:ae}}})],B.prototype,"opacity",null),(0,P._)([(0,g.r)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],B.prototype,"readOpacity",null),(0,P._)([(0,U.c)("opacity")],B.prototype,"writeOpacity",null),(0,P._)([(0,D.Cb)({json:{type:V.z8,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:ae}}})],B.prototype,"parent",void 0),(0,P._)([(0,U.c)("parent")],B.prototype,"writeParent",null),(0,P._)([(0,D.Cb)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(s,y)=>!y.disablePopup},write:{target:"disablePopup",overridePolicy:fe,writer(s,y,p){y[p]=!s}}}})],B.prototype,"popupEnabled",void 0),(0,P._)([(0,D.Cb)({type:Q.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:fe}}})],B.prototype,"popupTemplate",void 0),(0,P._)([(0,D.Cb)({readOnly:!0})],B.prototype,"queryTask",null),(0,P._)([(0,D.Cb)({type:[u.Z],readOnly:!0,json:{origins:{service:{read:{source:"layerDefinition.relationships"}}}}})],B.prototype,"relationships",void 0),(0,P._)([(0,D.Cb)({types:$.A,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ae},origins:{"web-scene":{types:$.o,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ae}}}}})],B.prototype,"renderer",null),(0,P._)([(0,D.Cb)({types:{key:"type",base:null,typeMap:{"data-layer":a.n,"map-layer":O.R}},cast(s){if(s){if("mapLayerId"in s)return(0,V.TJ)(O.R,s);if("dataSource"in s)return(0,V.TJ)(a.n,s)}return s},json:{name:"layerDefinition.source",write:{overridePolicy:ae}}})],B.prototype,"source",null),(0,P._)([(0,D.Cb)()],B.prototype,"sourceJSON",void 0),(0,P._)([(0,D.Cb)({type:oe.Z,json:{origins:{service:{read:{source:"layerDefinition.extent.spatialReference"}}}}})],B.prototype,"spatialReference",void 0),(0,P._)([(0,D.Cb)({value:null,json:{type:[V.z8],write:{target:"subLayerIds",allowNull:!0,overridePolicy:ae}}})],B.prototype,"sublayers",null),(0,P._)([(0,j.p)("sublayers")],B.prototype,"castSublayers",null),(0,P._)([(0,U.c)("sublayers")],B.prototype,"writeSublayers",null),(0,P._)([(0,D.Cb)({type:String,json:{name:"name",write:{overridePolicy:fe}}})],B.prototype,"title",void 0),(0,P._)([(0,g.r)("service","title",["name","layerDefinition.name"])],B.prototype,"readTitle",null),(0,P._)([(0,D.Cb)({type:String})],B.prototype,"typeIdField",void 0),(0,P._)([(0,D.Cb)({json:{read:!1},readOnly:!0,value:"sublayer"})],B.prototype,"type",void 0),(0,P._)([(0,g.r)("typeIdField",["layerDefinition.typeIdField"])],B.prototype,"readTypeIdField",null),(0,P._)([(0,D.Cb)({type:[he.Z],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],B.prototype,"types",void 0),(0,P._)([(0,D.Cb)({type:String,json:{name:"layerUrl",write:{overridePolicy:ye}}})],B.prototype,"url",null),(0,P._)([(0,D.Cb)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:ae}}})],B.prototype,"visible",null),(0,P._)([(0,U.c)("visible")],B.prototype,"writeVisible",null),B=re=(0,P._)([(0,x.j)("esri.layers.support.Sublayer")],B);const Se=B},53715:(_e,te,l)=>{l.d(te,{V:()=>v,g:()=>Q});var L=l(15861),P=l(57964),ee=l(79412);function Q(W,Z,N){return w.apply(this,arguments)}function w(){return(w=(0,L.Z)(function*(W,Z,N){let k;try{k=yield createImageBitmap(W)}catch(R){throw new P.Z("request:server",`Unable to load ${Z}`,{url:Z,error:R})}return(0,ee.k_)(N),k})).apply(this,arguments)}function v(W,Z,N,k,R){return T.apply(this,arguments)}function T(){return(T=(0,L.Z)(function*(W,Z,N,k,R){let G;try{G=yield createImageBitmap(W)}catch($){throw new P.Z("request:server",`Unable to load tile ${Z}/${N}/${k}`,{error:$,level:Z,row:N,col:k})}return(0,ee.k_)(R),G})).apply(this,arguments)}},56761:(_e,te,l)=>{l.d(te,{UG:()=>k,UO:()=>q,YI:()=>$,dI:()=>H,el:()=>m,hV:()=>G,z7:()=>R});var L=l(72578);const P="__begin__",ee="__end__",Q=new RegExp(P,"ig"),w=new RegExp(ee,"ig"),v=new RegExp("^"+P,"i"),T=new RegExp(ee+"$","i"),W='"',Z=W+" + ",N=" + "+W;function k(_){return _.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function R(_){return _.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function G(_){const c={expression:"",type:"none"};return _.labelExpressionInfo?_.labelExpressionInfo.value?(c.expression=_.labelExpressionInfo.value,c.type="conventional"):_.labelExpressionInfo.expression&&(c.expression=_.labelExpressionInfo.expression,c.type="arcade"):null!=_.labelExpression&&(c.expression=k(_.labelExpression),c.type="conventional"),c}function $(_){const c=G(_);if(!c)return null;switch(c.type){case"conventional":return H(c.expression);case"arcade":return c.expression}return null}function q(_){const c=G(_);if(!c)return null;switch(c.type){case"conventional":return function d(_){return _?.match(I)?.[1].trim()||null}(c.expression);case"arcade":return m(c.expression)}return null}function H(_){let c;return _?(c=(0,L.gx)(_,E=>P+'$feature["'+E+'"]'+ee),c=v.test(c)?c.replace(v,""):W+c,c=T.test(c)?c.replace(T,""):c+W,c=c.replaceAll(Q,Z).replaceAll(w,N)):c='""',c}const I=/^\s*\{([^}]+)\}\s*$/i,h=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,f=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,M=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function m(_){if(!_)return null;let c=h.exec(_)||f.exec(_);return c?c[1]||c[3]:(c=M.exec(_),c?c[2]:null)}},45859:(_e,te,l)=>{l.d(te,{FN:()=>ee,QV:()=>P,ac:()=>w});var L=l(60301);function P(v,T,W){return T.flatten(({sublayers:N})=>N).length!==v.length||!!v.some(N=>N.originIdOf("minScale")>W||N.originIdOf("maxScale")>W||N.originIdOf("renderer")>W||N.originIdOf("labelingInfo")>W||N.originIdOf("opacity")>W||N.originIdOf("labelsVisible")>W||N.originIdOf("source")>W)||!Q(v,T)}function ee(v,T,W){return!!v.some(Z=>{const N=Z.source,k=!N||"map-layer"===N.type&&N.mapLayerId===Z.id&&(null==N.gdbVersion||N.gdbVersion===W);return Z.commitProperty("renderer"),Z.commitProperty("labelingInfo"),Z.commitProperty("opacity"),Z.commitProperty("labelsVisible"),!k||Z.originIdOf("renderer")>L.s3.SERVICE||Z.originIdOf("labelingInfo")>L.s3.SERVICE||Z.originIdOf("opacity")>L.s3.SERVICE||Z.originIdOf("labelsVisible")>L.s3.SERVICE})||!Q(v,T)}function Q(v,T){if(!v?.length||null==T)return!0;const W=T.slice().reverse().flatten(({sublayers:k})=>k&&k.toArray().reverse()).map(k=>k.id).toArray();if(v.length>W.length)return!1;let Z=0;const N=W.length;for(const{id:k}of v){for(;Z<N&&W[Z]!==k;)Z++;if(Z>=N)return!1}return!0}function w(v){return!!v&&v.some(T=>null!=T.minScale||null!=T.layerDefinition?.minScale)}},96043:(_e,te,l)=>{l.d(te,{AJ:()=>T,If:()=>N,k0:()=>v,uI:()=>Z,ul:()=>w,wx:()=>k});var L=l(55117),P=l(55768),ee=l(5710),Q=l(23515);const w=2.4;function v(R){return(0,P.Wz)(R*w)}function T(R){return(0,P.F2)(R)/w}function W(R,G,$,q){let{color:H,ratio:I}=G,{color:d,ratio:h}=$;h===I&&(1===h?I-=1e-6:h+=1e-6);const f=(0,L.uZ)((q-I)/(h-I),0,1);(0,ee.l)(R,H.toArray(),d.toArray(),f)}function Z(R){const $=new Uint8ClampedArray(2048);if((R=R.filter(({ratio:h})=>h>=0&&h<=1).sort((h,f)=>h.ratio-f.ratio).map(({color:h,ratio:f})=>({color:h,ratio:Math.max(f,.001)}))).length<1)return $;let q=R[0],H=R[0],I=1;const d=(0,Q.Ue)();for(let h=0;h<512;h++){const f=(h+.5)/512;for(;f>H.ratio&&I<R.length;)q=H,H=R[I++];W(d,q,H,f),$.set(d,4*h)}return $}function N(R,G,$){const q=Math.sqrt(R**2+G**2)/$;return q>1?0:3/(Math.PI*$**2)*(1-q**2)**2}function k(R){return"function"==typeof R?R:R?G=>+G[R]:()=>1}},8295:(_e,te,l)=>{l.d(te,{p:()=>P});var L=l(53456);function P(ee,Q,w){if(!w?.features||!w.hasZ)return;const v=(0,L.k)(w.geometryType,Q,ee.outSpatialReference);if(null!=v)for(const T of w.features)v(T.geometry)}},93792:(_e,te,l)=>{l.d(te,{Z:()=>h});var H,L=l(50484),P=l(2189),ee=l(35458),Q=l(84303),w=l(89317),v=l(34222),T=l(80543),N=(l(14007),l(4703),l(62185)),k=l(10141),R=l(7547),G=l(43814),$=l(40637),q=l(81247);const I=new Q.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let d=H=class extends w.wq{constructor(f){super(f),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(f,M){const m=G.Z.fromJSON(M.spatialReference),_=[];for(let c=0;c<f.length;c++){const E=f[c],b=ee.Z.fromJSON(E),D=E.geometry?.spatialReference;null==b.geometry||D||(b.geometry.spatialReference=m);const j=E.aggregateGeometries,g=b.aggregateGeometries;if(j&&null!=g)for(const x in g){const U=g[x],V=j[x],A=V?.spatialReference;null==U||A||(U.spatialReference=m)}_.push(b)}return _}writeGeometryType(f,M,m,_){if(f)return void I.write(f,M,m,_);const{features:c}=this;if(c)for(const E of c)if(null!=E?.geometry)return void I.write(E.geometry.type,M,m,_)}readQueryGeometry(f,M){if(!f)return null;const m=!!f.spatialReference,_=(0,$.im)(f);return _&&!m&&M.spatialReference&&(_.spatialReference=G.Z.fromJSON(M.spatialReference)),_}writeSpatialReference(f,M){if(f)return void(M.spatialReference=f.toJSON());const{features:m}=this;if(m)for(const _ of m)if(_&&null!=_.geometry&&_.geometry.spatialReference)return void(M.spatialReference=_.geometry.spatialReference.toJSON())}clone(){return new H(this.cloneProperties())}cloneProperties(){return(0,v.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(f){const M=this.write();if(M.features&&Array.isArray(f)&&f.length>0)for(let m=0;m<M.features.length;m++){const _=M.features[m];if(_.geometry){const c=f?.[m];_.geometry=c?.toJSON()||_.geometry}}return M}quantize(f){const{scale:[M,m],translate:[_,c]}=f,D=this.features,j=this._getQuantizationFunction(this.geometryType,g=>Math.round((g-_)/M),g=>Math.round((c-g)/m));for(let g=0,x=D.length;g<x;g++)j?.(D[g].geometry)||(D.splice(g,1),g--,x--);return this.transform=f,this}unquantize(){const{geometryType:f,features:M,transform:m}=this;if(!m)return this;const{translate:[_,c],scale:[E,b]}=m;let g=null,x=null;if(this.hasZ&&null!=m?.scale?.[2]){const{translate:[,,V],scale:[,,A]}=m;g=J=>J*A+V}if(this.hasM&&null!=m?.scale?.[3]){const{translate:[,,,V],scale:[,,,A]}=m;x=J=>null==J?J:J*A+V}const U=this._getHydrationFunction(f,V=>V*E+_,V=>c-V*b,g,x);for(const{geometry:V}of M)null!=V&&U&&U(V);return this.transform=null,this}_quantizePoints(f,M,m){let _,c;const E=[];for(let b=0,D=f.length;b<D;b++){const j=f[b];if(b>0){const g=M(j[0]),x=m(j[1]);g===_&&x===c||(E.push([g-_,x-c]),_=g,c=x)}else _=M(j[0]),c=m(j[1]),E.push([_,c])}return E.length>0?E:null}_getQuantizationFunction(f,M,m){return"point"===f?_=>(_.x=M(_.x),_.y=m(_.y),_):"polyline"===f||"polygon"===f?_=>{const c=(0,$.oU)(_)?_.rings:_.paths,E=[];for(let b=0,D=c.length;b<D;b++){const g=this._quantizePoints(c[b],M,m);g&&E.push(g)}return E.length>0?((0,$.oU)(_)?_.rings=E:_.paths=E,_):null}:"multipoint"===f?_=>{const c=this._quantizePoints(_.points,M,m);return c&&c.length>0?(_.points=c,_):null}:"extent"===f?_=>_:null}_getHydrationFunction(f,M,m,_,c){return"point"===f?E=>{E.x=M(E.x),E.y=m(E.y),_&&(E.z=_(E.z))}:"polyline"===f||"polygon"===f?E=>{const b=(0,$.oU)(E)?E.rings:E.paths;let D,j;for(let g=0,x=b.length;g<x;g++){const U=b[g];for(let V=0,A=U.length;V<A;V++){const J=U[V];V>0?(D+=J[0],j+=J[1]):(D=J[0],j=J[1]),J[0]=M(D),J[1]=m(j)}}if(_&&c)for(let g=0,x=b.length;g<x;g++){const U=b[g];for(let V=0,A=U.length;V<A;V++){const J=U[V];J[2]=_(J[2]),J[3]=c(J[3])}}else if(_)for(let g=0,x=b.length;g<x;g++){const U=b[g];for(let V=0,A=U.length;V<A;V++){const J=U[V];J[2]=_(J[2])}}else if(c)for(let g=0,x=b.length;g<x;g++){const U=b[g];for(let V=0,A=U.length;V<A;V++){const J=U[V];J[2]=c(J[2])}}}:"extent"===f?E=>{E.xmin=M(E.xmin),E.ymin=m(E.ymin),E.xmax=M(E.xmax),E.ymax=m(E.ymax),_&&null!=E.zmax&&null!=E.zmin&&(E.zmax=_(E.zmax),E.zmin=_(E.zmin)),c&&null!=E.mmax&&null!=E.mmin&&(E.mmax=c(E.mmax),E.mmin=c(E.mmin))}:"multipoint"===f?E=>{const b=E.points;let D,j;for(let g=0,x=b.length;g<x;g++){const U=b[g];g>0?(D+=U[0],j+=U[1]):(D=U[0],j=U[1]),U[0]=M(D),U[1]=m(j)}if(_&&c)for(let g=0,x=b.length;g<x;g++){const U=b[g];U[2]=_(U[2]),U[3]=c(U[3])}else if(_)for(let g=0,x=b.length;g<x;g++){const U=b[g];U[2]=_(U[2])}else if(c)for(let g=0,x=b.length;g<x;g++){const U=b[g];U[2]=c(U[2])}}:null}};(0,L._)([(0,T.Cb)({type:String,json:{write:!0}})],d.prototype,"displayFieldName",void 0),(0,L._)([(0,T.Cb)({type:Boolean,json:{write:{overridePolicy:f=>({enabled:f})}}})],d.prototype,"exceededTransferLimit",void 0),(0,L._)([(0,T.Cb)({type:[ee.Z],json:{write:!0}})],d.prototype,"features",void 0),(0,L._)([(0,N.r)("features")],d.prototype,"readFeatures",null),(0,L._)([(0,T.Cb)({type:[q.Z],json:{write:!0}})],d.prototype,"fields",void 0),(0,L._)([(0,T.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:I.read}}})],d.prototype,"geometryType",void 0),(0,L._)([(0,R.c)("geometryType")],d.prototype,"writeGeometryType",null),(0,L._)([(0,T.Cb)({type:Boolean,json:{write:{overridePolicy:f=>({enabled:f})}}})],d.prototype,"hasM",void 0),(0,L._)([(0,T.Cb)({type:Boolean,json:{write:{overridePolicy:f=>({enabled:f})}}})],d.prototype,"hasZ",void 0),(0,L._)([(0,T.Cb)({types:P.qM,json:{write:!0}})],d.prototype,"queryGeometry",void 0),(0,L._)([(0,N.r)("queryGeometry")],d.prototype,"readQueryGeometry",null),(0,L._)([(0,T.Cb)({type:G.Z,json:{write:!0}})],d.prototype,"spatialReference",void 0),(0,L._)([(0,R.c)("spatialReference")],d.prototype,"writeSpatialReference",null),(0,L._)([(0,T.Cb)({json:{write:!0}})],d.prototype,"transform",void 0),d=H=(0,L._)([(0,k.j)("esri.rest.support.FeatureSet")],d),d.prototype.toJSON.isDefaultToJSON=!0;const h=d}}]);