"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[8691],{96043:(X,$,x)=>{x.d($,{AJ:()=>O,If:()=>w,k0:()=>Q,uI:()=>G,ul:()=>W,wx:()=>q});var k=x(55117),A=x(55768),N=x(5710),j=x(23515);const W=2.4;function Q(b){return(0,A.Wz)(b*W)}function O(b){return(0,A.F2)(b)/W}function K(b,L,P,z){let{color:i,ratio:s}=L,{color:a,ratio:l}=P;l===s&&(1===l?s-=1e-6:l+=1e-6);const _=(0,k.uZ)((z-s)/(l-s),0,1);(0,N.l)(b,i.toArray(),a.toArray(),_)}function G(b){const P=new Uint8ClampedArray(2048);if((b=b.filter(({ratio:l})=>l>=0&&l<=1).sort((l,_)=>l.ratio-_.ratio).map(({color:l,ratio:_})=>({color:l,ratio:Math.max(_,.001)}))).length<1)return P;let z=b[0],i=b[0],s=1;const a=(0,j.Ue)();for(let l=0;l<512;l++){const _=(l+.5)/512;for(;_>i.ratio&&s<b.length;)z=i,i=b[s++];K(a,z,i,_),P.set(a,4*l)}return P}function w(b,L,P){const z=Math.sqrt(b**2+L**2)/P;return z>1?0:3/(Math.PI*P**2)*(1-z**2)**2}function q(b){return"function"==typeof b?b:b?L=>+L[b]:()=>1}},97922:(X,$,x)=>{x.d($,{Z:()=>L});var k=x(50484),A=x(84303),N=x(89317),j=x(80543),K=(x(14007),x(4703),x(65311),x(21070)),G=x(10141);const w=new A.X({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),q=new A.X({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let b=class extends N.wq{constructor(P){super(P),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(P){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",P)}set definedInterval(P){"defined-interval"===this.classificationMethod&&this._set("definedInterval",P)}};(0,k._)([(0,K.J)({classBreaksDef:"class-breaks-definition"})],b.prototype,"type",void 0),(0,k._)([(0,j.Cb)({json:{write:!0}})],b.prototype,"breakCount",void 0),(0,k._)([(0,j.Cb)({json:{write:!0}})],b.prototype,"classificationField",void 0),(0,k._)([(0,j.Cb)({type:String,json:{read:w.read,write:w.write}})],b.prototype,"classificationMethod",void 0),(0,k._)([(0,j.Cb)({json:{write:!0}})],b.prototype,"normalizationField",void 0),(0,k._)([(0,j.Cb)({json:{read:q.read,write:q.write}})],b.prototype,"normalizationType",void 0),(0,k._)([(0,j.Cb)({value:null,json:{write:!0}})],b.prototype,"standardDeviationInterval",null),(0,k._)([(0,j.Cb)({value:null,json:{write:!0}})],b.prototype,"definedInterval",null),b=(0,k._)([(0,G.j)("esri.rest.support.ClassBreaksDefinition")],b);const L=b},93332:(X,$,x)=>{x.d($,{k:()=>W});var k=x(4703);const A=()=>k.Z.getLogger("esri.rest.support.generateRendererUtils");function N(i,s){return Number(i.toFixed(s))}function W(i){const{normalizationTotal:s}=i;return{classBreaks:Q(i),normalizationTotal:s}}function Q(i){const s=i.definition,{classificationMethod:a,normalizationType:l,definedInterval:_}=s,h=s.breakCount??1,v=[];let c=i.values;if(0===c.length)return[];c=c.sort((f,V)=>f-V);const M=c[0],D=c[c.length-1];if("equal-interval"===a)if(c.length>=h){const f=(D-M)/h;let V=M;for(let r=1;r<h;r++){const n=N(M+r*f,6);v.push({minValue:V,maxValue:n,label:O(V,n,l)}),V=n}v.push({minValue:V,maxValue:D,label:O(V,D,l)})}else c.forEach(f=>{v.push({minValue:f,maxValue:f,label:O(f,f,l)})});else if("natural-breaks"===a){const f=function K(i){const s=[],a=[];let l=Number.MIN_VALUE,_=1,h=-1;for(let v=0;v<i.length;v++){const c=i[v];c===l?(_++,a[h]=_):null!==c&&(s.push(c),l=c,_=1,a.push(_),h++)}return{uniqueValues:s,valueFrequency:a}}(c),r=function G(i,s,a){const l=i.length,_=[];a>l&&(a=l);for(let v=0;v<a;v++)_.push(Math.round(v*l/a-1));_.push(l-1);let h=w(_,i,s,a);return function q(i,s,a,l,_,h){let v=0,c=0,M=0,D=0,f=!0;for(let V=0;V<2&&f;V++){0===V&&(f=!1);for(let r=0;r<h-1;r++)for(;a[r+1]+1!==a[r+2];){a[r+1]=a[r+1]+1;const n=z(r,a,l,_);M=n.sbMean,v=n.sbSdcm;const m=z(r+1,a,l,_);if(D=m.sbMean,c=m.sbSdcm,!(v+c<s[r]+s[r+1])){a[r+1]=a[r+1]-1;break}s[r]=v,s[r+1]=c,i[r]=M,i[r+1]=D,f=!0}for(let r=h-1;r>0;r--)for(;a[r]!==a[r-1]+1;){a[r]=a[r]-1;const n=z(r-1,a,l,_);M=n.sbMean,v=n.sbSdcm;const m=z(r,a,l,_);if(D=m.sbMean,c=m.sbSdcm,!(v+c<s[r-1]+s[r])){a[r]=a[r]+1;break}s[r-1]=v,s[r]=c,i[r-1]=M,i[r]=D,f=!0}}return f}(h.mean,h.sdcm,_,i,s,a)&&(h=w(_,i,s,a)),_}(f.uniqueValues,i.valueFrequency||f.valueFrequency,h);let n=M;for(let m=1;m<h;m++)if(f.uniqueValues.length>m){const S=N(f.uniqueValues[r[m]],6);v.push({minValue:n,maxValue:S,label:O(n,S,l)}),n=S}v.push({minValue:n,maxValue:D,label:O(n,D,l)})}else if("quantile"===a)if(c.length>=h&&M!==D){let f=M,V=Math.ceil(c.length/h),r=0;for(let n=1;n<h;n++){let m=V+r-1;m>c.length&&(m=c.length-1),m<0&&(m=0),v.push({minValue:f,maxValue:c[m],label:O(f,c[m],l)}),f=c[m],r+=V,V=Math.ceil((c.length-r)/(h-n))}v.push({minValue:f,maxValue:D,label:O(f,D,l)})}else{let f=-1;for(let V=0;V<c.length;V++){const r=c[V];r!==f&&(f=r,v.push({minValue:f,maxValue:r,label:O(f,r,l)}),f=r)}}else if("standard-deviation"===a){const f=function L(i){let s=0;for(let a=0;a<i.length;a++)s+=i[a];return s/=i.length,s}(c),V=function P(i,s){let a=0;for(let l=0;l<i.length;l++){const _=i[l];a+=(_-s)*(_-s)}return a/=i.length,Math.sqrt(a)}(c,f);if(0===V)v.push({minValue:c[0],maxValue:c[0],label:O(c[0],c[0],l)});else{const r=function b(i,s,a,l,_){let h=Math.max(l-i,s-l)/_/a;return h=h>=1?1:h>=.5?.5:.25,h}(M,D,h,f,V)*V;let n=0,m=M;for(let R=h;R>=1;R--){const Z=N(f-(R-.5)*r,6);v.push({minValue:m,maxValue:Z,label:O(m,Z,l)}),m=Z,n++}let S=N(f+.5*r,6);v.push({minValue:m,maxValue:S,label:O(m,S,l)}),m=S,n++;for(let R=1;R<=h;R++)S=n===2*h?D:N(f+(R+.5)*r,6),v.push({minValue:m,maxValue:S,label:O(m,S,l)}),m=S,n++}}else if("defined-interval"===a){if(!_)return v;const f=c[0],V=c[c.length-1],r=Math.ceil((V-f)/_);let n=f;for(let m=1;m<r;m++){const S=N(f+m*_,6);v.push({minValue:n,maxValue:S,label:O(n,S,l)}),n=S}v.push({minValue:n,maxValue:V,label:O(n,V,l)})}return v}function O(i,s,a){let l=null;return l=i===s?a&&"percent-of-total"===a?i+"%":i.toString():a&&"percent-of-total"===a?i+"% - "+s+"%":i+" - "+s,l}function w(i,s,a,l){let _=[],h=[],v=[],c=0;const M=[],D=[];for(let n=0;n<l;n++){const m=z(n,i,s,a);M.push(m.sbMean),D.push(m.sbSdcm),c+=D[n]}let f,V=c,r=!0;for(;r||c<V;){r=!1,_=[];for(let n=0;n<l;n++)_.push(i[n]);for(let n=0;n<l;n++)for(let m=i[n]+1;m<=i[n+1];m++)if(f=s[m],n>0&&m!==i[n+1]&&Math.abs(f-M[n])>Math.abs(f-M[n-1]))i[n]=m;else if(n<l-1&&i[n]!==m-1&&Math.abs(f-M[n])>Math.abs(f-M[n+1])){i[n+1]=m-1;break}V=c,c=0,h=[],v=[];for(let n=0;n<l;n++){h.push(M[n]),v.push(D[n]);const m=z(n,i,s,a);M[n]=m.sbMean,D[n]=m.sbSdcm,c+=D[n]}}if(c>V){for(let n=0;n<l;n++)i[n]=_[n],M[n]=h[n],D[n]=v[n];c=V}return{mean:M,sdcm:D}}function z(i,s,a,l){let _=0,h=0;for(let M=s[i]+1;M<=s[i+1];M++){const D=l[M];_+=a[M]*D,h+=D}h<=0&&A().warn("Exception in Natural Breaks calculation");const v=_/h;let c=0;for(let M=s[i]+1;M<=s[i+1];M++)c+=l[M]*(a[M]-v)**2;return{sbMean:v,sbSdcm:c}}},46169:(X,$,x)=>{x.d($,{DL:()=>lt,F_:()=>S,G2:()=>Y,H0:()=>P,Lq:()=>s,Qm:()=>H,S5:()=>L,XL:()=>i,eT:()=>R,fk:()=>tt,i5:()=>z,oF:()=>at,wk:()=>b});var k=x(97922),A=x(93332);const N="<Null>",j="equal-interval",W=1,Q=5,O=10,K=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,G=new Set(["esriFieldTypeDate","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeOID","esriFieldTypeBigInteger"]),w=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),q=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function b(t){return null==t||"string"==typeof t&&!t?N:t}function L(t){return!(null!=t.normalizationField||null!=t.normalizationType||null!=t.minValue||null!=t.maxValue||t.sqlExpression&&t.supportsSQLExpression)}function P(t){const e=t.returnDistinct?[...new Set(t.values)]:t.values,o=e.filter(p=>null!=p).sort(),u=o.length,d={count:u,min:o[0],max:o[u-1]};return t.supportsNullCount&&(d.nullcount=e.length-u),t.percentileParams&&(d.median=i(e,t.percentileParams)),d}function z(t){const{values:e,useSampleStdDev:o,supportsNullCount:u}=t;let d=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,g=null,T=null,y=null,F=null,E=0;const B=null==t.minValue?-1/0:t.minValue,I=null==t.maxValue?1/0:t.maxValue;for(const C of e)Number.isFinite(C)?C>=B&&C<=I&&(g=null===g?C:g+C,d=Math.min(d,C),p=Math.max(p,C),E++):"string"==typeof C&&E++;if(E&&null!=g){T=g/E;let C=0;for(const J of e)Number.isFinite(J)&&J>=B&&J<=I&&(C+=(J-T)**2);F=o?E>1?C/(E-1):0:E>0?C/E:0,y=Math.sqrt(F)}else d=null,p=null;const U={avg:T,count:E,max:p,min:d,stddev:y,sum:g,variance:F};return u&&(U.nullcount=e.length-E),t.percentileParams&&(U.median=i(e,t.percentileParams)),U}function i(t,e){const{fieldType:o,value:u,orderBy:d,isDiscrete:p}=e,g=s(o,"desc"===d);if(0===(t=[...t].filter(U=>null!=U).sort((U,C)=>g(U,C))).length)return null;if(u<=0)return t[0];if(u>=1)return t[t.length-1];const T=(t.length-1)*u,y=Math.floor(T),F=y+1,E=T%1,B=t[y],I=t[F];return F>=t.length||p||"string"==typeof B||"string"==typeof I?B:B*(1-E)+I*E}function s(t,e){if(t){if(G.has(t))return n(e);if(w.has(t))return f(e,!1);if("esriFieldTypeTimestampOffset"===t)return function c(t){return t?v:h}(e);const p=f(e,!0);if("esriFieldTypeString"===t)return p;if("esriFieldTypeGUID"===t||"esriFieldTypeGlobalID"===t)return(g,T)=>p(m(g),m(T))}const o=e?1:-1,u=n(e),d=f(e,!0);return(p,g)=>"number"==typeof p&&"number"==typeof g?u(p,g):"string"==typeof p&&"string"==typeof g?d(p,g):o}const a=(t,e)=>null==t?null==e?0:1:null==e?-1:null,l=(t,e)=>null==t?null==e?0:-1:null==e?1:null,h=(t,e)=>l(t,e)??(t===e?0:new Date(t).getTime()-new Date(e).getTime()),v=(t,e)=>a(t,e)??(t===e?0:new Date(e).getTime()-new Date(t).getTime()),M=(t,e)=>l(t,e)??(t===e?0:t<e?-1:1),D=(t,e)=>a(t,e)??(t===e?0:t<e?1:-1);function f(t,e){if(!e)return t?D:M;const o=function _(t){return t?a:l}(t);return t?(u,d)=>o(u,d)??((u=u.toUpperCase())>(d=d.toUpperCase())?-1:u<d?1:0):(u,d)=>o(u,d)??((u=u.toUpperCase())<(d=d.toUpperCase())?-1:u>d?1:0)}const V=(t,e)=>a(t,e)??e-t,r=(t,e)=>l(t,e)??t-e;function n(t){return t?V:r}function m(t){return t.substr(24,12)+t.substr(19,4)+t.substr(16,2)+t.substr(14,2)+t.substr(11,2)+t.substr(9,2)+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)+t.substr(0,2)}function S(t,e){let o;for(o in t)q.includes(o)&&(Number.isFinite(t[o])||(t[o]=null));return e&&["avg","stddev","variance"].forEach(u=>{null!=t[u]&&(t[u]=Math.ceil(t[u]??0))}),t}function R(t){const e={};for(let o of t)(null==o||"string"==typeof o&&""===o.trim())&&(o=null),null==e[o]?e[o]={count:1,data:o}:e[o].count++;return{count:e}}function Z(t){return"coded-value"!==t?.type?[]:t.codedValues.map(e=>e.code)}function H(t,e,o,u){const d=t.count,p=[];if(o&&e){const g=[],T=Z(e[0]);for(const y of T)if(e[1]){const F=Z(e[1]);for(const E of F)if(e[2]){const B=Z(e[2]);for(const I of B)g.push(`${b(y)}${u}${b(E)}${u}${b(I)}`)}else g.push(`${b(y)}${u}${b(E)}`)}else g.push(y);for(const y of g)d.hasOwnProperty(y)||(d[y]={data:y,count:0})}for(const g in d){const T=d[g];p.push({value:T.data,count:T.count,label:T.label})}return{uniqueValueInfos:p}}function tt(t,e,o,u){let d=null;switch(e){case"log":0!==t&&(d=Math.log(t)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(u)&&0!==u&&(d=t/u*100);break;case"field":Number.isFinite(o)&&0!==o&&(d=t/o);break;case"natural-log":t>0&&(d=Math.log(t));break;case"square-root":t>0&&(d=t**.5)}return d}function Y(t,e){const o=function nt(t){const{breakCount:e,field:o,normalizationField:u,normalizationType:d}=t,p=t.classificationMethod||j;return new k.Z({breakCount:e,classificationField:o,classificationMethod:p,normalizationField:"field"===d?u:void 0,normalizationType:d,standardDeviationInterval:"standard-deviation"===p?t.standardDeviationInterval||W:void 0})}({field:e.field,normalizationType:e.normalizationType,normalizationField:e.normalizationField,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,breakCount:e.numClasses||Q});return t=function et(t,e,o){const u=e??-1/0,d=o??1/0;return t.filter(p=>Number.isFinite(p)&&p>=u&&p<=d)}(t,e.minValue,e.maxValue),(0,A.k)({definition:o,values:t,normalizationTotal:e.normalizationTotal})}function lt(t,e){let o=t.classBreaks;const u=o.length,d=o[0]?.minValue,p=o[u-1]?.maxValue,g="standard-deviation"===e,T=K;return o=o.map(y=>{const F=y.label,E={minValue:y.minValue,maxValue:y.maxValue,label:F};if(g&&F){const B=F.match(T),I=B?.map(U=>+U.trim())??[];2===I.length?(E.minStdDev=I[0],E.maxStdDev=I[1],I[0]<0&&I[1]>0&&(E.hasAvg=!0)):1===I.length&&(F.includes("<")?(E.minStdDev=null,E.maxStdDev=I[0]):F.includes(">")&&(E.minStdDev=I[0],E.maxStdDev=null))}return E}),{minValue:d,maxValue:p,classBreakInfos:o,normalizationTotal:t.normalizationTotal}}function at(t,e){const o=function it(t,e){const{field:o,classificationMethod:u,standardDeviationInterval:d,normalizationType:p,normalizationField:g,normalizationTotal:T,minValue:y,maxValue:F}=e,E=e.numBins||O;let B=null,I=null,U=null;if(u&&"equal-interval"!==u||p){const{classBreaks:C}=Y(t,{field:o,normalizationType:p,normalizationField:g,normalizationTotal:T,classificationMethod:u,standardDeviationInterval:d,minValue:y,maxValue:F,numClasses:E});B=C[0].minValue,I=C[C.length-1].maxValue,U=C.map(J=>[J.minValue,J.maxValue])}else{if(null!=y&&null!=F)B=y,I=F;else{const C=z({values:t,minValue:y,maxValue:F,useSampleStdDev:!p,supportsNullCount:L({normalizationType:p,normalizationField:g,minValue:y,maxValue:F})});B=C.min??null,I=C.max??null}U=function rt(t,e,o){const u=(e-t)/o,d=[];let p,g=t;for(let T=1;T<=o;T++)p=g+u,p=Number(p.toFixed(16)),d.push([g,T===o?e:p]),g=p;return d}(B??0,I??0,E)}return{min:B,max:I,intervals:U}}(t,e);if(null==o.min&&null==o.max)return{bins:[],minValue:o.min,maxValue:o.max,normalizationTotal:e.normalizationTotal};const u=o.intervals,d=o.min??0,p=o.max??0,g=u.map((T,y)=>({minValue:u[y][0],maxValue:u[y][1],count:0}));for(const T of t)if(null!=T&&T>=d&&T<=p){const y=ot(u,T);y>-1&&g[y].count++}return{bins:g,minValue:d,maxValue:p,normalizationTotal:e.normalizationTotal}}function ot(t,e){let o=-1;for(let u=t.length-1;u>=0;u--)if(e>=t[u][0]){o=u;break}return o}}}]);