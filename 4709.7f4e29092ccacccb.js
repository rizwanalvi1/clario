"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[4709,9454,318,5398],{52540:(re,H,i)=>{i.d(H,{z:()=>y});var z=i(39921);class y{constructor(x,F){this._storage=new z.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=x,this._storage.register(this),F&&this._storage.registerRemoveFunc("",F)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(x,F,P=1){this._storage.put(this,x,F,P,1)}pop(x){return this._storage.pop(this,x)}get(x){return this._storage.get(this,x)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(x){this._storage.maxSize=x}resetHitRate(){}}},39921:(re,H,i)=>{i.d(H,{WJ:()=>P,Xq:()=>F});var x,K,z=i(43029);(K=x||(x={}))[K.ALL=0]="ALL",K[K.SOME=1]="SOME";class F{constructor(h,d,p){this.name=h,this._storage=d,this.id=L+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),p&&(this._storage.registerRemoveFunc(this.id,p),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(h){return this._storage.getSize(this,h)}resetHitRate(){this._hit=this._miss=0}put(h,d,p,R=0){this._storage.put(this,h,d,p,R)}pop(h){const d=this._storage.pop(this,h);return void 0===d?++this._miss:++this._hit,d}get(h){const d=this._storage.get(this,h);return void 0===d?++this._miss:++this._hit,d}peek(h){return this._storage.peek(this,h)}updateSize(h,d,p){this._storage.updateSize(this,h,d,p)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class P{get size(){return this._size}constructor(h=10485760){this._maxSize=h,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new z.Z,this._users=new z.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(h){this._users.push(h)}deregister(h){this._users.removeUnordered(h)}registerRemoveFunc(h,d){this._removeFuncs.push([h,d])}deregisterRemoveFunc(h){this._removeFuncs.filterInPlace(d=>d[0]!==h)}get maxSize(){return this._maxSize}set maxSize(h){this._maxSize=Math.max(h,-1),this._checkSize()}getSize(h,d){return this._db.get(h.id+d)?.size??0}put(h,d,p,R,j){const S=this._db.get(d=h.id+d);if(S&&(this._size-=S.size,h.size-=S.size,this._db.delete(d),S.entry!==p&&this._notifyRemove(d,S.entry,S.size,x.ALL)),R>this._maxSize)return void this._notifyRemove(d,p,R,x.ALL);if(void 0===p)return void console.warn("Refusing to cache undefined entry ");if(!R||R<0)return console.warn(`Refusing to cache entry with size ${R} for key ${d}`),void this._notifyRemove(d,p,0,x.ALL);const E=1+Math.max(j,-4)- -3;this._db.set(d,new B(p,R,E)),this._size+=R,h.size+=R,this._checkSize()}updateSize(h,d,p,R){const j=this._db.get(d=h.id+d);if(j&&j.entry===p){for(this._size-=j.size,h.size-=j.size;R>this._maxSize;){const S=this._notifyRemove(d,p,R,x.SOME);if(!(null!=S&&S>0))return void this._db.delete(d);R=S}j.size=R,this._size+=R,h.size+=R,this._checkSize()}}pop(h,d){const p=this._db.get(d=h.id+d);if(p)return this._size-=p.size,h.size-=p.size,this._db.delete(d),++this._hit,p.entry;++this._miss}get(h,d){const p=this._db.get(d=h.id+d);if(void 0!==p)return this._db.delete(d),p.lives=p.lifetime,this._db.set(d,p),++this._hit,p.entry;++this._miss}peek(h,d){const p=this._db.get(h.id+d);return p?++this._hit:++this._miss,p?.entry}get performanceInfo(){const h={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},d={},p=new Array;this._db.forEach((S,E)=>{const u=S.lifetime;p[u]=(p[u]||0)+S.size,this._users.forAll(f=>{const{id:c,name:D}=f;E.startsWith(c)&&(d[D]=(d[D]||0)+S.size)})});const R={};this._users.forAll(S=>{const E=S.name;"hitRate"in S&&"number"==typeof S.hitRate&&!isNaN(S.hitRate)&&S.hitRate>0?(d[E]=d[E]||0,R[E]=Math.round(100*S.hitRate)+"%"):R[E]="0%"});const j=Object.keys(d);j.sort((S,E)=>d[E]-d[S]),j.forEach(S=>h[S]=Math.round(d[S]/2**20)+"MB / "+R[S]);for(let S=p.length-1;S>=0;--S){const E=p[S];E&&(h["Priority "+(S+-3-1)]=Math.round(E/this._size*100)+"%")}return h}resetStats(){this._hit=this._miss=0,this._users.forAll(h=>h.resetHitRate())}clear(h){const d=h.id;this._db.forEach((p,R)=>{R.startsWith(d)&&(this._size-=p.size,this._db.delete(R),this._notifyRemove(R,p.entry,p.size,x.ALL))}),h.size=0}clearAll(){this._db.forEach((h,d)=>this._notifyRemove(d,h.entry,h.size,x.ALL)),this._users.forAll(h=>h.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(h,d,p,R){let j;return this._removeFuncs.some(S=>{if(h.startsWith(S[0])){const E=S[1](d,R,p);return"number"==typeof E&&(j=E),!0}return!1}),j}_checkSize(){this._users.forAll(h=>this._checkSizeLimits(h)),this._checkSizeLimits()}_checkSizeLimits(h){const d=h??this;if(d.maxSize<0||d.size<=d.maxSize)return;const p=h?.id;let R=!0;for(;R;){R=!1;for(const[j,S]of this._db)if(0===S.lifetime&&(!p||j.startsWith(p))){if(this._purgeItem(j,S,h),d.size<=.9*d.maxSize)return;R||=this._db.has(j)}}for(const[j,S]of this._db)if((!p||j.startsWith(p))&&(this._purgeItem(j,S,h),d.size<=.9*d.maxSize))return}_purgeItem(h,d,p=this._users.find(R=>h.startsWith(R.id))){if(this._db.delete(h),d.lives<=1){this._size-=d.size,p&&(p.size-=d.size);const R=this._notifyRemove(h,d.entry,d.size,x.SOME);null!=R&&R>0&&(this._size+=R,p&&(p.size+=R),d.lives=d.lifetime,d.size=R,this._db.set(h,d))}else--d.lives,this._db.set(h,d)}}let L=0;class B{constructor(h,d,p){this.entry=h,this.size=d,this.lifetime=p,this.lives=p}}},657:(re,H,i)=>{i.d(H,{$c:()=>j,Hg:()=>S,jW:()=>d,uD:()=>p});var z=i(73514),y=i(83944),J=i(49301);const x=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function F(u){return u instanceof z.Z}function P(u){return u instanceof y.Z?Object.keys(u.items):F(u)?(0,J.vw)(u).keys():u?Object.keys(u):[]}function L(u,f){return u instanceof y.Z?u.items[f]:u[f]}function K(u){return u?u.declaredClass:null}function h(u,f){const c=u.diff;if(c&&"function"==typeof c)return c(u,f);const D=P(u),Z=P(f);if(0===D.length&&0===Z.length)return;if(!D.length||!Z.length||function B(u,f){return!(!Array.isArray(u)||!Array.isArray(f))&&u.length!==f.length}(u,f))return{type:"complete",oldValue:u,newValue:f};const A=Z.filter(C=>!D.includes(C)),g=D.filter(C=>!Z.includes(C)),T=D.filter(C=>Z.includes(C)&&L(u,C)!==L(f,C)).concat(A,g).sort(),te=K(u);if(te&&x.has(te)&&T.length)return{type:"complete",oldValue:u,newValue:f};let Y;const W=F(u)&&F(f);for(const C of T){const _=L(u,C),v=L(f,C);let N;if((W||"function"!=typeof _&&"function"!=typeof v)&&_!==v&&(null!=_||null!=v)){if(c&&c[C]&&"function"==typeof c[C])N=c[C]?.(_,v);else if(_ instanceof Date&&v instanceof Date){if(_.getTime()===v.getTime())continue;N={type:"complete",oldValue:_,newValue:v}}else N="object"==typeof _&&"object"==typeof v&&K(_)===K(v)?h(_,v):{type:"complete",oldValue:_,newValue:v};null!=N&&(null!=Y?Y.diff[C]=N:Y={type:"partial",diff:{[C]:N}})}}return Y}function d(u,f){return p(u,f)}function p(u,f){if(null==u)return!1;const c=f.split(".");let D=u;for(const Z of c){if("complete"===D.type)return!0;if("partial"!==D.type)return!1;{const A=D.diff[Z];if(!A)return!1;D=A}}return!0}function j(u,f){if(!u)return!1;if("partial"===u.type){const c=Object.keys(u.diff);return 1===c.length&&c[0]===f}return!1}function S(u,f){if("function"!=typeof u&&"function"!=typeof f&&(null!=u||null!=f))return null==u||null==f||"object"==typeof u&&"object"==typeof f&&K(u)!==K(f)?{type:"complete",oldValue:u,newValue:f}:h(u,f)}},15398:(re,H,i)=>{i.d(H,{A4:()=>J,L9:()=>x,yV:()=>y});var z=i(25037);class y{}function J(P){return P instanceof z.ld?P===y.instance:"unknown"===P?.toString().toLowerCase()}function x(P){return J(P)?y.instance:P}y.instance=new z.vF("Etc/UTC")},66398:(re,H,i)=>{function y(a){return a?{originPosition:"upper-left"===a.originPosition?"upperLeft":"lower-left"===a.originPosition?"lowerLeft":a.originPosition,scale:a.tolerance?[a.tolerance,a.tolerance,1,1]:[1,1,1,1],translate:null!=a.extent?[a.extent.xmin,a.extent.ymax,a.extent.zmin??0,a.extent.mmin??0]:[0,0,0,0]}:null}function x(a){if(function J(a){return"lowerLeft"===a.originPosition&&4===a.scale.length&&4===a.translate.length}(a))return a;const{originPosition:s,scale:l,translate:m}=a,O=l[1]??1;return{originPosition:"lowerLeft",scale:[l[0]??1,"lowerLeft"===s?O:-O,l[2]??1,l[3]??1],translate:[m[0]??0,m[1]??0,m[2]??0,m[3]??0]}}function u({scale:a,translate:s},l){return l*a[0]+s[0]}function f({scale:a,translate:s},l){return l*a[1]+s[1]}function c({scale:a,translate:s},l){return(l??0)*a[2]+s[2]}function D({scale:a,translate:s},l){return l?l*a[3]+s[3]:0}function Z(a,s){return a&&s?te:a&&!s?g:!a&&s?T:A}i.d(H,{G6:()=>pe,Ie:()=>Ee,J9:()=>ge,RF:()=>oe,U1:()=>ve,vY:()=>y}),i(40637);const A=(a,s)=>{const l=new Array(s.length);if(!s.length)return l;const m=s[0];let I=u(a,m[0]),O=f(a,m[1]);l[0]=[I,O];const{scale:U,originPosition:$}=a,Q=U[0],X="lowerLeft"===$?U[1]:-U[1];for(let G=1;G<s.length;G++){const[k,ee]=s[G];I+=Q*k,O+=X*ee,l[G]=[I,O]}return l},g=(a,s)=>{const l=new Array(s.length);if(!s.length)return l;const m=s[0];let I=u(a,m[0]),O=f(a,m[1]);l[0]=[I,O,c(a,m[2])];const{scale:U,originPosition:$}=a,Q=U[0],X="lowerLeft"===$?U[1]:-U[1];for(let G=1;G<s.length;G++){const[k,ee,se]=s[G];I+=Q*k,O+=X*ee,l[G]=[I,O,c(a,se)]}return l},T=(a,s)=>{const l=new Array(s.length);if(!s.length)return l;const m=s[0];let I=u(a,m[0]),O=f(a,m[1]);l[0]=[I,O,D(a,m[2])];const{scale:U,originPosition:$}=a,Q=U[0],X="lowerLeft"===$?U[1]:-U[1];for(let G=1;G<s.length;G++){const[k,ee,se]=s[G];I+=Q*k,O+=X*ee,l[G]=[I,O,D(a,se)]}return l},te=(a,s)=>{const l=new Array(s.length);if(!s.length)return l;const m=s[0];let I=u(a,m[0]),O=f(a,m[1]);l[0]=[I,O,c(a,m[2]),D(a,m[3])];const{scale:U,originPosition:$}=a,Q=U[0],X="lowerLeft"===$?U[1]:-U[1];for(let G=1;G<s.length;G++){const[k,ee,se,de]=s[G];I+=Q*k,O+=X*ee,l[G]=[I,O,c(a,se),D(a,de)]}return l};function Y(a,s,l){const m=new Array(l.length);for(let I=0;I<l.length;I++)m[I]=s(a,l[I]);return m}function oe(a,s,l){const m=x(a);return s.x=function F({scale:a,translate:s},l){return Math.round((l-s[0])/a[0])}(m,l.x),s.y=function P({scale:a,translate:s},l){return Math.round((l-s[1])/a[1])}(m,l.y),null!=l.z&&(s.z=function L({scale:a,translate:s},l){return Math.round(((l??0)-s[2])/a[2])}(m,l.z)),null!=l.m&&(s.m=function B({scale:a,translate:s},l){return l?Math.round((l-s[3])/a[3]):0}(m,l.m)),s}function ge(a,s,l,m=l?.hasZ??!1,I=l?.hasM??!1){if(null!=l){const O=x(a);s.points=Z(m,I)(O,l.points),s.hasZ=m,s.hasM=I}return s}function ve(a,s,l,m=null!=l?.z,I=null!=l?.m){if(null==l)return s;const O=x(a);return s.x=u(O,l.x),s.y=f(O,l.y),m&&(s.z=c(O,l.z)),I&&(s.m=D(O,l.m)),s}function Ee(a,s,l,m=l?.hasZ??!1,I=l?.hasM??!1){if(null!=l){const O=x(a);s.rings=Y(O,Z(m,I),l.rings),s.hasZ=m,s.hasM=I}return s}function pe(a,s,l,m=l?.hasZ??!1,I=l?.hasM??!1){if(null!=l){const O=x(a);s.paths=Y(O,Z(m,I),l.paths),s.hasZ=m,s.hasM=I}return s}},7157:(re,H,i)=>{i.r(H),i.d(H,{default:()=>De});var O,z=i(15861),y=i(50484),x=(i(2189),i(62691)),R=(i(36699),i(12610),i(53722),i(82752),i(28999),i(38748),i(50923),i(42212),i(91963)),j=i(41007),S=i(66476),E=i(25387),u=i(57964),f=i(1258),c=i(34222),D=i(4703),Z=i(3233),A=i(79412),g=i(80543),T=i(1535),te=i(62185),Y=i(10141),W=i(31709),C=i(95060),_=i(4257),v=i(19855),N=i(27426),V=i(12621),le=i(78601),ae=i(80099),oe=i(70509),he=i(25836),ie=i(29717),Oe=i(12522),ue=i(56956),ge=i(78818),ve=i(81247),Ee=i(27969),pe=i(85295),a=i(40591),s=i(75421),l=i(89317);i(14007),i(65311);let U=O=class extends l.wq{constructor(){super(...arguments),this.age=null,this.ageReceived=null,this.displayCount=null,this.maxObservations=1}clone(){return new O({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}};(0,y._)([(0,g.Cb)({type:Number,json:{write:!0}})],U.prototype,"age",void 0),(0,y._)([(0,g.Cb)({type:Number,json:{write:!0}})],U.prototype,"ageReceived",void 0),(0,y._)([(0,g.Cb)({type:Number,json:{write:!0}})],U.prototype,"displayCount",void 0),(0,y._)([(0,g.Cb)({type:Number,json:{write:!0}})],U.prototype,"maxObservations",void 0),U=O=(0,y._)([(0,Y.j)("esri.layers.support.PurgeOptions")],U);const $=U;var Q=i(39262),X=i(91866),G=i(33331),k=i(86516),ee=i(84735),se=i(43814),de=i(26894);const fe=(0,Ee.v)();function me(b,M){return new u.Z("layer:unsupported",`Layer (${b.title}, ${b.id}) of type '${b.declaredClass}' ${M}`,{layer:b})}let w=class extends((0,le.M)((0,V.b)((0,v.h7)((0,Oe.n)((0,ie.M)((0,he.Q)((0,_.Y)((0,ae.q)((0,oe.I)((0,Z.R)((0,N.N)((0,E.J)(C.Z))))))))))))){constructor(...b){var M;super(...b),M=this,this.copyright=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.geometryDefinition=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.maxReconnectionAttempts=0,this.maxReconnectionInterval=20,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.operationalLayerType="ArcGISStreamLayer",this.outFields=["*"],this.popupEnabled=!0,this.popupTemplate=null,this.purgeOptions=new $,this.refreshInterval=0,this.screenSizePerspectiveEnabled=!0,this.sourceJSON=null,this.spatialReference=se.Z.WGS84,this.type="stream",this.url=null,this.updateInterval=300,this.useViewTime=!0,this.webSocketUrl=null,this._debouncedSaveOperations=(0,A.Ds)(function(){var q=(0,z.Z)(function*(ne,ce,ye){const{save:Ie,saveAs:Me}=yield Promise.all([i.e(8592),i.e(8225)]).then(i.bind(i,71611));switch(ne){case ee.x.SAVE:return Ie(M,ce);case ee.x.SAVE_AS:return Me(M,ye,ce)}});return function(ne,ce,ye){return q.apply(this,arguments)}}())}normalizeCtorArgs(b,M){return"string"==typeof b?{url:b,...M}:b}load(b){if(!("WebSocket"in globalThis))return this.addResolvingPromise(Promise.reject(new u.Z("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);const M=null!=b?b.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},b).catch(A.r9).then(()=>this._fetchService(M))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(b){const M=this._normalizeFeatureReduction(b);this._set("featureReduction",M)}set renderer(b){(0,pe.YN)(b,this.fieldsIndex),this._set("renderer",b)}readRenderer(b,M,q){M=M.layerDefinition||M;const ne=M.drawingInfo?.renderer;if(ne){const ce=(0,R.a)(ne,M,q)||void 0;return ce||D.Z.getLogger(this).error("Failed to create renderer",{rendererDefinition:M.drawingInfo.renderer,layer:this,context:q}),ce}return(0,ge.Ob)(M,q)}connect(b){var M=this;return(0,z.Z)(function*(){const[{createConnection:q}]=yield Promise.all([Promise.all([i.e(2784),i.e(8592),i.e(605)]).then(i.bind(i,80751)),M.load()]),ne=M.geometryType?W.M.toJSON(M.geometryType):null,{customParameters:ce=null,definitionExpression:ye=null,geometryDefinition:Ie=null,maxReconnectionAttempts:Me=0,maxReconnectionInterval:Re=20,spatialReference:Se=M.spatialReference}=b||M.createConnectionParameters(),_e=q(M.parsedUrl,M.spatialReference,Se,ne,ye,Ie,Me,Re,ce??void 0),Ce=(0,f.AL)([M.on("send-message-to-socket",Pe=>_e.sendMessageToSocket(Pe)),M.on("send-message-to-client",Pe=>_e.sendMessageToClient(Pe))]);return _e.once("destroy",Ce.remove),_e})()}createConnectionParameters(){return{spatialReference:this.spatialReference,customParameters:this.customParameters,definitionExpression:this.definitionExpression,geometryDefinition:this.geometryDefinition,maxReconnectionAttempts:this.maxReconnectionAttempts,maxReconnectionInterval:this.maxReconnectionInterval}}createPopupTemplate(b){return(0,G.eZ)(this,b)}createQuery(){const b=new X.Z;return b.returnGeometry=!0,b.outFields=["*"],b.where=this.definitionExpression||"1=1",b}getFieldDomain(b,M){if(!this.fields)return null;let q=null;return this.fields.some(ne=>(ne.name===b&&(q=ne.domain),!!q)),q}getField(b){return this.fieldsIndex.get(b)}serviceSupportsSpatialReference(b){return!0}sendMessageToSocket(b){this.emit("send-message-to-socket",b)}sendMessageToClient(b){this.emit("send-message-to-client",b)}save(b){var M=this;return(0,z.Z)(function*(){return M._debouncedSaveOperations(ee.x.SAVE,b)})()}saveAs(b,M){var q=this;return(0,z.Z)(function*(){return q._debouncedSaveOperations(ee.x.SAVE_AS,M,b)})()}write(b,M){const q=M?.messages;return this.webSocketUrl?(q?.push(me(this,"using a custom websocket connection cannot be written to web scenes and web maps")),null):this.parsedUrl?super.write(b,M):(q?.push(me(this,"using a client-side only connection without a url cannot be written to web scenes and web maps")),null)}_fetchService(b){var M=this;return(0,z.Z)(function*(){if(!M.webSocketUrl&&M.parsedUrl){if(!M.sourceJSON){const{data:q}=yield(0,S.Z)(M.parsedUrl.path,{query:{f:"json",...M.customParameters,...M.parsedUrl.query},responseType:"json",signal:b});M.sourceJSON=q}}else{if(!M.timeInfo?.trackIdField)throw new u.Z("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");if(!M.objectIdField){const q=M.fields.find(ne=>"oid"===ne.type)?.name;if(!q)throw new u.Z("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");M.objectIdField=q}if(!M.fields)throw new u.Z("stream-layer:missing-metadata","The stream layer fields must be specified.");if(M.fields.some(q=>q.name===M.objectIdField)||M.fields.push(new ve.Z({name:M.objectIdField,alias:M.objectIdField,type:"oid"})),!M.geometryType)throw new u.Z("stream-layer:missing-metadata","The stream layer geometryType must be specified.");M.webSocketUrl&&(M.url=M.webSocketUrl)}return M.read(M.sourceJSON,{origin:"service",portalItem:M.portalItem,portal:M.portalItem?.portal,url:M.parsedUrl}),(0,pe.YN)(M.renderer,M.fieldsIndex),(0,pe.UF)(M.timeInfo,M.fieldsIndex),M.objectIdField||(M.objectIdField="__esri_stream_id__"),(0,Q.y)(M,{origin:"service"})})()}};(0,y._)([(0,g.Cb)({type:String})],w.prototype,"copyright",void 0),(0,y._)([(0,g.Cb)({readOnly:!0})],w.prototype,"defaultPopupTemplate",null),(0,y._)([(0,g.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],w.prototype,"definitionExpression",void 0),(0,y._)([(0,g.Cb)({type:String})],w.prototype,"displayField",void 0),(0,y._)([(0,g.Cb)({type:k.Z})],w.prototype,"elevationInfo",void 0),(0,y._)([(0,g.Cb)({json:{origins:{"web-map":{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],w.prototype,"featureReduction",null),(0,y._)([(0,g.Cb)(fe.fields)],w.prototype,"fields",void 0),(0,y._)([(0,g.Cb)(fe.fieldsIndex)],w.prototype,"fieldsIndex",void 0),(0,y._)([(0,g.Cb)({type:de.Z,json:{name:"layerDefinition.definitionGeometry",write:!0}})],w.prototype,"geometryDefinition",void 0),(0,y._)([(0,g.Cb)({type:W.M.apiValues,json:{read:{reader:W.M.read}}})],w.prototype,"geometryType",void 0),(0,y._)([(0,g.Cb)(ue.iR)],w.prototype,"labelsVisible",void 0),(0,y._)([(0,g.Cb)({type:[a.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:s.r},write:!0}})],w.prototype,"labelingInfo",void 0),(0,y._)([(0,g.Cb)(ue.rn)],w.prototype,"legendEnabled",void 0),(0,y._)([(0,g.Cb)({type:["show","hide"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],w.prototype,"listMode",void 0),(0,y._)([(0,g.Cb)({type:T.z8})],w.prototype,"maxReconnectionAttempts",void 0),(0,y._)([(0,g.Cb)({type:T.z8})],w.prototype,"maxReconnectionInterval",void 0),(0,y._)([(0,g.Cb)(ue.u1)],w.prototype,"maxScale",void 0),(0,y._)([(0,g.Cb)(ue.rO)],w.prototype,"minScale",void 0),(0,y._)([(0,g.Cb)({type:String})],w.prototype,"objectIdField",void 0),(0,y._)([(0,g.Cb)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],w.prototype,"operationalLayerType",void 0),(0,y._)([(0,g.Cb)({readOnly:!0})],w.prototype,"outFields",void 0),(0,y._)([(0,g.Cb)(ue.C_)],w.prototype,"popupEnabled",void 0),(0,y._)([(0,g.Cb)({type:x.Z,json:{name:"popupInfo",write:!0}})],w.prototype,"popupTemplate",void 0),(0,y._)([(0,g.Cb)({type:$})],w.prototype,"purgeOptions",void 0),(0,y._)([(0,g.Cb)({json:{read:!1,write:!1}})],w.prototype,"refreshInterval",void 0),(0,y._)([(0,g.Cb)({types:j.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:j.o,write:!0}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],w.prototype,"renderer",null),(0,y._)([(0,te.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,te.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],w.prototype,"readRenderer",null),(0,y._)([(0,g.Cb)((()=>{const b=(0,c.d9)(ue.YI);return b.json.origins["portal-item"]={read:!1,write:!1},b})())],w.prototype,"screenSizePerspectiveEnabled",void 0),(0,y._)([(0,g.Cb)()],w.prototype,"sourceJSON",void 0),(0,y._)([(0,g.Cb)({type:se.Z,json:{origins:{service:{read:{source:"spatialReference"}}}}})],w.prototype,"spatialReference",void 0),(0,y._)([(0,g.Cb)({json:{read:!1}})],w.prototype,"type",void 0),(0,y._)([(0,g.Cb)(ue.HQ)],w.prototype,"url",void 0),(0,y._)([(0,g.Cb)({type:Number})],w.prototype,"updateInterval",void 0),(0,y._)([(0,g.Cb)({json:{read:!1,write:!1}})],w.prototype,"useViewTime",void 0),(0,y._)([(0,g.Cb)({type:String})],w.prototype,"webSocketUrl",void 0),w=(0,y._)([(0,Y.j)("esri.layers.StreamLayer")],w);const De=w},4257:(re,H,i)=>{i.d(H,{Y:()=>B});var z=i(50484),y=i(4703),J=i(80543),P=(i(14007),i(65311),i(10141)),L=i(89713);const B=K=>{let h=class extends K{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const d=(0,L.Qc)(this.url);if(null!=d&&d.title)return d.title}return this._get("title")||""}set title(d){this._set("title",d)}set url(d){this._set("url",(0,L.Nm)(d,y.Z.getLogger(this)))}};return(0,z._)([(0,J.Cb)()],h.prototype,"title",null),(0,z._)([(0,J.Cb)({type:String})],h.prototype,"url",null),h=(0,z._)([(0,P.j)("esri.layers.mixins.ArcGISService")],h),h}},27426:(re,H,i)=>{i.d(H,{N:()=>L});var z=i(50484),y=i(80543),P=(i(14007),i(4703),i(65311),i(10141));const L=B=>{let K=class extends B{constructor(){super(...arguments),this.customParameters=null}};return(0,z._)([(0,y.Cb)({type:Object,json:{write:{overridePolicy:h=>({enabled:!!(h&&Object.keys(h).length>0)})}}})],K.prototype,"customParameters",void 0),K=(0,z._)([(0,P.j)("esri.layers.mixins.CustomParametersMixin")],K),K}},70509:(re,H,i)=>{i.d(H,{I:()=>g});var z=i(15861),y=i(50484),J=i(11931),x=i(26152),F=i(66476),P=i(37636),L=i(57964),B=i(4703),K=i(51172),h=i(79412),d=i(6785),p=i(80543),S=(i(14007),i(65311),i(62185)),E=i(10141),u=i(7547),f=i(85971),c=i(61018),D=i(27835),Z=i(57437),A=i(50318);const g=te=>{let Y=class extends te{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,K.SC)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(W){W!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",W))}readPortalItem(W,C,_){if(C.itemId)return new D.default({id:C.itemId,portal:_?.portal})}writePortalItem(W,C){W?.id&&(C.itemId=W.id)}loadFromPortal(W,C){var _=this;return(0,z.Z)(function*(){if(_.portalItem?.id)try{const{load:v}=yield Promise.all([i.e(2772),i.e(8592),i.e(6964)]).then(i.bind(i,36964));return(0,h.k_)(C),yield v({instance:_,supportedTypes:W.supportedTypes,validateItem:W.validateItem,supportsData:W.supportsData,layerModuleTypeMap:W.layerModuleTypeMap},C)}catch(v){throw(0,h.D_)(v)||B.Z.getLogger(_).warn(`Failed to load layer (${_.title}, ${_.id}) portal item (${_.portalItem.id})\n  ${v}`),v}})()}finishLoadEditablePortalLayer(W){var C=this;return(0,z.Z)(function*(){C._set("userHasEditingPrivileges",yield C._fetchUserHasEditingPrivileges(W).catch(_=>((0,h.r9)(_),!0)))})()}setUserPrivileges(W,C){var _=this;return(0,z.Z)(function*(){if(!J.default.userPrivilegesApplied)return _.finishLoadEditablePortalLayer(C);if(_.url)try{const{features:{edit:v,fullEdit:N},content:{updateItem:V}}=yield _._fetchUserPrivileges(W,C);_._set("userHasEditingPrivileges",v),_._set("userHasFullEditingPrivileges",N),_._set("userHasUpdateItemPrivileges",V)}catch(v){(0,h.r9)(v)}})()}_fetchUserPrivileges(W,C){var _=this;return(0,z.Z)(function*(){let v=_.portalItem;if(!W||!v||!v.loaded||v.sourceUrl)return _._fetchFallbackUserPrivileges(C);const N=W===v.id;if(N&&v.portal.user)return(0,A.Ss)(v);let V,le;if(N)V=v.portal.url;else try{V=yield(0,f.oP)(_.url,C)}catch(ie){(0,h.r9)(ie)}if(!V||!(0,d.Zo)(V,v.portal.url))return _._fetchFallbackUserPrivileges(C);try{const ie=null!=C?C.signal:null;le=yield x.id?.getCredential(`${V}/sharing`,{prompt:!1,signal:ie})}catch(ie){(0,h.r9)(ie)}if(!le)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(N?yield v.reload():(v=new D.default({id:W,portal:{url:V}}),yield v.load(C)),v.portal.user)return(0,A.Ss)(v)}catch(ie){(0,h.r9)(ie)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_fetchFallbackUserPrivileges(W){var C=this;return(0,z.Z)(function*(){let _=!0;try{_=yield C._fetchUserHasEditingPrivileges(W)}catch(v){(0,h.r9)(v)}return{features:{edit:_,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(W){var C=this;return(0,z.Z)(function*(){const _=C.url?x.id?.findCredential(C.url):null;if(!_)return!0;const v=T.credential===_?T.user:yield C._fetchEditingUser(W);return T.credential=_,T.user=v,null==v?.privileges||v.privileges.includes("features:user:edit")})()}_fetchEditingUser(W){var C=this;return(0,z.Z)(function*(){const _=C.portalItem?.portal?.user;if(_)return _;const v=x.id?.findServerInfo(C.url??"");if(!v?.owningSystemUrl)return null;const N=`${v.owningSystemUrl}/sharing/rest`,V=c.Z.getDefault();if(V&&V.loaded&&(0,d.Fv)(V.restUrl)===(0,d.Fv)(N))return V.user;const le=`${N}/community/self`,ae=null!=W?W.signal:null,oe=yield(0,P.q6)((0,F.Z)(le,{authMode:"no-prompt",query:{f:"json"},signal:ae}));return oe.ok?Z.Z.fromJSON(oe.value.data):null})()}read(W,C){C&&(C.layer=this),super.read(W,C)}write(W,C){const _=C?.portal,v=this.portalItem?.id&&(this.portalItem.portal||c.Z.getDefault());return _&&v&&!(0,d.tm)(v.restUrl,_.restUrl)?(C.messages&&C.messages.push(new L.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(W,{...C,layer:this})}};return(0,y._)([(0,p.Cb)({type:D.default})],Y.prototype,"portalItem",null),(0,y._)([(0,S.r)("web-document","portalItem",["itemId"])],Y.prototype,"readPortalItem",null),(0,y._)([(0,u.c)("web-document","portalItem",{itemId:{type:String}})],Y.prototype,"writePortalItem",null),(0,y._)([(0,p.Cb)({clonable:!1})],Y.prototype,"resourceReferences",void 0),(0,y._)([(0,p.Cb)({type:Boolean,readOnly:!0})],Y.prototype,"userHasEditingPrivileges",void 0),(0,y._)([(0,p.Cb)({type:Boolean,readOnly:!0})],Y.prototype,"userHasFullEditingPrivileges",void 0),(0,y._)([(0,p.Cb)({type:Boolean,readOnly:!0})],Y.prototype,"userHasUpdateItemPrivileges",void 0),Y=(0,y._)([(0,E.j)("esri.layers.mixins.PortalLayer")],Y),Y},T={credential:null,user:null}},25836:(re,H,i)=>{i.d(H,{Q:()=>C});var z=i(15861),y=i(50484),x=(i(14007),i(4703)),F=i(79412),P=i(80543),L=i(73018),K=(i(65311),i(10141)),h=i(76215),d=i(83944),S=(i(37636),i(57964),i(12926),i(43571));const E=new d.Z,u=new WeakMap;function Z(_,v){return Number.isFinite(_)&&Number.isFinite(v)?v<=0?_:Z(v,_%v):0}let A=0,g=0;function T(){const _=Date.now();let v=!1;for(const N of E){const V=N.deref();V?V.refreshInterval&&_-(u.get(V)??0)+5>=6e4*V.refreshInterval&&(u.set(V,_),V.refresh(_)):v=!0}if(v)for(let N=E.length-1;N>=0;N--)E.at(N).deref()||E.removeAt(N)}(0,S.EH)(()=>{const _=Date.now();let v=0;for(const N of E){const V=N.deref();V&&(v=Z(Math.round(6e4*V.refreshInterval),v),V.refreshInterval?u.get(V)||u.set(V,_):u.delete(V))}if(v!==g){if(g=v,clearInterval(A),0===g)return void(A=0);A=setInterval(T,g)}});const C=_=>{let v=class extends _{constructor(...N){super(...N),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,F.Ds)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||function f(_){(function D(_){return null!=_&&"object"==typeof _&&"refreshInterval"in _&&"refresh"in _})(_)&&E.push(new WeakRef(_))}(this)},()=>{})}destroy(){!function c(_){const v=E.find(N=>N.deref()===_);v&&E.remove(v)}(this)}castRefreshInterval(N){return N>=.1?N:N<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(N=Date.now()){(0,F.R8)(this._debounceHasDataChanged()).then(V=>{V&&this._set("refreshTimestamp",N),this.emit("refresh",{dataChanged:V})},V=>{x.Z.getLogger(this).error(V),this.emit("refresh",{dataChanged:!1,error:V})})}hasDataChanged(){return(0,z.Z)(function*(){return!0})()}get test(){}};return(0,y._)([(0,P.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:h.C}}}}})],v.prototype,"refreshInterval",void 0),(0,y._)([(0,L.p)("refreshInterval")],v.prototype,"castRefreshInterval",null),(0,y._)([(0,P.Cb)({readOnly:!0})],v.prototype,"refreshTimestamp",void 0),(0,y._)([(0,P.Cb)({readOnly:!0})],v.prototype,"refreshParameters",null),v=(0,y._)([(0,K.j)("esri.layers.mixins.RefreshableLayer")],v),v}},40100:(re,H,i)=>{i.d(H,{Z:()=>R});var z=i(57964),y=i(89317),J=i(4703),x=i(8611),F=i(15398),P=i(85295),L=i(764),B=i(25037);const p=new Map;class R{static fromJSON(c){return new R(c.fields,c.timeZoneByFieldName)}static fromLayer(c){return new R(c.fields??[],u(c))}static fromLayerJSON(c){return new R(c.fields??[],u(c))}constructor(c=[],D){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=c||[],this._timeZoneByFieldName=D?new Map(D):null;const Z=[];for(const A of this.fields){const g=A?.name,T=S(g);if(g&&T){const te=j(g);this._fieldsMap.set(g,A),this._fieldsMap.set(te,A),this._normalizedFieldsMap.set(T,A),Z.push(`${te}:${A.type}:${this._timeZoneByFieldName?.get(g)}`),(0,P.y2)(A)?(this.dateFields.push(A),this._dateFieldsSet.add(A)):(0,P.H7)(A)&&(this._numericFieldsSet.add(A),this.numericFields.push(A)),(0,P.Dl)(A)||(0,P.Se)(A)||(A.editable=null==A.editable||!!A.editable,A.nullable=null==A.nullable||!!A.nullable)}}Z.sort(),this.uid=Z.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const c of this.fields)(0,P.Dl)(c)||(0,P.Se)(c)||c.nullable||void 0!==(0,P.os)(c)||this._requiredFields.push(c)}return this._requiredFields}equals(c){return this.uid===c?.uid}has(c){return null!=this.get(c)}get(c){if(!c)return;let D=this._fieldsMap.get(c);return D||(D=this._fieldsMap.get(j(c))??this._normalizedFieldsMap.get(S(c)),D&&this._fieldsMap.set(c,D),D)}getTimeZone(c){const D=this.get(c&&"string"!=typeof c?c.name:c);return D?this._timeZoneByFieldName?this._timeZoneByFieldName.get(D.name):"date"===D.type||"esriFieldTypeDate"===D.type?(J.Z.getLogger("esri.layers.support.FieldsIndex").error(new z.Z("getTimeZone:no-timezone-information",`no time zone information for field '${D.name}'`)),L.pt):E.has(D.type)?L._4:null:null}getLuxonTimeZone(c){const D=this.getTimeZone(c);return D?D===L._4?F.yV.instance:D===L.pt?B.Qf.utcInstance:(0,x.s1)(p,D,()=>B.vF.create(D)):null}isDateField(c){return this._dateFieldsSet.has(this.get(c))}isTimeOnlyField(c){return(0,P.sX)(this.get(c))}isNumericField(c){return this._numericFieldsSet.has(this.get(c))}normalizeFieldName(c){return this.get(c)?.name??void 0}toJSON(){return{fields:this.fields.map(c=>(0,y.AK)(c)?c.toJSON():c),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function j(f){return f.trim().toLowerCase()}function S(f){return(0,P.q6)(f)?.toLowerCase()??""}const E=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function u(f){const c=new Map;if(!f.fields)return c;const D=!0===f.datesInUnknownTimezone,{timeInfo:Z,editFieldsInfo:A}=f,g=(Z?"startField"in Z?Z.startField:Z.startTimeField:"")??"",T=(Z?"endField"in Z?Z.endField:Z.endTimeField:"")??"",te=function d(f){return"dateFieldsTimeZone"in f}(f)?f.dateFieldsTimeZone??null:f.dateFieldsTimeReference?(0,L.Jv)(f.dateFieldsTimeReference):null,Y=A?function K(f){return"timeZone"in f}(A)?A.timeZone??te:A.dateFieldsTimeReference?(0,L.Jv)(A.dateFieldsTimeReference):te??L.pt:null,W=Z?function h(f){return"timeZone"in f}(Z)?Z.timeZone??te:Z.timeReference?(0,L.Jv)(Z.timeReference):te:null,C=new Map([[j(A?.creationDateField??""),Y],[j(A?.editDateField??""),Y],[j(g),W],[j(T),W]]);for(const{name:_,type:v}of f.fields)if(E.has(v))c.set(_,L._4);else if("date"!==v&&"esriFieldTypeDate"!==v)c.set(_,null);else if(D)c.set(_,L._4);else{const N=C.get(j(_??""))??te;c.set(_,N)}return c}},56761:(re,H,i)=>{i.d(H,{UG:()=>d,UO:()=>S,YI:()=>j,dI:()=>E,el:()=>A,hV:()=>R,z7:()=>p});var z=i(72578);const y="__begin__",J="__end__",x=new RegExp(y,"ig"),F=new RegExp(J,"ig"),P=new RegExp("^"+y,"i"),L=new RegExp(J+"$","i"),B='"',K=B+" + ",h=" + "+B;function d(g){return g.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function p(g){return g.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function R(g){const T={expression:"",type:"none"};return g.labelExpressionInfo?g.labelExpressionInfo.value?(T.expression=g.labelExpressionInfo.value,T.type="conventional"):g.labelExpressionInfo.expression&&(T.expression=g.labelExpressionInfo.expression,T.type="arcade"):null!=g.labelExpression&&(T.expression=d(g.labelExpression),T.type="conventional"),T}function j(g){const T=R(g);if(!T)return null;switch(T.type){case"conventional":return E(T.expression);case"arcade":return T.expression}return null}function S(g){const T=R(g);if(!T)return null;switch(T.type){case"conventional":return function f(g){return g?.match(u)?.[1].trim()||null}(T.expression);case"arcade":return A(T.expression)}return null}function E(g){let T;return g?(T=(0,z.gx)(g,te=>y+'$feature["'+te+'"]'+J),T=P.test(T)?T.replace(P,""):B+T,T=L.test(T)?T.replace(L,""):T+B,T=T.replaceAll(x,K).replaceAll(F,h)):T='""',T}const u=/^\s*\{([^}]+)\}\s*$/i,c=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,D=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Z=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function A(g){if(!g)return null;let T=c.exec(g)||D.exec(g);return T?T[1]||T[3]:(T=Z.exec(g),T?T[2]:null)}},50318:(re,H,i)=>{i.d(H,{$o:()=>p,Fj:()=>K,IW:()=>d,Ss:()=>S,_$:()=>B,ck:()=>h,hz:()=>j,qj:()=>L});var z=i(15861),y=i(83821),J=i(43814),x=i(48230);function P(){return(P=(0,z.Z)(function*(E){const u=E.spatialReference;if(u.isWGS84)return E.clone();if(u.isWebMercator)return(0,x.Sx)(E);const f=J.Z.WGS84;return yield(0,y.initializeProjection)(u,f),(0,y.project)(E,f)})).apply(this,arguments)}function L(E,u){if(!B(E,u)){const f=E.typeKeywords;f?f.push(u):E.typeKeywords=[u]}}function B(E,u){return!!E.typeKeywords?.includes(u)}function K(E){return B(E,j.HOSTED_SERVICE)}function h(E,u){const f=E.typeKeywords;if(f){const c=f.indexOf(u);c>-1&&f.splice(c,1)}}function d(E,u,f){f?L(E,u):h(E,u)}function p(E){return R.apply(this,arguments)}function R(){return R=(0,z.Z)(function*(E){const u=E.clone().normalize();let f;if(u.length>1)for(const c of u)f?c.width>f.width&&(f=c):f=c;else f=u[0];return function F(E){return P.apply(this,arguments)}(f)}),R.apply(this,arguments)}const j={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function S(E){const{portal:u,isOrgItem:f,itemControl:c}=E,D=u.user?.privileges;let Z=!D||D.includes("features:user:edit"),A=!!f&&!!D?.includes("features:user:fullEdit");const g="update"===c||"admin"===c;return g?A=Z=!0:A&&(Z=!0),{features:{edit:Z,fullEdit:A},content:{updateItem:g}}}},96043:(re,H,i)=>{i.d(H,{AJ:()=>L,If:()=>h,k0:()=>P,uI:()=>K,ul:()=>F,wx:()=>d});var z=i(55117),y=i(55768),J=i(5710),x=i(23515);const F=2.4;function P(p){return(0,y.Wz)(p*F)}function L(p){return(0,y.F2)(p)/F}function B(p,R,j,S){let{color:E,ratio:u}=R,{color:f,ratio:c}=j;c===u&&(1===c?u-=1e-6:c+=1e-6);const D=(0,z.uZ)((S-u)/(c-u),0,1);(0,J.l)(p,E.toArray(),f.toArray(),D)}function K(p){const j=new Uint8ClampedArray(2048);if((p=p.filter(({ratio:c})=>c>=0&&c<=1).sort((c,D)=>c.ratio-D.ratio).map(({color:c,ratio:D})=>({color:c,ratio:Math.max(D,.001)}))).length<1)return j;let S=p[0],E=p[0],u=1;const f=(0,x.Ue)();for(let c=0;c<512;c++){const D=(c+.5)/512;for(;D>E.ratio&&u<p.length;)S=E,E=p[u++];B(f,S,E,D),j.set(f,4*c)}return j}function h(p,R,j){const S=Math.sqrt(p**2+R**2)/j;return S>1?0:3/(Math.PI*j**2)*(1-S**2)**2}function d(p){return"function"==typeof p?p:p?R=>+R[p]:()=>1}},39262:(re,H,i)=>{i.d(H,{y:()=>F});var z=i(15861),y=i(37636),J=i(79412),x=i(23206);function F(L,B,K){return P.apply(this,arguments)}function P(){return(P=(0,z.Z)(function*(L,B,K){const h=L&&L.getAtOrigin&&L.getAtOrigin("renderer",B.origin);if(h&&"unique-value"===h.type&&h.styleOrigin){const d=yield(0,y.q6)(h.populateFromStyle());if((0,J.k_)(K),!1===d.ok){const p=d.error;B?.messages&&B.messages.push(new x.Z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${p.message}`,{error:p,context:B})),L.clear("renderer",B?.origin)}}})).apply(this,arguments)}},84735:(re,H,i)=>{var z,y;i.d(H,{x:()=>z}),(y=z||(z={}))[y.SAVE=0]="SAVE",y[y.SAVE_AS=1]="SAVE_AS"}}]);