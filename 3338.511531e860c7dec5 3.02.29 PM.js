"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[3338],{68030:(St,Et,K)=>{K.d(Et,{J:()=>Ct});var mt,G,it,W=K(90104),vt={exports:{}};mt=vt,void 0!==(it=function(){function r(dt){this.message="JPEG error: "+dt}return(r.prototype=new Error).name="JpegError",r.constructor=r,r}(),G=function(){if(!self||!self.Uint8ClampedArray)return null;var r=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),dt=4017,q=799,nt=3406,Z=2276,at=1567,B=3784,H=5793,J=2896;function Y(){this.decodeTransform=null,this.colorTransform=-1}function st(c,i){for(var h,t,e=0,o=[],n=16;n>0&&!c[n-1];)n--;o.push({children:[],index:0});var y,p=o[0];for(h=0;h<n;h++){for(t=0;t<c[h];t++){for((p=o.pop()).children[p.index]=i[e];p.index>0;)p=o.pop();for(p.index++,o.push(p);o.length<=h;)o.push(y={children:[],index:0}),p.children[p.index]=y.children,p=y;e++}h+1<n&&(o.push(y={children:[],index:0}),p.children[p.index]=y.children,p=y)}return o[0].children}function Q(c,i,h){return 64*((c.blocksPerLine+1)*i+h)}function I(c,i,h,t,e,o,n,y,p){var M=h.mcusPerLine,R=i,A=0,N=0;function k(){if(N>0)return N--,A>>N&1;if(255===(A=c[i++])){var j=c[i++];if(j)throw new it("unexpected marker "+(A<<8|j).toString(16))}return N=7,A>>>7}function m(j){for(var L=j;;){if("number"==typeof(L=L[k()]))return L;if("object"!=typeof L)throw new it("invalid huffman sequence")}}function S(j){for(var L=0;j>0;)L=L<<1|k(),j--;return L}function V(j){if(1===j)return 1===k()?1:-1;var L=S(j);return L>=1<<j-1?L:L+(-1<<j)+1}var x,w=0,F=0;function g(j,L,z,et,ot){L(j,Q(j,(z/M|0)*j.v+et,z%M*j.h+ot))}var u,d,b,C,E,D,U=t.length;D=h.progressive?0===o?0===y?function v(j,L){var z=m(j.huffmanTableDC),et=0===z?0:V(z)<<p;j.blockData[L]=j.pred+=et}:function l(j,L){j.blockData[L]|=k()<<p}:0===y?function T(j,L){if(w>0)w--;else for(var z=o,et=n;z<=et;){var ot=m(j.huffmanTableAC),ht=15&ot,ft=ot>>4;if(0!==ht){var pt=r[z+=ft];j.blockData[L+pt]=V(ht)*(1<<p),z++}else{if(ft<15){w=S(ft)+(1<<ft)-1;break}z+=16}}}:function ut(j,L){for(var z,et,ot=o,ht=n,ft=0;ot<=ht;){var pt=r[ot];switch(F){case 0:if(ft=(et=m(j.huffmanTableAC))>>4,0==(z=15&et))ft<15?(w=S(ft)+(1<<ft),F=4):(ft=16,F=1);else{if(1!==z)throw new it("invalid ACn encoding");x=V(z),F=ft?2:3}continue;case 1:case 2:j.blockData[L+pt]?j.blockData[L+pt]+=k()<<p:0==--ft&&(F=2===F?3:0);break;case 3:j.blockData[L+pt]?j.blockData[L+pt]+=k()<<p:(j.blockData[L+pt]=x<<p,F=0);break;case 4:j.blockData[L+pt]&&(j.blockData[L+pt]+=k()<<p)}ot++}4===F&&0==--w&&(F=0)}:function X(j,L){var z=m(j.huffmanTableDC),et=0===z?0:V(z);j.blockData[L]=j.pred+=et;for(var ot=1;ot<64;){var ht=m(j.huffmanTableAC),ft=15&ht,pt=ht>>4;if(0!==ft){var wt=r[ot+=pt];j.blockData[L+wt]=V(ft),ot++}else{if(pt<15)break;ot+=16}}};var P,tt,lt,gt,j,z,rt=0;for(tt=1===U?t[0].blocksPerLine*t[0].blocksPerColumn:M*h.mcusPerColumn;rt<tt;){var $=e?Math.min(tt-rt,e):tt;for(d=0;d<U;d++)t[d].pred=0;if(w=0,1===U)for(u=t[0],E=0;E<$;E++)D(j=u,Q(j,(z=rt)/j.blocksPerLine|0,z%j.blocksPerLine)),rt++;else for(E=0;E<$;E++){for(d=0;d<U;d++)for(lt=(u=t[d]).h,gt=u.v,b=0;b<gt;b++)for(C=0;C<lt;C++)g(u,D,rt,b,C);rt++}N=0,(P=f(c,i))&&P.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+P.invalid),i=P.offset);var ct=P&&P.marker;if(!ct||ct<=65280)throw new it("marker was not found");if(!(ct>=65488&&ct<=65495))break;i+=2}return(P=f(c,i))&&P.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+P.invalid),i=P.offset),i-R}function O(c,i,h){var t,e,o,n,y,p,M,_,R,A,N,k,m,S,V,X,v,l=c.quantizationTable,w=c.blockData;if(!l)throw new it("missing required Quantization Table.");for(var T=0;T<64;T+=8)R=w[i+T],R*=l[T],(A=w[i+T+1])|(N=w[i+T+2])|(k=w[i+T+3])|(m=w[i+T+4])|(S=w[i+T+5])|(V=w[i+T+6])|(X=w[i+T+7])?(e=(t=(t=H*R+128>>8)+(e=H*(m*=l[T+4])+128>>8)+1>>1)-e,v=(o=N*=l[T+2])*B+(n=V*=l[T+6])*at+128>>8,o=o*at-n*B+128>>8,M=(y=(y=J*((A*=l[T+1])-(X*=l[T+7]))+128>>8)+(M=(S*=l[T+5])<<4)+1>>1)-M,p=(_=(_=J*(A+X)+128>>8)+(p=(k*=l[T+3])<<4)+1>>1)-p,n=(t=t+(n=v)+1>>1)-n,o=(e=e+o+1>>1)-o,v=y*Z+_*nt+2048>>12,y=y*nt-_*Z+2048>>12,_=v,v=p*q+M*dt+2048>>12,p=p*dt-M*q+2048>>12,M=v,h[T]=t+_,h[T+7]=t-_,h[T+1]=e+M,h[T+6]=e-M,h[T+2]=o+p,h[T+5]=o-p,h[T+3]=n+y,h[T+4]=n-y):(h[T]=v=H*R+512>>10,h[T+1]=v,h[T+2]=v,h[T+3]=v,h[T+4]=v,h[T+5]=v,h[T+6]=v,h[T+7]=v);for(var x=0;x<8;++x)R=h[x],(A=h[x+8])|(N=h[x+16])|(k=h[x+24])|(m=h[x+32])|(S=h[x+40])|(V=h[x+48])|(X=h[x+56])?(e=(t=4112+((t=H*R+2048>>12)+(e=H*m+2048>>12)+1>>1))-e,v=(o=N)*B+(n=V)*at+2048>>12,o=o*at-n*B+2048>>12,n=v,M=(y=(y=J*(A-X)+2048>>12)+(M=S)+1>>1)-M,p=(_=(_=J*(A+X)+2048>>12)+(p=k)+1>>1)-p,v=y*Z+_*nt+2048>>12,y=y*nt-_*Z+2048>>12,_=v,v=p*q+M*dt+2048>>12,p=p*dt-M*q+2048>>12,R=(R=(t=t+n+1>>1)+_)<16?0:R>=4080?255:R>>4,A=(A=(e=e+o+1>>1)+(M=v))<16?0:A>=4080?255:A>>4,N=(N=(o=e-o)+p)<16?0:N>=4080?255:N>>4,k=(k=(n=t-n)+y)<16?0:k>=4080?255:k>>4,m=(m=n-y)<16?0:m>=4080?255:m>>4,S=(S=o-p)<16?0:S>=4080?255:S>>4,V=(V=e-M)<16?0:V>=4080?255:V>>4,X=(X=t-_)<16?0:X>=4080?255:X>>4,w[i+x]=R,w[i+x+8]=A,w[i+x+16]=N,w[i+x+24]=k,w[i+x+32]=m,w[i+x+40]=S,w[i+x+48]=V,w[i+x+56]=X):(v=(v=H*R+8192>>14)<-2040?0:v>=2024?255:v+2056>>4,w[i+x]=v,w[i+x+8]=v,w[i+x+16]=v,w[i+x+24]=v,w[i+x+32]=v,w[i+x+40]=v,w[i+x+48]=v,w[i+x+56]=v)}function s(c,i){for(var h=i.blocksPerLine,t=i.blocksPerColumn,e=new Int16Array(64),o=0;o<t;o++)for(var n=0;n<h;n++)O(i,Q(i,o,n),e);return i.blockData}function f(c,i,h){function t(p){return c[p]<<8|c[p+1]}var e=c.length-1,o=h<i?h:i;if(i>=e)return null;var n=t(i);if(n>=65472&&n<=65534)return{invalid:null,marker:n,offset:i};for(var y=t(o);!(y>=65472&&y<=65534);){if(++o>=e)return null;y=t(o)}return{invalid:n.toString(16),marker:y,offset:o}}return Y.prototype={parse:function(c){function i(){var j=c[n]<<8|c[n+1];return n+=2,j}function h(){var j=i(),L=n+j-2,z=f(c,L,n);z&&z.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+z.invalid),L=z.offset);var et=c.subarray(n,L);return n+=et.length,et}function t(j){for(var L=Math.ceil(j.samplesPerLine/8/j.maxH),z=Math.ceil(j.scanLines/8/j.maxV),et=0;et<j.components.length;et++){E=j.components[et];var ot=Math.ceil(Math.ceil(j.samplesPerLine/8)*E.h/j.maxH),ht=Math.ceil(Math.ceil(j.scanLines/8)*E.v/j.maxV);E.blockData=new Int16Array(z*E.v*64*(L*E.h+1)),E.blocksPerLine=ot,E.blocksPerColumn=ht}j.mcusPerLine=L,j.mcusPerColumn=z}var e,o,n=0,y=null,p=null,M=[],_=[],R=[],A=i();if(65496!==A)throw new it("SOI not found");for(A=i();65497!==A;){var N,k,m;switch(A){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var S=h();65504===A&&74===S[0]&&70===S[1]&&73===S[2]&&70===S[3]&&0===S[4]&&(y={version:{major:S[5],minor:S[6]},densityUnits:S[7],xDensity:S[8]<<8|S[9],yDensity:S[10]<<8|S[11],thumbWidth:S[12],thumbHeight:S[13],thumbData:S.subarray(14,14+3*S[12]*S[13])}),65518===A&&65===S[0]&&100===S[1]&&111===S[2]&&98===S[3]&&101===S[4]&&(p={version:S[5]<<8|S[6],flags0:S[7]<<8|S[8],flags1:S[9]<<8|S[10],transformCode:S[11]});break;case 65499:for(var V=i()+n-2;n<V;){var X=c[n++],v=new Uint16Array(64);if(X>>4){if(X>>4!=1)throw new it("DQT - invalid table spec");for(k=0;k<64;k++)v[r[k]]=i()}else for(k=0;k<64;k++)v[r[k]]=c[n++];M[15&X]=v}break;case 65472:case 65473:case 65474:if(e)throw new it("Only single frame JPEGs supported");i(),(e={}).extended=65473===A,e.progressive=65474===A,e.precision=c[n++],e.scanLines=i(),e.samplesPerLine=i(),e.components=[],e.componentIds={};var l,w=c[n++],T=0,x=0;for(N=0;N<w;N++){l=c[n];var F=c[n+1]>>4,ut=15&c[n+1];T<F&&(T=F),x<ut&&(x=ut),m=e.components.push({h:F,v:ut,quantizationId:c[n+2],quantizationTable:null}),e.componentIds[l]=m-1,n+=3}e.maxH=T,e.maxV=x,t(e);break;case 65476:var a=i();for(N=2;N<a;){var u=c[n++],d=new Uint8Array(16),b=0;for(k=0;k<16;k++,n++)b+=d[k]=c[n];var C=new Uint8Array(b);for(k=0;k<b;k++,n++)C[k]=c[n];N+=17+b,(u>>4?_:R)[15&u]=st(d,C)}break;case 65501:i(),o=i();break;case 65498:i();var E,D=c[n++],U=[];for(N=0;N<D;N++){var P=e.componentIds[c[n++]],tt=c[n++];(E=e.components[P]).huffmanTableDC=R[tt>>4],E.huffmanTableAC=_[15&tt],U.push(E)}var lt=c[n++],gt=c[n++],rt=c[n++],$=I(c,n,e,U,o,lt,gt,rt>>4,15&rt);n+=$;break;case 65535:255!==c[n]&&n--;break;default:if(255===c[n-3]&&c[n-2]>=192&&c[n-2]<=254){n-=3;break}throw new it("unknown marker "+A.toString(16))}A=i()}for(this.width=e.samplesPerLine,this.height=e.scanLines,this.jfif=y,this.eof=n,this.adobe=p,this.components=[],N=0;N<e.components.length;N++){var ct=M[(E=e.components[N]).quantizationId];ct&&(E.quantizationTable=ct),this.components.push({output:s(0,E),scaleX:E.h/e.maxH,scaleY:E.v/e.maxV,blocksPerLine:E.blocksPerLine,blocksPerColumn:E.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(c,i){var h,t,e,o,n,y,p,M,_,R,A,N=this.width/c,k=this.height/i,m=0,S=this.components.length,V=c*i*S,X=new Uint8ClampedArray(V),v=new Uint32Array(c),l=4294967288;for(p=0;p<S;p++){for(t=(h=this.components[p]).scaleX*N,e=h.scaleY*k,m=p,A=h.output,o=h.blocksPerLine+1<<3,n=0;n<c;n++)v[n]=((M=0|n*t)&l)<<3|7&M;for(y=0;y<i;y++)for(R=o*((M=0|y*e)&l)|(7&M)<<3,n=0;n<c;n++)X[m]=A[R+v[n]],m+=S}var w=this.decodeTransform;if(w)for(p=0;p<V;)for(M=0,_=0;M<S;M++,p++,_+=2)X[p]=(X[p]*w[_]>>8)+w[_+1];return X},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this.colorTransform:1===this.colorTransform},_convertYccToRgb:function(c){for(var i,h,t,e=0,o=c.length;e<o;e+=3)h=c[e+1],c[e]=(i=c[e])-179.456+1.402*(t=c[e+2]),c[e+1]=i+135.459-.344*h-.714*t,c[e+2]=i-226.816+1.772*h;return c},_convertYcckToRgb:function(c){for(var i,h,t,e,o=0,n=0,y=c.length;n<y;n+=4)c[o++]=(h=c[n+1])*(-660635669420364e-19*h+.000437130475926232*(t=c[n+2])-54080610064599e-18*(i=c[n])+.00048449797120281*(e=c[n+3])-.154362151871126)-122.67195406894+t*(-.000957964378445773*t+.000817076911346625*i-.00477271405408747*e+1.53380253221734)+i*(.000961250184130688*i-.00266257332283933*e+.48357088451265)+e*(-.000336197177618394*e+.484791561490776),c[o++]=107.268039397724+h*(219927104525741e-19*h-.000640992018297945*t+.000659397001245577*i+.000426105652938837*e-.176491792462875)+t*(-.000778269941513683*t+.00130872261408275*i+.000770482631801132*e-.151051492775562)+i*(.00126935368114843*i-.00265090189010898*e+.25802910206845)+e*(-.000318913117588328*e-.213742400323665),c[o++]=h*(-.000570115196973677*h-263409051004589e-19*t+.0020741088115012*i-.00288260236853442*e+.814272968359295)-20.810012546947+t*(-153496057440975e-19*t-.000132689043961446*i+.000560833691242812*e-.195152027534049)+i*(.00174418132927582*i-.00255243321439347*e+.116935020465145)+e*(-.000343531996510555*e+.24165260232407);return c},_convertYcckToCmyk:function(c){for(var i,h,t,e=0,o=c.length;e<o;e+=4)h=c[e+1],c[e]=434.456-(i=c[e])-1.402*(t=c[e+2]),c[e+1]=119.541-i+.344*h+.714*t,c[e+2]=481.816-i-1.772*h;return c},_convertCmykToRgb:function(c){for(var i,h,t,e,o=0,n=1/255,y=0,p=c.length;y<p;y+=4)c[o++]=255+(i=c[y]*n)*(-4.387332384609988*i+54.48615194189176*(h=c[y+1]*n)+18.82290502165302*(t=c[y+2]*n)+212.25662451639585*(e=c[y+3]*n)-285.2331026137004)+h*(1.7149763477362134*h-5.6096736904047315*t-17.873870861415444*e-5.497006427196366)+t*(-2.5217340131683033*t-21.248923337353073*e+17.5119270841813)-e*(21.86122147463605*e+189.48180835922747),c[o++]=255+i*(8.841041422036149*i+60.118027045597366*h+6.871425592049007*t+31.159100130055922*e-79.2970844816548)+h*(-15.310361306967817*h+17.575251261109482*t+131.35250912493976*e-190.9453302588951)+t*(4.444339102852739*t+9.8632861493405*e-24.86741582555878)-e*(20.737325471181034*e+187.80453709719578),c[o++]=255+i*(.8842522430003296*i+8.078677503112928*h+30.89978309703729*t-.23883238689178934*e-14.183576799673286)+h*(10.49593273432072*h+63.02378494754052*t+50.606957656360734*e-112.23884253719248)+t*(.03296041114873217*t+115.60384449646641*e-193.58209356861505)-e*(22.33816807309886*e+180.12613974708367);return c},getData:function(c,i,h){if(this.numComponents>4)throw new it("Unsupported color mode");var t=this._getLinearizedBlockData(c,i);if(1===this.numComponents&&h){for(var e=t.length,o=new Uint8ClampedArray(3*e),n=0,y=0;y<e;y++){var p=t[y];o[n++]=p,o[n++]=p,o[n++]=p}return o}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(t);if(4===this.numComponents){if(this._isColorConversionNeeded())return h?this._convertYcckToRgb(t):this._convertYcckToCmyk(t);if(h)return this._convertCmykToRgb(t)}return t}},Y}())&&(mt.exports=G);const Ct=(0,W.g)(vt.exports)},46528:(St,Et,K)=>{K.d(Et,{Z:()=>Ct});var mt,yt,G,W=K(90104),vt={exports:{}};yt=vt,mt=function(){function it(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return it.prototype={ensureBuffer:function(r){var dt=this.buffer,q=dt?dt.byteLength:0;if(r<q)return dt;for(var nt=512;nt<r;)nt<<=1;for(var Z=new Uint8Array(nt),at=0;at<q;++at)Z[at]=dt[at];return this.buffer=Z},getByte:function(){for(var r=this.pos;this.bufferLength<=r;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(r){var dt=this.pos;if(r){this.ensureBuffer(dt+r);for(var q=dt+r;!this.eof&&this.bufferLength<q;)this.readBlock();var nt=this.bufferLength;q>nt&&(q=nt)}else{for(;!this.eof;)this.readBlock();q=this.bufferLength}return this.pos=q,this.buffer.subarray(dt,q)},lookChar:function(){for(var r=this.pos;this.bufferLength<=r;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var r=this.pos;this.bufferLength<=r;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(r,dt,q){for(var nt=r+dt;this.bufferLength<=nt&&!this.eof;)this.readBlock();return new Stream(this.buffer,r,dt,q)},skip:function(r){r||(r=1),this.pos+=r},reset:function(){this.pos=0}},it}(),void 0!==(G=function(){if(!self||!self.Uint32Array)return null;var it=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),dt=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),q=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],nt=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function Z(B){throw new Error(B)}function at(B){var H=0,J=B[H++],Y=B[H++];-1!=J&&-1!=Y||Z("Invalid header in flate stream"),8!=(15&J)&&Z("Unknown compression method in flate stream"),((J<<8)+Y)%31!=0&&Z("Bad FCHECK in flate stream"),32&Y&&Z("FDICT bit set in flate stream"),this.bytes=B,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,mt.call(this)}return(at.prototype=Object.create(mt.prototype)).getBits=function(B){for(var H,J=this.codeSize,Y=this.codeBuf,st=this.bytes,Q=this.bytesPos;J<B;)void 0===(H=st[Q++])&&Z("Bad encoding in flate stream"),Y|=H<<J,J+=8;return H=Y&(1<<B)-1,this.codeBuf=Y>>B,this.codeSize=J-=B,this.bytesPos=Q,H},at.prototype.getCode=function(B){for(var H=B[0],J=B[1],Y=this.codeSize,st=this.codeBuf,Q=this.bytes,I=this.bytesPos;Y<J;){var O;void 0===(O=Q[I++])&&Z("Bad encoding in flate stream"),st|=O<<Y,Y+=8}var s=H[st&(1<<J)-1],f=s>>16,c=65535&s;return(0==Y||Y<f||0==f)&&Z("Bad encoding in flate stream"),this.codeBuf=st>>f,this.codeSize=Y-f,this.bytesPos=I,c},at.prototype.generateHuffmanTable=function(B){for(var H=B.length,J=0,Y=0;Y<H;++Y)B[Y]>J&&(J=B[Y]);for(var st=1<<J,Q=new Uint32Array(st),I=1,O=0,s=2;I<=J;++I,O<<=1,s<<=1)for(var f=0;f<H;++f)if(B[f]==I){var c=0,i=O;for(Y=0;Y<I;++Y)c=c<<1|1&i,i>>=1;for(Y=c;Y<st;Y+=s)Q[Y]=I<<16|f;++O}return[Q,J]},at.prototype.readBlock=function(){function B(v,l,w,T,x){for(var F=v.getBits(w)+T;F-- >0;)l[s++]=x}var H=this.getBits(3);if(1&H&&(this.eof=!0),0!=(H>>=1)){var J,Y;if(1==H)J=q,Y=nt;else if(2==H){for(var st=this.getBits(5)+257,Q=this.getBits(5)+1,I=this.getBits(4)+4,O=Array(it.length),s=0;s<I;)O[it[s++]]=this.getBits(3);for(var f=this.generateHuffmanTable(O),c=0,i=(s=0,st+Q),h=new Array(i);s<i;){var t=this.getCode(f);16==t?B(this,h,2,3,c):17==t?B(this,h,3,3,c=0):18==t?B(this,h,7,11,c=0):h[s++]=c=t}J=this.generateHuffmanTable(h.slice(0,st)),Y=this.generateHuffmanTable(h.slice(st,i))}else Z("Unknown block type in flate stream");for(var e=(S=this.buffer)?S.length:0,o=this.bufferLength;;){var n=this.getCode(J);if(n<256)o+1>=e&&(e=(S=this.ensureBuffer(o+1)).length),S[o++]=n;else{if(256==n)return void(this.bufferLength=o);var y=(n=r[n-=257])>>16;y>0&&(y=this.getBits(y)),c=(65535&n)+y,n=this.getCode(Y),(y=(n=dt[n])>>16)>0&&(y=this.getBits(y));var p=(65535&n)+y;o+c>=e&&(e=(S=this.ensureBuffer(o+c)).length);for(var M=0;M<c;++M,++o)S[o]=S[o-p]}}}else{var _,R=this.bytes,A=this.bytesPos;void 0===(_=R[A++])&&Z("Bad block header in flate stream");var N=_;void 0===(_=R[A++])&&Z("Bad block header in flate stream"),N|=_<<8,void 0===(_=R[A++])&&Z("Bad block header in flate stream");var k=_;void 0===(_=R[A++])&&Z("Bad block header in flate stream"),(k|=_<<8)!=(65535&~N)&&Z("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var m=this.bufferLength,S=this.ensureBuffer(m+N),V=m+N;this.bufferLength=V;for(var X=m;X<V;++X){if(void 0===(_=R[A++])){this.eof=!0;break}S[X]=_}this.bytesPos=A}},at}())&&(yt.exports=G);const Ct=(0,W.g)(vt.exports)},65665:(St,Et,K)=>{K.d(Et,{Z:()=>c});var nt,W=K(50484),mt=K(89317),yt=K(34222),G=K(80543),it=(K(14007),K(4703),K(10141)),r=K(26894),dt=K(43814);function Z(i){return i=Number(i),isNaN(i)?void 0:i}K(65311);let at=nt=class extends mt.wq{constructor(){super(...arguments),this.name=null,this.minWavelength=void 0,this.maxWavelength=void 0,this.radianceBias=void 0,this.radianceGain=void 0,this.reflectanceBias=void 0,this.reflectanceGain=void 0,this.solarIrradiance=void 0}clone(){return new nt({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})}};(0,W._)([(0,G.Cb)({json:{name:"BandName",write:!0}})],at.prototype,"name",void 0),(0,W._)([(0,G.Cb)({json:{name:"WavelengthMin",read:{reader:Z},write:!0}})],at.prototype,"minWavelength",void 0),(0,W._)([(0,G.Cb)({json:{name:"WavelengthMax",read:{reader:Z},write:!0}})],at.prototype,"maxWavelength",void 0),(0,W._)([(0,G.Cb)({json:{name:"RadianceBias",read:{reader:Z},write:!0}})],at.prototype,"radianceBias",void 0),(0,W._)([(0,G.Cb)({json:{name:"RadianceGain",read:{reader:Z},write:!0}})],at.prototype,"radianceGain",void 0),(0,W._)([(0,G.Cb)({json:{name:"ReflectanceBias",read:{reader:Z},write:!0}})],at.prototype,"reflectanceBias",void 0),(0,W._)([(0,G.Cb)({json:{name:"ReflectanceGain",read:{reader:Z},write:!0}})],at.prototype,"reflectanceGain",void 0),(0,W._)([(0,G.Cb)({json:{name:"SolarIrradiance",read:{reader:Z},write:!0}})],at.prototype,"solarIrradiance",void 0),at=nt=(0,W._)([(0,it.j)("esri.layers.support.RasterBandInfo")],at);const B=at;var Y,H=K(62185),J=K(7547);function st(i){return i=Number(i),isNaN(i)?void 0:i}let Q=Y=class extends mt.wq{constructor(){super(...arguments),this.acquisitionDate=void 0,this.cloudCover=void 0,this.productName=void 0,this.sensorName=null,this.sensorAzimuth=void 0,this.sensorElevation=void 0,this.sunAzimuth=void 0,this.sunElevation=void 0}readAcquisitionDate(i){return new Date(i)}writeAcquisitionDate(i,h){h.AcquisitionDate=i.getTime()}clone(){return new Y({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})}};(0,W._)([(0,G.Cb)({json:{name:"AcquisitionDate",write:!0}})],Q.prototype,"acquisitionDate",void 0),(0,W._)([(0,H.r)("acquisitionDate")],Q.prototype,"readAcquisitionDate",null),(0,W._)([(0,J.c)("acquisitionDate")],Q.prototype,"writeAcquisitionDate",null),(0,W._)([(0,G.Cb)({json:{name:"CloudCover",read:{reader:st},write:!0}})],Q.prototype,"cloudCover",void 0),(0,W._)([(0,G.Cb)({json:{name:"ProductName",write:!0}})],Q.prototype,"productName",void 0),(0,W._)([(0,G.Cb)({json:{name:"SensorName",write:!0}})],Q.prototype,"sensorName",void 0),(0,W._)([(0,G.Cb)({json:{name:"SensorAzimuth",read:{reader:st},write:!0}})],Q.prototype,"sensorAzimuth",void 0),(0,W._)([(0,G.Cb)({json:{name:"SensorElevation",read:{reader:st},write:!0}})],Q.prototype,"sensorElevation",void 0),(0,W._)([(0,G.Cb)({json:{name:"SunAzimuth",read:{reader:st},write:!0}})],Q.prototype,"sunAzimuth",void 0),(0,W._)([(0,G.Cb)({json:{name:"SunElevation",read:{reader:st},write:!0}})],Q.prototype,"sunElevation",void 0),Q=Y=(0,W._)([(0,it.j)("esri.layers.support.RasterSensorInfo")],Q);const I=Q;var s,O=K(82665);let f=s=class extends mt.wq{constructor(i){super(i),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get bandInfos(){const i=this.keyProperties.BandProperties,{bandCount:h}=this;if(!i?.length||i.length<h){const e=[];for(let o=1;o<=h;o++)e.push(new B({name:"band_"+o}));return e}const t=i.map(e=>B.fromJSON(e));for(let e=0;e<t.length;e++)t[e].name=t[e].name||"band_"+(e+1);return t}get dataType(){const i=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===i?"standard-time":i}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(i){i&&this._set("nativeExtent",i)}get nativePixelSize(){if(null==this.transform||!this.transform.affectsPixelSize)return this.pixelSize;const i=this.nativeExtent;return{x:i.width/this.width,y:i.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}get sensorInfo(){if(this.keyProperties?.SensorName)return I.fromJSON(this.keyProperties)}clone(){return new s({attributeTable:(0,yt.d9)(this.attributeTable),bandCount:this.bandCount,colormap:(0,yt.d9)(this.colormap),extent:(0,yt.d9)(this.extent),format:this.format,height:this.height,width:this.width,histograms:(0,yt.d9)(this.histograms),keyProperties:(0,yt.d9)(this.keyProperties),multidimensionalInfo:(0,yt.d9)(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:(0,yt.d9)(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:(0,yt.d9)(this.spatialReference),statistics:(0,yt.d9)(this.statistics),storageInfo:(0,yt.d9)(this.storageInfo),transform:(0,yt.d9)(this.transform)})}};(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"attributeTable",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"bandCount",void 0),(0,W._)([(0,G.Cb)({readOnly:!0})],f.prototype,"bandInfos",null),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"colormap",void 0),(0,W._)([(0,G.Cb)({type:String,readOnly:!0})],f.prototype,"dataType",null),(0,W._)([(0,G.Cb)({type:r.Z,json:{write:!0}})],f.prototype,"extent",void 0),(0,W._)([(0,G.Cb)({type:r.Z,json:{write:!0}})],f.prototype,"nativeExtent",null),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"nativePixelSize",null),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"format",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"height",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"width",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"hasMultidimensionalTranspose",null),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"histograms",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"keyProperties",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"multidimensionalInfo",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"noDataValue",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"pixelSize",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"pixelType",void 0),(0,W._)([(0,G.Cb)()],f.prototype,"isPseudoSpatialReference",void 0),(0,W._)([(0,G.Cb)({readOnly:!0})],f.prototype,"sensorInfo",null),(0,W._)([(0,G.Cb)({type:dt.Z,json:{write:!0}})],f.prototype,"spatialReference",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"statistics",void 0),(0,W._)([(0,G.Cb)({type:O.Z,json:{write:!0}})],f.prototype,"storageInfo",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],f.prototype,"transform",void 0),f=s=(0,W._)([(0,it.j)("esri.layers.support.RasterInfo")],f);const c=f},82665:(St,Et,K)=>{K.d(Et,{Z:()=>nt});var dt,W=K(50484),mt=K(89317),yt=K(34222),G=K(80543),it=(K(14007),K(4703),K(10141)),r=K(44107);let q=dt=class extends mt.wq{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.transposeInfo=null,this.blockBoundary=null}clone(){return new dt({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:(0,yt.d9)(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:(0,yt.d9)(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:(0,yt.d9)(this.tileInfo),transposeInfo:(0,yt.d9)(this.transposeInfo),blockBoundary:(0,yt.d9)(this.blockBoundary)})}};(0,W._)([(0,G.Cb)({type:Number,json:{write:!0}})],q.prototype,"blockWidth",void 0),(0,W._)([(0,G.Cb)({type:Number,json:{write:!0}})],q.prototype,"blockHeight",void 0),(0,W._)([(0,G.Cb)({type:String,json:{write:!0}})],q.prototype,"compression",void 0),(0,W._)([(0,G.Cb)({type:r.Z,json:{write:!0}})],q.prototype,"origin",void 0),(0,W._)([(0,G.Cb)({type:Number,json:{write:!0}})],q.prototype,"firstPyramidLevel",void 0),(0,W._)([(0,G.Cb)({type:Number,json:{write:!0}})],q.prototype,"maximumPyramidLevel",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],q.prototype,"pyramidResolutions",void 0),(0,W._)([(0,G.Cb)({type:Number,json:{write:!0}})],q.prototype,"pyramidScalingFactor",void 0),(0,W._)([(0,G.Cb)({type:Number,json:{write:!0}})],q.prototype,"pyramidBlockWidth",void 0),(0,W._)([(0,G.Cb)({type:Number,json:{write:!0}})],q.prototype,"pyramidBlockHeight",void 0),(0,W._)([(0,G.Cb)({type:Boolean,json:{write:!0}})],q.prototype,"isVirtualTileInfo",void 0),(0,W._)([(0,G.Cb)({json:{write:!0}})],q.prototype,"tileInfo",void 0),(0,W._)([(0,G.Cb)()],q.prototype,"transposeInfo",void 0),(0,W._)([(0,G.Cb)()],q.prototype,"blockBoundary",void 0),q=dt=(0,W._)([(0,it.j)("esri.layers.support.RasterStorageInfo")],q);const nt=q},86701:(St,Et,K)=>{function W(mt,yt){let G=0,vt="",Ct=0,it=0;const r=mt.length;for(;G<r;)it=mt[G++],Ct=it>>4,Ct<8?Ct=1:15===Ct?(Ct=4,it=(7&it)<<18|(63&mt[G++])<<12|(63&mt[G++])<<6|63&mt[G++]):14===Ct?(Ct=3,it=(15&it)<<12|(63&mt[G++])<<6|63&mt[G++]):(Ct=2,it=(31&it)<<6|63&mt[G++]),(0!==it||yt)&&(vt+=String.fromCharCode(it));return vt}K.d(Et,{f:()=>W})},73407:(St,Et,K)=>{K.d(Et,{Jx:()=>q,zD:()=>G});var W=K(98930);const mt=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let yt=null;function G(){return yt||(yt=K.e(9472).then(K.bind(K,99472)).then(Z=>Z.l).then(({default:Z})=>Z({locateFile:at=>(0,W.V)(`esri/layers/support/rasterFormats/${at}`)})).then(Z=>{!function r(Z){const{_malloc:at,_free:B,_lerc_getBlobInfo:H,_lerc_getDataRanges:J,_lerc_decode_4D:Y,asm:st}=Z;let Q;const I=Object.values(st).find(s=>s&&"buffer"in s&&s.buffer===Z.HEAPU8.buffer),O=s=>{const f=s.map(t=>function Ct(Z){return 16+(Z>>3<<3)}(t)),c=f.reduce((t,e)=>t+e),i=at(c);Q=new Uint8Array(I.buffer);let h=f[0];f[0]=i;for(let t=1;t<f.length;t++){const e=f[t];f[t]=f[t-1]+h,h=e}return f};vt.getBlobInfo=s=>{const i=new Uint8Array(48),h=new Uint8Array(24),[t,e,o]=O([s.length,i.length,h.length]);Q.set(s,t),Q.set(i,e),Q.set(h,o);let n=H(t,s.length,e,o,12,3);if(n)throw B(t),new Error(`lerc-getBlobInfo: error code is ${n}`);Q=new Uint8Array(I.buffer),it(Q,e,i),it(Q,o,h);const y=new Uint32Array(i.buffer),p=new Float64Array(h.buffer),[M,_,,R,A,N,k,m,S,V,X]=y,v={version:M,depthCount:V,width:R,height:A,validPixelCount:k,bandCount:N,blobSize:m,maskCount:S,dataType:_,minValue:p[0],maxValue:p[1],maxZerror:p[2],statistics:[],bandCountWithNoData:X};if(X&&V>1)return B(t),v;if(1===V&&1===N)return B(t),v.statistics.push({minValue:p[0],maxValue:p[1]}),v;const l=V*N*8,w=new Uint8Array(l),T=new Uint8Array(l);let x=t,F=0,ut=0,g=!1;if(Q.byteLength<t+2*l?(B(t),g=!0,[x,F,ut]=O([s.length,l,l]),Q.set(s,x)):[F,ut]=O([l,l]),Q.set(w,F),Q.set(T,ut),n=J(x,s.length,V,N,F,ut),n)throw B(x),g||B(F),new Error(`lerc-getDataRanges: error code is ${n}`);Q=new Uint8Array(I.buffer),it(Q,F,w),it(Q,ut,T);const a=new Float64Array(w.buffer),u=new Float64Array(T.buffer),d=v.statistics;for(let b=0;b<N;b++)if(V>1){const C=a.slice(b*V,(b+1)*V),E=u.slice(b*V,(b+1)*V),D=Math.min.apply(null,C),U=Math.max.apply(null,E);d.push({minValue:D,maxValue:U,depthStats:{minValues:C,maxValues:E}})}else d.push({minValue:a[b],maxValue:u[b]});return B(x),g||B(F),v},vt.decode=(s,f)=>{const{maskCount:c,depthCount:i,bandCount:h,width:t,height:e,dataType:o,bandCountWithNoData:n}=f,y=mt[o],p=t*e,M=new Uint8Array(p*h),R=new Uint8Array(p*i*h*y.size),A=new Uint8Array(h),N=new Uint8Array(8*h),[k,m,S,V,X]=O([s.length,M.length,R.length,A.length,N.length]);Q.set(s,k),Q.set(M,m),Q.set(R,S),Q.set(A,V),Q.set(N,X);const v=Y(k,s.length,c,m,i,t,e,h,o,S,V,X);if(v)throw B(k),new Error(`lerc-decode: error code is ${v}`);Q=new Uint8Array(I.buffer),it(Q,S,R),it(Q,m,M);let l=null;if(n){it(Q,V,A),it(Q,X,N),l=[];const w=new Float64Array(N.buffer);for(let T=0;T<A.length;T++)l.push(A[T]?w[T]:null)}return B(k),{data:R,maskData:M,noDataValues:l}}}(Z)}),yt)}const vt={getBlobInfo:null,decode:null};function it(Z,at,B){B.set(Z.slice(at,at+B.length))}function dt(Z,at,B,H,J){if(B<2)return Z;const Y=new H(at*B);for(let st=0,Q=0;st<at;st++)for(let I=0,O=st;I<B;I++,O+=at)Y[O]=Z[Q++];return Y}function q(Z,at={}){const B=at.inputOffset??0,H=Z instanceof Uint8Array?Z.subarray(B):new Uint8Array(Z,B),J=vt.getBlobInfo(H),{data:Y,maskData:st,noDataValues:Q}=vt.decode(H,J),{width:I,height:O,bandCount:s,depthCount:f,dataType:c,maskCount:i,statistics:h}=J,t=mt[c],e=new t.ctor(Y.buffer),o=[],n=[],y=I*O,p=y*f;for(let k=0;k<s;k++){const m=e.subarray(k*p,(k+1)*p);if(at.returnInterleaved)o.push(m);else{const S=dt(m,y,f,t.ctor);o.push(S)}n.push(st.subarray(k*p,(k+1)*p))}const M=0===i?null:1===i?n[0]:new Uint8Array(y);if(i>1){M.set(n[0]);for(let k=1;k<n.length;k++){const m=n[k];for(let S=0;S<y;S++)M[S]=M[S]&m[S]}}const{noDataValue:_}=at;if(i>0&&null!=_&&t.range[0]<=_&&t.range[1]>=_)for(let k=0;k<s;k++){const m=o[k],S=n[k]||M;for(let V=0;V<y;V++)0===S[V]&&(m[V]=_)}const A=i===s&&s>1?n:null,{pixelType:N}=t;return{width:I,height:O,bandCount:s,pixelType:N,depthCount:f,statistics:h,pixels:o,mask:M,bandMasks:A,noDataValues:Q}}},65410:(St,Et,K)=>{function mt(){const Ct=[];for(let it=0;it<=257;it++)Ct[it]=[it];return Ct}function yt(Ct,it){for(let r=0;r<it.length;r++)Ct.push(it[r])}K.d(Et,{J:()=>vt});const G=new Set;function vt(Ct,it,r,dt=!0){const q=function W(Ct,it,r,dt=!0){if(it%4!=0||r%4!=0){const q=new ArrayBuffer(4*Math.ceil(r/4)),nt=new Uint8Array(q),Z=new Uint8Array(Ct,it,r);if(dt)for(let at=0;at<nt.length;at+=4)nt[at]=Z[at+3],nt[at+1]=Z[at+2],nt[at+2]=Z[at+1],nt[at+3]=Z[at];else nt.set(Z);return new Uint32Array(nt.buffer)}if(dt){const q=new Uint8Array(Ct,it,r),nt=new Uint8Array(q.length);for(let Z=0;Z<nt.length;Z+=4)nt[Z]=q[Z+3],nt[Z+1]=q[Z+2],nt[Z+2]=q[Z+1],nt[Z+3]=q[Z];return new Uint32Array(nt.buffer)}return new Uint32Array(Ct,it,r/4)}(Ct,it,r,dt);let nt=9,Z=mt(),at=32,B=Z.length,H=[],J=1,Y=q[0],st=0;const Q=q.length,I=8*(4*Q-r),O=[];for(;null!=Y;){if(at>=nt)at-=nt,st=Y>>>32-nt,Y<<=nt;else{st=Y>>>32-at,Y=q[J++];const f=nt-at;at=32-f,st=(st<<f)+(Y>>>at),Y<<=f}if(257===st)break;if(256===st){nt=9,Z=mt(),B=Z.length,H=[];continue}const s=Z[st];if(null==s){if(st>Z.length)throw new Error("data integrity issue: code does not exist on code page");H.push(H[0]),Z[B++]=H.slice(),yt(O,H)}else yt(O,s),H.push(s[0]),H.length>1&&(Z[B++]=H.slice()),H=s.slice();if(G.has(B)&&nt++,0===at&&(Y=q[J++],at=32),J>Q||J===Q&&at<=I)break}return new Uint8Array(O)}G.add(511),G.add(1023),G.add(2047),G.add(4095),G.add(8191)},3749:(St,Et,K)=>{K.d(Et,{J:()=>V,y:()=>S});var W=K(15861),mt=K(57964),yt=K(51172),G=K(97493),vt=K(12852),Ct=K(79412),it=K(46528);class r{constructor(l){this._canvas=null,this._ctx=null,l&&(this._canvas=l.canvas,this._ctx=l.ctx||l.canvas&&l.canvas.getContext("2d"))}decode(l,w,T){if(!l||l.byteLength<10)throw new mt.Z("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:x=0,height:F=0,format:ut}=w;const{applyJpegMask:g}=w;if(g&&(!x||!F))throw new mt.Z("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((a,u)=>{let d=null;"jpg"===ut&&g&&(d=r._getMask(l,{width:x,height:F}));const b=new Blob([new Uint8Array(l)],{type:"image/"+ut=="jpg"?"jpeg":ut}),C=URL.createObjectURL(b),E=new Image;let D;E.src=C,E.onload=()=>{if(URL.revokeObjectURL(C),(0,Ct.Hc)(T))return void u((0,Ct.zE)());x=E.width,F=E.height,this._canvas&&this._ctx?(this._canvas.width===x&&this._canvas.height===F||(this._canvas.width=x,this._canvas.height=F),this._ctx.clearRect(0,0,x,F)):(this._canvas=document.createElement("canvas"),this._canvas.width=x,this._canvas.height=F,this._ctx=this._canvas.getContext("2d")),this._ctx.drawImage(E,0,0);const U=this._ctx.getImageData(0,0,x,F);let P;if(D=U.data,w.renderOnCanvas){if(d)for(P=0;P<d.length;P++)D[4*P+3]=d[P]?255:0;return this._ctx.putImageData(U,0,0),void a(null)}const tt=x*F,lt=new Uint8Array(tt),gt=new Uint8Array(tt),rt=new Uint8Array(tt);if(d)for(P=0;P<tt;P++)lt[P]=D[4*P],gt[P]=D[4*P+1],rt[P]=D[4*P+2];else for(d=new Uint8Array(tt),P=0;P<tt;P++)lt[P]=D[4*P],gt[P]=D[4*P+1],rt[P]=D[4*P+2],d[P]=D[4*P+3];a({width:x,height:F,pixels:[lt,gt,rt],mask:d,pixelType:"u8"})},E.onerror=()=>{URL.revokeObjectURL(C),u("cannot load image")}})}static _getMask(l,w){let T=null;try{const x=new Uint8Array(l),F=Math.ceil(x.length/2);let ut=0;const g=x.length-2;for(ut=F;ut<g&&(255!==x[ut]||217!==x[ut+1]);ut++);if(ut+=2,ut<x.length-1){const a=new it.Z(x.subarray(ut)).getBytes();T=new Uint8Array(w.width*w.height);let u=0;for(let d=0;d<a.length;d++)for(let b=7;b>=0;b--)T[u++]=a[d]>>b&1}}catch{}return T}}var dt=K(68030);class q{static decode(l,w=!1){const T=new Uint8Array(l),x=new dt.J;x.parse(T);const{width:F,height:ut,numComponents:g,eof:a}=x,u=x.getData(F,ut,!0),d=F*ut;let b,C=null,E=0,D=0,U=0;if(!w&&a<T.length-1)try{const P=new it.Z(T.subarray(a)).getBytes();C=new Uint8Array(d);let tt=0;for(E=0;E<P.length;E++)for(U=7;U>=0;U--)C[tt++]=P[E]>>U&1}catch{}if(1===g&&u.length===F*ut){const P=new Uint8Array(u.buffer);b=[P,P,P]}else{for(b=[],E=0;E<3;E++)b.push(new Uint8Array(d));for(U=0,D=0;D<d;D++)for(E=0;E<3;E++)b[E][D]=u[U++]}return{width:F,height:ut,pixels:b,mask:C}}}var nt=K(73407),Z=K(65410),at=K(86741);const B=(v,l)=>Math.floor(v.byteLength/(l.width*l.height*H(l.pixelType))),H=v=>{let l=1;switch(v){case Uint8Array:case Int8Array:l=1;break;case Uint16Array:case Int16Array:l=2;break;case Uint32Array:case Int32Array:case Float32Array:l=4;break;case Float64Array:l=8}return l};class Y{static decode(l,w){const T=w.pixelType,x=[],F=w.width*w.height,ut=B(l,w),{bandIds:g,format:a}=w,u=g?.length||B(l,w),d=l.byteLength-l.byteLength%(F*H(T)),b=new T(l,0,F*ut);let C,E,D,U,P=null;if("bip"===a)for(C=0;C<u;C++){for(D=new T(F),U=g?g[C]:C,E=0;E<F;E++)D[E]=b[E*ut+U];x.push(D)}else if("bsq"===a)for(C=0;C<u;C++)U=g?g[C]:C,x.push(b.subarray(U*F,(U+1)*F));return d<l.byteLength-1&&(P=((v,l)=>{if(8*v.byteLength<l)return null;const w=new Uint8Array(v,0,Math.ceil(l/8)),T=new Uint8Array(l);let x=0,F=0,ut=0,g=0;for(ut=0;ut<w.length-1;ut++)for(F=w[ut],g=7;g>=0;g--)T[x++]=F>>g&1;for(g=7;x<l-1;)F=w[w.length-1],T[x++]=F>>g&1,g--;return T})(l.slice(d),F)),{pixels:x,mask:P}}}var st=K(49209),Q=K(83931),I=function(v){var x,F,ut;function g(a){var u,b,C,E,D,U,P,tt,lt,gt,rt,$;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},E=null;;){switch(u=this.readUInt32(),P=function(){var ct,j;for(j=[],ct=0;ct<4;++ct)j.push(String.fromCharCode(this.data[this.pos++]));return j}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":E&&this.animation.frames.push(E),this.pos+=4,E={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},C=this.readUInt16(),b=this.readUInt16()||100,E.delay=1e3*C/b,E.disposeOp=this.data[this.pos++],E.blendOp=this.data[this.pos++],E.data=[];break;case"IDAT":case"fdAT":for("fdAT"===P&&(this.pos+=4,u-=4),a=E?.data||this.imgData,gt=0;0<=u?gt<u:gt>u;0<=u?++gt:--gt)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(u),(tt=255-this.transparency.indexed.length)>0)for(rt=0;0<=tt?rt<tt:rt>tt;0<=tt?++rt:--rt)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":D=(lt=this.read(u)).indexOf(0),U=String.fromCharCode.apply(String,lt.slice(0,D)),this.text[U]=String.fromCharCode.apply(String,lt.slice(D+1));break;case"IEND":return E&&this.animation.frames.push(E),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===($=this.colorType)||6===$,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return g.load=function(a,u,d){var b;return"function"==typeof u&&(d=u),(b=new XMLHttpRequest).open("GET",a,!0),b.responseType="arraybuffer",b.onload=function(){var C;return C=new g(new Uint8Array(b.response||b.mozResponseArrayBuffer)),"function"==typeof u?.getContext&&C.render(u),"function"==typeof d?d(C):void 0},b.send(null)},g.prototype.read=function(a){var u,d;for(d=[],u=0;0<=a?u<a:u>a;0<=a?++u:--u)d.push(this.data[this.pos++]);return d},g.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},g.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},g.prototype.decodePixels=function(a){var u,d,b,C,E,D,U,P,lt,gt,rt,$,ct,j,L,z,et,ot,ht,ft,pt,wt;if(null==a&&(a=this.imgData),0===a.length)return new Uint8Array(0);for(a=(a=new it.Z(a)).getBytes(),L=(rt=this.pixelBitlength/8)*this.width,$=new Uint8Array(L*this.height),D=a.length,j=0,ct=0,d=0;ct<D;){switch(a[ct++]){case 0:for(C=ot=0;ot<L;C=ot+=1)$[d++]=a[ct++];break;case 1:for(C=ht=0;ht<L;C=ht+=1)u=a[ct++],E=C<rt?0:$[d-rt],$[d++]=(u+E)%256;break;case 2:for(C=ft=0;ft<L;C=ft+=1)u=a[ct++],b=(C-C%rt)/rt,$[d++]=((z=j&&$[(j-1)*L+b*rt+C%rt])+u)%256;break;case 3:for(C=pt=0;pt<L;C=pt+=1)u=a[ct++],b=(C-C%rt)/rt,E=C<rt?0:$[d-rt],z=j&&$[(j-1)*L+b*rt+C%rt],$[d++]=(u+Math.floor((E+z)/2))%256;break;case 4:for(C=wt=0;wt<L;C=wt+=1)u=a[ct++],b=(C-C%rt)/rt,0===j?z=et=0:(z=$[(j-1)*L+b*rt+C%rt],et=b&&$[(j-1)*L+(b-1)*rt+C%rt]),U=(E=C<rt?0:$[d-rt])+z-et,P=Math.abs(U-E),lt=Math.abs(U-z),gt=Math.abs(U-et),$[d++]=(u+(P<=lt&&P<=gt?E:lt<=gt?z:et))%256;break;default:throw new Error("Invalid filter algorithm: "+a[ct-1])}j++}return $},g.prototype.decodePalette=function(){var a,u,d,b,C,E,D,U,P;for(d=this.palette,E=this.transparency.indexed||[],C=new Uint8Array((E.length||0)+d.length),b=0,a=0,u=D=0,U=d.length;D<U;u=D+=3)C[b++]=d[u],C[b++]=d[u+1],C[b++]=d[u+2],C[b++]=null!=(P=E[a++])?P:255;return C},g.prototype.copyToImageData=function(a,u){var d,b,C,E,D,U,P,tt,lt,gt,rt;if(b=this.colors,lt=null,d=this.hasAlphaChannel,this.palette.length&&(lt=null!=(rt=this._decodedPalette)?rt:this._decodedPalette=this.decodePalette(),b=4,d=!0),tt=(C=a.data||a).length,D=lt||u,E=U=0,1===b)for(;E<tt;)P=lt?4*u[E/4]:U,gt=D[P++],C[E++]=gt,C[E++]=gt,C[E++]=gt,C[E++]=d?D[P++]:this.transparency.grayscale&&this.transparency.grayscale===gt?0:255,U=P;else for(;E<tt;)P=lt?4*u[E/4]:U,C[E++]=D[P++],C[E++]=D[P++],C[E++]=D[P++],C[E++]=d?D[P++]:this.transparency.rgb&&this.transparency.rgb[1]===D[P-3]&&this.transparency.rgb[3]===D[P-2]&&this.transparency.rgb[5]===D[P-1]?0:255,U=P},g.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a},F=v.document&&v.document.createElement("canvas"),ut=F&&F.getContext("2d"),x=function(a){var u;return ut.width=a.width,ut.height=a.height,ut.clearRect(0,0,a.width,a.height),ut.putImageData(a,0,0),(u=new Image).src=F.toDataURL(),u},g.prototype.decodeFrames=function(a){var u,d,b,C,E,D,U,P;if(this.animation){for(P=[],d=E=0,D=(U=this.animation.frames).length;E<D;d=++E)b=a.createImageData((u=U[d]).width,u.height),C=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(b,C),u.imageData=b,P.push(u.image=x(b));return P}},g.prototype.renderFrame=function(a,u){var d,b,C;return d=(b=this.animation.frames)[u],C=b[u-1],0===u&&a.clearRect(0,0,this.width,this.height),1===C?.disposeOp?a.clearRect(C.xOffset,C.yOffset,C.width,C.height):2===C?.disposeOp&&a.putImageData(C.imageData,C.xOffset,C.yOffset),0===d.blendOp&&a.clearRect(d.xOffset,d.yOffset,d.width,d.height),a.drawImage(d.image,d.xOffset,d.yOffset)},g.prototype.animate=function(a){var u,d,b,C,E,D,U=this;return d=0,C=(D=this.animation).numFrames,b=D.frames,E=D.numPlays,(u=function(){var P,tt;if(P=d++%C,tt=b[P],U.renderFrame(a,P),C>1&&d/C<E)return U.animation._timeout=setTimeout(u,tt.delay)})()},g.prototype.stopAnimation=function(){var a;return clearTimeout(null!=(a=this.animation)?a._timeout:void 0)},g.prototype.render=function(a){var u,d;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,u=a.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(d=u.createImageData(this.width,this.height),this.copyToImageData(d,this.decodePixels()),u.putImageData(d,0,0))},g}(self);const O=new Set(["jpg","png","bmp","gif"]);function s(v,l){return f.apply(this,arguments)}function f(){return(f=(0,W.Z)(function*(v,l){if(!Q.f)throw new mt.Z("rasterCoded:decode","lerc decoder is not supported on big endian platform");yield(0,nt.zD)();const{offset:w}=l,{width:T,height:x,pixelType:F,statistics:ut,depthCount:g,noDataValues:a,bandMasks:u,pixels:d,mask:b}=(0,nt.Jx)(v,{inputOffset:w,returnInterleaved:l.returnInterleaved}),C=new G.Z({width:T,height:x,pixelType:F.toLowerCase(),pixels:d,mask:b,statistics:ut.map(({minValue:E,maxValue:D})=>new vt.c(E,D)),bandMasks:u,depthCount:g,noDataValues:a});return ut?.length||C.updateStatistics(),C})).apply(this,arguments)}function c(v,l){return i.apply(this,arguments)}function i(){return(i=(0,W.Z)(function*(v,l){const w=yield(0,st.Jx)(v,{...l,noDataValue:null});(0,yt.O3)(w);const T=new G.Z({width:w.width,height:w.height,pixels:w.pixels,pixelType:w.pixelType.toLowerCase(),mask:w.mask,bandMasks:w.bandMasks,statistics:null});return T.updateStatistics(),T})).apply(this,arguments)}function t(){return(t=(0,W.Z)(function*(v,l){const w=yield(0,st.Uw)(v,l.customOptions),T=new G.Z({width:w.width,height:w.height,pixels:w.pixels,pixelType:w.pixelType.toLowerCase(),mask:w.mask,statistics:null});return T.updateStatistics(),T})).apply(this,arguments)}function e(v,l){const w=l.pixelType||"u8",T=G.Z.getPixelArrayConstructor(w),x="u8"===w?v:new T(v.buffer),F=[],ut=l.planes||1;if(1===ut)F.push(x);else for(let a=0;a<ut;a++){const u=(l.width||1)*(l.height||v.length),d=new T(u);for(let b=0;b<u;b++)d[b]=x[b*ut+a];F.push(d)}const g=new G.Z({width:l.width||1,height:l.height||v.length,pixels:F,pixelType:w,statistics:null});return g.updateStatistics(),g}function o(v,l){return e(new it.Z(new Uint8Array(v)).getBytes(),l)}function n(v,l){return e((0,Z.J)(v,l.offset,l.eof,!l.isInputBigEndian),l)}function p(v,l){const w=q.decode(v,l.hasNoZlibMask??void 0),T=new G.Z({width:w.width,height:w.height,pixels:w.pixels,pixelType:"u8",mask:w.mask,statistics:null});return T.updateStatistics(),T}function M(v,l){const w=new Uint8Array(v),T=new I(w),{width:x,height:F}=l,ut=x*F,g=T.decode();let a,u=0,d=0;const b=new Uint8Array(ut);for(u=0;u<ut;u++)b[u]=g[4*u+3];const C=new G.Z({width:x,height:F,pixels:[],pixelType:"u8",mask:b,statistics:[]});for(u=0;u<3;u++){for(a=new Uint8Array(ut),d=0;d<ut;d++)a[d]=g[4*d+u];C.addData({pixels:a})}return C.updateStatistics(),C}function R(){return(R=(0,W.Z)(function*(v,l,w,T){const x=new r,F={applyJpegMask:!1,format:l,...w},ut=yield x.decode(v,F,T),g=new G.Z(ut);return g.updateStatistics(),g})).apply(this,arguments)}function A(v){if(null==v)throw new mt.Z("rasterCodec:decode","parameter encodeddata is required.");const l=new Uint8Array(v,0,10);let w="";return 255===l[0]&&216===l[1]?w="jpg":137===l[0]&&80===l[1]&&78===l[2]&&71===l[3]?w="png":67===l[0]&&110===l[1]&&116===l[2]&&90===l[3]&&73===l[4]&&109===l[5]&&97===l[6]&&103===l[7]&&101===l[8]&&32===l[9]?w="lerc":76===l[0]&&101===l[1]&&114===l[2]&&99===l[3]&&50===l[4]&&32===l[5]?w="lerc2":73===l[0]&&73===l[1]&&42===l[2]&&0===l[3]||77===l[0]&&77===l[1]&&0===l[2]&&42===l[3]||73===l[0]&&73===l[1]&&43===l[2]&&0===l[3]||77===l[0]&&77===l[1]&&0===l[2]&&43===l[3]?w="tiff":71===l[0]&&73===l[1]&&70===l[2]?w="gif":66===l[0]&&77===l[1]?w="bmp":String.fromCharCode.apply(null,l).toLowerCase().includes("error")&&(w="error"),w}function S(v){let l=A(v);return"lerc2"===l?l="lerc":"error"===l&&(l=""),l}function V(v){return X.apply(this,arguments)}function X(){return X=(0,W.Z)(function*(v,l={},w){if(null==v)throw new mt.Z("rasterCodec:decode","missing encodeddata parameter.");let T=l.format?.toLowerCase();if(!("bsq"!==T&&"bip"!==T||null!=l.width&&null!=l.height))throw new mt.Z("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===T&&l.customOptions)return function h(v,l){return t.apply(this,arguments)}(v,l);if((!T||"bsq"!==T&&"bip"!==T&&"deflate"!==T&&"lzw"!==T)&&(T=A(v)),l.useCanvas&&O.has(T))return function _(v,l,w,T){return R.apply(this,arguments)}(v,T,l,w);const x=function N(v){let l=null;switch(v){case"lerc":case"lerc2":l=s;break;case"jpg":l=p;break;case"png":l=M;break;case"bsq":case"bip":l=(w,T)=>function y(v,l,w){const{pixelTypeCtor:T}=function k(v){let l=null,w=null;switch(v?v.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":w=255,l=Uint8Array;break;case"u16":w=w||65535,l=Uint16Array;break;case"u32":w=w||2**32-1,l=Uint32Array;break;case"s8":w=w||-128,l=Int8Array;break;case"s16":w=w||-32768,l=Int16Array;break;case"s32":w=w||0-2**31,l=Int32Array;break;default:l=Float32Array}return{pixelTypeCtor:l,noDataValue:w}}(l.pixelType),x=(0,Y.decode)(v,{width:l.width,height:l.height,pixelType:T,format:w}),F=new G.Z({width:l.width,height:l.height,pixels:x.pixels,pixelType:l.pixelType,mask:x.mask,statistics:null});return F.updateStatistics(),F}(w,T,v);break;case"tiff":l=c;break;case"deflate":l=o;break;case"lzw":l=n;break;case"error":l=()=>{throw new mt.Z("rasterCodec:decode","input data contains error")};break;default:l=()=>{throw new mt.Z("rasterCodec:decode","unsupported raster format")}}return l}(T);let F;l.isPoint&&(null!=(l={...l}).width&&l.width++,null!=l.height&&l.height++);const{offsets:ut}=l;if(ut&&ut.length>1){const g=ut.map((d,b)=>x(v.slice(d,ut[b+1]),l)),a=yield Promise.all(g);F=a[0],F.pixels=a.map(d=>d.pixels[0]);const u=a.map(d=>d.mask);a.some(d=>null!=d)&&(u.forEach((d,b)=>{null==d&&(u[b]=new Uint8Array(F.width*F.height).fill(255))}),F.bandMasks=u,F.mask=G.Z.combineBandMasks(u)),F.updateStatistics()}else F=yield x(v,{...l,offset:ut?.[0]??l.offset});return"jpg"!==T&&null!=l.noDataValue&&1===F.depthCount&&(0,at.Ao)(F,l.noDataValue,{customFloatTolerance:l.tolerance}),l.isPoint&&function m(v,l=1){if(!v)return;const{pixels:w,width:T,height:x,mask:F}=v;if(!w||0===w.length)return;const ut=w.length,g=T-1,a=x-1,u=[];let d,b,C,E,D,U,P=null;const tt=G.Z.getPixelArrayConstructor(v.pixelType);if(0===l){for(d=0;d<ut;d++){for(D=w[d],U=new tt(g*a),b=0;b<a;b++)for(E=b*T,C=0;C<g;C++)U[b*g+C]=D[E+C];u.push(U)}if(null!=F)for(P=new Uint8Array(g*a),b=0;b<a;b++)for(E=b*T,C=0;C<g;C++)P[b*g+C]=F[E+C]}else{for(d=0;d<ut;d++){for(D=w[d],U=new tt(g*a),b=0;b<a;b++)for(E=b*T,C=0;C<g;C++)U[b*g+C]=(D[E+C]+D[E+C+1]+D[E+T+C]+D[E+T+C+1])/4;u.push(U)}if(F)for(P=new Uint8Array(g*a),b=0;b<a;b++)for(E=b*T,C=0;C<g;C++)P[b*g+C]=Math.min.apply(null,[F[E+C],F[E+C+1],F[E+T+C],F[E+T+C+1]])}v.width=g,v.height=a,v.mask=P,v.pixels=u}(F),F}),X.apply(this,arguments)}},49209:(St,Et,K)=>{K.d(Et,{Dq:()=>M,FI:()=>_,I7:()=>N,If:()=>R,Jx:()=>F,Uw:()=>T,cK:()=>X,ee:()=>A,vr:()=>v});var W=K(15861),yt=(K(14007),K(86701)),G=K(68030),vt=K(73407),Ct=K(65410),it=K(86741),r=K(16854),dt=K(83931),q=K(46528);const nt=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],Z=4294967296,at=new Set([1,5,6,7,8,34712,34887]);function B(g,a){let u="unknown";return 3===g?u=64===a?"f64":"f32":1===g?1===a?u="u1":2===a?u="u2":4===a?u="u4":a<=8?u="u8":a<=16?u="u16":a<=32&&(u="u32"):2===g&&(a<=8?u="s8":a<=16?u="s16":a<=32&&(u="s32")),u}function H(g){let a=null;switch(g?g.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":a=Uint8Array;break;case"u16":a=Uint16Array;break;case"u32":a=Uint32Array;break;case"s8":a=Int8Array;break;case"s16":a=Int16Array;break;case"s32":a=Int32Array;break;case"f64":a=Float64Array;break;default:a=Float32Array}return a}function J(g,a){return{x:a[0]*g.x+a[1]*g.y+a[2],y:a[3]*g.x+a[4]*g.y+a[5]}}function Y(g,a){return g.get(a)?.values}function st(g,a){return g.get(a)?.values}function Q(g,a){return g.get(a)?.values?.[0]}function I(g,a){return g.get(a)?.values?.[0]}function O(g,a,u,d=0,b=r.Z.tiffTags,C=4){const E=8===C,D=E?m(new DataView(g,u,8),0,a):new DataView(g,u,2).getUint16(0,a),U=4+2*C,P=E?8:2,tt=P+D*U;if(u+tt>g.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:tt};const lt=u+tt+4<=g.byteLength?V(new DataView(g,u+tt,8===C?8:4),0,a,8===C):null,gt=u+P,rt=new Map;let $,ct,j,L,z,et=0,ot=0;for(let ht=0;ht<D;ht++){ct=new DataView(g,gt+U*ht,U),j=ct.getUint16(0,a),z=ct.getUint16(2,a),L=r.Z.getTagName(j,b);const ft=[];2===C?(et=ct.getUint16(4,a),ot=ct.getUint16(6,a)):4===C?(et=ct.getUint32(4,a),ot=ct.getUint32(8,a)):8===C&&(et=V(ct,4,a,!0),ot=V(ct,12,a,!0),ft.push(ct.getUint32(12,a)),ft.push(ct.getUint32(16,a))),$={id:j,type:z,valueCount:et,valueOffset:ot,valueOffsets:ft,values:null},M(g,a,$,d,!1,C),rt.set(L,$)}return{success:!0,ifd:rt,nextIFD:lt,requiredBufferSize:tt}}const s=(g,a)=>(0,vt.Jx)(g,{inputOffset:a}).pixels[0];function f(g,a){if(1!==a&&2!==a&&4!==a)return g;const u=new Uint8Array(g),d=8/a,b=new Uint8Array(g.byteLength*d);let C=0;const E=2**a-1;for(let D=0;D<u.length;D++){const U=u[D];for(let P=0;P<d;P++)b[C++]=U<<a*P>>>8-a&E}return b.buffer}function c(g,a,u){const d=new G.J;d.parse(g),d.colorTransform=6===u?-1:0;const b=d.getData(d.width,d.height,1!==a&&4!==a);return new Uint8Array(b.buffer)}function i(g){const a=new q.Z(g).getBytes(),u=new ArrayBuffer(a.length),d=new Uint8Array(u);return d.set(a),d}function h(g,a,u,d,b){return t.apply(this,arguments)}function t(){return(t=(0,W.Z)(function*(g,a,u,d,b){const C=dt.f===a,E=I(u,"BITSPERSAMPLE"),D=I(u,"SAMPLESPERPIXEL")??1,U=I(u,"PHOTOMETRICINTERPRETATION"),P=I(u,"SAMPLEFORMAT")??1,tt=B(P,E),lt=I(u,"COMPRESSION")??1,gt=H(tt);let rt,$,ct;if(34887===lt)return yield(0,vt.zD)(),s(g,d);if(1===lt)rt=g.slice(d,d+b),$=new Uint8Array(rt);else if(8===lt||32946===lt)$=new Uint8Array(g,d,b),$=i($),rt=$.buffer;else if(6===lt)$=new Uint8Array(g,d,b),$=c($,D,U),rt=$.buffer;else if(7===lt){const et=u.get("JPEGTABLES").values,ot=et.length-2;$=new Uint8Array(ot+b-2);for(let ft=0;ft<ot;ft++)$[ft]=et[ft];const ht=new Uint8Array(g,d+2,b-2);for(let ft=0;ft<ht.length;ft++)$[ot+ft]=ht[ft];$=c($,D,U),rt=$.buffer}else{if(5!==lt)throw new Error("tiff-decode: unsupport compression "+lt);$=(0,Ct.J)(g,d,b,a),rt=$.buffer}if(rt=f(rt,E),"u8"===tt||"s8"===tt||C)ct=new gt(rt);else{rt=new ArrayBuffer($.length);const et=new Uint8Array(rt);switch(tt){case"u16":case"s16":for(let ot=0;ot<$.length;ot+=2)et[ot]=$[ot+1],et[ot+1]=$[ot];break;case"u32":case"s32":case"f32":for(let ot=0;ot<$.length;ot+=4)et[ot]=$[ot+3],et[ot+1]=$[ot+2],et[ot+2]=$[ot+1],et[ot+3]=$[ot]}ct=new gt(rt)}const j=I(u,"PREDICTOR")??1,L=I(u,"TILEWIDTH"),z=I(u,"TILELENGTH");if(j>1&&(5===lt||8===lt||32946===lt)&&L&&z){const et=R(u),ot=new gt(ct.length);ot.set(ct),ct=function w(g,a,u,d,b){const C=d?4:1,E=u*C*b;d&&(g=new Uint8Array(g.buffer));for(let P=0;P<a;P++){const tt=P*E;for(let lt=b;lt<E;lt++)g[tt+lt]+=g[tt+lt-b]}if(!d)return g;const D=new Uint8Array(g.length),U=u*b;for(let P=0;P<a;P++){const tt=P*E;for(let lt=0;lt<U;lt++)for(let gt=0;gt<C;gt++)D[tt+lt*C+gt]=g[tt+lt+(C-gt-1)*U]}return new Float32Array(D.buffer)}(ot,z,L,3===P&&3===j,et?1:D)}return ct})).apply(this,arguments)}function o(){return(o=(0,W.Z)(function*(g,a,u){const d=st(u,"TILEOFFSETS");if(void 0===d)return null;const b=st(u,"TILEBYTECOUNTS"),{width:C,height:E,pixelType:D,tileWidth:U,tileHeight:P}=_([u]),tt=R(u,a),lt=I(u,"SAMPLESPERPIXEL")||a.planes,gt=C*E,rt=I(u,"BITSPERSAMPLE"),$=34887===(I(u,"COMPRESSION")??1),ct=H(D),j=[];for(let Rt=0;Rt<lt;Rt++)j.push(new ct(gt));let L,z,et,ot,ht,ft,pt,wt,bt,Tt,Pt,xt,Mt;const kt=Math.ceil(C/U),At=new Uint8Array(gt).fill(255);let Ot=!1;if(rt%8==0)if($&&tt&&lt>1){const Rt=Math.round(d.length/lt);for(L=0;L<Rt;L++){ft=Math.floor(L/kt)*P,pt=L%kt*U,wt=ft*C+pt;for(let Dt=0;Dt<lt;Dt++){const Ut=L*lt+Dt;for(0===b[Ut]?(et=null,Ot=!0):et=yield h(g,a.littleEndian,u,d[Ut],b[Ut]),Tt=0,bt=wt,xt=Math.min(U,C-pt),Pt=Math.min(P,E-ft),Mt=j[Dt],ot=0;ot<Pt;ot++)for(bt=wt+ot*C,Tt=ot*U,ht=0;ht<xt;ht++,bt++,Tt++)et?Mt[bt]=et[Tt]:At[bt]=0}}}else for(L=0;L<d.length;L++)for(ft=Math.floor(L/kt)*P,pt=L%kt*U,wt=ft*C+pt,0===b[L]?(et=null,Ot=!0):et=yield h(g,a.littleEndian,u,d[L],b[L]),Tt=0,bt=wt,xt=Math.min(U,C-pt),Pt=Math.min(P,E-ft),z=0;z<lt;z++)if(Mt=j[z],tt||$)for(ot=0;ot<Pt;ot++)for(bt=wt+ot*C,Tt=U*P*z+ot*U,ht=0;ht<xt;ht++,bt++,Tt++)et?Mt[bt]=et[Tt]:At[bt]=0;else for(ot=0;ot<Pt;ot++)for(bt=wt+ot*C,Tt=ot*U*lt+z,ht=0;ht<xt;ht++,bt++,Tt+=lt)et?Mt[bt]=et[Tt]:At[bt]=0;return{width:C,height:E,pixelType:D,pixels:j,mask:Ot?At:void 0}})).apply(this,arguments)}const n=(g,a,u)=>{const d=dt.f===a.littleEndian,b=st(u,"STRIPOFFSETS");if(void 0===b)return null;const{width:C,height:E,pixelType:D}=_([u]),U=I(u,"SAMPLESPERPIXEL")||a.planes,P=I(u,"PHOTOMETRICINTERPRETATION"),tt=C*E,lt=I(u,"BITSPERSAMPLE"),gt=H(D),rt=new gt(tt*U),$=st(u,"STRIPBYTECOUNTS"),ct=I(u,"ROWSPERSTRIP"),j=I(u,"COMPRESSION")??1;let L,z,et,ot,ht,ft,pt,wt,bt;if(lt%8==0)for(L=0;L<b.length;L++){if(ht=L*(ct*C)*U,"u8"===D||"s8"===D||d)8===j||32946===j?(pt=new Uint8Array(g,b[L],$[L]),pt=i(pt),ft=pt.buffer):6===j?(pt=new Uint8Array(g,b[L],$[L]),pt=c(pt,U,P),ft=pt.buffer):5===j?(pt=(0,Ct.J)(g,b[L],$[L],a.littleEndian),ft=pt.buffer):ft=g.slice(b[L],b[L]+$[L]),ft=f(ft,lt),ot=new gt(ft);else{switch(6===j||8===j||32946===j?(pt=new Uint8Array(g,b[L],$[L]),wt=i(pt),ft=wt.buffer):(ft=new ArrayBuffer($[L]),pt=new Uint8Array(g,b[L],$[L]),wt=new Uint8Array(ft)),D){case"u16":case"s16":for(et=0;et<pt.length;et+=2)wt[et]=pt[et+1],wt[et+1]=pt[et];break;case"u32":case"s32":case"f32":for(et=0;et<pt.length;et+=4)wt[et]=pt[et+3],wt[et+1]=pt[et+2],wt[et+2]=pt[et+1],wt[et+3]=pt[et]}ft=f(ft,lt),ot=new gt(ft)}rt.set(ot,ht)}const Tt=[];if(1===U)Tt.push(rt);else for(L=0;L<U;L++){for(bt=new gt(tt),z=0;z<tt;z++)bt[z]=rt[z*U+L];Tt.push(bt)}return{width:C,height:E,pixelType:D,pixels:Tt}},y=(g,a,u)=>{if(!(g&&g.length>0&&a&&u))return null;let d,b,C;const E=g[0].length,D=g.length,U=new Uint8Array(E);for(let P=0;P<D;P++)if(d=g[P],b=a[P],C=u[P],0===P)for(let tt=0;tt<E;tt++)U[tt]=d[tt]<b||d[tt]>C?0:1;else for(let tt=0;tt<E;tt++)U[tt]&&(U[tt]=d[tt]<b||d[tt]>C?0:1);return U},p=g=>{if(!g)return null;const a=g.match(/<Item(.*?)Item>/gi);if(!a||0===a.length)return null;const u=new Map;let d,b,C,E,D;for(let L=0;L<a.length;L++)d=a[L],b=d.slice(6,d.indexOf(">")),E=d.indexOf("sample="),E>-1&&(D=d.slice(E+8,d.indexOf('"',E+8))),E=d.indexOf("name="),E>-1&&(b=d.slice(E+6,d.indexOf('"',E+6))),b&&(C=d.slice(d.indexOf(">")+1,d.indexOf("</Item>")).trim(),null!=D?u.has(b)?u.get(b)[D]=C:u.set(b,[C]):u.set(b,C)),D=null;const U=u.get("STATISTICS_MINIMUM"),P=u.get("STATISTICS_MAXIMUM"),tt=u.get("STATISTICS_MEAN"),lt=u.get("STATISTICS_STDDEV");let gt=null;if(U&&P){gt=[];for(let L=0;L<U.length;L++)gt.push({min:parseFloat(U[L]),max:parseFloat(P[L]),avg:tt&&parseFloat(tt[L]),stddev:lt&&parseFloat(lt[L])})}const rt=u.get("BandName"),$=u.get("WavelengthMin"),ct=u.get("WavelengthMax");let j=null;if(rt){j=[];for(let L=0;L<rt.length;L++)j.push({BandName:rt[L],WavelengthMin:$&&parseFloat($[L]),WavelengthMax:ct&&parseFloat(ct[L])})}return{statistics:gt,bandProperties:j,dataType:u.get("DataType"),rawMetadata:u}};function M(g,a,u,d=0,b=!1,C=4){if(u.values)return!0;const E=u.type,D=u.valueCount;let U=u.valueOffset,P=[];const tt=nt[E],lt=8*tt,gt=D*tt,rt=D*nt[E]*8;let $,ct;const j=8===C?64:32,L=u.valueOffsets;if(rt>j&&gt>(b?g.byteLength:g?g.byteLength-U+d:0))return u.offlineOffsetSize=[U,gt],u.values=null,!1;if(rt<=j){if(!a)if(j<=32)U>>>=32-rt;else{const z=L?.length?L[0]:U>>>0,et=L?.length?L[1]:Math.round((U-z)/Z);rt<=32?(U=z>>>32-rt,L[0]=U):(U=z*2**(32-rt)+(et>>>32-rt),L[0]=z,L[1]=et>>>32-rt)}if(1===D&&lt===j)P=[U];else if(64===j){const z=L?.length?L[0]:U>>>0,et=L?.length?L[1]:Math.round((U-z)/Z);let ot=z,ht=32;for(ct=1;ct<=D;ct++){const ft=32-lt*ct%32;if(ht<lt){const pt=ot<<ft>>>32-ht;ot=et,P.push(pt+(et<<32-ht>>>32-ht)*2**(lt-ht)),ht-=32-(lt-ht)}else P.push(ot<<ft>>>32-lt),ht-=lt;0===ht&&(ht=32,ot=et)}}else for(ct=1;ct<=D;ct++)P.push(U<<32-lt*ct>>>32-lt)}else{U-=d,b&&(U=0);for(let z=U;z<U+gt;z+=tt){switch(E){case 1:case 2:case 7:$=new DataView(g,z,1).getUint8(0);break;case 3:$=new DataView(g,z,2).getUint16(0,a);break;case 4:case 13:$=new DataView(g,z,4).getUint32(0,a);break;case 5:$=new DataView(g,z,4).getUint32(0,a)/new DataView(g,z+4,4).getUint32(0,a);break;case 6:$=new DataView(g,z,1).getInt8(0);break;case 8:$=new DataView(g,z,2).getInt16(0,a);break;case 9:$=new DataView(g,z,4).getInt32(0,a);break;case 10:$=new DataView(g,z,4).getInt32(0,a)/new DataView(g,z+4,4).getInt32(0,a);break;case 11:$=new DataView(g,z,4).getFloat32(0,a);break;case 12:$=new DataView(g,z,8).getFloat64(0,a);break;case 16:case 18:$=m(new DataView(g,z,8),0,a);break;case 17:$=S(new DataView(g,z,8),0,a);break;default:$=null}P.push($)}}if(2===E){let z="";const et=P;for(P=[],ct=0;ct<et.length;ct++)0===et[ct]&&""!==z?(P.push(z),z=""):z+=String.fromCharCode(et[ct]);""===z&&0!==P.length||P.push(z)}return u.values=P,!0}function _(g){const a=g[0],u=I(a,"TILEWIDTH"),d=I(a,"TILELENGTH"),b=I(a,"IMAGEWIDTH"),C=I(a,"IMAGELENGTH"),E=I(a,"BITSPERSAMPLE"),D=I(a,"SAMPLESPERPIXEL"),U=I(a,"SAMPLEFORMAT")??1,P=B(U,E),tt=R(a),lt=Y(a,"GDAL_NODATA");let gt=null;lt?.length&&(gt=lt.map(_t=>parseFloat(_t)),gt.some(_t=>isNaN(_t))&&(gt=null));const rt=I(a,"COMPRESSION")??1;let $;switch(rt){case 1:$="NONE";break;case 2:case 3:case 4:case 32771:$="CCITT";break;case 5:$="LZW";break;case 6:case 7:$="JPEG";break;case 32773:$="PACKBITS";break;case 8:case 32946:$="DEFLATE";break;case 34712:$="JPEG2000";break;case 34887:$="LERC";break;default:$=String(rt)}let ct=!0,j="";at.has(rt)||(ct=!1,j+="unsupported tag compression "+rt),U>3&&(ct=!1,j+="unsupported tag sampleFormat "+U),1!==E&&2!==E&&4!==E&&E%8!=0&&(ct=!1,j+="unsupported tag bitsPerSample "+E);const L=Q(a,"GEOASCIIPARAMS");let z;if(L){const _t=L.split("|").find(Lt=>Lt.includes("ESRI PE String = ")),It=_t?_t.replace("ESRI PE String = ",""):"";z=It.startsWith("COMPD_CS")||It.startsWith("PROJCS")||It.startsWith("GEOGCS")?{wkid:null,wkt:It}:null}const et=st(a,"GEOTIEPOINTS"),ot=st(a,"GEOPIXELSCALE"),ht=st(a,"GEOTRANSMATRIX"),ft=a.has("GEOKEYDIRECTORY")?a.get("GEOKEYDIRECTORY").data:null;let pt,wt,bt=!1,Tt=!1;if(ft){bt=2===I(ft,"GTRasterTypeGeoKey");const _t=I(ft,"GTModelTypeGeoKey");if(2===_t){const It=I(ft,"GeographicTypeGeoKey");It>=1024&&It<=32766&&(z={wkid:It}),z||32767!==It||(Tt=!0,z={wkid:4326})}else if(1===_t){const It=I(ft,"ProjectedCSTypeGeoKey");It>=1024&&It<=32766&&(z={wkid:It})}}if(ot&&et&&et.length>=6?(pt=[ot[0],0,et[3]-et[0]*ot[0],0,-Math.abs(ot[1]),et[4]-et[1]*ot[1]],bt&&(pt[2]-=.5*pt[0]+.5*pt[1],pt[5]-=.5*pt[3]+.5*pt[4])):ht&&16===ht.length&&(pt=bt?[ht[0],ht[1],ht[3]-.5*ht[0],ht[4],ht[5],ht[7]-.5*ht[5]]:[ht[0],ht[1],ht[3],ht[4],ht[5],ht[7]]),pt){const _t=[{x:0,y:C},{x:0,y:0},{x:b,y:C},{x:b,y:0}];let It,Lt=Number.POSITIVE_INFINITY,Bt=Number.POSITIVE_INFINITY,Gt=Number.NEGATIVE_INFINITY,Nt=Number.NEGATIVE_INFINITY;for(let Ft=0;Ft<_t.length;Ft++)It=J(_t[Ft],pt),Lt=It.x>Lt?Lt:It.x,Gt=It.x<Gt?Gt:It.x,Bt=It.y>Bt?Bt:It.y,Nt=It.y<Nt?Nt:It.y;wt={xmin:Lt,xmax:Gt,ymin:Bt,ymax:Nt,spatialReference:z}}else wt={xmin:-.5,ymin:.5-C,xmax:b-.5,ymax:.5,spatialReference:z};Tt&&(wt.xmax-wt.xmin>400||Math.max(Math.abs(wt.xmin),Math.abs(wt.xmax))>361)&&(z=null,wt.spatialReference=null);const Pt=A(g);let xt,Mt,kt,At,Ot;if(Pt.length>0){kt=Math.round(Math.log(b/I(Pt[0],"IMAGEWIDTH"))/Math.LN2);const _t=Pt[Pt.length-1];At=Pt.length,xt=I(_t,"TILEWIDTH"),Mt=I(_t,"TILELENGTH")}xt=null!=At&&At>0?xt||u:null,Mt=null!=At&&At>0?Mt||d:null,u&&(Ot=[{maxCol:Math.ceil(b/u)-1,maxRow:Math.ceil(C/d)-1,minRow:0,minCol:0}],Pt.forEach(_t=>{Ot.push({maxCol:Math.ceil(I(_t,"IMAGEWIDTH")/I(_t,"TILEWIDTH"))-1,maxRow:Math.ceil(I(_t,"IMAGELENGTH")/I(_t,"TILELENGTH"))-1,minRow:0,minCol:0})}));const Rt=Q(g[0],"GDAL_METADATA"),Dt=p(Rt);j+=" "+l({width:b,height:C,tileWidth:u,tileHeight:d,planes:D,ifds:g});const Ut=N(g).length===Pt.length+1,jt=Pt?.length?Pt.map(_t=>({x:b/I(_t,"IMAGEWIDTH"),y:C/I(_t,"IMAGELENGTH")})):void 0;return{width:b,height:C,tileWidth:u,tileHeight:d,planes:D,isBSQ:tt,pixelType:P,compression:$,noData:gt,hasMaskBand:Ut,isSupported:ct,pyramidResolutions:jt,message:j,extent:wt,isPseudoGeographic:Tt,affine:ot?null:pt,firstPyramidLevel:kt,maximumPyramidLevel:At,pyramidBlockWidth:xt,pyramidBlockHeight:Mt,tileBoundary:Ot,metadata:Dt}}function R(g,a){const u=Y(g,"PLANARCONFIGURATION");return u?2===u[0]:!!a&&a.isBSQ}function A(g){return g.filter(a=>1===I(a,"NEWSUBFILETYPE"))}function N(g){return g.filter(a=>{const u=!(4&~(I(a,"NEWSUBFILETYPE")??0)),d=4===I(a,"PHOTOMETRICINTERPRETATION");return u&&d})}function m(g,a,u){const d=g.getUint32(a,u),b=g.getUint32(a+4,u);return u?b*Z+d:d*Z+b}function S(g,a,u){let d=u?g.getInt32(a,u):g.getUint32(a,u),b=u?g.getUint32(a+4,u):g.getInt32(a+4,u);const C=(u?d:b)>=0?1:-1;return u?d*=C:b*=C,C*(u?b*Z+d:d*Z+b)}function V(g,a,u,d){return d?m(g,a,u):g.getUint32(a,u)}function X(g){const a=new DataView(g,0,16),u=a.getUint16(0,!1);let d=null;if(18761===u)d=!0;else{if(19789!==u)throw new Error("unexpected endianess byte");d=!1}const b=a.getUint16(2,d);if(42!==b&&43!==b)throw new Error("unexpected tiff identifier");let C=4;const E=43===b;if(E){const D=a.getUint16(C,d);if(C+=2,8!==D)throw new Error("unsupported bigtiff version");if(0!==a.getUint16(C,d))throw new Error("unsupported bigtiff version");C+=2}return{littleEndian:d,isBigTiff:E,firstIFDPos:V(a,C,d,E)}}function v(g,a,u,d=0,b=r.Z.tiffTags,C=4){const E=O(g,a,u,d,b,C);let D;const U=E.ifd;if(U){if(r.Z.ifdTags.forEach((P,tt)=>{U.has(tt)&&(D=U.get(tt),D.data=O(g,a,D.valueOffset-d,d,P).ifd)}),U.has("GEOKEYDIRECTORY")){D=U.get("GEOKEYDIRECTORY");const P=D.values;if(P&&P.length>4){const tt=P[0]+"."+P[1]+"."+P[2];D.data=O(g,a,D.valueOffset+6-d,d,r.Z.geoKeys,2).ifd,D.data&&D.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[tt]})}}if(U.has("XMP")){D=U.get("XMP");const P=D.values;"number"==typeof P[0]&&7===D.type&&(D.values=[(0,yt.f)(new Uint8Array(P))])}}return E}function l(g){const{width:a,height:u,tileHeight:d,tileWidth:b}=g,C=g.planes,E=b?b*d:a*u,D=I(g.ifds[0],"BITSPERSAMPLE");let U="";return E*C>2**30/(D>8?D/8:1)&&(U=b?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),U}function T(g,a){return x.apply(this,arguments)}function x(){return(x=(0,W.Z)(function*(g,a){const{headerInfo:u,ifd:d,offsets:b,sizes:C}=a,E=[];for(let bt=0;bt<b.length;bt++){const Tt=yield h(g,u.littleEndian,d,b[bt],C[bt]||g.byteLength);E.push(Tt)}const D=R(d,u),U=I(d,"BITSPERSAMPLE"),P=B(I(d,"SAMPLEFORMAT")??1,U),tt=I(d,"SAMPLESPERPIXEL")||u.planes,lt=H(P),gt=I(d,"TILEWIDTH"),rt=I(d,"TILELENGTH"),$=I(d,"COMPRESSION")??1,ct=gt*rt;let j;const L=[];let z=E[0];const et=34887===$;for(let bt=0;bt<tt;bt++){if(j=new lt(ct),E.length===tt)z=E[bt],z.length===ct&&(j=z);else if(z.length)if(D||et)j=z.length===ct?z:z.slice(ct*bt,ct*(bt+1));else for(let Tt=0;Tt<ct;Tt++)j[Tt]=z[Tt*tt+bt];L.push(j)}const ot=u.noData?u.noData[0]:a.noDataValue,ht=u.metadata?u.metadata.statistics:null,ft=ht?ht.map(bt=>bt.min):null,pt=ht?ht.map(bt=>bt.max):null,wt={pixelType:P,width:gt,height:rt,pixels:L,noDataValue:ot};return null!=ot?(0,it.Ao)(wt,ot):ft&&pt&&a.applyMinMaxConstraint&&(wt.mask=y(L,ft,pt)),wt})).apply(this,arguments)}function F(g){return ut.apply(this,arguments)}function ut(){return ut=(0,W.Z)(function*(g,a={}){const u=a.pyramidLevel||0,d=a.headerInfo||function k(g){const{littleEndian:a,isBigTiff:u,firstIFDPos:d}=X(g);let b=d;const C=[];do{const E=v(g,a,b,0,r.Z.tiffTags,u?8:4);if(!E.success)break;C.push(E.ifd),b=E.nextIFD}while(b>0);return{..._(C),littleEndian:a,isBigTiff:u,ifds:C,pyramidIFDs:A(C),maskIFDs:N(C)}}(g),{ifds:b,noData:C}=d;if(0===b.length)throw new Error("no valid image file directory");const E=l(d);if(E)throw E;let D=null;const U=-1===u?b[b.length-1]:b[u],P=C??a.noDataValue;return D=d.tileWidth?yield function e(g,a,u){return o.apply(this,arguments)}(g,d,U):n(g,d,U),D&&(null!=P&&(0,it.Ao)(D,P),D)}),ut.apply(this,arguments)}},16854:(St,Et,K)=>{K.d(Et,{Z:()=>it});const W=(()=>{const r=[];return r[254]="NEWSUBFILETYPE",r[255]="SUBFILETYPE",r[256]="IMAGEWIDTH",r[257]="IMAGELENGTH",r[258]="BITSPERSAMPLE",r[259]="COMPRESSION",r[262]="PHOTOMETRICINTERPRETATION",r[263]="THRESHHOLDING",r[264]="CELLWIDTH",r[265]="CELLLENGTH",r[266]="FILLORDER",r[269]="DOCUMENTNAME",r[270]="IMAGEDESCRIPTION",r[271]="MAKE",r[272]="MODEL",r[273]="STRIPOFFSETS",r[274]="ORIENTATION",r[277]="SAMPLESPERPIXEL",r[278]="ROWSPERSTRIP",r[279]="STRIPBYTECOUNTS",r[280]="MINSAMPLEVALUE",r[281]="MAXSAMPLEVALUE",r[282]="XRESOLUTION",r[283]="YRESOLUTION",r[284]="PLANARCONFIGURATION",r[285]="PAGENAME",r[286]="XPOSITION",r[287]="YPOSITION",r[288]="FREEOFFSETS",r[289]="FREEBYTECOUNTS",r[290]="GRAYRESPONSEUNIT",r[291]="GRAYRESPONSECURVE",r[292]="T4OPTIONS",r[293]="T6OPTIONS",r[296]="RESOLUTIONUNIT",r[297]="PAGENUMBER",r[300]="COLORRESPONSEUNIT",r[301]="TRANSFERFUNCTION",r[305]="SOFTWARE",r[306]="DATETIME",r[315]="ARTIST",r[316]="HOSTCOMPUTER",r[317]="PREDICTOR",r[318]="WHITEPOINT",r[319]="PRIMARYCHROMATICITIES",r[320]="COLORMAP",r[321]="HALFTONEHINTS",r[322]="TILEWIDTH",r[323]="TILELENGTH",r[324]="TILEOFFSETS",r[325]="TILEBYTECOUNTS",r[326]="BADFAXLINES",r[327]="CLEANFAXDATA",r[328]="CONSECUTIVEBADFAXLINES",r[330]="SUBIFD",r[332]="INKSET",r[333]="INKNAMES",r[334]="NUMBEROFINKS",r[336]="DOTRANGE",r[337]="TARGETPRINTER",r[338]="EXTRASAMPLES",r[339]="SAMPLEFORMAT",r[340]="SMINSAMPLEVALUE",r[341]="SMAXSAMPLEVALUE",r[342]="TRANSFERRANGE",r[347]="JPEGTABLES",r[512]="JPEGPROC",r[513]="JPEGIFOFFSET",r[514]="JPEGIFBYTECOUNT",r[515]="JPEGRESTARTINTERVAL",r[517]="JPEGLOSSLESSPREDICTORS",r[518]="JPEGPOINTTRANSFORM",r[519]="JPEGQTABLES",r[520]="JPEGDCTABLES",r[521]="JPEGACTABLES",r[529]="YCBCRCOEFFICIENTS",r[530]="YCBCRSUBSAMPLING",r[531]="YCBCRPOSITIONING",r[532]="REFERENCEBLACKWHITE",r[700]="XMP",r[33550]="GEOPIXELSCALE",r[33922]="GEOTIEPOINTS",r[33432]="COPYRIGHT",r[42112]="GDAL_METADATA",r[42113]="GDAL_NODATA",r[50844]="RPCCOEFFICIENT",r[34264]="GEOTRANSMATRIX",r[34735]="GEOKEYDIRECTORY",r[34736]="GEODOUBLEPARAMS",r[34737]="GEOASCIIPARAMS",r[34665]="EXIFIFD",r[34853]="GPSIFD",r[40965]="INTEROPERABILITYIFD",r})(),mt=(()=>{const r=W.slice();return r[36864]="ExifVersion",r[40960]="FlashpixVersion",r[40961]="ColorSpace",r[42240]="Gamma",r[37121]="ComponentsConfiguration",r[37122]="CompressedBitsPerPixel",r[40962]="PixelXDimension",r[40963]="PixelYDimension",r[37500]="MakerNote",r[37510]="UserComment",r[40964]="RelatedSoundFile",r[36867]="DateTimeOriginal",r[36868]="DateTimeDigitized",r[36880]="OffsetTime",r[36881]="OffsetTimeOriginal",r[36882]="OffsetTimeDigitized",r[37520]="SubSecTime",r[37521]="SubSecTimeOriginal",r[37522]="SubSecTimeDigitized",r[37888]="Temperature",r[37889]="Humidity",r[37890]="Pressure",r[37891]="WaterDepth",r[37892]="Acceleration",r[37893]="CameraElevationAngle",r[42016]="ImageUniqueID",r[42032]="CameraOwnerName",r[42033]="BodySerialNumber",r[42034]="LensSpecification",r[42035]="LensMake",r[42036]="LensModel",r[42037]="LensSerialNumber",r[33434]="ExposureTime",r[33437]="FNumber",r[34850]="ExposureProgram",r[34852]="SpectralSensitivity",r[34855]="PhotographicSensitivity",r[34856]="OECF",r[34864]="SensitivityType",r[34865]="StandardOutputSensitivity",r[34866]="RecommendedExposureIndex",r[34867]="ISOSpeed",r[34868]="ISOSpeedLatitudeyyy",r[34869]="ISOSpeedLatitudezzz",r[37377]="ShutterSpeedValue",r[37378]="ApertureValue",r[37379]="BrightnessValue",r[37380]="ExposureBiasValue",r[37381]="MaxApertureValue",r[37382]="SubjectDistance",r[37383]="MeteringMode",r[37384]="LightSource",r[37385]="Flash",r[37386]="FocalLength",r[37396]="SubjectArea",r[41483]="FlashEnergy",r[41484]="SpatialFrequencyResponse",r[41486]="FocalPlaneXResolution",r[41487]="FocalPlaneYResolution",r[41488]="FocalPlaneResolutionUnit",r[41492]="SubjectLocation",r[41493]="ExposureIndex",r[41495]="SensingMethod",r[41728]="FileSource",r[41729]="SceneType",r[41730]="CFAPattern",r[41985]="CustomRendered",r[41986]="ExposureMode",r[41987]="WhiteBalance",r[41988]="DigitalZoomRatio",r[41989]="FocalLengthIn35mmFilm",r[41990]="SceneCaptureType",r[41991]="GainControl",r[41992]="Contrast",r[41993]="Saturation",r[41994]="Sharpness",r[41995]="DeviceSettingDescription",r[41996]="SubjectDistanceRange",r})(),G=(()=>{const r=[];return r[1024]="GTModelTypeGeoKey",r[1025]="GTRasterTypeGeoKey",r[1026]="GTCitationGeoKey",r[2048]="GeographicTypeGeoKey",r[2049]="GeogCitationGeoKey",r[2050]="GeogGeodeticDatumGeoKey",r[2051]="GeogPrimeMeridianGeoKey",r[2052]="GeogLinearUnitsGeoKey",r[2053]="GeogLinearUnitSizeGeoKey",r[2054]="GeogAngularUnitsGeoKey",r[2055]="GeogAngularUnitSizeGeoKey",r[2056]="GeogEllipsoidGeoKey",r[2057]="GeogSemiMajorAxisGeoKey",r[2058]="GeogSemiMinorAxisGeoKey",r[2059]="GeogInvFlatteningGeoKey",r[2061]="GeogPrimeMeridianLongGeoKey",r[2060]="GeogAzimuthUnitsGeoKey",r[3072]="ProjectedCSTypeGeoKey",r[3073]="PCSCitationGeoKey",r[3074]="ProjectionGeoKey",r[3075]="ProjCoordTransGeoKey",r[3076]="ProjLinearUnitsGeoKey",r[3077]="ProjLinearUnitSizeGeoKey",r[3078]="ProjStdParallel1GeoKey",r[3079]="ProjStdParallel2GeoKey",r[3080]="ProjNatOriginLongGeoKey",r[3081]="ProjNatOriginLatGeoKey",r[3082]="ProjFalseEastingGeoKey",r[3083]="ProjFalseNorthingGeoKey",r[3084]="ProjFalseOriginLongGeoKey",r[3085]="ProjFalseOriginLatGeoKey",r[3086]="ProjFalseOriginEastingGeoKey",r[3087]="ProjFalseOriginNorthingGeoKey",r[3088]="ProjCenterLongGeoKey",r[3090]="ProjCenterEastingGeoKey",r[3091]="ProjCenterNorthingGeoKey",r[3092]="ProjScaleAtNatOriginGeoKey",r[3093]="ProjScaleAtCenterGeoKey",r[3094]="ProjAzimuthAngleGeoKey",r[3095]="ProjStraightVertPoleLongGeoKey",r[4096]="VerticalCSTypeGeoKey",r[4097]="VerticalCitationGeoKey",r[4098]="VerticalDatumGeoKey",r[4099]="VerticalUnitsGeoKey",r})(),Ct=new Map;Ct.set("EXIFIFD",mt),Ct.set("GPSIFD",["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"]);const it={tiffTags:W,ifdTags:Ct,geoKeys:G,getTagName:(r,dt)=>{let q=(dt||W)[r];return void 0===q&&(q="unknown"+String(r)),q}}},83931:(St,Et,K)=>{K.d(Et,{f:()=>W});const W=(()=>{const mt=new ArrayBuffer(4),yt=new Uint8Array(mt);return new Uint32Array(mt)[0]=1,1===yt[0]})()},57618:(St,Et,K)=>{K.d(Et,{AV:()=>J,Hv:()=>B,Oh:()=>H,ZF:()=>q,dy:()=>Q,gI:()=>dt,hE:()=>r,js:()=>at,oc:()=>it,um:()=>st});var W=K(51172),mt=K(97493),yt=K(86741),G=K(11856);const vt=1,Ct=[.299,.587,.114];function it(I,O=256){O=Math.min(O,256);const{size:s,counts:f}=I,c=new Uint8Array(s),i=f.reduce((n,y)=>n+y/O,0);let h=0,t=0,e=0,o=i;for(let n=0;n<s;n++)if(e+=f[n],!(n<s-1&&e+f[n+1]<o)){for(;h<O-1&&o<e;)h++,o+=i;for(let y=t;y<=n;y++)c[y]=h;t=n+1}for(let n=t;n<s;n++)c[n]=O-1;return c}function r(I){const{minCutOff:O,maxCutOff:s,gamma:f,pixelType:c,rounding:i}=I,h=I.outMin||0,t=I.outMax||255;if(!["u8","u16","s8","s16"].includes(c))return null;const e=O.length;let o,n,y=0;"s8"===c?y=-127:"s16"===c&&(y=-32767);let p=256;["u16","s16"].includes(c)&&(p=65536);const M=[],_=[],R=t-h;for(o=0;o<e;o++)_[o]=s[o]-O[o],M[o]=0===_[o]?0:R/_[o];let A;const N=[];let k,m,S;if(f&&f.length>=e){const V=st(e,f);for(o=0;o<e;o++){for(S=[],n=0;n<p;n++)if(0!==_[o])if(k=n+y,A=(k-O[o])/_[o],m=1,f[o]>1&&(m-=(1/R)**(A*V[o])),k<s[o]&&k>O[o]){const X=m*R*A**(1/f[o])+h;S[n]="floor"===i?Math.floor(X):"round"===i?Math.round(X):X}else S[n]=k>=s[o]?t:h;else S[n]=h;N[o]=S}}else for(o=0;o<e;o++){for(S=[],n=0;n<p;n++)if(k=n+y,k<=O[o])S[n]=h;else if(k>=s[o])S[n]=t;else{const V=(k-O[o])*M[o]+h;S[n]="floor"===i?Math.floor(V):"round"===i?Math.round(V):V}N[o]=S}if(null!=I.contrastOffset){const V=dt(I.contrastOffset,I.brightnessOffset);for(o=0;o<e;o++)for(S=N[o],n=0;n<p;n++)S[n]=V[S[n]]}return{lut:N,offset:y}}function dt(I,O){const s=Math.min(Math.max(I,-100),100),f=Math.min(Math.max(O??0,-100),100);let h=0,t=0;const e=new Uint8Array(256);for(h=0;h<256;h++)s>0&&s<100?t=(200*h-25500+510*f)/(2*(100-s))+128:s<=0&&s>-100?t=(200*h-25500+510*f)*(100+s)/2e4+128:100===s?(t=200*h-25500+256*(100-s)+510*f,t=t>0?255:0):-100===s&&(t=128),e[h]=t>255?255:t<0?0:t;return e}function q(I,O,s){const f=[];for(let c=0;c<O.length;c++){let i=0,h=0,t=0;"min"in O[c]?({min:i,max:h,avg:t}=O[c]):[i,h,t]=O[c];let e=t??0;"u8"!==I&&(e=255*(e-i)/(h-i)),s&&(e*=Ct[c]),f.push(nt(e))}return f}function nt(I){if(I<=0||I>=255)return vt;let O=0;150!==I&&(O=I<=150?45*Math.cos(.01047*I):17*Math.sin(.021*I));const f=I+O,c=Math.log(I/255),i=Math.log(f/255);if(0===i)return vt;const h=c/i;return isNaN(h)?vt:Math.min(9.9,Math.max(.01,h))}function at(I){const{pixels:O,mask:s,pixelType:f,bandMasks:c}=I,i=O.map((h,t)=>function Z(I,O,s,f){let c=1/0,i=-1/0,h=0,t=0,e=0,o=0;const n=I.length,y=new Map,p=[];for(let v=0;v<n;v++){const l=I[v];if(!O||O[v]){p.push(l);const w=(y.get(l)??0)+1;y.set(l,w),w>o&&(o=w,e=l),c=l<c?l:c,i=l>i?l:i,h+=l,t++}}if(0===t)return{statistics:{min:0,max:0,avg:0,stddev:0,mode:0,median:0},histogram:null};const M=h/t;let _=0;for(let v=0;v<n;v++)O&&!O[v]||(_+=(I[v]-M)**2);const R=O?O.filter(v=>v).length:n,A=R<=1?0:Math.sqrt(_/(R-1));p.sort((v,l)=>v-l);const N=t>>>1,k={min:c,max:i,avg:M,stddev:A,mode:e,median:t%2?p[Math.floor(N)]:(p[N-1]+p[N])/2};if(["u8","s8","u4","u2","u1"].includes(s)){const v=i-c+1,l=new Uint32Array(v);for(let w=0;w<n;w++)O&&!O[w]||l[I[w]-c]++;return{statistics:k,histogram:{min:c-.5,max:i+.5,size:v,counts:l}}}const m=256,S=new Uint32Array(m),V=(i-c)/m;if(0===V)return{statistics:k,histogram:{min:c,max:i,size:1,counts:new Uint32Array(1).fill(t)}};const X=new Uint32Array(257);for(let v=0;v<n;v++)O&&!O[v]||X[Math.floor((I[v]-c)/V)]++;for(let v=0;v<255;v++)S[v]=X[v];return S[255]=X[255]+X[m],{statistics:k,histogram:{min:c,max:i,size:m,counts:S}}}(h,c?.[t]??s,f));return{statistics:i.map(({statistics:h})=>h),histograms:i.map(({histogram:h})=>h)}}function B(I){if(!I?.pixels?.length)return null;const{pixels:O,mask:s,bandMasks:f,pixelType:c}=I,i=I.width*I.height,h=O.length,t=[],e=[],o=256;let n,y,p,M;for(let _=0;_<h;_++){p=new Uint32Array(o);const R=O[_],A=f?.[_]??s;if("u8"===c){if(n=255,y=0,A){for(let x=0;x<i;x++)if(A[x]){const F=R[x];n=F<n?F:n,y=F>y?F:y,p[F]++}}else for(let x=0;x<i;x++){const F=R[x];n=F<n?F:n,y=F>y?F:y,p[F]++}p=p.slice(n,y+1)}else{let x=!1;I.statistics||(I.updateStatistics(),x=!0);const F=I.statistics;n=F[_].minValue,y=F[_].maxValue;const ut=(y-n)/o;if(0===ut){!F||I.validPixelCount||x||I.updateStatistics();const g=(I.validPixelCount||I.width*I.height)/o;for(let a=0;a<o;a++)p[a]=Math.round(g*(a+1))-Math.round(g*a)}else{M=new Uint32Array(257);for(let g=0;g<i;g++)A&&!A[g]||M[Math.floor((R[g]-n)/ut)]++;for(let g=0;g<255;g++)p[g]=M[g];p[255]=M[255]+M[o]}}const N="u8"===c?n-.5:n,k="u8"===c?y+.5:y;t.push({min:N,max:k,size:p.length,counts:p});let m=0,S=0,V=0;for(let x=0;x<p.length;x++)m+=p[x],S+=x*p[x];const X=S/m;for(let x=0;x<p.length;x++)V+=p[x]*(x-X)**2;const v=Math.sqrt(V/(m-1)),l=(k-N)/p.length;e.push({min:n,max:y,avg:(X+("u8"===c?0:.5))*l+n,stddev:v*l})}return{statistics:e,histograms:t}}function H(I){const O=[];for(let s=0;s<I.length;s++){const{min:f,max:c,size:i,counts:h}=I[s];let t=0,e=0;for(let _=0;_<i;_++)t+=h[_],e+=_*h[_];const o=e/t;let n=0;for(let _=0;_<i;_++)n+=h[_]*(_-o)**2;const y=(c-f)/i,p=(o+.5)*y+f,M=Math.sqrt(n/(t-1))*y;O.push({min:f,max:c,avg:p,stddev:M})}return O}function J(I,O){const{pixelBlock:s,bandIds:f,returnHistogramLut:c,rasterInfo:i}=O;let h=null,t=null,e=I.stretchType;if("number"==typeof e&&(e=G.J[e]),I.dra)if("minMax"===e&&s?.statistics)h=s.statistics.map(T=>[T.minValue,T.maxValue,0,0]);else{const T=B(s);h=null!=T?T.statistics:null,t=null!=T?T.histograms:null}else h=I.statistics?.length?I.statistics:i.statistics,t="histograms"in I?I.histograms:void 0,t||(t=i.histograms);"percentClip"!==e&&"histogramEqualization"!==e||t?.length||(e="minMax");const o=h?.length||t?.length||i.bandCount,n=[],y=[];let p,M,_,R,A,N,k,m,S;h&&!Array.isArray(h[0])&&(h=h.map(T=>[T.min,T.max,T.avg,T.stddev]));const[V,X]=(0,yt.rL)(i.pixelType);if(!h?.length){for(h=[],m=0;m<o;m++)h.push([V,X,1,1]);"standardDeviation"===e&&(e="minMax")}switch(e){case"none":for(m=0;m<o;m++)n[m]=V,y[m]=X;break;case"minMax":for(m=0;m<o;m++){const T=h[m];n[m]=T[0],y[m]=T[1]}break;case"standardDeviation":{const{numberOfStandardDeviations:T=2}=I;for(m=0;m<o;m++){const x=h[m];n[m]=x[2]-T*x[3],y[m]=x[2]+T*x[3],n[m]<x[0]&&(n[m]=x[0]),y[m]>x[1]&&(y[m]=x[1])}}break;case"histogramEqualization":for((0,W.O3)(t),m=0;m<o;m++)n[m]=t[m].min,y[m]=t[m].max;break;case"percentClip":for((0,W.O3)(t),m=0;m<t.length;m++){for(p=t[m],A=new Uint32Array(p.size),R=[...p.counts],R.length>=20&&(R[0]=R[1]=R[2]=R[R.length-1]=R[R.length-2]=0),_=0,M=(p.max-p.min)/p.size,k=-.5===p.min&&1===M?.5:0,S=0;S<p.size;S++)_+=R[S],A[S]=_;for(N=(I.minPercent||0)*_/100,n[m]=p.min+k,S=0;S<p.size;S++)if(A[S]>N){n[m]=p.min+M*(S+k);break}for(N=(1-(I.maxPercent||0)/100)*_,y[m]=p.max+k,S=p.size-2;S>=0;S--)if(A[S]<N){y[m]=p.min+M*(S+2-k);break}if(y[m]<n[m]){const T=n[m];n[m]=y[m],y[m]=T}}break;default:for(m=0;m<o;m++){const T=h[m];n[m]=T[0],y[m]=T[1]}}let v,l,w;return"histogramEqualization"===e?((0,W.O3)(t),l=t[0].size||256,v=0,c&&(w=t.map(T=>it(T)))):(l=I.max||255,v=I.min||0),function Y(I,O){if(null==O||0===O.length)return I;const s=Math.max.apply(null,O),{minCutOff:f,maxCutOff:c,outMin:i,outMax:h,histogramLut:t}=I;return f.length===O.length||f.length<=s?I:{minCutOff:O.map(e=>f[e]),maxCutOff:O.map(e=>c[e]),histogramLut:t?O.map(e=>t[e]):null,outMin:i,outMax:h}}({minCutOff:n,maxCutOff:y,outMax:l,outMin:v,histogramLut:w},f)}function st(I,O){const s=new Float32Array(I);for(let f=0;f<I;f++)s[f]=O[f]>1?O[f]>2?6.5+(O[f]-2)**2.5:6.5+100*(2-O[f])**4:1;return s}function Q(I,O){if(!I?.pixels?.length)return I;const{mask:s,bandMasks:f,width:c,height:i,pixels:h}=I,{minCutOff:t,maxCutOff:e,gamma:o}=O,n=O.outMin||0,y=O.outMax||255,p=c*i,M=O.outputPixelType||"u8",_=I.pixels.map(()=>mt.Z.createEmptyBand(M,p)),R=_.length,A=y-n,N=[],k=[];for(let v=0;v<R;v++)k[v]=e[v]-t[v],N[v]=0===k[v]?0:A/k[v];const m=M.startsWith("u")||M.startsWith("s"),V=!!O.isRenderer;if(o&&o.length>=R){const v=st(R,o);for(let l=0;l<R;l++){const w=f?.[l]??s;for(let T=0;T<p;T++)if(null==w||w[T]){if(0===k[l]){_[l][T]=n;continue}const x=h[l][T],F=(x-t[l])/k[l];let ut=1;if(o[l]>1&&(ut-=(1/A)**(F*v[l])),x<e[l]&&x>t[l]){const g=ut*A*F**(1/o[l])+n;_[l][T]=V?Math.floor(g):m?Math.round(g):g}else _[l][T]=x>=e[l]?y:n}}}else for(let v=0;v<R;v++){const l=f?.[v]??s;for(let w=0;w<p;w++)if(null==l||l[w]){const T=h[v][w];if(T<e[v]&&T>t[v]){const x=(T-t[v])*N[v]+n;_[v][w]=V?Math.floor(x):m?Math.round(x):x}else _[v][w]=T>=e[v]?y:n}}const X=new mt.Z({width:c,height:i,mask:s,bandMasks:f,pixels:_,pixelType:M});return X.updateStatistics(),X}},5134:(St,Et,K)=>{K.d(Et,{M_:()=>Z,Ne:()=>at,TK:()=>Ct,Ub:()=>q,_p:()=>vt,vC:()=>dt,yg:()=>nt});var W=K(97493),mt=K(12852),yt=K(98797);const G=1,vt=1/111e3;function Ct(B){let{altitude:H,azimuth:J}=B;const{hillshadeType:Y,pixelSizePower:st=1,pixelSizeFactor:Q=1,scalingType:I,isGCS:O,resolution:s}=B,f="multi-directional"===Y?2*B.zFactor:B.zFactor,{x:c,y:i}=s;let h=f/(8*c),t=f/(8*i);if(O&&f>.001&&(h/=vt,t/=vt),"adjusted"===I)if(O){const X=c*vt,v=i*vt;h=(f+X**st*Q)/(8*X),t=(f+v**st*Q)/(8*v)}else h=(f+c**st*Q)/(8*c),t=(f+i**st*Q)/(8*i);let e=(90-H)*Math.PI/180,o=Math.cos(e),n=(360-J+90)*Math.PI/180,y=Math.sin(e)*Math.cos(n),p=Math.sin(e)*Math.sin(n);const M=[315,270,225,360,180,0],_=[60,60,60,60,60,90],R=new Float32Array([3,5,3,2,1,4]),A=R.reduce((X,v)=>X+v),N=R.map(X=>X/A),k="multi-directional"===Y?M.length:1,m=new Float32Array(6),S=new Float32Array(6),V=new Float32Array(6);if("multi-directional"===Y)for(let X=0;X<k;X++)H=_[X],J=M[X],e=(90-H)*Math.PI/180,o=Math.cos(e),n=(360-J+90)*Math.PI/180,y=Math.sin(e)*Math.cos(n),p=Math.sin(e)*Math.sin(n),m[X]=o,S[X]=y,V[X]=p;else m.fill(o),S.fill(y),V.fill(p);return{resolution:s,factor:[h,t],sinZcosA:y,sinZsinA:p,cosZ:o,sinZcosAs:S,sinZsinAs:V,cosZs:m,weights:N,hillshadeType:["traditional","multi-directional"].indexOf(Y)}}function it(B,H){const{width:J,height:Y}=B,st=J*Y,Q=new Uint8Array(st),I=null!=B.mask;let O;if(I){O=new Uint8Array(B.mask);for(let A=0;A<O.length;A++)O[A]&&(Q[A]=1,O[A]=1)}const s=B.pixels[0],f=new Float32Array(st),c=new Float32Array(st);let i,h=0;if(H){const{resolution:A}=H,N=A?(A.x+A.y)/2:1;h=200*H.zFactor/(N*N),i=new Float32Array(st)}const t=H?.curvatureType;let e,o,n,y,p,M,_,R;for(let A=G;A<Y-G;A++){const N=A*J;for(let k=G;k<J-G;k++){const m=N+k;if(!O||0!==O[m]){if(O){if(O[m-J-1]+O[m-J]+O[m-J+1]+O[m-1]+O[m+1]+O[m+J-1]+O[m+J]+O[m+J+1]<7){Q[m]=0;continue}e=O[m-J-1]?s[m-J-1]:s[m],o=O[m-J]?s[m-J]:s[m],n=O[m-J+1]?s[m-J+1]:s[m],y=O[m-1]?s[m-1]:s[m],p=O[m+1]?s[m+1]:s[m],M=O[m+J-1]?s[m+J-1]:s[m],_=O[m+J]?s[m+J]:s[m],R=O[m+J+1]?s[m+J+1]:s[m]}else e=s[m-J-1],o=s[m-J],n=s[m-J+1],y=s[m-1],p=s[m+1],M=s[m+J-1],_=s[m+J],R=s[m+J+1];if(f[m]=n+p+p+R-(e+y+y+M),c[m]=M+_+_+R-(e+o+o+n),null!=i){const S=s[m],V=.5*(y+p)-S,X=.5*(o+_)-S;if("standard"===t)i[m]=-h*(V+X);else{const v=(-e+n+M-R)/4,l=(-y+p)/2,w=(o-_)/2,T=l*l,x=w*w,F=T+x;F&&(i[m]="profile"===t?h*(V*T+X*x+v*l*w)/F:-h*(V*x+X*T-v*l*w)/F)}}}}}return{outMask:I?Q:null,dzxs:f,dzys:c,curvatures:i}}function r(B,H,J){for(let Y=0;Y<J;Y++)B[Y*H]=B[Y*H+1],B[(Y+1)*H-1]=B[(Y+1)*H-2];for(let Y=1;Y<H-1;Y++)B[Y]=B[Y+H],B[Y+(J-1)*H]=B[Y+(J-2)*H]}function dt(B,H){if(!(0,yt.nk)(B))return B;const{factor:J,sinZcosA:Y,sinZsinA:st,cosZ:Q,sinZcosAs:I,sinZsinAs:O,cosZs:s,weights:f}=Ct(H),[c,i]=J,h="traditional"===H.hillshadeType,{width:t,height:e}=B,o=new Uint8Array(t*e),{dzxs:n,dzys:y,outMask:p}=it(B);for(let M=G;M<e-G;M++){const _=M*t;for(let R=G;R<t-G;R++){const A=_+R;if(!p||p[A]){const N=n[A]*c,k=y[A]*i,m=Math.sqrt(1+N*N+k*k);let S=0;if(h){let V=255*(Q+st*k-Y*N)/m;V<0&&(V=0),S=V}else{const V=O.length;for(let X=0;X<V;X++){let v=255*(s[X]+O[X]*k-I[X]*N)/m;v<0&&(v=0),S+=v*f[X]}}o[A]=255&S}}}return r(o,t,e),new W.Z({width:t,height:e,pixels:[o],mask:p,pixelType:"u8",validPixelCount:B.validPixelCount,statistics:[new mt.c(0,255)]})}function q(B,H,J,Y){if(!(0,yt.nk)(B)||!(0,yt.nk)(H))return;const{min:st,max:Q}=Y,I=B.pixels[0],{pixels:O,mask:s}=H,f=O[0],c=255.00001/(Q-st),i=new Uint8ClampedArray(f.length),h=new Uint8ClampedArray(f.length),t=new Uint8ClampedArray(f.length),e=J.length-1;for(let o=0;o<f.length;o++){if(s&&0===s[o])continue;const n=Math.floor((f[o]-st)*c),[y,p]=J[n<0?0:n>e?e:n],M=I[o],_=M*p,R=_*(1-Math.abs(y%2-1)),A=M-_;switch(Math.floor(y)){case 0:i[o]=_+A,h[o]=R+A,t[o]=A;break;case 1:i[o]=R+A,h[o]=_+A,t[o]=A;break;case 2:i[o]=A,h[o]=_+A,t[o]=R+A;break;case 3:i[o]=A,h[o]=R+A,t[o]=_+A;break;case 4:i[o]=R+A,h[o]=A,t[o]=_+A;break;case 5:case 6:i[o]=_+A,h[o]=A,t[o]=R+A}}B.pixels=[i,h,t],B.updateStatistics()}function nt(B,H){if(!(0,yt.nk)(B))return B;const J=H.zFactor,Y=H.pixelSizePower??1,st=H.pixelSizeFactor??1,Q=H.slopeType,I=H.isGCS,{x:O,y:s}=H.resolution;let f=J/(8*O),c=J/(8*s);I&&Math.abs(J-1)<1e-4&&(f/=vt,c/=vt),"adjusted"===Q&&(f=(J+O**Y*st)/(8*O),c=(J+s**Y*st)/(8*s));const{dzxs:i,dzys:h,outMask:t}=it(B),{width:e,height:o}=B,n=new Float32Array(e*o);for(let p=G;p<o-G;p++){const M=p*e;for(let _=G;_<e-G;_++){const R=M+_;if(!t||t[R]){const A=i[R]*f,N=h[R]*c,k=Math.sqrt(A*A+N*N);n[M+_]="percent-rise"===Q?100*k:57.2957795*Math.atan(k)}}}r(n,e,o);const y=new W.Z({width:e,height:o,pixels:[n],mask:t,pixelType:"f32",validPixelCount:B.validPixelCount});return y.updateStatistics(),y}function Z(B,H={}){if(!(0,yt.nk)(B))return B;const{resolution:J}=H,Y=J?1/J.x:1,st=J?1/J.y:1,{dzxs:Q,dzys:I,outMask:O}=it(B),{width:s,height:f}=B,c=new Float32Array(s*f);for(let i=G;i<f-G;i++){const h=i*s;for(let t=G;t<s-G;t++){const e=h+t;if(!O||O[e]){const o=Q[e]*Y,n=I[e]*st;let y=-1;0===o&&0===n||(y=90-57.29578*Math.atan2(n,-o),y<0&&(y+=360),360===y?y=0:y>360&&(y%=360)),c[h+t]=y}}}return r(c,s,f),new W.Z({width:s,height:f,pixels:[c],mask:O,pixelType:"f32",validPixelCount:B.validPixelCount,statistics:[new mt.c(-1,360)]})}function at(B,H){if(!(0,yt.nk)(B))return B;const{curvatures:J,outMask:Y}=it(B,H),{width:st,height:Q}=B;r(J,st,Q);const I=new W.Z({width:st,height:Q,pixels:[J],mask:Y,pixelType:"f32",validPixelCount:B.validPixelCount});return I.updateStatistics(),I}},41068:(St,Et,K)=>{K.d(Et,{Z:()=>J});var W=K(50484),mt=K(70794),yt=K(89317),G=K(4703),vt=K(80543),r=(K(14007),K(65311),K(10141)),dt=K(65665),q=K(98797),nt=K(57618),Z=K(5134),at=K(92865),B=K(83071);let H=class extends yt.wq{constructor(s){super(s)}bind(){const{rendererJSON:s}=this;if(!s)return{success:!1};let f;switch(this.lookup={rendererJSON:{}},s.type){case"uniqueValue":f=this._updateUVRenderer(s);break;case"rasterColormap":f=this._updateColormapRenderer(s);break;case"rasterStretch":f=this._updateStretchRenderer(s);break;case"classBreaks":f=this._updateClassBreaksRenderer(s);break;case"rasterShadedRelief":f=this._updateShadedReliefRenderer(s);break;case"vectorField":f=this._updateVectorFieldRenderer();break;case"flowRenderer":f=this._updateFlowRenderer()}return f}symbolize(s){let f=s?.pixelBlock;if(!I(f))return f;if(s.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(f,s.simpleStretchParams);try{let c;switch(f.pixels.length>3&&(f=f.extractBands(s.bandIds??[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":c=this._symbolizeColormap(f);break;case"classBreaks":c=this._symbolizeClassBreaks(f);break;case"rasterStretch":c=this._symbolizeStretch(f,s.bandIds);break;case"rasterShadedRelief":{const i=s.extent;c=this._symbolizeShadedRelief(f,{isGCS:i.spatialReference.isGeographic,resolution:{x:(i.xmax-i.xmin)/f.width,y:(i.ymax-i.ymin)/f.height}});break}}return c}catch(c){return G.Z.getLogger(this).error("symbolize",c.message),f}}simpleStretch(s,f){if(!I(s))return s;try{return s.pixels.length>3&&(s=s.extractBands([0,1,2])),(0,nt.dy)(s,{...f,isRenderer:!0})}catch(c){return G.Z.getLogger(this).error("symbolize",c.message),s}}generateWebGLParameters(s){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const{indexedColormap:e,offset:o}=this.lookup.colormapLut||{};return{colormap:e,colormapOffset:o,type:"lut"}}const{pixelBlock:f,isGCS:c,resolution:i,bandIds:h}=s,{rendererJSON:t}=this;return"rasterStretch"===t.type?this._generateStretchWebGLParams(f,t,h):"rasterShadedRelief"===t.type?this._generateShadedReliefWebGLParams(t,c,i??void 0):"vectorField"===t.type?this._generateVectorFieldWebGLParams(t):null}_isLUTChanged(s){return!this.lookup||!this.lookup.rendererJSON||("colorRamp"in this.rendererJSON&&s?JSON.stringify(this.rendererJSON.colorRamp)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}_symbolizeColormap(s){return this._isLUTChanged()&&!this.bind().success?s:(0,q.SJ)(s,this.lookup.colormapLut)}_symbolizeClassBreaks(s){const{canUseIndexedLUT:f}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?s:f?(0,q.SJ)(s,this.lookup.colormapLut):(0,q.zp)(s,this.lookup.remapLut??[])}_symbolizeStretch(s,f){const{rasterInfo:c}=this,{pixelType:i,bandCount:h}=c,t=this.rendererJSON,e=["u8","u16","s8","s16"].includes(i);let o,n;const{dra:y}=t,{gamma:p}=this.lookup;if("histogramEqualization"===t.stretchType){const M=y?null:this.lookup?.histogramLut,_=(0,nt.AV)(t,{rasterInfo:c,pixelBlock:s,bandIds:f,returnHistogramLut:!M}),R=(0,nt.dy)(s,{..._,gamma:p,isRenderer:!0});n=(0,q.XV)(R,{lut:y?_.histogramLut:M,offset:0})}else if(e){if(y){const M=(0,nt.AV)(t,{rasterInfo:c,pixelBlock:s,bandIds:f});o=(0,nt.hE)({pixelType:i,...M,gamma:p,rounding:"floor"})}else if(this._isLUTChanged()){if(!this.bind().success)return s;o=this.lookup?this.lookup.stretchLut:null}else o=this.lookup?this.lookup.stretchLut:null;if(!o)return s;h>1&&null!=f&&f.length===s?.pixels.length&&o?.lut.length===h&&(o={lut:f.map(M=>o.lut[M]),offset:o.offset}),n=(0,q.XV)(s,o)}else{const M=(0,nt.AV)(t,{rasterInfo:c,pixelBlock:s,bandIds:f});n=(0,nt.dy)(s,{...M,gamma:p,isRenderer:!0})}if(t.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return s;n=(0,q.SJ)(n,this.lookup?.colormapLut)}return n}_symbolizeShadedRelief(s,f){const c=this.rendererJSON,i={...c,...f},h=(0,Z.vC)(s,i);if(!c.colorRamp)return h;let t;if(this._isLUTChanged(!0)){if(!this.bind().success)return h;t=this.lookup?this.lookup.hsvMap:null}else t=this.lookup?this.lookup.hsvMap:null;return t?((0,Z.Ub)(h,s,t,this.rasterInfo.statistics?.[0]??{min:0,max:8e3}),h):h}_isVectorFieldData(){const{bandCount:s,dataType:f}=this.rasterInfo;return 2===s&&("vector-magdir"===f||"vector-uv"===f)}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(s){const{bandCount:f,attributeTable:c,pixelType:i}=this.rasterInfo,h=s.field1;if(!h)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const t=s.defaultSymbol,e=1===f&&["u8","s8"].includes(i);if(!(0,B.MG)(this.rasterInfo,h)&&!e)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const o=[];if(null!=c){const y=c.fields.find(p=>"value"===p.name.toLowerCase());if(!y)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};c.features.forEach(p=>{const M=s.uniqueValueInfos?.find(R=>String(R.value)===String(p.attributes[h])),_=M?.symbol?.color;_?o.push([p.attributes[y.name]].concat(_)):t&&o.push([p.attributes[y.name]].concat(t.color))})}else{if("value"!==h.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not available.'};s.uniqueValueInfos?.forEach(y=>{const p=y?.symbol?.color;p?o.push([parseInt(""+y.value,10)].concat(p)):t&&o.push([parseInt(""+y.value,10)].concat(t?.color))})}if(0===o.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const n=(0,q.Pz)({colormap:o});return this.lookup={rendererJSON:s,colormapLut:n},this.canRenderInWebGL=Y(n?.indexedColormap),{success:!0}}_updateColormapRenderer(s){if(!(0,B.mO)(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const f=s.colormapInfos.map(i=>[i.value].concat(i.color)).sort((i,h)=>i[0]-h[0]);if(!f||0===f.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const c=(0,q.Pz)({colormap:f});return this.lookup={rendererJSON:s,colormapLut:c},this.canRenderInWebGL=Y(c?.indexedColormap),{success:!0}}_updateShadedReliefRenderer(s){if(!(0,B.jX)(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(s.colorRamp){const f=(0,at.Jw)(s.colorRamp,{interpolateAlpha:!0}),c=(0,q.Pz)({colormap:f}),i=[],h=c.indexedColormap;for(let t=0;t<h.length;t+=4){const e=(0,mt._Y)({r:h[t],g:h[t+1],b:h[t+2]});i.push([e.h/60,e.s/100,255*e.v/100])}this.lookup={rendererJSON:s,colormapLut:c,hsvMap:i}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(s){const{attributeTable:f,pixelType:c}=this.rasterInfo,i=null!=f?f.fields.find(e=>"value"===e.name.toLowerCase()):null,h=null!=f?f.fields.find(e=>e.name.toLowerCase()===s.field.toLowerCase()):null,t=null!=i&&null!==h;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(c)||t,tableValueField:i,tableBreakField:h}}_updateClassBreaksRenderer(s){const{attributeTable:f}=this.rasterInfo,{canUseIndexedLUT:c,tableValueField:i,tableBreakField:h}=this._analyzeClassBreaks(s),t=s.classBreakInfos;if(!t?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const e=t.sort((M,_)=>M.classMaxValue-_.classMaxValue),o=e[e.length-1];let n=s.minValue;if(!c){const M=[];for(let _=0;_<e.length;_++)M.push({value:e[_].classMinValue??n,mappedColor:e[_].symbol.color}),n=e[_].classMaxValue;return M.push({value:o.classMaxValue,mappedColor:o.symbol.color}),this.lookup={rendererJSON:s,remapLut:M},this.canRenderInWebGL=!1,{success:!0}}const y=[];if(null!=f&&null!=i&&null!==h&&i!==h){const M=i.name,_=h.name,R=e[e.length-1],{classMaxValue:A}=R;n=s.minValue;for(const N of f.features){const k=N.attributes[M],m=N.attributes[_],S=m===A?R:m<n?null:e.find(({classMaxValue:V})=>V>m);S&&y.push([k].concat(S.symbol.color))}}else{n=Math.floor(s.minValue);for(let M=0;M<e.length;M++){const _=e[M];for(let R=n;R<_.classMaxValue;R++)y.push([R].concat(_.symbol.color));n=Math.ceil(_.classMaxValue)}o.classMaxValue===n&&y.push([o.classMaxValue].concat(o.symbol.color))}const p=(0,q.Pz)({colormap:y,fillUnspecified:!1});return this.lookup={rendererJSON:s,colormapLut:p},this.canRenderInWebGL=Y(p?.indexedColormap),{success:!0}}_updateStretchRenderer(s){let{stretchType:f,dra:c}=s;if(!("none"===f||s.statistics?.length||function Q(s){return null!=s&&s.length>0&&null!=s[0].min&&null!=s[0].max}(this.rasterInfo.statistics)||c))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const i=s.histograms||this.rasterInfo.histograms;!function st(s){return"percentClip"===s||"histogramEqualization"===s}(s.stretchType)||i?.length||c||(f="minMax");const{computeGamma:h,useGamma:t,colorRamp:e}=s;let{gamma:o}=s;t&&h&&!o?.length&&(o=(0,nt.ZF)(this.rasterInfo.pixelType,s.statistics?.length?s.statistics:this.rasterInfo.statistics));const n=this.rasterInfo.pixelType,y=!c&&["u8","u16","s8","s16"].includes(n);if("histogramEqualization"===f){const p=i.map(M=>(0,nt.oc)(M));this.lookup={rendererJSON:s,histogramLut:p}}else if(y){const p=(0,nt.AV)(s,{rasterInfo:this.rasterInfo}),M=(0,nt.hE)({pixelType:n,...p,gamma:t?o:null,rounding:"floor"});this.lookup={rendererJSON:s,stretchLut:M}}if(e&&!function O(s){return"algorithmic"===s.type&&["0,0,0,255","0,0,0"].includes(s.fromColor.join(","))&&["255,255,255,255","255,255,255"].includes(s.toColor.join(","))}(e)){const p=(0,at.Jw)(e,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:s}),this.lookup.colormapLut=(0,q.Pz)({colormap:p}),this.lookup.rendererJSON=s}return this.lookup.gamma=t&&o?.length?o:null,this.canRenderInWebGL=!0,{success:!0}}_generateStretchWebGLParams(s,f,c){let i=null,h=null;const t=this.lookup?.colormapLut;f.colorRamp&&t&&(i=t.indexedColormap,h=t.offset),"histogramEqualization"===f.stretchType&&(f={...f,stretchType:"minMax"});const{gamma:e}=this.lookup,o=!(!f.useGamma||!e?.some(V=>1!==V)),{minCutOff:n,maxCutOff:y,outMin:p,outMax:M}=(0,nt.AV)(f,{rasterInfo:this.rasterInfo,pixelBlock:s,bandIds:c});let _=0;null!=s&&(_=s.getPlaneCount(),2===_&&((s=s.clone()).statistics=[s.statistics[0]],s.pixels=[s.pixels[0]]));const{bandCount:R}=this.rasterInfo,A=Math.min(3,c?.length||_||R,R),N=new Float32Array(A),k=i||o?1:255;let m;for(m=0;m<n.length;m++)N[m]=y[m]===n[m]?0:(M-p)/(y[m]-n[m])/k;const S=new Float32Array(A);if(o&&e)for(m=0;m<A;m++)S[m]=e[m]>1?e[m]>2?6.5+(e[m]-2)**2.5:6.5+100*(2-e[m])**4:1;return{bandCount:A,outMin:p/k,outMax:M/k,minCutOff:n,maxCutOff:y,factor:N,useGamma:o,gamma:o?e:[1,1,1],gammaCorrection:o?S:[1,1,1],colormap:i,colormapOffset:h,stretchType:f.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(s,f=!1,c={x:0,y:0}){let i=null,h=null;const t=this.lookup?.colormapLut;s.colorRamp&&t&&(i=t.indexedColormap,h=t.offset);const e={...s,isGCS:f,resolution:c},o=(0,Z.TK)(e),n=this.rasterInfo.statistics?.[0];return{...o,minValue:n?.min??0,maxValue:n?.max??8e3,hillshadeType:"traditional"===s.hillshadeType?0:1,type:"hillshade",colormap:i,colormapOffset:h}}_generateVectorFieldWebGLParams(s){const{style:f,inputUnit:c,outputUnit:i,visualVariables:h,symbolTileSize:t,flowRepresentation:e}=s;let o;const n=this.rasterInfo.statistics?.[0].min??0,y=this.rasterInfo.statistics?.[0].max??50,p=h?.find(m=>"sizeInfo"===m.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:y,maxSize:.8*t,minDataValue:n,minSize:.2*t},M=p.minDataValue??n,_=p.maxDataValue??y,R=null!=p.maxSize&&null!=p.minSize?[p.minSize/t,p.maxSize/t]:[.2,.8];"wind_speed"===f&&(R[0]=R[1]=(R[0]+R[1])/2);const A=null!=M&&null!=_?[M,_]:null;if("classified_arrow"===f)if(null!=M&&null!=_&&null!=p){o=[];const m=(p.maxDataValue-p.minDataValue)/5;for(let S=0;S<6;S++)o.push(p.minDataValue+m*S)}else o=[0,1e-6,3.5,7,10.5,14];const N="flow_to"===e==("ocean_current_kn"===f||"ocean_current_m"===f)?0:Math.PI,k=h?.find(m=>"rotationInfo"===m.type);return{breakValues:o,dataRange:A,inputUnit:c,outputUnit:i,symbolTileSize:t,symbolPercentRange:R,style:f||"single_arrow",rotation:N,rotationType:this.rasterInfo.storageInfo?.tileInfo&&"vector-uv"===this.rasterInfo.dataType?"geographic":k?.rotationType||s.rotationType,type:"vectorField"}}};(0,W._)([(0,vt.Cb)({json:{write:!0}})],H.prototype,"rendererJSON",void 0),(0,W._)([(0,vt.Cb)({type:dt.Z,json:{write:!0}})],H.prototype,"rasterInfo",void 0),(0,W._)([(0,vt.Cb)({json:{write:!0}})],H.prototype,"lookup",void 0),(0,W._)([(0,vt.Cb)()],H.prototype,"canRenderInWebGL",void 0),H=(0,W._)([(0,r.j)("esri.renderers.support.RasterSymbolizer")],H);const J=H;function Y(s){return!!s?.length&&s.length<=16384}function I(s){return(0,q.nk)(s)&&0!==s.validPixelCount}},92865:(St,Et,K)=>{K.d(Et,{B4:()=>B,H0:()=>it,Jw:()=>s,Oi:()=>vt,Uh:()=>at,XL:()=>O,oI:()=>h,pM:()=>i,xK:()=>Ct});var W=K(66599),mt=K(70794),yt=K(84303),G=K(89317);const vt=["random","ndvi","ndvi2","ndvi3","elevation","gray","hillshade"],Ct=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],it=new yt.X({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function r(t,e){if(!t||!e||t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(t[o]>e[o]+2||t[o]<e[o]-2)return!1;return!0}function dt(t){const e=t.clone();return e.fromColor=t.toColor,e.toColor=t.fromColor,e.algorithm=t.algorithm,e}function nt(t,e){if(!t)return;const o=e??Ct;let n=null;return"algorithmic"===t.type?o.some(y=>{if(r(t.fromColor.toRgb(),y.fromColor)&&r(t.toColor.toRgb(),y.toColor))return n=y.id,!0}):"multipart"===t.type&&o.some(y=>{const p=t.colorRamps,M=y.colorRamps;if(p&&M&&p.length===M.length&&!M.some((_,R)=>{if(!r(p[R].fromColor.toRgb(),new W.Z(_.fromColor).toRgb())||!r(p[R].toColor.toRgb(),new W.Z(_.toColor).toRgb()))return!0})){if(n)return!0;n=y.id}}),n}function at(t,e=!1){const o="string"==typeof t?t:function Z(t,e,o=!1){if(!t)return;let n=!1,y=nt(t,e);return null!=y||o||(n=!0,y=nt(t=function q(t){if("multipart"===t.type){const e=t.clone();return e.colorRamps?.length&&(e.colorRamps=e.colorRamps.reverse().map(o=>dt(o))),e}return dt(t)}(t),e)),y?{id:y,inverted:n}:void 0}(t,void 0,e)?.id;return o?it.toJSON(o):null}function B(t,e="esriCIELabAlgorithm"){const o=Ct.find(({id:n})=>n===t);return o?o.colorRamps?{type:"multipart",colorRamps:o.colorRamps.map(n=>({type:"algorithmic",algorithm:e,fromColor:[...n.fromColor],toColor:[...n.toColor]}))}:{type:"algorithmic",algorithm:e,fromColor:[...o.fromColor],toColor:[...o.toColor]}:null}function H(t){const e=(t=t||{}).numColors||256,o=t.distanceOffset||0,n=null!=t.isCustomInterval?t.isCustomInterval:null!==t.distanceInterval&&t.distanceInterval!==1/(e-1),y=t.distanceInterval||1/(e-1);return{...t,numColors:e,distanceOffset:o,interpolateAlpha:!!t.interpolateAlpha,distanceInterval:y,isCustomInterval:n,weights:t.weights}}function Q(t,e){let{fromColor:o,toColor:n}=t;o=[...o],n=[...n],3===o.length&&(o=o.concat([255])),3===n.length&&(n=n.concat([255]));const y=t.algorithm||"esriCIELabAlgorithm",p=H(e),{numColors:M,distanceOffset:_,isCustomInterval:R,interpolateAlpha:A}=p;if(1===M&&0===_)return[o];if(2===M&&0===_&&!R)return[o,n];const N={r:o[0],g:o[1],b:o[2]},k={r:n[0],g:n[1],b:n[2]},m="esriCIELabAlgorithm"===y?function Y(t,e,o){const{numColors:n,distanceOffset:y,distanceInterval:p,isCustomInterval:M}=o;let{l:_,a:R,b:A}=t;const N=(e.l-_)*p,k=(e.a-R)*p,m=(e.b-A)*p,S=[];if(y){const V=y/p;_+=V*N,R+=V*k,A+=V*m}for(let V=0;V<n-1;V++)S.push({l:_,a:R,b:A}),_+=N,R+=k,A+=m;return S.push(M?{l:_,a:R,b:A}:e),S}((0,mt.Y3)(N),(0,mt.Y3)(k),p):"esriHSVAlgorithm"===y?function J(t,e,o){const{numColors:n,distanceOffset:y,distanceInterval:p,isCustomInterval:M}=o,_=0===t.s,R=0===e.s;let A=t.h,N=e.h;_&&!R?A=N:R&&!_&&(e={...e,h:A},N=A);let k,m=Math.abs(N-A);const S=360;m<180?k=(N-A)*p:(m=S-m,k=A>N?m*p:-m*p);const V=(e.s-t.s)*p,X=(e.v-t.v)*p;let{s:v,v:l}=t,w=A;if(y){const x=y/p;w=(w+x*k+S)%S,v+=x*V,l+=x*X}const T=[];for(let x=0;x<n-1;x++)T.push({h:w,s:v,v:l}),w=(w+k+S)%S,v+=V,l+=X;return T.push(M?{h:w,s:v,v:l}:e),T}((0,mt._Y)(N),(0,mt._Y)(k),p):function st(t,e,o){const{numColors:n,distanceOffset:y,distanceInterval:p,isCustomInterval:M}=o,_=t.h,R=e.h,A=2*Math.PI;let N;if(_<=R){const w=R-_,T=R-_-A;N=Math.abs(T)<Math.abs(w)?T:w}else{const w=R+A-_,T=R-_;N=Math.abs(T)<Math.abs(w)?T:w}const k=N*p,m=(e.l-t.l)*p,S=(e.c-t.c)*p;let{l:V,c:X,h:v}=t;if(y){const w=y/p;V+=w*m,X+=w*S,v=(v+w*k+A)%A}const l=[];for(let w=0;w<n-1;w++)l.push({l:V,c:X,h:v}),V+=m,X+=S,v=(v+k+A)%A;return l.push(M?{l:V,c:X,h:v}:e),l}((0,mt.sJ)(N),(0,mt.sJ)(k),p),S=[],V=o[3]??255,X=((n[3]??255)-V)/(M-1);for(let v=0;v<M;v++){const{r:l,g:w,b:T}=(0,mt.xr)(m[v]),x=A?Math.round(V+X*v):255;S.push([l,w,T,x])}return S}function O(t,e){const o=(0,G.AK)(t)?t.toJSON():t;return"multipart"===o.type?function I(t,e){const{numColors:o,interpolateAlpha:n}=H(e);let y=e?.weights;const{colorRamps:p}=t;if(y){const k=y.reduce((m,S)=>m+S);y=y.map(m=>m/k)}else{y=[];for(let k=0;k<p.length;k++)y[k]=1/p.length}const M=[],_=1/(o-1);let R=0,A=!1;for(let k=0;k<p.length;k++){const m=M.length,S=A?0:m*_-R;R+=y[k];let V=k===p.length-1?o-1-m:(y[k]-S)/_;if(A=Math.ceil(V)===V,V=Math.ceil(V),0===V)continue;const X=Q(p[k],{numColors:V,interpolateAlpha:n,distanceOffset:S/y[k],distanceInterval:_/y[k]});M.push(...X)}const N=[...p[p.length-1].toColor];return 3===N.length&&N.push(255),M.push(N),M}(o,e):Q(o,e)}function s(t,e){const o=O(t,e),n=e?.interpolateAlpha;return o.forEach((y,p)=>{y.unshift(p),n||y.pop()}),o}function f(t){const e=(0,mt._Y)(t);return{type:"HsvColor",Hue:e.h,Saturation:e.s,Value:e.v,AlphaValue:255}}function c(t){return{Algorithm:t.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:f(t.fromColor),ToColor:f(t.toColor)}}function i(t){const e=at(t);if(!e)return null;if("algorithmic"===t.type)return{...c(t),Name:e};if(t.colorRamps){const o=t.colorRamps.map(c);return{type:"MultiPartColorRamp",NumColorRamps:o.length,ArrayOfColorRamp:o,Name:e}}return null}function h(t){const e=t.reverse().map(o=>{const n=o.toString(16);return n.length<2?"0"+n:n});return 4294967295&Number.parseInt(e.join(""),16)}},83071:(St,Et,K)=>{function mt(r,dt){const{attributeTable:q,bandCount:nt}=r;return!(null!=q||!function W(r){return["u8","s8"].includes(r.pixelType)&&null!=r.statistics?.[0]?.min&&null!=r.statistics[0]?.max&&1===r.bandCount}(r))||!(null==q||nt>1||dt&&null==q.fields.find(Z=>Z.name.toLowerCase()===dt.toLowerCase()))}function yt(r){const{bandCount:dt,dataType:q,pixelType:nt}=r;return"elevation"===q||"generic"===q&&1===dt&&("s16"===nt||"s32"===nt||"f32"===nt||"f64"===nt)}function G(r,dt=!1){const{bandCount:q,colormap:nt,pixelType:Z}=r;return 1===q&&(!!nt?.length||!dt&&"u8"===Z)}function vt(r,dt=!1){const{attributeTable:q,bandCount:nt}=r;return 1===nt&&(!dt||null!=q||null!=r.histograms)}function Ct(r){const{dataType:dt}=r;return"vector-uv"===dt||"vector-magdir"===dt}function it(r){const{dataType:dt}=r;return"vector-uv"===dt||"vector-magdir"===dt}K.d(Et,{LV:()=>Ct,MG:()=>mt,aG:()=>it,fI:()=>vt,jX:()=>yt,mO:()=>G})},11856:(St,Et,K)=>{K.d(Et,{J:()=>yt,v:()=>mt});const mt=new(K(84303).X)({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),yt={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"}}}]);