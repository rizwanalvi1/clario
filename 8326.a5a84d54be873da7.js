"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[8326,5398,1519,9005],{52540:(te,G,y)=>{y.d(G,{z:()=>L});var z=y(39921);class L{constructor(A,U){this._storage=new z.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=A,this._storage.register(this),U&&this._storage.registerRemoveFunc("",U)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(A,U,T=1){this._storage.put(this,A,U,T,1)}pop(A){return this._storage.pop(this,A)}get(A){return this._storage.get(this,A)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(A){this._storage.maxSize=A}resetHitRate(){}}},39921:(te,G,y)=>{y.d(G,{WJ:()=>T,Xq:()=>U});var A,J,z=y(43029);(J=A||(A={}))[J.ALL=0]="ALL",J[J.SOME=1]="SOME";class U{constructor(E,m,u){this.name=E,this._storage=m,this.id=R+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),u&&(this._storage.registerRemoveFunc(this.id,u),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(E){return this._storage.getSize(this,E)}resetHitRate(){this._hit=this._miss=0}put(E,m,u,O=0){this._storage.put(this,E,m,u,O)}pop(E){const m=this._storage.pop(this,E);return void 0===m?++this._miss:++this._hit,m}get(E){const m=this._storage.get(this,E);return void 0===m?++this._miss:++this._hit,m}peek(E){return this._storage.peek(this,E)}updateSize(E,m,u){this._storage.updateSize(this,E,m,u)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class T{get size(){return this._size}constructor(E=10485760){this._maxSize=E,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new z.Z,this._users=new z.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(E){this._users.push(E)}deregister(E){this._users.removeUnordered(E)}registerRemoveFunc(E,m){this._removeFuncs.push([E,m])}deregisterRemoveFunc(E){this._removeFuncs.filterInPlace(m=>m[0]!==E)}get maxSize(){return this._maxSize}set maxSize(E){this._maxSize=Math.max(E,-1),this._checkSize()}getSize(E,m){return this._db.get(E.id+m)?.size??0}put(E,m,u,O,b){const x=this._db.get(m=E.id+m);if(x&&(this._size-=x.size,E.size-=x.size,this._db.delete(m),x.entry!==u&&this._notifyRemove(m,x.entry,x.size,A.ALL)),O>this._maxSize)return void this._notifyRemove(m,u,O,A.ALL);if(void 0===u)return void console.warn("Refusing to cache undefined entry ");if(!O||O<0)return console.warn(`Refusing to cache entry with size ${O} for key ${m}`),void this._notifyRemove(m,u,0,A.ALL);const Z=1+Math.max(b,-4)- -3;this._db.set(m,new $(u,O,Z)),this._size+=O,E.size+=O,this._checkSize()}updateSize(E,m,u,O){const b=this._db.get(m=E.id+m);if(b&&b.entry===u){for(this._size-=b.size,E.size-=b.size;O>this._maxSize;){const x=this._notifyRemove(m,u,O,A.SOME);if(!(null!=x&&x>0))return void this._db.delete(m);O=x}b.size=O,this._size+=O,E.size+=O,this._checkSize()}}pop(E,m){const u=this._db.get(m=E.id+m);if(u)return this._size-=u.size,E.size-=u.size,this._db.delete(m),++this._hit,u.entry;++this._miss}get(E,m){const u=this._db.get(m=E.id+m);if(void 0!==u)return this._db.delete(m),u.lives=u.lifetime,this._db.set(m,u),++this._hit,u.entry;++this._miss}peek(E,m){const u=this._db.get(E.id+m);return u?++this._hit:++this._miss,u?.entry}get performanceInfo(){const E={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},m={},u=new Array;this._db.forEach((x,Z)=>{const v=x.lifetime;u[v]=(u[v]||0)+x.size,this._users.forAll(c=>{const{id:d,name:p}=c;Z.startsWith(d)&&(m[p]=(m[p]||0)+x.size)})});const O={};this._users.forAll(x=>{const Z=x.name;"hitRate"in x&&"number"==typeof x.hitRate&&!isNaN(x.hitRate)&&x.hitRate>0?(m[Z]=m[Z]||0,O[Z]=Math.round(100*x.hitRate)+"%"):O[Z]="0%"});const b=Object.keys(m);b.sort((x,Z)=>m[Z]-m[x]),b.forEach(x=>E[x]=Math.round(m[x]/2**20)+"MB / "+O[x]);for(let x=u.length-1;x>=0;--x){const Z=u[x];Z&&(E["Priority "+(x+-3-1)]=Math.round(Z/this._size*100)+"%")}return E}resetStats(){this._hit=this._miss=0,this._users.forAll(E=>E.resetHitRate())}clear(E){const m=E.id;this._db.forEach((u,O)=>{O.startsWith(m)&&(this._size-=u.size,this._db.delete(O),this._notifyRemove(O,u.entry,u.size,A.ALL))}),E.size=0}clearAll(){this._db.forEach((E,m)=>this._notifyRemove(m,E.entry,E.size,A.ALL)),this._users.forAll(E=>E.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(E,m,u,O){let b;return this._removeFuncs.some(x=>{if(E.startsWith(x[0])){const Z=x[1](m,O,u);return"number"==typeof Z&&(b=Z),!0}return!1}),b}_checkSize(){this._users.forAll(E=>this._checkSizeLimits(E)),this._checkSizeLimits()}_checkSizeLimits(E){const m=E??this;if(m.maxSize<0||m.size<=m.maxSize)return;const u=E?.id;let O=!0;for(;O;){O=!1;for(const[b,x]of this._db)if(0===x.lifetime&&(!u||b.startsWith(u))){if(this._purgeItem(b,x,E),m.size<=.9*m.maxSize)return;O||=this._db.has(b)}}for(const[b,x]of this._db)if((!u||b.startsWith(u))&&(this._purgeItem(b,x,E),m.size<=.9*m.maxSize))return}_purgeItem(E,m,u=this._users.find(O=>E.startsWith(O.id))){if(this._db.delete(E),m.lives<=1){this._size-=m.size,u&&(u.size-=m.size);const O=this._notifyRemove(E,m.entry,m.size,A.SOME);null!=O&&O>0&&(this._size+=O,u&&(u.size+=O),m.lives=m.lifetime,m.size=O,this._db.set(E,m))}else--m.lives,this._db.set(E,m)}}let R=0;class ${constructor(E,m,u){this.entry=E,this.size=m,this.lifetime=u,this.lives=u}}},657:(te,G,y)=>{y.d(G,{$c:()=>b,Hg:()=>x,jW:()=>m,uD:()=>u});var z=y(73514),L=y(83944),V=y(49301);const A=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function U(v){return v instanceof z.Z}function T(v){return v instanceof L.Z?Object.keys(v.items):U(v)?(0,V.vw)(v).keys():v?Object.keys(v):[]}function R(v,c){return v instanceof L.Z?v.items[c]:v[c]}function J(v){return v?v.declaredClass:null}function E(v,c){const d=v.diff;if(d&&"function"==typeof d)return d(v,c);const p=T(v),F=T(c);if(0===p.length&&0===F.length)return;if(!p.length||!F.length||function $(v,c){return!(!Array.isArray(v)||!Array.isArray(c))&&v.length!==c.length}(v,c))return{type:"complete",oldValue:v,newValue:c};const S=F.filter(P=>!p.includes(P)),f=p.filter(P=>!F.includes(P)),h=p.filter(P=>F.includes(P)&&R(v,P)!==R(c,P)).concat(S,f).sort(),D=J(v);if(D&&A.has(D)&&h.length)return{type:"complete",oldValue:v,newValue:c};let a;const _=U(v)&&U(c);for(const P of h){const M=R(v,P),w=R(c,P);let j;if((_||"function"!=typeof M&&"function"!=typeof w)&&M!==w&&(null!=M||null!=w)){if(d&&d[P]&&"function"==typeof d[P])j=d[P]?.(M,w);else if(M instanceof Date&&w instanceof Date){if(M.getTime()===w.getTime())continue;j={type:"complete",oldValue:M,newValue:w}}else j="object"==typeof M&&"object"==typeof w&&J(M)===J(w)?E(M,w):{type:"complete",oldValue:M,newValue:w};null!=j&&(null!=a?a.diff[P]=j:a={type:"partial",diff:{[P]:j}})}}return a}function m(v,c){return u(v,c)}function u(v,c){if(null==v)return!1;const d=c.split(".");let p=v;for(const F of d){if("complete"===p.type)return!0;if("partial"!==p.type)return!1;{const S=p.diff[F];if(!S)return!1;p=S}}return!0}function b(v,c){if(!v)return!1;if("partial"===v.type){const d=Object.keys(v.diff);return 1===d.length&&d[0]===c}return!1}function x(v,c){if("function"!=typeof v&&"function"!=typeof c&&(null!=v||null!=c))return null==v||null==c||"object"==typeof v&&"object"==typeof c&&J(v)!==J(c)?{type:"complete",oldValue:v,newValue:c}:E(v,c)}},15398:(te,G,y)=>{y.d(G,{A4:()=>V,L9:()=>A,yV:()=>L});var z=y(25037);class L{}function V(T){return T instanceof z.ld?T===L.instance:"unknown"===T?.toString().toLowerCase()}function A(T){return V(T)?L.instance:T}L.instance=new z.vF("Etc/UTC")},66398:(te,G,y)=>{function L(l){return l?{originPosition:"upper-left"===l.originPosition?"upperLeft":"lower-left"===l.originPosition?"lowerLeft":l.originPosition,scale:l.tolerance?[l.tolerance,l.tolerance,1,1]:[1,1,1,1],translate:null!=l.extent?[l.extent.xmin,l.extent.ymax,l.extent.zmin??0,l.extent.mmin??0]:[0,0,0,0]}:null}function A(l){if(function V(l){return"lowerLeft"===l.originPosition&&4===l.scale.length&&4===l.translate.length}(l))return l;const{originPosition:s,scale:i,translate:g}=l,I=i[1]??1;return{originPosition:"lowerLeft",scale:[i[0]??1,"lowerLeft"===s?I:-I,i[2]??1,i[3]??1],translate:[g[0]??0,g[1]??0,g[2]??0,g[3]??0]}}function v({scale:l,translate:s},i){return i*l[0]+s[0]}function c({scale:l,translate:s},i){return i*l[1]+s[1]}function d({scale:l,translate:s},i){return(i??0)*l[2]+s[2]}function p({scale:l,translate:s},i){return i?i*l[3]+s[3]:0}function F(l,s){return l&&s?D:l&&!s?f:!l&&s?h:S}y.d(G,{G6:()=>he,Ie:()=>ce,J9:()=>ae,RF:()=>se,U1:()=>ue,vY:()=>L}),y(40637);const S=(l,s)=>{const i=new Array(s.length);if(!s.length)return i;const g=s[0];let C=v(l,g[0]),I=c(l,g[1]);i[0]=[C,I];const{scale:N,originPosition:B}=l,H=N[0],Y="lowerLeft"===B?N[1]:-N[1];for(let W=1;W<s.length;W++){const[X,q]=s[W];C+=H*X,I+=Y*q,i[W]=[C,I]}return i},f=(l,s)=>{const i=new Array(s.length);if(!s.length)return i;const g=s[0];let C=v(l,g[0]),I=c(l,g[1]);i[0]=[C,I,d(l,g[2])];const{scale:N,originPosition:B}=l,H=N[0],Y="lowerLeft"===B?N[1]:-N[1];for(let W=1;W<s.length;W++){const[X,q,ee]=s[W];C+=H*X,I+=Y*q,i[W]=[C,I,d(l,ee)]}return i},h=(l,s)=>{const i=new Array(s.length);if(!s.length)return i;const g=s[0];let C=v(l,g[0]),I=c(l,g[1]);i[0]=[C,I,p(l,g[2])];const{scale:N,originPosition:B}=l,H=N[0],Y="lowerLeft"===B?N[1]:-N[1];for(let W=1;W<s.length;W++){const[X,q,ee]=s[W];C+=H*X,I+=Y*q,i[W]=[C,I,p(l,ee)]}return i},D=(l,s)=>{const i=new Array(s.length);if(!s.length)return i;const g=s[0];let C=v(l,g[0]),I=c(l,g[1]);i[0]=[C,I,d(l,g[2]),p(l,g[3])];const{scale:N,originPosition:B}=l,H=N[0],Y="lowerLeft"===B?N[1]:-N[1];for(let W=1;W<s.length;W++){const[X,q,ee,re]=s[W];C+=H*X,I+=Y*q,i[W]=[C,I,d(l,ee),p(l,re)]}return i};function a(l,s,i){const g=new Array(i.length);for(let C=0;C<i.length;C++)g[C]=s(l,i[C]);return g}function se(l,s,i){const g=A(l);return s.x=function U({scale:l,translate:s},i){return Math.round((i-s[0])/l[0])}(g,i.x),s.y=function T({scale:l,translate:s},i){return Math.round((i-s[1])/l[1])}(g,i.y),null!=i.z&&(s.z=function R({scale:l,translate:s},i){return Math.round(((i??0)-s[2])/l[2])}(g,i.z)),null!=i.m&&(s.m=function $({scale:l,translate:s},i){return i?Math.round((i-s[3])/l[3]):0}(g,i.m)),s}function ae(l,s,i,g=i?.hasZ??!1,C=i?.hasM??!1){if(null!=i){const I=A(l);s.points=F(g,C)(I,i.points),s.hasZ=g,s.hasM=C}return s}function ue(l,s,i,g=null!=i?.z,C=null!=i?.m){if(null==i)return s;const I=A(l);return s.x=v(I,i.x),s.y=c(I,i.y),g&&(s.z=d(I,i.z)),C&&(s.m=p(I,i.m)),s}function ce(l,s,i,g=i?.hasZ??!1,C=i?.hasM??!1){if(null!=i){const I=A(l);s.rings=a(I,F(g,C),i.rings),s.hasZ=g,s.hasM=C}return s}function he(l,s,i,g=i?.hasZ??!1,C=i?.hasM??!1){if(null!=i){const I=A(l);s.paths=a(I,F(g,C),i.paths),s.hasZ=g,s.hasM=C}return s}},90257:(te,G,y)=>{y.r(G),y.d(G,{default:()=>D});var z=y(15861),L=y(50484),A=(y(2189),y(57964)),U=y(79412),T=y(6785),R=y(80543),$=y(14007),m=(y(4703),y(65311),y(62185)),u=y(10141),O=y(90373),b=y(67016),x=y(36885),Z=y(93792),v=y(26894);let c=class extends b.Z{constructor(a){var _;super(a),_=this,this.type="csv",this.refresh=(0,U.Ds)(function(){var P=(0,z.Z)(function*(M){yield _.load();const{extent:w,timeExtent:j}=yield _._connection.invoke("refresh",M);return w&&(_.sourceJSON.extent=w),j&&(_.sourceJSON.timeInfo.timeExtent=[j.start,j.end]),{dataChanged:!0,updates:{extent:_.sourceJSON.extent,timeInfo:_.sourceJSON.timeInfo}}});return function(M){return P.apply(this,arguments)}}())}load(a){return this.addResolvingPromise(this._startWorker(null!=a?a.signal:null)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}openPorts(){var a=this;return(0,z.Z)(function*(){return yield a.load(),a._connection.openPorts()})()}queryFeatures(a,_={}){var P=this;return(0,z.Z)(function*(){yield P.load(_);const M=yield P._connection.invoke("queryFeatures",a?a.toJSON():null,_);return Z.Z.fromJSON(M)})()}queryFeaturesJSON(a,_={}){var P=this;return(0,z.Z)(function*(){return yield P.load(_),P._connection.invoke("queryFeatures",a?a.toJSON():null,_)})()}queryFeatureCount(a,_={}){var P=this;return(0,z.Z)(function*(){return yield P.load(_),P._connection.invoke("queryFeatureCount",a?a.toJSON():null,_)})()}queryObjectIds(a,_={}){var P=this;return(0,z.Z)(function*(){return yield P.load(_),P._connection.invoke("queryObjectIds",a?a.toJSON():null,_)})()}queryExtent(a,_={}){var P=this;return(0,z.Z)(function*(){yield P.load(_);const M=yield P._connection.invoke("queryExtent",a?a.toJSON():null,_);return{count:M.count,extent:v.Z.fromJSON(M.extent)}})()}querySnapping(a,_={}){var P=this;return(0,z.Z)(function*(){return yield P.load(_),P._connection.invoke("querySnapping",a,_)})()}_startWorker(a){var _=this;return(0,z.Z)(function*(){_._connection=yield(0,x.bA)("CSVSourceWorker",{strategy:(0,$.Z)("feature-layers-workers")?"dedicated":"local",signal:a,registryTarget:_});const{url:P,delimiter:M,fields:w,latitudeField:j,longitudeField:K,spatialReference:k,timeInfo:Q}=_.loadOptions,se=yield _._connection.invoke("load",{url:P,customParameters:_.customParameters,parsingOptions:{delimiter:M,fields:w?.map(ne=>ne.toJSON()),latitudeField:j,longitudeField:K,spatialReference:k?.toJSON(),timeInfo:Q?.toJSON()}},{signal:a});_.locationInfo=se.locationInfo,_.sourceJSON=se.layerDefinition,_.delimiter=se.delimiter})()}};(0,L._)([(0,R.Cb)()],c.prototype,"type",void 0),(0,L._)([(0,R.Cb)()],c.prototype,"loadOptions",void 0),(0,L._)([(0,R.Cb)()],c.prototype,"customParameters",void 0),(0,L._)([(0,R.Cb)()],c.prototype,"locationInfo",void 0),(0,L._)([(0,R.Cb)()],c.prototype,"sourceJSON",void 0),(0,L._)([(0,R.Cb)()],c.prototype,"delimiter",void 0),c=(0,L._)([(0,u.j)("esri.layers.graphics.sources.CSVSource")],c);var d=y(60324),p=y(91866),F=y(19677),S=y(43814);function f(a,_){throw new A.Z(_,`CSVLayer (title: ${a.title}, id: ${a.id}) cannot be saved to a portal item`)}let h=class extends O.default{constructor(...a){super(...a),this.geometryType="point",this.capabilities=(0,d.MS)(!1,!1),this.delimiter=null,this.editingEnabled=!1,this.fields=null,this.latitudeField=null,this.locationType="coordinates",this.longitudeField=null,this.operationalLayerType="CSV",this.outFields=["*"],this.path=null,this.spatialReference=S.Z.WGS84,this.source=null,this.type="csv"}normalizeCtorArgs(a,_){return"string"==typeof a?{url:a,..._}:a}load(a){var _=this;const P=null!=a?a.signal:null,M=this.loadFromPortal({supportedTypes:["CSV"],supportsData:!1},a).catch(U.r9).then((0,z.Z)(function*(){return _.initLayerProperties(yield _.createGraphicsSource(P))}));return this.addResolvingPromise(M),Promise.resolve(this)}get isTable(){return this.loaded&&null==this.geometryType}readWebMapLabelsVisible(a,_){return null!=_.showLabels?_.showLabels:!!_.layerDefinition?.drawingInfo?.labelingInfo}set url(a){if(!a)return void this._set("url",a);const _=(0,T.mN)(a);this._set("url",_.path),_.query&&(this.customParameters={...this.customParameters,..._.query})}createGraphicsSource(a){var _=this;return(0,z.Z)(function*(){const P=new c({loadOptions:{delimiter:_.delimiter,fields:_.fields,latitudeField:_.latitudeField??void 0,longitudeField:_.longitudeField??void 0,spatialReference:_.spatialReference??void 0,timeInfo:_.timeInfo??void 0,url:_.url},customParameters:_.customParameters??void 0});return _._set("source",P),yield P.load({signal:a}),_.read({locationInfo:P.locationInfo,columnDelimiter:P.delimiter},{origin:"service",url:_.parsedUrl}),P})()}queryFeatures(a,_){return this.load().then(()=>this.source.queryFeatures(p.Z.from(a)||this.createQuery())).then(P=>{if(P?.features)for(const M of P.features)M.layer=M.sourceLayer=this;return P})}queryObjectIds(a,_){return this.load().then(()=>this.source.queryObjectIds(p.Z.from(a)||this.createQuery()))}queryFeatureCount(a,_){return this.load().then(()=>this.source.queryFeatureCount(p.Z.from(a)||this.createQuery()))}queryExtent(a,_){return this.load().then(()=>this.source.queryExtent(p.Z.from(a)||this.createQuery()))}read(a,_){super.read(a,_),_&&"service"===_.origin&&this.revert(["latitudeField","longitudeField"],"service")}write(a,_){return super.write(a,{..._,writeLayerSchema:!0})}clone(){throw new A.Z("csv-layer:clone",`CSVLayer (title: ${this.title}, id: ${this.id}) cannot be cloned`)}save(a){var _=this;return(0,z.Z)(function*(){return f(_,"csv-layer:save")})()}saveAs(a,_){var P=this;return(0,z.Z)(function*(){return f(P,"csv-layer:save-as")})()}hasDataChanged(){var a=this;return(0,z.Z)(function*(){try{const{dataChanged:_,updates:P}=yield a.source.refresh(a.customParameters);return null!=P&&a.read(P,{origin:"service",url:a.parsedUrl,ignoreDefaults:!0}),_}catch{}return!1})()}_verifyFields(){}_verifySource(){}_hasMemorySource(){return!1}};(0,L._)([(0,R.Cb)({readOnly:!0,json:{read:!1,write:!1}})],h.prototype,"capabilities",void 0),(0,L._)([(0,R.Cb)({type:[","," ",";","|","\t"],json:{read:{source:"columnDelimiter"},write:{target:"columnDelimiter",ignoreOrigin:!0}}})],h.prototype,"delimiter",void 0),(0,L._)([(0,R.Cb)({readOnly:!0,type:Boolean,json:{origins:{"web-scene":{read:!1,write:!1}}}})],h.prototype,"editingEnabled",void 0),(0,L._)([(0,R.Cb)({json:{read:{source:"layerDefinition.fields"},write:{target:"layerDefinition.fields"}}})],h.prototype,"fields",void 0),(0,L._)([(0,R.Cb)({type:Boolean,readOnly:!0})],h.prototype,"isTable",null),(0,L._)([(0,m.r)("web-map","labelsVisible",["layerDefinition.drawingInfo.labelingInfo","showLabels"])],h.prototype,"readWebMapLabelsVisible",null),(0,L._)([(0,R.Cb)({type:String,json:{read:{source:"locationInfo.latitudeFieldName"},write:{target:"locationInfo.latitudeFieldName",ignoreOrigin:!0}}})],h.prototype,"latitudeField",void 0),(0,L._)([(0,R.Cb)({type:["show","hide"]})],h.prototype,"listMode",void 0),(0,L._)([(0,R.Cb)({type:["coordinates"],json:{read:{source:"locationInfo.locationType"},write:{target:"locationInfo.locationType",ignoreOrigin:!0,isRequired:!0}}})],h.prototype,"locationType",void 0),(0,L._)([(0,R.Cb)({type:String,json:{read:{source:"locationInfo.longitudeFieldName"},write:{target:"locationInfo.longitudeFieldName",ignoreOrigin:!0}}})],h.prototype,"longitudeField",void 0),(0,L._)([(0,R.Cb)({type:["CSV"]})],h.prototype,"operationalLayerType",void 0),(0,L._)([(0,R.Cb)()],h.prototype,"outFields",void 0),(0,L._)([(0,R.Cb)({type:String,json:{origins:{"web-scene":{read:!1,write:!1}},read:!1,write:!1}})],h.prototype,"path",void 0),(0,L._)([(0,R.Cb)({json:{read:!1},cast:null,type:c,readOnly:!0})],h.prototype,"source",void 0),(0,L._)([(0,R.Cb)({json:{read:!1},value:"csv",readOnly:!0})],h.prototype,"type",void 0),(0,L._)([(0,R.Cb)({json:{read:F.r,write:{isRequired:!0,ignoreOrigin:!0,writer:F.w}}})],h.prototype,"url",null),h=(0,L._)([(0,u.j)("esri.layers.CSVLayer")],h);const D=h},85559:(te,G,y)=>{y.d(G,{g:()=>z});const z={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},60324:(te,G,y)=>{y.d(G,{Dm:()=>$,Hq:()=>E,MS:()=>m,bU:()=>U});var z=y(14007),L=y(34222),V=y(85559),A=y(19579);function U(u){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===u||"esriGeometryMultipoint"===u?A.I4:"esriGeometryPolyline"===u?A.ET:A.lF}}}const T=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let R=1;function $(u,O){if((0,z.Z)("esri-csp-restrictions"))return()=>({[O]:null,...u});try{let b=`this${J(O)} = null;`;for(const Z in u)b+=`this${J(Z)} = ${JSON.stringify(u[Z])};`;const x=new Function(`\n      return class AttributesClass$${R++} {\n        constructor() {\n          ${b};\n        }\n      }\n    `)();return()=>new x}catch{return()=>({[O]:null,...u})}}function J(u){return T.test(u)?`.${u}`:`["${u}"]`}function E(u={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,L.d9)(u)}}]}function m(u,O){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:u},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:O,supportsDelete:O,supportsEditing:O,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:O,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:V.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:O,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},50243:(te,G,y)=>{y.d(G,{Z:()=>b});var z=y(50484),L=y(25387),V=y(89317),A=y(80543),$=(y(14007),y(4703),y(65311),y(62185)),J=y(10141),E=y(7547),m=y(59300),u=y(30457);let O=class extends((0,L.J)(V.wq)){constructor(x){super(x),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(x){const Z={};for(const v of Object.keys(x))Z[v]=(0,m.im)(x[v]);return Z}writeDomains(x,Z){const v={};for(const c of Object.keys(x))x[c]&&(v[c]=x[c]?.toJSON());Z.domains=v}};(0,z._)([(0,A.Cb)({json:{write:!0}})],O.prototype,"id",void 0),(0,z._)([(0,A.Cb)({json:{write:!0}})],O.prototype,"name",void 0),(0,z._)([(0,A.Cb)({json:{write:!0}})],O.prototype,"domains",void 0),(0,z._)([(0,$.r)("domains")],O.prototype,"readDomains",null),(0,z._)([(0,E.c)("domains")],O.prototype,"writeDomains",null),(0,z._)([(0,A.Cb)({type:[u.Z],json:{write:!0}})],O.prototype,"templates",void 0),O=(0,z._)([(0,J.j)("esri.layers.support.FeatureType")],O);const b=O},40100:(te,G,y)=>{y.d(G,{Z:()=>O});var z=y(57964),L=y(89317),V=y(4703),A=y(8611),U=y(15398),T=y(85295),R=y(764),$=y(25037);const u=new Map;class O{static fromJSON(d){return new O(d.fields,d.timeZoneByFieldName)}static fromLayer(d){return new O(d.fields??[],v(d))}static fromLayerJSON(d){return new O(d.fields??[],v(d))}constructor(d=[],p){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=d||[],this._timeZoneByFieldName=p?new Map(p):null;const F=[];for(const S of this.fields){const f=S?.name,h=x(f);if(f&&h){const D=b(f);this._fieldsMap.set(f,S),this._fieldsMap.set(D,S),this._normalizedFieldsMap.set(h,S),F.push(`${D}:${S.type}:${this._timeZoneByFieldName?.get(f)}`),(0,T.y2)(S)?(this.dateFields.push(S),this._dateFieldsSet.add(S)):(0,T.H7)(S)&&(this._numericFieldsSet.add(S),this.numericFields.push(S)),(0,T.Dl)(S)||(0,T.Se)(S)||(S.editable=null==S.editable||!!S.editable,S.nullable=null==S.nullable||!!S.nullable)}}F.sort(),this.uid=F.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const d of this.fields)(0,T.Dl)(d)||(0,T.Se)(d)||d.nullable||void 0!==(0,T.os)(d)||this._requiredFields.push(d)}return this._requiredFields}equals(d){return this.uid===d?.uid}has(d){return null!=this.get(d)}get(d){if(!d)return;let p=this._fieldsMap.get(d);return p||(p=this._fieldsMap.get(b(d))??this._normalizedFieldsMap.get(x(d)),p&&this._fieldsMap.set(d,p),p)}getTimeZone(d){const p=this.get(d&&"string"!=typeof d?d.name:d);return p?this._timeZoneByFieldName?this._timeZoneByFieldName.get(p.name):"date"===p.type||"esriFieldTypeDate"===p.type?(V.Z.getLogger("esri.layers.support.FieldsIndex").error(new z.Z("getTimeZone:no-timezone-information",`no time zone information for field '${p.name}'`)),R.pt):Z.has(p.type)?R._4:null:null}getLuxonTimeZone(d){const p=this.getTimeZone(d);return p?p===R._4?U.yV.instance:p===R.pt?$.Qf.utcInstance:(0,A.s1)(u,p,()=>$.vF.create(p)):null}isDateField(d){return this._dateFieldsSet.has(this.get(d))}isTimeOnlyField(d){return(0,T.sX)(this.get(d))}isNumericField(d){return this._numericFieldsSet.has(this.get(d))}normalizeFieldName(d){return this.get(d)?.name??void 0}toJSON(){return{fields:this.fields.map(d=>(0,L.AK)(d)?d.toJSON():d),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function b(c){return c.trim().toLowerCase()}function x(c){return(0,T.q6)(c)?.toLowerCase()??""}const Z=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function v(c){const d=new Map;if(!c.fields)return d;const p=!0===c.datesInUnknownTimezone,{timeInfo:F,editFieldsInfo:S}=c,f=(F?"startField"in F?F.startField:F.startTimeField:"")??"",h=(F?"endField"in F?F.endField:F.endTimeField:"")??"",D=function m(c){return"dateFieldsTimeZone"in c}(c)?c.dateFieldsTimeZone??null:c.dateFieldsTimeReference?(0,R.Jv)(c.dateFieldsTimeReference):null,a=S?function J(c){return"timeZone"in c}(S)?S.timeZone??D:S.dateFieldsTimeReference?(0,R.Jv)(S.dateFieldsTimeReference):D??R.pt:null,_=F?function E(c){return"timeZone"in c}(F)?F.timeZone??D:F.timeReference?(0,R.Jv)(F.timeReference):D:null,P=new Map([[b(S?.creationDateField??""),a],[b(S?.editDateField??""),a],[b(f),_],[b(h),_]]);for(const{name:M,type:w}of c.fields)if(Z.has(w))d.set(M,R._4);else if("date"!==w&&"esriFieldTypeDate"!==w)d.set(M,null);else if(p)d.set(M,R._4);else{const j=P.get(b(M??""))??D;d.set(M,j)}return d}},56761:(te,G,y)=>{y.d(G,{UG:()=>m,UO:()=>x,YI:()=>b,dI:()=>Z,el:()=>S,hV:()=>O,z7:()=>u});var z=y(72578);const L="__begin__",V="__end__",A=new RegExp(L,"ig"),U=new RegExp(V,"ig"),T=new RegExp("^"+L,"i"),R=new RegExp(V+"$","i"),$='"',J=$+" + ",E=" + "+$;function m(f){return f.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function u(f){return f.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function O(f){const h={expression:"",type:"none"};return f.labelExpressionInfo?f.labelExpressionInfo.value?(h.expression=f.labelExpressionInfo.value,h.type="conventional"):f.labelExpressionInfo.expression&&(h.expression=f.labelExpressionInfo.expression,h.type="arcade"):null!=f.labelExpression&&(h.expression=m(f.labelExpression),h.type="conventional"),h}function b(f){const h=O(f);if(!h)return null;switch(h.type){case"conventional":return Z(h.expression);case"arcade":return h.expression}return null}function x(f){const h=O(f);if(!h)return null;switch(h.type){case"conventional":return function c(f){return f?.match(v)?.[1].trim()||null}(h.expression);case"arcade":return S(h.expression)}return null}function Z(f){let h;return f?(h=(0,z.gx)(f,D=>L+'$feature["'+D+'"]'+V),h=T.test(h)?h.replace(T,""):$+h,h=R.test(h)?h.replace(R,""):h+$,h=h.replaceAll(A,J).replaceAll(U,E)):h='""',h}const v=/^\s*\{([^}]+)\}\s*$/i,d=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,p=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,F=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function S(f){if(!f)return null;let h=d.exec(f)||p.exec(f);return h?h[1]||h[3]:(h=F.exec(f),h?h[2]:null)}},96043:(te,G,y)=>{y.d(G,{AJ:()=>R,If:()=>E,k0:()=>T,uI:()=>J,ul:()=>U,wx:()=>m});var z=y(55117),L=y(55768),V=y(5710),A=y(23515);const U=2.4;function T(u){return(0,L.Wz)(u*U)}function R(u){return(0,L.F2)(u)/U}function $(u,O,b,x){let{color:Z,ratio:v}=O,{color:c,ratio:d}=b;d===v&&(1===d?v-=1e-6:d+=1e-6);const p=(0,z.uZ)((x-v)/(d-v),0,1);(0,V.l)(u,Z.toArray(),c.toArray(),p)}function J(u){const b=new Uint8ClampedArray(2048);if((u=u.filter(({ratio:d})=>d>=0&&d<=1).sort((d,p)=>d.ratio-p.ratio).map(({color:d,ratio:p})=>({color:d,ratio:Math.max(p,.001)}))).length<1)return b;let x=u[0],Z=u[0],v=1;const c=(0,A.Ue)();for(let d=0;d<512;d++){const p=(d+.5)/512;for(;p>Z.ratio&&v<u.length;)x=Z,Z=u[v++];$(c,x,Z,p),b.set(c,4*d)}return b}function E(u,O,b){const x=Math.sqrt(u**2+O**2)/b;return x>1?0:3/(Math.PI*b**2)*(1-x**2)**2}function m(u){return"function"==typeof u?u:u?O=>+O[u]:()=>1}},8295:(te,G,y)=>{y.d(G,{p:()=>L});var z=y(53456);function L(V,A,U){if(!U?.features||!U.hasZ)return;const T=(0,z.k)(U.geometryType,A,V.outSpatialReference);if(null!=T)for(const R of U.features)T(R.geometry)}},93792:(te,G,y)=>{y.d(G,{Z:()=>d});var Z,z=y(50484),L=y(2189),V=y(35458),A=y(84303),U=y(89317),T=y(34222),R=y(80543),E=(y(14007),y(4703),y(62185)),m=y(10141),u=y(7547),O=y(43814),b=y(40637),x=y(81247);const v=new A.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let c=Z=class extends U.wq{constructor(p){super(p),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(p,F){const S=O.Z.fromJSON(F.spatialReference),f=[];for(let h=0;h<p.length;h++){const D=p[h],a=V.Z.fromJSON(D),_=D.geometry?.spatialReference;null==a.geometry||_||(a.geometry.spatialReference=S);const P=D.aggregateGeometries,M=a.aggregateGeometries;if(P&&null!=M)for(const w in M){const j=M[w],K=P[w],k=K?.spatialReference;null==j||k||(j.spatialReference=S)}f.push(a)}return f}writeGeometryType(p,F,S,f){if(p)return void v.write(p,F,S,f);const{features:h}=this;if(h)for(const D of h)if(null!=D?.geometry)return void v.write(D.geometry.type,F,S,f)}readQueryGeometry(p,F){if(!p)return null;const S=!!p.spatialReference,f=(0,b.im)(p);return f&&!S&&F.spatialReference&&(f.spatialReference=O.Z.fromJSON(F.spatialReference)),f}writeSpatialReference(p,F){if(p)return void(F.spatialReference=p.toJSON());const{features:S}=this;if(S)for(const f of S)if(f&&null!=f.geometry&&f.geometry.spatialReference)return void(F.spatialReference=f.geometry.spatialReference.toJSON())}clone(){return new Z(this.cloneProperties())}cloneProperties(){return(0,T.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(p){const F=this.write();if(F.features&&Array.isArray(p)&&p.length>0)for(let S=0;S<F.features.length;S++){const f=F.features[S];if(f.geometry){const h=p?.[S];f.geometry=h?.toJSON()||f.geometry}}return F}quantize(p){const{scale:[F,S],translate:[f,h]}=p,_=this.features,P=this._getQuantizationFunction(this.geometryType,M=>Math.round((M-f)/F),M=>Math.round((h-M)/S));for(let M=0,w=_.length;M<w;M++)P?.(_[M].geometry)||(_.splice(M,1),M--,w--);return this.transform=p,this}unquantize(){const{geometryType:p,features:F,transform:S}=this;if(!S)return this;const{translate:[f,h],scale:[D,a]}=S;let M=null,w=null;if(this.hasZ&&null!=S?.scale?.[2]){const{translate:[,,K],scale:[,,k]}=S;M=Q=>Q*k+K}if(this.hasM&&null!=S?.scale?.[3]){const{translate:[,,,K],scale:[,,,k]}=S;w=Q=>null==Q?Q:Q*k+K}const j=this._getHydrationFunction(p,K=>K*D+f,K=>h-K*a,M,w);for(const{geometry:K}of F)null!=K&&j&&j(K);return this.transform=null,this}_quantizePoints(p,F,S){let f,h;const D=[];for(let a=0,_=p.length;a<_;a++){const P=p[a];if(a>0){const M=F(P[0]),w=S(P[1]);M===f&&w===h||(D.push([M-f,w-h]),f=M,h=w)}else f=F(P[0]),h=S(P[1]),D.push([f,h])}return D.length>0?D:null}_getQuantizationFunction(p,F,S){return"point"===p?f=>(f.x=F(f.x),f.y=S(f.y),f):"polyline"===p||"polygon"===p?f=>{const h=(0,b.oU)(f)?f.rings:f.paths,D=[];for(let a=0,_=h.length;a<_;a++){const M=this._quantizePoints(h[a],F,S);M&&D.push(M)}return D.length>0?((0,b.oU)(f)?f.rings=D:f.paths=D,f):null}:"multipoint"===p?f=>{const h=this._quantizePoints(f.points,F,S);return h&&h.length>0?(f.points=h,f):null}:"extent"===p?f=>f:null}_getHydrationFunction(p,F,S,f,h){return"point"===p?D=>{D.x=F(D.x),D.y=S(D.y),f&&(D.z=f(D.z))}:"polyline"===p||"polygon"===p?D=>{const a=(0,b.oU)(D)?D.rings:D.paths;let _,P;for(let M=0,w=a.length;M<w;M++){const j=a[M];for(let K=0,k=j.length;K<k;K++){const Q=j[K];K>0?(_+=Q[0],P+=Q[1]):(_=Q[0],P=Q[1]),Q[0]=F(_),Q[1]=S(P)}}if(f&&h)for(let M=0,w=a.length;M<w;M++){const j=a[M];for(let K=0,k=j.length;K<k;K++){const Q=j[K];Q[2]=f(Q[2]),Q[3]=h(Q[3])}}else if(f)for(let M=0,w=a.length;M<w;M++){const j=a[M];for(let K=0,k=j.length;K<k;K++){const Q=j[K];Q[2]=f(Q[2])}}else if(h)for(let M=0,w=a.length;M<w;M++){const j=a[M];for(let K=0,k=j.length;K<k;K++){const Q=j[K];Q[2]=h(Q[2])}}}:"extent"===p?D=>{D.xmin=F(D.xmin),D.ymin=S(D.ymin),D.xmax=F(D.xmax),D.ymax=S(D.ymax),f&&null!=D.zmax&&null!=D.zmin&&(D.zmax=f(D.zmax),D.zmin=f(D.zmin)),h&&null!=D.mmax&&null!=D.mmin&&(D.mmax=h(D.mmax),D.mmin=h(D.mmin))}:"multipoint"===p?D=>{const a=D.points;let _,P;for(let M=0,w=a.length;M<w;M++){const j=a[M];M>0?(_+=j[0],P+=j[1]):(_=j[0],P=j[1]),j[0]=F(_),j[1]=S(P)}if(f&&h)for(let M=0,w=a.length;M<w;M++){const j=a[M];j[2]=f(j[2]),j[3]=h(j[3])}else if(f)for(let M=0,w=a.length;M<w;M++){const j=a[M];j[2]=f(j[2])}else if(h)for(let M=0,w=a.length;M<w;M++){const j=a[M];j[2]=h(j[2])}}:null}};(0,z._)([(0,R.Cb)({type:String,json:{write:!0}})],c.prototype,"displayFieldName",void 0),(0,z._)([(0,R.Cb)({type:Boolean,json:{write:{overridePolicy:p=>({enabled:p})}}})],c.prototype,"exceededTransferLimit",void 0),(0,z._)([(0,R.Cb)({type:[V.Z],json:{write:!0}})],c.prototype,"features",void 0),(0,z._)([(0,E.r)("features")],c.prototype,"readFeatures",null),(0,z._)([(0,R.Cb)({type:[x.Z],json:{write:!0}})],c.prototype,"fields",void 0),(0,z._)([(0,R.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:v.read}}})],c.prototype,"geometryType",void 0),(0,z._)([(0,u.c)("geometryType")],c.prototype,"writeGeometryType",null),(0,z._)([(0,R.Cb)({type:Boolean,json:{write:{overridePolicy:p=>({enabled:p})}}})],c.prototype,"hasM",void 0),(0,z._)([(0,R.Cb)({type:Boolean,json:{write:{overridePolicy:p=>({enabled:p})}}})],c.prototype,"hasZ",void 0),(0,z._)([(0,R.Cb)({types:L.qM,json:{write:!0}})],c.prototype,"queryGeometry",void 0),(0,z._)([(0,E.r)("queryGeometry")],c.prototype,"readQueryGeometry",null),(0,z._)([(0,R.Cb)({type:O.Z,json:{write:!0}})],c.prototype,"spatialReference",void 0),(0,z._)([(0,u.c)("spatialReference")],c.prototype,"writeSpatialReference",null),(0,z._)([(0,R.Cb)({json:{write:!0}})],c.prototype,"transform",void 0),c=Z=(0,z._)([(0,m.j)("esri.rest.support.FeatureSet")],c),c.prototype.toJSON.isDefaultToJSON=!0;const d=c}}]);