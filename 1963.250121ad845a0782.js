"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[1963],{93960:(_,L,e)=>{e.d(L,{G:()=>s});var m=e(57964);let s=class Y{constructor(u,c,E=""){this.major=u,this.minor=c,this._context=E}lessThan(u,c){return this.major<u||u===this.major&&this.minor<c}since(u,c){return!this.lessThan(u,c)}validate(u){if(this.major!==u.major)throw new m.Z((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:u})}clone(){return new Y(this.major,this.minor,this._context)}static parse(u,c=""){const[E,P]=u.split("."),g=/^\s*\d+\s*$/;if(!E?.match||!g.test(E))throw new m.Z((c&&c+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:u});if(!P?.match||!g.test(P))throw new m.Z((c&&c+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:u});const D=parseInt(E,10),b=parseInt(P,10);return new Y(D,b,c)}}},12610:(_,L,e)=>{e.d(L,{Z:()=>O});var m=e(15861),s=e(50484),x=e(34222),u=e(80543),E=(e(14007),e(4703)),P=e(10141),g=e(7547),D=e(85295),b=e(38748),A=e(60996),I=e(66599),j=e(66476),Z=e(57964),d=e(52540),a=e(79412),t=e(93960),r=e(40100),o=e(4978),i=e(66641),n=e(69411),l=e(25896);const f="esri.renderers.support.DictionaryLoader",h={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class S{constructor(y,p,v){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new d.z(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=y,this.config=p,this.fieldMap=v}getSymbolFields(){return this._symbolFields}getSymbolAsync(y,p){var v=this;return(0,m.Z)(function*(){let N;v._dictionaryPromise||(v._dictionaryPromise=v.fetchResources(p));try{N=yield v._dictionaryPromise}catch(V){if((0,a.D_)(V))return v._dictionaryPromise=null,null}const G=v._dictionaryVersion?.since(4,0),W={};if(v.fieldMap)for(const V of v._symbolFields){const w=(0,l.Ts)(v.fieldMap[V],v._fieldIndex);if(w){const U=y.attributes[w];W[V]=G?U:null!=U?""+y.attributes[w]:""}else W[V]=""}let B=null;try{B=N?.(W,p)}catch{return null}if(!B||"string"!=typeof B||"invalid"===B)return null;const J=B.split(";"),z=[],K=[];for(const V of J)if(V)if(V.includes("po:")){const w=V.substr(3).split("|");if(3===w.length){const U=w[0],$=w[1];let F=w[2];if("DashTemplate"===$)F=F.split(" ").map(H=>Number(H));else if("Color"===$){const H=new I.Z(F).toRgba();F=[H[0],H[1],H[2],255*H[3]]}else F=Number(F);K.push({primitiveName:U,propertyName:$,value:F,defaultValue:null})}}else if(V.includes("|")){for(const w of V.split("|"))if(v._itemNames.has(w)){z.push(w);break}}else v._itemNames.has(V)&&z.push(V);return v._cimPartsToCIMSymbol(y,z,K,null==y.geometry||!y.geometry.hasZ&&"point"===y.geometry.type,p)})()}fetchResources(y){var p=this;return(0,m.Z)(function*(){if(p._dictionaryPromise)return p._dictionaryPromise;if(!p.url)return void E.Z.getLogger(f).error("no valid URL!");const v=(0,j.Z)(p.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:null!=y?y.signal:null}),[{data:N}]=yield Promise.all([v,(0,o.LC)()]);if(!N)throw p._dictionaryPromise=null,new Z.Z("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:G,dictionary_version:W,expression:B,itemsNames:J}=N,z=B;let K=!1;W&&(p._dictionaryVersion=t.G.parse(W),K=p._dictionaryVersion.since(4,0)),p._refSymbolUrlTemplate=p.url+"/"+N.cimRefTemplateUrl,p._itemNames=new Set(J),p._symbolFields=G.symbol;const Q={};if(p.config){const U=p.config;for(const $ in U)Q[$]=U[$]}if(G.configuration)for(const U of G.configuration)Q.hasOwnProperty(U.name)||(Q[U.name]=U.value);const V=[];if(y?.fields&&p.fieldMap)for(const U in p.fieldMap){const $=p.fieldMap[U],F=y.fields.filter(H=>H.name.toLowerCase()===$?.toLowerCase());F.length>0&&V.push({...F[0],type:K?F[0].type:"esriFieldTypeString"})}V.length>0&&(p._fieldIndex=new r.Z(V));const w=(0,o.pp)(z,null!=y?y.spatialReference:null,V,Q).then(U=>{const $={scale:0};return(F,H)=>{if(null==U)return null;const X=U.repurposeFeature({geometry:null,attributes:F});return $.scale=null!=H?H.scale??void 0:void 0,U.evaluate({$feature:X,$view:$},U.services)}}).catch(U=>(E.Z.getLogger(f).error("Creating dictionary expression failed:",U),null));return p._dictionaryPromise=w,w})()}_cimPartsToCIMSymbol(y,p,v,N,G){var W=this;return(0,m.Z)(function*(){const B=new Array(p.length);for(let K=0;K<p.length;K++)B[K]=W._getSymbolPart(p[K],G);let J=yield Promise.all(B);const z=W.fieldMap;if(z){J=(0,x.d9)(J);for(const K of J)n.E.applyDictionaryTextOverrides(K,y,z,W._fieldIndex,(0,l.e0)(K))}return new i.Z({data:R(J,v,N)})})()}_getSymbolPart(y,p){var v=this;return(0,m.Z)(function*(){const N=v._symbolCache.get(y);if(N)return N;if(v._ongoingRequests.has(y))return v._ongoingRequests.get(y).then(B=>B.data);const G=v._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,y),W=(0,j.Z)(G,{responseType:"json",query:{f:"json"},...p});v._ongoingRequests.set(y,W),W.finally(()=>v._ongoingRequests.delete(y));try{const B=yield W;return v._symbolCache.put(y,B.data),B.data}catch(B){throw B}})()}}function R(M,y,p){if(!M||0===M.length)return null;const v={...M[0]};if(M.length>1){v.symbolLayers=[];for(const N of M)v.symbolLayers.unshift(...N.symbolLayers)}return p&&(v.callout=h),{type:"CIMSymbolReference",symbol:v,primitiveOverrides:y}}var C;let T=C=class extends((0,A.W)(b.Z)){constructor(M){super(M),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new S(this.url,this.config,this.fieldMap)}writeData(M,y){M&&(y.scalingExpressionInfo={expression:M,returnType:"number"})}writeVisualVariables(M,y,p,v){v?.origin||super.writeVisualVariables(M,y,p,v)}clone(){return new C({config:(0,x.d9)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,x.d9)(this.fieldMap),url:(0,x.d9)(this.url),visualVariables:(0,x.d9)(this.visualVariables)})}getSymbolAsync(M,y){var p=this;return(0,m.Z)(function*(){return p._loader.getSymbolAsync(M,y)})()}collectRequiredFields(M,y){var p=this;return(0,m.Z)(function*(){yield p.collectVVRequiredFields(M,y),p.scaleExpression&&(yield(0,D.io)(M,y,p.scaleExpression));for(const v in p.fieldMap){const N=p.fieldMap[v];y.has(N)&&M.add(N)}})()}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((M,y)=>M+y.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};(0,s._)([(0,u.Cb)({type:S})],T.prototype,"_loader",null),(0,s._)([(0,u.Cb)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],T.prototype,"config",void 0),(0,s._)([(0,u.Cb)({type:Object,json:{write:!0}})],T.prototype,"fieldMap",void 0),(0,s._)([(0,u.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],T.prototype,"scaleExpression",void 0),(0,s._)([(0,g.c)("scaleExpression")],T.prototype,"writeData",null),(0,s._)([(0,u.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(M){return{enabled:!!M&&!!this.scaleExpression}}}}})],T.prototype,"scaleExpressionTitle",void 0),(0,s._)([(0,u.Cb)({type:String,json:{write:!0}})],T.prototype,"url",void 0),(0,s._)([(0,g.c)("visualVariables")],T.prototype,"writeVisualVariables",null),T=C=(0,s._)([(0,P.j)("esri.renderers.DictionaryRenderer")],T);const O=T},53722:(_,L,e)=>{e.d(L,{Z:()=>f});var a,m=e(15861),s=e(50484),x=e(66599),u=e(34222),c=e(80543),g=(e(14007),e(4703),e(21070)),D=e(10141),b=e(85295),A=e(38748),I=e(60996),j=e(72923),Z=e(89317);e(65311);let t=a=class extends Z.wq{constructor(){super(...arguments),this.unit=null}clone(){return new a({unit:this.unit})}};(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],t.prototype,"unit",void 0),t=a=(0,s._)([(0,D.j)("esri.renderers.support.DotDensityLegendOptions")],t);const r=t;var n,o=e(89481),i=e(66637);let l=n=class extends((0,I.W)(A.Z)){constructor(h){super(h),this.attributes=null,this.backgroundColor=new x.Z([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new i.Z,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(h){if(null==this.referenceScale)return this.dotValue;const S=h/this.referenceScale*this.dotValue;return S<1?1:S}getSymbol(){return new o.Z({outline:this.outline})}getSymbolAsync(){var h=this;return(0,m.Z)(function*(){return h.getSymbol()})()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((h,S)=>h+S.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new n({attributes:(0,u.d9)(this.attributes),backgroundColor:(0,u.d9)(this.backgroundColor),dotBlendingEnabled:(0,u.d9)(this.dotBlendingEnabled),dotShape:(0,u.d9)(this.dotShape),dotSize:(0,u.d9)(this.dotSize),dotValue:(0,u.d9)(this.dotValue),legendOptions:(0,u.d9)(this.legendOptions),outline:(0,u.d9)(this.outline),referenceScale:(0,u.d9)(this.referenceScale),seed:(0,u.d9)(this.seed),visualVariables:(0,u.d9)(this.visualVariables),authoringInfo:(0,u.d9)(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map(S=>S.field||S.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}collectRequiredFields(h,S){var R=this;return(0,m.Z)(function*(){yield R.collectVVRequiredFields(h,S);for(const C of R.attributes??[])C.valueExpression&&(yield(0,b.io)(h,S,C.valueExpression)),C.field&&h.add(C.field)})()}};(0,s._)([(0,c.Cb)({type:[j.Z],json:{write:!0}})],l.prototype,"attributes",void 0),(0,s._)([(0,c.Cb)({type:x.Z,json:{write:!0}})],l.prototype,"backgroundColor",void 0),(0,s._)([(0,c.Cb)({type:Boolean,json:{write:!0}})],l.prototype,"dotBlendingEnabled",void 0),(0,s._)([(0,c.Cb)({type:String,json:{write:!1}})],l.prototype,"dotShape",void 0),(0,s._)([(0,c.Cb)({type:Number,json:{write:!0}})],l.prototype,"dotSize",void 0),(0,s._)([(0,c.Cb)({type:r,json:{write:!0}})],l.prototype,"legendOptions",void 0),(0,s._)([(0,c.Cb)({type:i.Z,json:{default:null,write:!0}})],l.prototype,"outline",void 0),(0,s._)([(0,c.Cb)({type:Number,json:{write:!0}})],l.prototype,"dotValue",void 0),(0,s._)([(0,c.Cb)({type:Number,json:{write:!0}})],l.prototype,"referenceScale",void 0),(0,s._)([(0,c.Cb)({type:Number,json:{write:!0}})],l.prototype,"seed",void 0),(0,s._)([(0,g.J)({dotDensity:"dot-density"})],l.prototype,"type",void 0),l=n=(0,s._)([(0,D.j)("esri.renderers.DotDensityRenderer")],l);const f=l},82752:(_,L,e)=>{e.d(L,{Z:()=>T});var m=e(15861),s=e(50484),x=e(66599),c=(e(71950),e(93300)),E=e(34222),P=e(4703),g=e(66679),D=e(55768),b=e(80543),I=(e(14007),e(49301)),j=e(21070),Z=e(10141),d=e(85295),a=e(38748),t=e(38829),r=e(61197),o=e(25387),i=e(89317);e(65311);let l=class extends((0,o.J)(i.wq)){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};(0,s._)([(0,b.Cb)({type:String,json:{write:!0}})],l.prototype,"minLabel",void 0),(0,s._)([(0,b.Cb)({type:String,json:{write:!0}})],l.prototype,"maxLabel",void 0),(0,s._)([(0,b.Cb)({type:String,json:{write:!0}})],l.prototype,"title",void 0),l=(0,s._)([(0,Z.j)("esri.renderers.support.HeatmapLegendOptions")],l);var S,f=e(96043),h=e(35451);function R(O){if(null!=O){const{maxDensity:M,minDensity:y,radius:p}=O;if(null!=M||null!=y||null!=p){const{blurRadius:v,maxPixelIntensity:N,minPixelIntensity:G,...W}=O;return W}}return O}let C=S=class extends a.Z{constructor(O){super(O),this.authoringInfo=null,this.colorStops=[new r.Z({ratio:0,color:new x.Z("rgba(255, 140, 0, 0)")}),new r.Z({ratio:.75,color:new x.Z("rgba(255, 140, 0, 1)")}),new r.Z({ratio:.9,color:new x.Z("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(O){return R(O)}get blurRadius(){return(0,f.AJ)(this.radius)}set blurRadius(O){const M=this.maxPixelIntensity,y=this.minPixelIntensity;this._set("radius",(0,f.k0)(O)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",M*this._pixelIntensityToDensity),this._set("minDensity",y*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(O){this._set("maxDensity",O*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(O){this._set("minDensity",O*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(f.ul**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(O,M){this._warnedProps[O]||"user"===(0,I.vw)(this).getDefaultOrigin()&&(this._warnedProps[O]=!0,(0,g.Os)(()=>{(0,c.Mr)(P.Z.getLogger(this),O,{replacement:`${String(M)} (suggested value: ${this._get(M)})`,version:"4.24"})}))}read(O,M){O=R(O),super.read(O,M)}getSymbol(){return new h.Z}getSymbolAsync(){var O=this;return(0,m.Z)(function*(){return O.getSymbol()})()}getSymbols(){return[this.getSymbol()]}collectRequiredFields(O,M){var y=this;return(0,m.Z)(function*(){const p=y.field,v=y.valueExpression;p&&"string"==typeof p&&(0,d.AB)(O,M,p),v&&"string"==typeof v&&(yield(0,d.io)(O,M,v))})()}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new S({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:(0,E.d9)(this.colorStops),field:this.field,legendOptions:(0,E.d9)(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,s._)([(0,b.Cb)({type:t.Z,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],C.prototype,"authoringInfo",void 0),(0,s._)([(0,b.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],C.prototype,"blurRadius",null),(0,s._)([(0,b.Cb)({type:[r.Z],json:{write:!0}})],C.prototype,"colorStops",void 0),(0,s._)([(0,b.Cb)({type:String,json:{write:!0}})],C.prototype,"field",void 0),(0,s._)([(0,b.Cb)({type:l,json:{write:!0}})],C.prototype,"legendOptions",void 0),(0,s._)([(0,b.Cb)({type:Number,json:{write:!0}})],C.prototype,"maxDensity",void 0),(0,s._)([(0,b.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],C.prototype,"maxPixelIntensity",null),(0,s._)([(0,b.Cb)({type:Number,json:{write:!0}})],C.prototype,"minDensity",void 0),(0,s._)([(0,b.Cb)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],C.prototype,"minPixelIntensity",null),(0,s._)([(0,b.Cb)({type:Number,cast:D.t_,json:{write:!0}})],C.prototype,"radius",void 0),(0,s._)([(0,b.Cb)({type:Number,range:{min:0},json:{default:0,write:!0}})],C.prototype,"referenceScale",void 0),(0,s._)([(0,j.J)({heatmap:"heatmap"})],C.prototype,"type",void 0),(0,s._)([(0,b.Cb)({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],C.prototype,"valueExpression",void 0),(0,s._)([(0,b.Cb)({type:String})],C.prototype,"valueExpressionTitle",void 0),(0,s._)([(0,b.Cb)({readOnly:!0})],C.prototype,"_pixelIntensityToDensity",null),C=S=(0,s._)([(0,Z.j)("esri.renderers.HeatmapRenderer")],C);const T=C},28999:(_,L,e)=>{e.d(L,{Z:()=>S});var m=e(15861),s=e(50484),x=e(66599),c=(e(71950),e(57678)),E=e(25387),P=e(55768),g=e(80543),A=(e(14007),e(4703),e(21070)),I=e(10141),j=e(85295),Z=e(38748),d=e(60996),a=e(72923),t=e(89317);e(65311);let o=class extends((0,E.J)(t.wq)){constructor(){super(...arguments),this.color=new x.Z([0,0,0,0]),this.label=null,this.threshold=0}};(0,s._)([(0,g.Cb)({type:x.Z,json:{write:!0}})],o.prototype,"color",void 0),(0,s._)([(0,g.Cb)({type:String,json:{write:!0}})],o.prototype,"label",void 0),(0,s._)([(0,g.Cb)({type:Number,range:{min:0,max:1},json:{write:!0}})],o.prototype,"threshold",void 0),o=(0,s._)([(0,I.j)("esri.renderers.support.OthersCategory")],o);let i=class extends((0,E.J)(t.wq)){constructor(){super(...arguments),this.title=null}};(0,s._)([(0,g.Cb)({type:String,json:{write:!0}})],i.prototype,"title",void 0),i=(0,s._)([(0,I.j)("esri.renderers.support.PieChartLegendOptions")],i);var n=e(35451),l=e(89481),f=e(66637);let h=class extends((0,d.W)((0,E.J)(Z.Z))){constructor(R){super(R),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new x.Z([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new o,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){return new n.Z({size:this.size?this.size/2+(this.outline?.width||0):0})}getSymbolAsync(){var R=this;return(0,m.Z)(function*(){return R.getSymbol()})()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(c.pC)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((R,C)=>R+C.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((R,C)=>R+JSON.stringify(C),"")}collectRequiredFields(R,C){var T=this;return(0,m.Z)(function*(){yield T.collectVVRequiredFields(R,C);for(const O of T.attributes)O.valueExpression&&(yield(0,j.io)(R,C,O.valueExpression)),O.field&&R.add(O.field)})()}};(0,s._)([(0,g.Cb)({type:[a.Z],json:{write:!0}})],h.prototype,"attributes",void 0),(0,s._)([(0,g.Cb)({type:l.Z,json:{default:null,write:!0}})],h.prototype,"backgroundFillSymbol",void 0),(0,s._)([(0,g.Cb)({type:x.Z,json:{write:!0}})],h.prototype,"defaultColor",void 0),(0,s._)([(0,g.Cb)({type:String,json:{write:!0}})],h.prototype,"defaultLabel",void 0),(0,s._)([(0,g.Cb)({type:Number,range:{min:0,max:1},json:{write:!0}})],h.prototype,"holePercentage",void 0),(0,s._)([(0,g.Cb)({type:o,json:{write:!0}})],h.prototype,"othersCategory",void 0),(0,s._)([(0,g.Cb)({type:i,json:{write:!0}})],h.prototype,"legendOptions",void 0),(0,s._)([(0,g.Cb)({type:f.Z,json:{default:null,write:!0}})],h.prototype,"outline",void 0),(0,s._)([(0,g.Cb)({type:Number,cast:P.t_,json:{write:!0}})],h.prototype,"size",void 0),(0,s._)([(0,A.J)({pieChart:"pie-chart"})],h.prototype,"type",void 0),h=(0,s._)([(0,I.j)("esri.renderers.PieChartRenderer")],h);const S=h},50923:(_,L,e)=>{e.d(L,{Z:()=>Z});var I,m=e(15861),s=e(50484),x=e(34222),u=e(80543),P=(e(14007),e(4703),e(21070)),g=e(10141),D=e(38748),b=e(60996),A=e(47702);let j=I=class extends((0,b.W)(D.Z)){constructor(d){super(d),this.description=null,this.label=null,this.symbol=null,this.type="simple"}collectRequiredFields(d,a){var t=this;return(0,m.Z)(function*(){yield Promise.all([t.collectSymbolFields(d,a),t.collectVVRequiredFields(d,a)])})()}collectSymbolFields(d,a){var t=this;return(0,m.Z)(function*(){yield Promise.all(t.getSymbols().map(r=>r.collectRequiredFields(d,a)))})()}getSymbol(d,a){return this.symbol}getSymbolAsync(d,a){var t=this;return(0,m.Z)(function*(){return t.symbol})()}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((d,a)=>d+a.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((d,a)=>d+JSON.stringify(a),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new I({description:this.description,label:this.label,symbol:(0,x.d9)(this.symbol),visualVariables:(0,x.d9)(this.visualVariables),authoringInfo:(0,x.d9)(this.authoringInfo)})}};(0,s._)([(0,u.Cb)({type:String,json:{write:!0}})],j.prototype,"description",void 0),(0,s._)([(0,u.Cb)({type:String,json:{write:!0}})],j.prototype,"label",void 0),(0,s._)([(0,u.Cb)(A.EW)],j.prototype,"symbol",void 0),(0,s._)([(0,P.J)({simple:"simple"})],j.prototype,"type",void 0),j=I=(0,s._)([(0,g.j)("esri.renderers.SimpleRenderer")],j);const Z=j},72923:(_,L,e)=>{e.d(L,{Z:()=>j});var A,m=e(50484),s=e(66599),x=e(89317),u=e(4703),c=e(80543),E=e(73018),D=(e(65311),e(14007),e(10141)),b=e(1535);let I=A=class extends x.wq{constructor(Z){super(Z),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(Z){return null==Z?Z:"function"==typeof Z?(u.Z.getLogger(this).error(".field: field must be a string value"),null):(0,b.Zs)(Z)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new A({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,m._)([(0,c.Cb)({type:s.Z,json:{type:[Number],write:!0}})],I.prototype,"color",void 0),(0,m._)([(0,c.Cb)({type:String,json:{write:!0}})],I.prototype,"field",void 0),(0,m._)([(0,E.p)("field")],I.prototype,"castField",null),(0,m._)([(0,c.Cb)({type:String,json:{write:!0}})],I.prototype,"label",void 0),(0,m._)([(0,c.Cb)({type:String,json:{write:!0}})],I.prototype,"valueExpression",void 0),(0,m._)([(0,c.Cb)({type:String,json:{write:!0}})],I.prototype,"valueExpressionTitle",void 0),I=A=(0,m._)([(0,D.j)("esri.renderers.support.AttributeColorInfo")],I);const j=I},61197:(_,L,e)=>{e.d(L,{Z:()=>A});var D,m=e(50484),s=e(66599),x=e(89317),u=e(80543),c=e(1535),g=(e(65311),e(14007),e(10141));let b=D=class extends x.wq{constructor(I){super(I),this.color=null,this.ratio=null}clone(){return new D({color:this.color&&this.color.clone(),ratio:this.ratio})}};(0,m._)([(0,u.Cb)({type:s.Z,json:{type:[c.z8],default:null,write:!0}})],b.prototype,"color",void 0),(0,m._)([(0,u.Cb)({type:Number,json:{write:!0}})],b.prototype,"ratio",void 0),b=D=(0,m._)([(0,g.j)("esri.renderers.support.HeatmapColorStop")],b);const A=b},91963:(_,L,e)=>{e.d(L,{a:()=>E,i:()=>u});var m=e(23206),s=e(50106),x=e(41007);function u(P,g){return E(P,null,g)}const c=(0,s.d)({types:x.A});function E(P,g,D){return P?P&&(P.styleName||P.styleUrl)&&"uniqueValue"!==P.type?(D?.messages&&D.messages.push(new m.Z("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+P.type+"'",{definition:P,context:D})),null):c(P,g,D):null}},41007:(_,L,e)=>{e.d(L,{A:()=>b,o:()=>A});var m=e(4703),s=e(36699),x=e(12610),u=e(53722),c=e(82752),E=e(28999),P=e(38748),g=e(50923),D=e(42212);const b={key:"type",base:P.Z,typeMap:{heatmap:c.Z,simple:g.Z,"unique-value":D.Z,"class-breaks":s.Z,"dot-density":u.Z,dictionary:x.Z,"pie-chart":E.Z},errorContext:"renderer"},A={key:"type",base:P.Z,typeMap:{simple:g.Z,"unique-value":D.Z,"class-breaks":s.Z,heatmap:c.Z},errorContext:"renderer",validate:function I(a){switch(a.type){case"simple":return function j(a){if(a.symbol)return a;m.Z.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}(a);case"unique-value":return function Z(a){const t=a.uniqueValueInfos,r=t?.filter(({symbol:o,label:i},n)=>(o||m.Z.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${i}) without a symbol from web scene.`),!!o));return r?.length!==t?.length&&(a.uniqueValueInfos=r),a}(a);case"class-breaks":return function d(a){const t=a.classBreakInfos,r=t?.filter(({symbol:o,label:i},n)=>(o||m.Z.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${i}) without a symbol from web scene.`),!!o));return r?.length!==t?.length&&(a.classBreakInfos=r),a}(a);case"heatmap":return a}}}},69411:(_,L,e)=>{e.d(L,{E:()=>d});var m=e(15861),s=e(66599),x=e(70794),u=e(34222),c=e(4978),E=e(25896),P=e(57964),g=e(4703),D=e(66398);function b(a,t,r,o,i){if(null==a)return null;const n=a.referencesGeometry()&&i?function I(a,t,r){const{transform:o,hasZ:i,hasM:n}=r;A.has(t)||A.set(t,function j(a){const t={};switch(a){case"esriGeometryPoint":return(r,o,i,n)=>(0,D.U1)(o,t,r,i,n);case"esriGeometryPolygon":return(r,o,i,n)=>(0,D.Ie)(o,t,r,i,n);case"esriGeometryPolyline":return(r,o,i,n)=>(0,D.G6)(o,t,r,i,n);case"esriGeometryMultipoint":return(r,o,i,n)=>(0,D.J9)(o,t,r,i,n);default:return g.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new P.Z("mapview-arcade",`Unable to handle geometryType: ${a}`)),r=>r}}(t));const l=A.get(t)(a.geometry,o,i,n);return{...a,geometry:l}}(t,o,i):t,l=a.repurposeFeature(n);try{return a.evaluate({...r,$feature:l},a.services)}catch(f){return g.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",f),null}}const A=new Map,Z=a=>{if(!a)return[0,0,0,0];const{r:t,g:r,b:o,a:i}=a;return[t,r,o,255*i]};class d{static findApplicableOverrides(t,r,o){if(t&&r){if(t.primitiveName){let i=!1;for(const n of o)if(n.primitiveName===t.primitiveName){i=!0;break}if(!i)for(const n of r)n.primitiveName===t.primitiveName&&o.push(n)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const i of t.effects)d.findApplicableOverrides(i,r,o);if(t.symbolLayers)for(const i of t.symbolLayers)d.findApplicableOverrides(i,r,o);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects)for(const i of t.effects)d.findApplicableOverrides(i,r,o);if(t.markerPlacement&&d.findApplicableOverrides(t.markerPlacement,r,o),"CIMVectorMarker"===t.type){if(t.markerGraphics)for(const i of t.markerGraphics)d.findApplicableOverrides(i,r,o),d.findApplicableOverrides(i.symbol,r,o)}else"CIMCharacterMarker"===t.type?d.findApplicableOverrides(t.symbol,r,o):"CIMHatchFill"===t.type?d.findApplicableOverrides(t.lineSymbol,r,o):"CIMPictureMarker"===t.type&&d.findApplicableOverrides(t.animatedSymbolProperties,r,o)}}}static findEffectOverrides(t,r){if(!t)return null;if("CIMGeometricEffectDashes"===t.type&&(0,E.T2)(t),!r||!t.primitiveName)return{type:"cim-effect-param",effect:t,overrides:[]};const o=(0,E.Ml)(t),i=t.primitiveName,n=[];for(const l of r)l.primitiveName===i&&n.push((0,E.Ml)(l));return{type:"cim-effect-param",effect:o,overrides:(0,E.Ul)(n)}}static resolveSymbolOverrides(t,r,o,i,n,l,f){return(0,m.Z)(function*(){if(!t?.symbol)return null;let{symbol:h,primitiveOverrides:S}=t;const R=!!S;if(!R&&!i)return h;h=(0,u.d9)(h),S=(0,u.d9)(S);let C=!0;if(r||(r={attributes:{}},C=!1),R){if(C||(S=S.filter(T=>!T.valueExpressionInfo?.expression.includes("$feature"))),f||(S=S.filter(T=>!T.valueExpressionInfo?.expression.includes("$view"))),S.length>0){const T={spatialReference:o,fields:(0,E.Qf)(r.attributes),geometryType:n};yield d.createRenderExpressions(S,T),d.evaluateOverrides(S,r,n??"esriGeometryPoint",l,f)}d.applyOverrides(h,S)}return i&&d.applyDictionaryTextOverrides(h,r,i,null),h})()}static createRenderExpressions(t,r){return(0,m.Z)(function*(){const o=[];for(const i of t){const n=i.valueExpressionInfo;if(!n||d._expressionToRenderExpression.has(n.expression))continue;const l=(0,c.Yi)(n.expression,r.spatialReference,r.fields);o.push(l),l.then(f=>d._expressionToRenderExpression.set(n.expression,f))}o.length>0&&(yield Promise.all(o))})()}static evaluateOverrides(t,r,o,i,n){const l={$view:{scale:n?.scale}};for(const f of t){f.value&&"object"==typeof f.value&&(0,x.jQ)(f.value)&&("Color"===f.propertyName||"StrokeColor"===f.propertyName)&&(f.value=Z(f.value));const h=f.valueExpressionInfo;if(!h)continue;const S=d._expressionToRenderExpression.get(h.expression);S&&(f.value=b(S,r,l,o,i))}}static applyDictionaryTextOverrides(t,r,o,i,n="Normal"){if(t?.type)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const l=t.symbolLayers;if(!l)return;for(const f of l)f&&"CIMVectorMarker"===f.type&&d.applyDictionaryTextOverrides(f,r,o,i,"CIMTextSymbol"===t.type?t.textCase:n)}break;case"CIMVectorMarker":{const l=t.markerGraphics;if(!l)return;for(const f of l)f&&d.applyDictionaryTextOverrides(f,r,o,i)}break;case"CIMMarkerGraphic":{const l=t.textString;if(l&&l.includes("[")){const f=(0,E.H1)(l,o);t.textString=(0,E.E_)(r,f,i,n)}}}}static applyOverrides(t,r,o,i){if(t.primitiveName)for(const n of r)if(n.primitiveName===t.primitiveName){const l=(0,E.Le)(n.propertyName);if(i&&i.push({cim:t,nocapPropertyName:l,value:t[l]}),o){let f=!1;for(const h of o)h.primitiveName===t.primitiveName&&(f=!0);f||o.push(n)}null!=n.value&&(t[l]=n.value)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const n of t.effects)d.applyOverrides(n,r,o,i);if(t.symbolLayers)for(const n of t.symbolLayers)d.applyOverrides(n,r,o,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects)for(const n of t.effects)d.applyOverrides(n,r,o,i);if("CIMVectorMarker"===t.type&&t.markerGraphics)for(const n of t.markerGraphics)d.applyOverrides(n,r,o,i),d.applyOverrides(n.symbol,r,o,i)}}static restoreOverrides(t){for(const r of t)r.cim[r.nocapPropertyName]=r.value}static buildOverrideKey(t){let r="";for(const o of t)void 0!==o.value&&(r+=`${o.primitiveName}${o.propertyName}${JSON.stringify(o.value)}`);return r}static toValue(t,r){if("DashTemplate"===t)return r.split(" ").map(o=>Number(o));if("Color"===t){const o=new s.Z(r).toRgba();return o[3]*=255,o}return r}}d._expressionToRenderExpression=new Map}}]);