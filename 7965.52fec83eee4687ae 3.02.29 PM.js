"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[7965],{70794:(W,U,i)=>{i.d(U,{EX:()=>N,Y3:()=>R,_Y:()=>m,jQ:()=>j,sJ:()=>b,xr:()=>p});var u=i(66599);function j(e){return"r"in e&&"g"in e&&"b"in e}function P(e){return"h"in e&&"s"in e&&"v"in e}function y(e){return"l"in e&&"a"in e&&"b"in e}function D(e){return"l"in e&&"c"in e&&"h"in e}i(5710),i(23515);const g=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],A=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function L(e,_){const f=[];let M,C;if(e[0].length!==_.length)throw new Error("dimensions do not match");const S=e.length,T=e[0].length;let G=0;for(M=0;M<S;M++){for(G=0,C=0;C<T;C++)G+=e[M][C]*_[C];f.push(G)}return f}function B(e){const _=[e.r/255,e.g/255,e.b/255].map(M=>M<=.04045?M/12.92:((M+.055)/1.055)**2.4),f=L(g,_);return{x:100*f[0],y:100*f[1],z:100*f[2]}}function x(e){const _=L(A,[e.x/100,e.y/100,e.z/100]).map(f=>Math.min(1,Math.max(f<=.0031308?12.92*f:1.055*f**.4166666666666667-.055,0)));return{r:Math.round(255*_[0]),g:Math.round(255*_[1]),b:Math.round(255*_[2])}}function O(e){const _=[e.x/95.047,e.y/100,e.z/108.883].map(f=>f>.008856451679035631?f**.3333333333333333:7.787037037037035*f+.13793103448275862);return{l:116*_[1]-16,a:500*(_[0]-_[1]),b:200*(_[1]-_[2])}}function v(e){const _=e.l,f=[(_+16)/116+e.a/500,(_+16)/116,(_+16)/116-e.b/200].map(M=>M>6/29?M**3:3*(6/29)**2*(M-4/29));return{x:95.047*f[0],y:100*f[1],z:108.883*f[2]}}function p(e){return j(e)?e:D(e)?function o(e){return x(v(function s(e){const f=e.c,M=e.h;return{l:e.l,a:f*Math.cos(M),b:f*Math.sin(M)}}(e)))}(e):y(e)?function l(e){return x(v(e))}(e):function I(e){return"x"in e&&"y"in e&&"z"in e}(e)?x(e):P(e)?function c(e){const _=(e.h+360)%360/60,M=e.v/100*255,C=M*(e.s/100),S=C*(1-Math.abs(_%2-1));let T;switch(Math.floor(_)){case 0:T={r:C,g:S,b:0};break;case 1:T={r:S,g:C,b:0};break;case 2:T={r:0,g:C,b:S};break;case 3:T={r:0,g:S,b:C};break;case 4:T={r:S,g:0,b:C};break;case 5:case 6:T={r:C,g:0,b:S};break;default:T={r:0,g:0,b:0}}return T.r=Math.round(T.r+M-C),T.g=Math.round(T.g+M-C),T.b=Math.round(T.b+M-C),T}(e):e}function m(e){return P(e)?e:function h(e){const _=e.r,f=e.g,M=e.b,C=Math.max(_,f,M),S=C-Math.min(_,f,M);let T=C,G=0===S?0:C===_?(f-M)/S%6:C===f?(M-_)/S+2:(_-f)/S+4,F=0===S?0:S/T;return G<0&&(G+=6),G*=60,F*=100,T*=100/255,{h:G,s:F,v:T}}(p(e))}function R(e){return y(e)?e:function a(e){return O(B(e))}(p(e))}function b(e){return D(e)?e:function d(e){return function E(e){const _=e.l,f=e.a,M=e.b,C=Math.sqrt(f*f+M*M);let S=Math.atan2(M,f);return S=S>0?S:S+2*Math.PI,{l:_,c:C,h:S}}(O(B(e)))}(p(e))}function N(e,_){const{r:f,g:M,b:C}=_?.ignoreAlpha?e:function H(e){let{r:_,g:f,b:M,a:C}=e;return C<1&&(_=Math.round(C*_+255*(1-C)),f=Math.round(C*f+255*(1-C)),M=Math.round(C*M+255*(1-C))),new u.Z({r:_,g:f,b:M})}(e);return.2126*f+.7152*M+.0722*C}var Z,e;(e=Z||(Z={}))[e.Low=160]="Low",e[e.High=225]="High"},69411:(W,U,i)=>{i.d(U,{E:()=>v});var u=i(15861),K=i(66599),w=i(70794),j=i(34222),P=i(4978),y=i(25896),D=i(57964),I=i(4703),g=i(66398);function A(E,s,a,l,d){if(null==E)return null;const o=E.referencesGeometry()&&d?function B(E,s,a){const{transform:l,hasZ:d,hasM:o}=a;L.has(s)||L.set(s,function x(E){const s={};switch(E){case"esriGeometryPoint":return(a,l,d,o)=>(0,g.U1)(l,s,a,d,o);case"esriGeometryPolygon":return(a,l,d,o)=>(0,g.Ie)(l,s,a,d,o);case"esriGeometryPolyline":return(a,l,d,o)=>(0,g.G6)(l,s,a,d,o);case"esriGeometryMultipoint":return(a,l,d,o)=>(0,g.J9)(l,s,a,d,o);default:return I.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new D.Z("mapview-arcade",`Unable to handle geometryType: ${E}`)),a=>a}}(s));const h=L.get(s)(E.geometry,l,d,o);return{...E,geometry:h}}(s,l,d):s,h=E.repurposeFeature(o);try{return E.evaluate({...a,$feature:h},E.services)}catch(c){return I.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}const L=new Map,O=E=>{if(!E)return[0,0,0,0];const{r:s,g:a,b:l,a:d}=E;return[s,a,l,255*d]};class v{static findApplicableOverrides(s,a,l){if(s&&a){if(s.primitiveName){let d=!1;for(const o of l)if(o.primitiveName===s.primitiveName){d=!0;break}if(!d)for(const o of a)o.primitiveName===s.primitiveName&&l.push(o)}switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(s.effects)for(const d of s.effects)v.findApplicableOverrides(d,a,l);if(s.symbolLayers)for(const d of s.symbolLayers)v.findApplicableOverrides(d,a,l);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(s.effects)for(const d of s.effects)v.findApplicableOverrides(d,a,l);if(s.markerPlacement&&v.findApplicableOverrides(s.markerPlacement,a,l),"CIMVectorMarker"===s.type){if(s.markerGraphics)for(const d of s.markerGraphics)v.findApplicableOverrides(d,a,l),v.findApplicableOverrides(d.symbol,a,l)}else"CIMCharacterMarker"===s.type?v.findApplicableOverrides(s.symbol,a,l):"CIMHatchFill"===s.type?v.findApplicableOverrides(s.lineSymbol,a,l):"CIMPictureMarker"===s.type&&v.findApplicableOverrides(s.animatedSymbolProperties,a,l)}}}static findEffectOverrides(s,a){if(!s)return null;if("CIMGeometricEffectDashes"===s.type&&(0,y.T2)(s),!a||!s.primitiveName)return{type:"cim-effect-param",effect:s,overrides:[]};const l=(0,y.Ml)(s),d=s.primitiveName,o=[];for(const h of a)h.primitiveName===d&&o.push((0,y.Ml)(h));return{type:"cim-effect-param",effect:l,overrides:(0,y.Ul)(o)}}static resolveSymbolOverrides(s,a,l,d,o,h,c){return(0,u.Z)(function*(){if(!s?.symbol)return null;let{symbol:p,primitiveOverrides:m}=s;const R=!!m;if(!R&&!d)return p;p=(0,j.d9)(p),m=(0,j.d9)(m);let b=!0;if(a||(a={attributes:{}},b=!1),R){if(b||(m=m.filter(V=>!V.valueExpressionInfo?.expression.includes("$feature"))),c||(m=m.filter(V=>!V.valueExpressionInfo?.expression.includes("$view"))),m.length>0){const V={spatialReference:l,fields:(0,y.Qf)(a.attributes),geometryType:o};yield v.createRenderExpressions(m,V),v.evaluateOverrides(m,a,o??"esriGeometryPoint",h,c)}v.applyOverrides(p,m)}return d&&v.applyDictionaryTextOverrides(p,a,d,null),p})()}static createRenderExpressions(s,a){return(0,u.Z)(function*(){const l=[];for(const d of s){const o=d.valueExpressionInfo;if(!o||v._expressionToRenderExpression.has(o.expression))continue;const h=(0,P.Yi)(o.expression,a.spatialReference,a.fields);l.push(h),h.then(c=>v._expressionToRenderExpression.set(o.expression,c))}l.length>0&&(yield Promise.all(l))})()}static evaluateOverrides(s,a,l,d,o){const h={$view:{scale:o?.scale}};for(const c of s){c.value&&"object"==typeof c.value&&(0,w.jQ)(c.value)&&("Color"===c.propertyName||"StrokeColor"===c.propertyName)&&(c.value=O(c.value));const p=c.valueExpressionInfo;if(!p)continue;const m=v._expressionToRenderExpression.get(p.expression);m&&(c.value=A(m,a,h,l,d))}}static applyDictionaryTextOverrides(s,a,l,d,o="Normal"){if(s?.type)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const h=s.symbolLayers;if(!h)return;for(const c of h)c&&"CIMVectorMarker"===c.type&&v.applyDictionaryTextOverrides(c,a,l,d,"CIMTextSymbol"===s.type?s.textCase:o)}break;case"CIMVectorMarker":{const h=s.markerGraphics;if(!h)return;for(const c of h)c&&v.applyDictionaryTextOverrides(c,a,l,d)}break;case"CIMMarkerGraphic":{const h=s.textString;if(h&&h.includes("[")){const c=(0,y.H1)(h,l);s.textString=(0,y.E_)(a,c,d,o)}}}}static applyOverrides(s,a,l,d){if(s.primitiveName)for(const o of a)if(o.primitiveName===s.primitiveName){const h=(0,y.Le)(o.propertyName);if(d&&d.push({cim:s,nocapPropertyName:h,value:s[h]}),l){let c=!1;for(const p of l)p.primitiveName===s.primitiveName&&(c=!0);c||l.push(o)}null!=o.value&&(s[h]=o.value)}switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(s.effects)for(const o of s.effects)v.applyOverrides(o,a,l,d);if(s.symbolLayers)for(const o of s.symbolLayers)v.applyOverrides(o,a,l,d);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(s.effects)for(const o of s.effects)v.applyOverrides(o,a,l,d);if("CIMVectorMarker"===s.type&&s.markerGraphics)for(const o of s.markerGraphics)v.applyOverrides(o,a,l,d),v.applyOverrides(o.symbol,a,l,d)}}static restoreOverrides(s){for(const a of s)a.cim[a.nocapPropertyName]=a.value}static buildOverrideKey(s){let a="";for(const l of s)void 0!==l.value&&(a+=`${l.primitiveName}${l.propertyName}${JSON.stringify(l.value)}`);return a}static toValue(s,a){if("DashTemplate"===s)return a.split(" ").map(l=>Number(l));if("Color"===s){const l=new K.Z(a).toRgba();return l[3]*=255,l}return a}}v._expressionToRenderExpression=new Map},83124:(W,U,i)=>{i.d(U,{y:()=>h});var O,u=i(50484),K=i(83944),w=i(18626),j=i(57964),P=i(77675),y=i(80543),A=(i(14007),i(4703),i(65311),i(10141)),L=i(85338),B=i(30640),x=i(38954);let v=O=class extends x.Z{constructor(c){super(c),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new O({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,u._)([(0,y.Cb)({type:[Number,String],json:{write:!0}})],v.prototype,"left",void 0),(0,u._)([(0,y.Cb)({type:[Number,String],json:{write:!0}})],v.prototype,"right",void 0),(0,u._)([(0,y.Cb)({type:[Number,String],json:{write:!0}})],v.prototype,"top",void 0),(0,u._)([(0,y.Cb)({type:[Number,String],json:{write:!0}})],v.prototype,"bottom",void 0),v=O=(0,u._)([(0,A.j)("esri.views.layers.support.ClipRect")],v);const E=v;var s=i(87265);let a=class extends x.Z{constructor(c){super(c),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,u._)([(0,y.Cb)({type:[[[Number]]],json:{write:!0}})],a.prototype,"path",void 0),a=(0,u._)([(0,A.j)("esri.views.layers.support.Path")],a);const l=a;var d=i(64579);const o=K.Z.ofType({key:"type",base:null,typeMap:{rect:E,path:l,geometry:s.Z}}),h=c=>{let p=class extends c{constructor(){super(...arguments),this.attached=!1,this.clips=new o,this.highlightOptions=null,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this._visibleAtCurrentScale=!0}initialize(){const m=this.view?.spatialReferenceLocked??!0;this.view?.spatialReference&&m&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new j.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new L.W),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,P.YP)(()=>this.suspended,b=>{this.container&&(this.container.visible=!b)},P.tX),(0,P.YP)(()=>this.updateSuspended,b=>{this.view&&!b&&this.updateRequested&&this.view.requestUpdate()},P.tX),(0,P.YP)(()=>this.layer?.opacity??1,b=>{this.container&&(this.container.opacity=b)},P.tX),(0,P.YP)(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",b=>{this.container&&(this.container.blendMode=b)},P.tX),(0,P.YP)(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,b=>{this.container&&(this.container.effect=b)},P.tX),(0,P.YP)(()=>this.highlightOptions,b=>this.container.highlightOptions=b,P.tX),(0,P.on)(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)},P.tX),(0,P.YP)(()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null}),({scale:b,scaleRange:V})=>{const H=(0,d.GB)(V,b);H!==this._visibleAtCurrentScale&&(this._visibleAtCurrentScale=H)},P.tX)],"constructor"),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then(b=>{b===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){const m=this.view?.spatialReference;return null==m||this.supportsSpatialReference(m)}get updating(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this._updatingHandles?.updating)}get visibleAtCurrentScale(){return this._visibleAtCurrentScale}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.updateSuspended||this.view.requestUpdate())}processUpdate(m){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",m),this.updateRequested&&!this.updateSuspended&&(this.updateRequested=!1,this.update(m))):this.updateRequested=!1}hitTest(m,R){return Promise.resolve(null)}supportsSpatialReference(m){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const m=super.getSuspendInfo(),R=!this.spatialReferenceSupported;return R&&(m.spatialReferenceNotSupported=R),m}addAttachHandles(m){this.addHandles(m,"attach")}};return(0,u._)([(0,y.Cb)()],p.prototype,"attached",void 0),(0,u._)([(0,y.Cb)({type:o,set(m){const R=(0,w.Z)(m,this._get("clips"),o);this._set("clips",R)}})],p.prototype,"clips",void 0),(0,u._)([(0,y.Cb)()],p.prototype,"container",void 0),(0,u._)([(0,y.Cb)({type:B.Z})],p.prototype,"highlightOptions",void 0),(0,u._)([(0,y.Cb)()],p.prototype,"moving",void 0),(0,u._)([(0,y.Cb)({readOnly:!0})],p.prototype,"spatialReferenceSupported",null),(0,u._)([(0,y.Cb)({readOnly:!0})],p.prototype,"updateParameters",void 0),(0,u._)([(0,y.Cb)()],p.prototype,"updateRequested",void 0),(0,u._)([(0,y.Cb)()],p.prototype,"updating",null),(0,u._)([(0,y.Cb)()],p.prototype,"view",void 0),(0,u._)([(0,y.Cb)()],p.prototype,"_visibleAtCurrentScale",void 0),(0,u._)([(0,y.Cb)({readOnly:!0})],p.prototype,"visibleAtCurrentScale",null),p=(0,u._)([(0,A.j)("esri.views.2d.layers.LayerView2D")],p),p}},12203:(W,U,i)=>{i.r(U),i.d(U,{default:()=>d});var u=i(15861),K=i(50484),w=i(35458),j=i(57678),P=i(83944),y=i(1258),D=i(77675),L=(i(4703),i(14007),i(57964),i(10141)),B=i(5633),x=i(83124),O=i(50800),v=i(37348),E=i(50145);const s="sublayers",a="layerView";let l=class extends((0,x.y)(E.Z)){constructor(){super(...arguments),this._highlightIds=new Map}*graphicsViews(){null==this._graphicsViewsFeatureCollectionMap?null==this._graphicsViews?yield*[]:yield*this._graphicsViews:yield*this._graphicsViewsFeatureCollectionMap.keys()}hitTest(o,h){var c=this;return(0,u.Z)(function*(){return Array.from(c.graphicsViews(),p=>{const m=p.hitTest(o);if(null!=c._graphicsViewsFeatureCollectionMap){const R=c._graphicsViewsFeatureCollectionMap.get(p);for(const b of m)!b.popupTemplate&&R.popupTemplate&&(b.popupTemplate=R.popupTemplate),b.sourceLayer=b.layer=c.layer}return m}).flat().map(p=>({type:"graphic",graphic:p,layer:c.layer,mapPoint:o}))})()}highlight(o){let h;"number"==typeof o?h=[o]:o instanceof w.Z?h=[o.uid]:Array.isArray(o)&&o.length>0?h="number"==typeof o[0]?o:o.map(p=>p&&p.uid):P.Z.isCollection(o)&&(h=o.map(p=>p&&p.uid).toArray());const c=h?.filter(j.pC);return c?.length?(this._addHighlight(c),(0,y.kB)(()=>this._removeHighlight(c))):(0,y.kB)()}update(o){for(const h of this.graphicsViews())h.processUpdate(o)}attach(){const o=this.view,h=()=>this.requestUpdate(),c=this.layer.featureCollections;if(null!=c&&c.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const p of c){const m=new O.Z(this.view.featuresTilingScheme),R=new v.Z({view:o,graphics:p.source,renderer:p.renderer,requestUpdateCallback:h,container:m});this._graphicsViewsFeatureCollectionMap.set(R,p),this.container.addChild(R.container),this.addHandles([(0,D.YP)(()=>p.visible,b=>R.container.visible=b,D.nn),(0,D.YP)(()=>R.updating,()=>this.notifyChange("updating"),D.nn)],a)}this._updateHighlight()}else null!=this.layer.sublayers&&this.addHandles((0,D.on)(()=>this.layer.sublayers,"change",()=>this._createGraphicsViews(),{onListenerAdd:()=>this._createGraphicsViews(),onListenerRemove:()=>this._destroyGraphicsViews()}),s)}detach(){this._destroyGraphicsViews(),this.removeHandles(s)}moveEnd(){}viewChange(){for(const o of this.graphicsViews())o.viewChange()}isUpdating(){for(const o of this.graphicsViews())if(o.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.removeHandles(a);for(const o of this.graphicsViews())o.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),null==this.layer.sublayers)return;const o=[],h=this.view,c=()=>this.requestUpdate();for(const p of this.layer.sublayers){const m=new O.Z(this.view.featuresTilingScheme);m.fadeTransitionEnabled=!0;const R=new v.Z({view:h,graphics:p.graphics,requestUpdateCallback:c,container:m});this.addHandles([p.on("graphic-update",R.graphicUpdateHandler),(0,D.YP)(()=>p.visible,b=>R.container.visible=b,D.nn),(0,D.YP)(()=>R.updating,()=>this.notifyChange("updating"),D.nn)],a),this.container.addChild(R.container),o.push(R)}this._graphicsViews=o,this._updateHighlight()}_addHighlight(o){for(const h of o)if(this._highlightIds.has(h)){const c=this._highlightIds.get(h);this._highlightIds.set(h,c+1)}else this._highlightIds.set(h,1);this._updateHighlight()}_removeHighlight(o){for(const h of o)if(this._highlightIds.has(h)){const c=this._highlightIds.get(h)-1;0===c?this._highlightIds.delete(h):this._highlightIds.set(h,c)}this._updateHighlight()}_updateHighlight(){const o=Array.from(this._highlightIds.keys()),h=(0,B.ck)("highlight");for(const c of this.graphicsViews())c.setHighlight(o.map(p=>({objectId:p,highlightFlags:h})))}};l=(0,K._)([(0,L.j)("esri.views.2d.layers.MapNotesLayerView2D")],l);const d=l},50800:(W,U,i)=>{i.d(U,{Z:()=>j});var u=i(43101),K=i(89791),w=i(31043);class j extends K.K{renderChildren(y){for(const D of this.children)D.setTransform(y.state);if(super.renderChildren(y),this.attributeView.update(),this.children.some(D=>D.hasData)){switch(y.drawPhase){case u.jx.MAP:this._renderChildren(y,u.Xq.All);break;case u.jx.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(y)}this._boundsRenderer&&this._boundsRenderer.doRender(y)}}_renderHighlight(y){(0,w.P9)(y,!1,D=>{this._renderChildren(D,u.Xq.Highlight)})}}},50145:(W,U,i)=>{i.d(U,{Z:()=>v});var u=i(50484),K=i(73514),w=i(88278),j=i(84373),P=i(4703),y=i(51172),D=i(47868),I=i(80543),L=(i(14007),i(65311),i(10141)),B=i(90110),x=i(64579);let O=class extends((0,j.IG)((0,D.v)(w.Z.EventedMixin(K.Z)))){constructor(E){super(E),this._updatingHandles=new B.R,this.layer=null,this.parent=null}initialize(){this.when().catch(E=>{if("layerview:create-error"!==E.name){const s=this.layer&&this.layer.id||"no id",a=this.layer?.title||"no title";P.Z.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${a}', id: '${s}')`,E)}})}destroy(){this._updatingHandles=(0,y.SC)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(E){this._overrideIfSome("visible",E)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const E=this.view.timeExtent,s=this.layer?.visibilityTimeExtent;return!E||!s||!E.intersection(s).isEmpty}canResume(){const E=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready&&(0,x.Cy)(E)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const E=this.parent?.suspended?this.parent.suspendInfo:{};return this.view?.ready||(E.viewNotReady=!0),this.layer&&this.layer.loaded||(E.layerNotLoaded=!0),(0,x.Cy)(this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null)&&this.visibleAtCurrentScale||(E.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(E.outsideVisibilityTimeExtent=!0),this.visible||(E.layerInvisible=!0),E}isUpdating(){return!1}};(0,u._)([(0,I.Cb)()],O.prototype,"view",void 0),(0,u._)([(0,I.Cb)()],O.prototype,"fullOpacity",null),(0,u._)([(0,I.Cb)()],O.prototype,"layer",void 0),(0,u._)([(0,I.Cb)()],O.prototype,"parent",void 0),(0,u._)([(0,I.Cb)({readOnly:!0})],O.prototype,"suspended",null),(0,u._)([(0,I.Cb)({readOnly:!0})],O.prototype,"suspendInfo",null),(0,u._)([(0,I.Cb)({readOnly:!0})],O.prototype,"legendEnabled",null),(0,u._)([(0,I.Cb)({type:Boolean,readOnly:!0})],O.prototype,"updating",null),(0,u._)([(0,I.Cb)({readOnly:!0})],O.prototype,"updatingProgress",null),(0,u._)([(0,I.Cb)()],O.prototype,"updateSuspended",null),(0,u._)([(0,I.Cb)()],O.prototype,"visible",null),(0,u._)([(0,I.Cb)({readOnly:!0})],O.prototype,"visibleAtCurrentScale",null),(0,u._)([(0,I.Cb)({readOnly:!0})],O.prototype,"visibleAtCurrentTimeExtent",null),O=(0,u._)([(0,L.j)("esri.views.layers.LayerView")],O);const v=O},38954:(W,U,i)=>{i.d(U,{Z:()=>g});var u=i(50484),K=i(89317),w=i(80543),D=(i(14007),i(4703),i(65311),i(10141));let I=class extends K.wq{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,u._)([(0,w.Cb)({readOnly:!0})],I.prototype,"version",null),I=(0,u._)([(0,D.j)("esri.views.layers.support.ClipArea")],I);const g=I},87265:(W,U,i)=>{i.d(U,{Z:()=>E});var x,u=i(50484),w=(i(2189),i(80543)),D=(i(14007),i(4703),i(65311),i(10141)),I=i(32184),g=i(40637),A=i(38954),L=i(26894),B=i(5391);const O={base:I.Z,key:"type",typeMap:{extent:L.Z,polygon:B.Z}};let v=x=class extends A.Z{constructor(s){super(s),this.type="geometry",this.geometry=null}clone(){return new x({geometry:this.geometry?.clone()??null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,u._)([(0,w.Cb)({types:O,json:{read:g.im,write:!0}})],v.prototype,"geometry",void 0),v=x=(0,u._)([(0,D.j)("esri.views.layers.support.Geometry")],v);const E=v},64579:(W,U,i)=>{function u(g){return g&&"function"==typeof g.highlight}function j(g,A){if(A&&g){const{minScale:L,maxScale:B}=g;if(function P(g,A){return null!=g&&g>0||null!=A&&A>0}(L,B))return function w(g,A,L){return null==g||g>=L&&(0===A||g<=A)}(A,L,B)}return!0}function y(g){return!g?.minScale||!g.maxScale||g.minScale>=g.maxScale}i.d(U,{Cy:()=>y,GB:()=>j,tl:()=>u})}}]);