"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[3800],{40485:(ge,re,E)=>{E.d(re,{Z:()=>J});var X,B,te=E(14007),ne=E(51479);(B=X||(X={}))[B.varint=0]="varint",B[B.fixed64=1]="fixed64",B[B.delimited=2]="delimited",B[B.fixed32=5]="fixed32",B[B.unknown=99]="unknown";const Y=4294967296,z=new TextDecoder("utf-8"),L=(0,te.Z)("safari")||(0,te.Z)("ios")?6:(0,te.Z)("ff")?12:32;class J{constructor(k,I,F=0,T=(k?k.byteLength:0)){this._tag=0,this._dataType=X.unknown,this._init(k,I,F,T)}_init(k,I,F,T){this._data=k,this._dataView=I,this._pos=F,this._end=T}asUnsafe(){return this}clone(){return new J(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(k){this._pos=k}nextTag(k){for(;;){if(this._pos===this._end)return!1;const I=this._decodeVarint();if(this._tag=I>>3,this._dataType=7&I,!k||k===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const k=this._decodeVarint();return this._tag=k>>3,this._dataType=7&k,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let k=4294967295;if(k=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(k=(k|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(k=(k|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(k=(k|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(k=(k|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return k;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const k=this.getUInt32();return k>>>1^-(1&k)}getSInt64(){return this._decodeSVarint()}getBool(){const k=0!==this._data[this._pos];return this._skip(1),k}getEnum(){return this._decodeVarint()}getFixed64(){const k=this._dataView,I=this._pos,F=k.getUint32(I,!0)+k.getUint32(I+4,!0)*Y;return this._skip(8),F}getSFixed64(){const k=this._dataView,I=this._pos,F=k.getUint32(I,!0)+k.getInt32(I+4,!0)*Y;return this._skip(8),F}getDouble(){const k=this._dataView.getFloat64(this._pos,!0);return this._skip(8),k}getFixed32(){const k=this._dataView.getUint32(this._pos,!0);return this._skip(4),k}getSFixed32(){const k=this._dataView.getInt32(this._pos,!0);return this._skip(4),k}getFloat(){const k=this._dataView.getFloat32(this._pos,!0);return this._skip(4),k}getString(){const k=this._getLength(),I=this._pos,F=this._toString(this._data,I,I+k);return this._skip(k),F}getBytes(){const k=this._getLength(),I=this._pos,F=this._toBytes(this._data,I,I+k);return this._skip(k),F}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(k,I,F,T){const G=this.getMessage(),se=k(G,I,F,T);return G.release(),se}processMessage(k){const I=this.getMessage(),F=k(I);return I.release(),F}getMessage(){const k=this._getLength(),I=J.pool.acquire();return I._init(this._data,this._dataView,this._pos,this._pos+k),this._skip(k),I}release(){J.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case X.varint:this._decodeVarint();break;case X.fixed64:this._skip(8);break;case X.delimited:this._skip(this._getLength());break;case X.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(k){this._skip(k)}_skip(k){if(this._pos+k>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=k}_decodeVarint(){const k=this._data;let I=this._pos,F=0,T=0;if(this._end-I>=10)do{if(T=k[I++],F|=127&T,!(128&T&&(T=k[I++],F|=(127&T)<<7,128&T)&&(T=k[I++],F|=(127&T)<<14,128&T)&&(T=k[I++],F|=(127&T)<<21,128&T)&&(T=k[I++],F+=268435456*(127&T),128&T)&&(T=k[I++],F+=34359738368*(127&T),128&T)&&(T=k[I++],F+=4398046511104*(127&T),128&T)&&(T=k[I++],F+=562949953421312*(127&T),128&T)&&(T=k[I++],F+=72057594037927940*(127&T),128&T)&&(T=k[I++],F+=0x8000000000000000*(127&T),128&T)))break;throw new Error("Varint too long!")}while(0);else{let G=1;for(;I!==this._end&&(T=k[I],128&T);)++I,F+=(127&T)*G,G*=128;if(I===this._end)throw new Error("Varint overrun!");++I,F+=T*G}return this._pos=I,F}_decodeSVarint(){const k=this._data;let I,F=0,T=0;const G=1&k[this._pos];if(T=k[this._pos++],F|=127&T,!(128&T&&(T=k[this._pos++],F|=(127&T)<<7,128&T)&&(T=k[this._pos++],F|=(127&T)<<14,128&T)&&(T=k[this._pos++],F|=(127&T)<<21,128&T)&&(T=k[this._pos++],F+=268435456*(127&T),128&T)&&(T=k[this._pos++],F+=34359738368*(127&T),128&T)&&(T=k[this._pos++],F+=4398046511104*(127&T),128&T)))return G?-(F+1)/2:F/2;if(I=BigInt(F),T=k[this._pos++],I+=0x2000000000000n*BigInt(127&T),!(128&T&&(T=k[this._pos++],I+=0x100000000000000n*BigInt(127&T),128&T)&&(T=k[this._pos++],I+=0x8000000000000000n*BigInt(127&T),128&T)))return Number(G?-(I+1n)/2n:I/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==X.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(k,I,F){if((F=Math.min(this._end,F))-I>L){const se=k.subarray(I,F);return z.decode(se)}let T="",G="";for(let se=I;se<F;++se){const le=k[se];128&le?G+="%"+le.toString(16):(T+=decodeURIComponent(G)+String.fromCharCode(le),G="")}return G.length&&(T+=decodeURIComponent(G)),T}_toBytes(k,I,F){return F=Math.min(this._end,F),new Uint8Array(k.buffer,I,F-I)}}J.pool=new ne.Z(J,void 0,B=>{B._data=null,B._dataView=null})},66398:(ge,re,E)=>{function ne(_){return _?{originPosition:"upper-left"===_.originPosition?"upperLeft":"lower-left"===_.originPosition?"lowerLeft":_.originPosition,scale:_.tolerance?[_.tolerance,_.tolerance,1,1]:[1,1,1,1],translate:null!=_.extent?[_.extent.xmin,_.extent.ymax,_.extent.zmin??0,_.extent.mmin??0]:[0,0,0,0]}:null}function Y(_){if(function X(_){return"lowerLeft"===_.originPosition&&4===_.scale.length&&4===_.translate.length}(_))return _;const{originPosition:g,scale:y,translate:M}=_,R=y[1]??1;return{originPosition:"lowerLeft",scale:[y[0]??1,"lowerLeft"===g?R:-R,y[2]??1,y[3]??1],translate:[M[0]??0,M[1]??0,M[2]??0,M[3]??0]}}function ee({scale:_,translate:g},y){return y*_[0]+g[0]}function $({scale:_,translate:g},y){return y*_[1]+g[1]}function ae({scale:_,translate:g},y){return(y??0)*_[2]+g[2]}function ie({scale:_,translate:g},y){return y?y*_[3]+g[3]:0}function ce(_,g){return _&&g?_e:_&&!g?ye:!_&&g?ke:me}E.d(re,{G6:()=>Q,Ie:()=>K,J9:()=>Te,RF:()=>W,U1:()=>de,vY:()=>ne}),E(40637);const me=(_,g)=>{const y=new Array(g.length);if(!g.length)return y;const M=g[0];let P=ee(_,M[0]),R=$(_,M[1]);y[0]=[P,R];const{scale:C,originPosition:d}=_,f=C[0],b="lowerLeft"===d?C[1]:-C[1];for(let x=1;x<g.length;x++){const[w,U]=g[x];P+=f*w,R+=b*U,y[x]=[P,R]}return y},ye=(_,g)=>{const y=new Array(g.length);if(!g.length)return y;const M=g[0];let P=ee(_,M[0]),R=$(_,M[1]);y[0]=[P,R,ae(_,M[2])];const{scale:C,originPosition:d}=_,f=C[0],b="lowerLeft"===d?C[1]:-C[1];for(let x=1;x<g.length;x++){const[w,U,O]=g[x];P+=f*w,R+=b*U,y[x]=[P,R,ae(_,O)]}return y},ke=(_,g)=>{const y=new Array(g.length);if(!g.length)return y;const M=g[0];let P=ee(_,M[0]),R=$(_,M[1]);y[0]=[P,R,ie(_,M[2])];const{scale:C,originPosition:d}=_,f=C[0],b="lowerLeft"===d?C[1]:-C[1];for(let x=1;x<g.length;x++){const[w,U,O]=g[x];P+=f*w,R+=b*U,y[x]=[P,R,ie(_,O)]}return y},_e=(_,g)=>{const y=new Array(g.length);if(!g.length)return y;const M=g[0];let P=ee(_,M[0]),R=$(_,M[1]);y[0]=[P,R,ae(_,M[2]),ie(_,M[3])];const{scale:C,originPosition:d}=_,f=C[0],b="lowerLeft"===d?C[1]:-C[1];for(let x=1;x<g.length;x++){const[w,U,O,H]=g[x];P+=f*w,R+=b*U,y[x]=[P,R,ae(_,O),ie(_,H)]}return y};function be(_,g,y){const M=new Array(y.length);for(let P=0;P<y.length;P++)M[P]=g(_,y[P]);return M}function W(_,g,y){const M=Y(_);return g.x=function z({scale:_,translate:g},y){return Math.round((y-g[0])/_[0])}(M,y.x),g.y=function L({scale:_,translate:g},y){return Math.round((y-g[1])/_[1])}(M,y.y),null!=y.z&&(g.z=function J({scale:_,translate:g},y){return Math.round(((y??0)-g[2])/_[2])}(M,y.z)),null!=y.m&&(g.m=function B({scale:_,translate:g},y){return y?Math.round((y-g[3])/_[3]):0}(M,y.m)),g}function Te(_,g,y,M=y?.hasZ??!1,P=y?.hasM??!1){if(null!=y){const R=Y(_);g.points=ce(M,P)(R,y.points),g.hasZ=M,g.hasM=P}return g}function de(_,g,y,M=null!=y?.z,P=null!=y?.m){if(null==y)return g;const R=Y(_);return g.x=ee(R,y.x),g.y=$(R,y.y),M&&(g.z=ae(R,y.z)),P&&(g.m=ie(R,y.m)),g}function K(_,g,y,M=y?.hasZ??!1,P=y?.hasM??!1){if(null!=y){const R=Y(_);g.rings=be(R,ce(M,P),y.rings),g.hasZ=M,g.hasM=P}return g}function Q(_,g,y,M=y?.hasZ??!1,P=y?.hasM??!1){if(null!=y){const R=Y(_);g.paths=be(R,ce(M,P),y.paths),g.hasZ=M,g.hasM=P}return g}},89625:(ge,re,E)=>{E.d(re,{G$:()=>ce,K9:()=>be,wn:()=>fe});var te=E(57964),ne=E(40485),X=E(62209),Y=E(53341);const z=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],L=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],J=["upperLeft","lowerLeft"];function B(Z){return Z>=z.length?null:z[Z]}function k(Z){return Z>=L.length?null:L[Z]}function I(Z){return Z>=J.length?null:J[Z]}function F(Z,D){return D>=Z.geometryTypes.length?null:Z.geometryTypes[D]}function T(Z,D,V){const v=Z.asUnsafe(),S=D.createPointGeometry(V);for(;v.next();)switch(v.tag()){case 3:{const N=v.getUInt32(),A=v.pos()+N;let W=0;for(;v.pos()<A;)D.addCoordinatePoint(S,v.getSInt64(),W++);break}default:v.skip()}return S}function G(Z,D,V){const S=Z.asUnsafe(),N=D.createGeometry(V),A=2+(V.hasZ?1:0)+(V.hasM?1:0);for(;S.next();)switch(S.tag()){case 2:{const W=S.getUInt32(),ue=S.pos()+W;let q=0;for(;S.pos()<ue;)D.addLength(N,S.getUInt32(),q++);break}case 3:{const W=S.getUInt32(),ue=S.pos()+W;let q=0;for(D.allocateCoordinates(N);S.pos()<ue;)D.addCoordinate(N,S.getSInt64(),q),q++,q===A&&(q=0);break}default:S.skip()}return N}function se(Z){const v=Z.asUnsafe(),S=new X.Z;let N="esriGeometryPoint";for(;v.next();)switch(v.tag()){case 2:{const A=v.getUInt32(),W=v.pos()+A;for(;v.pos()<W;)S.lengths.push(v.getUInt32());break}case 3:{const A=v.getUInt32(),W=v.pos()+A;for(;v.pos()<W;)S.coords.push(v.getSInt64());break}case 1:N=Y.S[v.getEnum()];break;default:v.skip()}return{queryGeometry:S,queryGeometryType:N}}function le(Z){const q=Z.asUnsafe();for(;q.next();)switch(q.tag()){case 1:return q.getString();case 2:return q.getFloat();case 3:return q.getDouble();case 4:return q.getSInt32();case 5:return q.getUInt32();case 6:return q.getInt64();case 7:return q.getUInt64();case 8:return q.getSInt64();case 9:return q.getBool();default:return q.skip(),null}return null}function fe(Z){const A=Z.asUnsafe(),W={type:B(0)};for(;A.next();)switch(A.tag()){case 1:W.name=A.getString();break;case 2:W.type=B(A.getEnum());break;case 3:W.alias=A.getString();break;case 4:W.sqlType=k(A.getEnum());break;case 5:default:A.skip();break;case 6:W.defaultValue=A.getString()}return W}function ee(Z){const j={},v=Z.asUnsafe();for(;v.next();)switch(v.tag()){case 1:j.name=v.getString();break;case 2:j.isSystemMaintained=v.getBool();break;default:v.skip()}return j}function $(Z,D,V,j){const A=D.createFeature(V);let W=0;for(;Z.next();)switch(Z.tag()){case 1:{const ue=j[W++].name;A.attributes[ue]=Z.processMessage(le);break}case 2:A.geometry=Z.processMessageWithArgs(G,D,V);break;case 4:A.centroid=Z.processMessageWithArgs(T,D,V);break;default:Z.skip()}return A}function ae(Z){const S=[1,1,1,1],N=Z.asUnsafe();for(;N.next();)switch(N.tag()){case 1:S[0]=N.getDouble();break;case 2:S[1]=N.getDouble();break;case 4:S[2]=N.getDouble();break;case 3:S[3]=N.getDouble();break;default:N.skip()}return S}function ie(Z){const S=[0,0,0,0],N=Z.asUnsafe();for(;N.next();)switch(N.tag()){case 1:S[0]=N.getDouble();break;case 2:S[1]=N.getDouble();break;case 4:S[2]=N.getDouble();break;case 3:S[3]=N.getDouble();break;default:N.skip()}return S}function ce(Z){const v={originPosition:I(0)},S=Z.asUnsafe();for(;S.next();)switch(S.tag()){case 1:v.originPosition=I(S.getEnum());break;case 2:v.scale=S.processMessage(ae);break;case 3:v.translate=S.processMessage(ie);break;default:S.skip()}return v}function me(Z){const v={},S=Z.asUnsafe();for(;S.next();)switch(S.tag()){case 1:v.shapeAreaFieldName=S.getString();break;case 2:v.shapeLengthFieldName=S.getString();break;case 3:v.units=S.getString();break;default:S.skip()}return v}function ye(Z,D){const A=D.createSpatialReference();for(;Z.next();)switch(Z.tag()){case 1:A.wkid=Z.getUInt32();break;case 5:A.wkt=Z.getString();break;case 2:A.latestWkid=Z.getUInt32();break;case 3:A.vcsWkid=Z.getUInt32();break;case 4:A.latestVcsWkid=Z.getUInt32();break;default:Z.skip()}return A}function ke(Z,D){const K=D.createFeatureResult(),Q=Z.asUnsafe();K.geometryType=F(D,0);let _=!1;for(;Q.next();)switch(Q.tag()){case 1:K.objectIdFieldName=Q.getString();break;case 3:K.globalIdFieldName=Q.getString();break;case 4:K.geohashFieldName=Q.getString();break;case 5:K.geometryProperties=Q.processMessage(me);break;case 7:K.geometryType=F(D,Q.getEnum());break;case 8:K.spatialReference=Q.processMessageWithArgs(ye,D);break;case 10:K.hasZ=Q.getBool();break;case 11:K.hasM=Q.getBool();break;case 12:K.transform=Q.processMessage(ce);break;case 9:K.exceededTransferLimit=Q.getBool();break;case 13:D.addField(K,Q.processMessage(fe));break;case 15:_||(D.prepareFeatures(K),_=!0),D.addFeature(K,Q.processMessageWithArgs($,D,K,K.fields));break;case 2:K.uniqueIdField=Q.processMessage(ee);break;default:Q.skip()}return D.finishFeatureResult(K),K}function _e(Z,D){const v={};let S=null;for(;Z.next();)switch(Z.tag()){case 4:S=Z.processMessageWithArgs(se);break;case 1:v.featureResult=Z.processMessageWithArgs(ke,D);break;default:Z.skip()}return null!=S&&v.featureResult&&D.addQueryGeometry(v,S),v}function be(Z,D){try{const j=new ne.Z(new Uint8Array(Z),new DataView(Z)),v={};for(;j.next();)2===j.tag()?v.queryResult=j.processMessageWithArgs(_e,D):j.skip();return v}catch(V){throw new te.Z("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:V})}}},53341:(ge,re,E)=>{E.d(re,{J:()=>J,S:()=>L});var te=E(49602),ne=E(33721),X=E(83502),Y=E(40620),z=E(62209);const L=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class J{constructor(k){this._options=k,this.geometryTypes=L,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new Y.Z}prepareFeatures(k){this._vertexDimension=2,k.hasZ&&this._vertexDimension++,k.hasM&&this._vertexDimension++}finishFeatureResult(k){if(!k?.features||!k.hasZ||!this._options.sourceSpatialReference||!k.spatialReference||(0,ne.fS)(k.spatialReference,this._options.sourceSpatialReference)||k.spatialReference.vcsWkid)return;const I=(0,te._R)(this._options.sourceSpatialReference)/(0,te._R)(k.spatialReference);if(1!==I)for(const F of k.features){if(!(0,X.S6)(F))continue;const T=F.geometry.coords;for(let G=2;G<T.length;G+=3)T[G]*=I}}addFeature(k,I){k.features.push(I)}createFeature(){return new X.u_}createSpatialReference(){return{wkid:0}}createGeometry(){return new z.Z}addField(k,I){k.fields.push(I)}allocateCoordinates(k){k.coords.length=k.lengths.reduce((I,F)=>I+F,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(k,I){k.coords[this._coordinatePtr++]=I}addCoordinatePoint(k,I){k.coords.push(I)}addLength(k,I){k.lengths.push(I)}addQueryGeometry(k,I){k.queryGeometry=I.queryGeometry,k.queryGeometryType=I.queryGeometryType}createPointGeometry(){return new z.Z}}},44834:(ge,re,E)=>{E.d(re,{C:()=>ne});var te=E(89625);function ne(X,Y){const z=(0,te.K9)(X,Y),L=z.queryResult.featureResult,J=z.queryResult.queryGeometry,B=z.queryResult.queryGeometryType;if(L&&L.features&&L.features.length&&L.objectIdFieldName){const k=L.objectIdFieldName;for(const I of L.features)I.attributes&&(I.objectId=I.attributes[k])}return L&&(L.queryGeometry=J,L.queryGeometryType=B),L}},23800:(ge,re,E)=>{E.r(re),E.d(re,{default:()=>C});var te=E(480),ne=E(68160),X=E(43814),Y=E(53456),F=(E(14007),E(40271),E(27048),E(45425),E(66398),E(31709),E(81247));E(55117),E(33721);class _e{constructor(f,b,x){this.uid=f,this.geometry=b,this.attributes=x,this.visible=!0,this.objectId=null,this.centroid=null}}class Z{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}var Ie=E(10842);function Te(d,f){return f}function de(d,f,b,x){switch(b){case 0:return g(d,f+x,0);case 1:return"lowerLeft"===d.originPosition?g(d,f+x,1):function y({translate:d,scale:f},b,x){return d[x]-b*f[x]}(d,f+x,1)}}function K(d,f,b,x){return 2===b?g(d,f,2):de(d,f,b,x)}function Q(d,f,b,x){return 2===b?g(d,f,3):de(d,f,b,x)}function _(d,f,b,x){return 3===b?g(d,f,3):K(d,f,b,x)}function g({translate:d,scale:f},b,x){return d[x]+b*f[x]}class M{constructor(f){this._options=f,this.geometryTypes=["point","multipoint","polyline","polygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=Te,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{},this._missingAttributes=[]}get missingAttributes(){return this._missingAttributes}createFeatureResult(){return new Z}finishFeatureResult(f){if(this._options.applyTransform&&(f.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!f.hasZ)return;const b=(0,Y.k)(f.geometryType,this._options.sourceSpatialReference,f.spatialReference);if(null!=b)for(const x of f.features)b(x.geometry)}createSpatialReference(){return new X.Z}addField(f,b){f.fields.push(F.Z.fromJSON(b));const x=f.fields.map(w=>w.name);this._attributesConstructor=function(){for(const w of x)this[w]=null}}addFeature(f,b){(function Me(d,f,b,x){if(f?.size&&null!=b&&d)for(const w in d){if(!f.has(w))continue;const U=d[w];"string"==typeof U&&U.length>b&&(x(w),d[w]="")}})(b.attributes,this._options.maxStringAttributeFields,this._options.maxStringAttributeLength,U=>{const O=b.attributes[f.objectIdFieldName];null!=O&&this._missingAttributes.push({objectId:O,attribute:U})}),f.features.push(b)}addQueryGeometry(f,b){const{queryGeometry:x,queryGeometryType:w}=b,U=(0,Ie.$g)(x.clone(),x,!1,!1,this._transform),O=(0,Ie.di)(U,w,!1,!1);let H=null;switch(w){case"esriGeometryPoint":H="point";break;case"esriGeometryPolygon":H="polygon";break;case"esriGeometryPolyline":H="polyline";break;case"esriGeometryMultipoint":H="multipoint"}O.type=H,f.queryGeometryType=w,f.queryGeometry=O}prepareFeatures(f){switch(this._transform=f.transform??null,this._options.applyTransform&&f.transform&&(this._applyTransform=this._deriveApplyTransform(f)),this._vertexDimension=2,f.hasZ&&this._vertexDimension++,f.hasM&&this._vertexDimension++,f.geometryType){case"point":this.addCoordinate=(b,x,w)=>this.addCoordinatePoint(b,x,w),this.createGeometry=b=>this.createPointGeometry(b);break;case"polygon":this.addCoordinate=(b,x,w)=>this._addCoordinatePolygon(b,x,w),this.createGeometry=b=>this._createPolygonGeometry(b);break;case"polyline":this.addCoordinate=(b,x,w)=>this._addCoordinatePolyline(b,x,w),this.createGeometry=b=>this._createPolylineGeometry(b);break;case"multipoint":this.addCoordinate=(b,x,w)=>this._addCoordinateMultipoint(b,x,w),this.createGeometry=b=>this._createMultipointGeometry(b);break;case"mesh":case"extent":break;default:(0,te.Bg)(f.geometryType)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,new _e((0,ne.D)(),null,new this._attributesConstructor)}allocateCoordinates(){const f=this._lengths.reduce((b,x)=>b+x,0);this._coordinateBuffer=new Float64Array(f*this._vertexDimension),this._coordinateBufferPtr=0}addLength(f,b){0===this._lengths.length&&(this._toAddInCurrentPath=b),this._lengths.push(b)}createPointGeometry(f){const b={type:"point",x:0,y:0,spatialReference:f.spatialReference,hasZ:!!f.hasZ,hasM:!!f.hasM};return b.hasZ&&(b.z=0),b.hasM&&(b.m=0),b}addCoordinatePoint(f,b,x){const w=this._transform?this._applyTransform(this._transform,b,x,0):b;if(null!=w)switch(x){case 0:f.x=w;break;case 1:f.y=w;break;case 2:f.hasZ?f.z=w:f.m=w;break;case 3:f.m=w}}_transformPathLikeValue(f,b){let x=0;return b<=1&&(x=this._previousCoordinate[b],this._previousCoordinate[b]+=f),this._transform?this._applyTransform(this._transform,f,b,x):f}_addCoordinatePolyline(f,b,x){this._dehydratedAddPointsCoordinate(f.paths,b,x)}_addCoordinatePolygon(f,b,x){this._dehydratedAddPointsCoordinate(f.rings,b,x)}_addCoordinateMultipoint(f,b,x){0===x&&f.points.push([]);const w=this._transformPathLikeValue(b,x);f.points[f.points.length-1].push(w)}_createPolygonGeometry(f){return{type:"polygon",rings:[[]],spatialReference:f.spatialReference,hasZ:!!f.hasZ,hasM:!!f.hasM}}_createPolylineGeometry(f){return{type:"polyline",paths:[[]],spatialReference:f.spatialReference,hasZ:!!f.hasZ,hasM:!!f.hasM}}_createMultipointGeometry(f){return{type:"multipoint",points:[],spatialReference:f.spatialReference,hasZ:!!f.hasZ,hasM:!!f.hasM}}_dehydratedAddPointsCoordinate(f,b,x){0===x&&0==this._toAddInCurrentPath--&&(f.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const w=this._transformPathLikeValue(b,x),O=this._coordinateBuffer;if(O){if(0===x){const H=this._coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT;f[f.length-1].push(new Float64Array(O.buffer,H,this._vertexDimension))}O[this._coordinateBufferPtr++]=w}}_deriveApplyTransform(f){const{hasZ:b,hasM:x}=f;return b&&x?_:b?K:x?Q:de}}var P=E(44834);class R{_parseFeatureQuery(f){const b=new M(f.options),x=(0,P.C)(f.buffer,b),w={...x,spatialReference:x.spatialReference?.toJSON(),fields:x.fields?x.fields.map(U=>U.toJSON()):void 0,missingAttributes:b.missingAttributes};return Promise.resolve(w)}}function C(){return new R}}}]);