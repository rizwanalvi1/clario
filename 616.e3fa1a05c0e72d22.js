"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[616,318],{95539:(q,N,i)=>{i.d(N,{Z:()=>g});var y=i(50484),a=i(25387),j=i(89317),B=i(51431),w=i(80543),F=(i(14007),i(4703),i(65311),i(21070)),U=i(10141),S=i(81238);let h=class extends((0,a.J)(j.wq)){constructor(x){super(x),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,B.rJ)(this.value,this.unit,"milliseconds")}};(0,y._)([(0,F.J)(S.v,{nonNullable:!0})],h.prototype,"unit",void 0),(0,y._)([(0,w.Cb)({type:Number,json:{write:!0},nonNullable:!0})],h.prototype,"value",void 0),h=(0,y._)([(0,U.j)("esri.TimeInterval")],h);const g=h},40408:(q,N,i)=>{i.d(N,{dp:()=>w,o2:()=>F,yZ:()=>B});var y=i(55117),a=i(49602);const j=96;function B(h,g){const x=g||h.extent,u=h.width,v=(0,a.c9)(x?.spatialReference);return x&&u?x.width/u*v*a.hd*j:0}function w(h,g){return h/((0,a.c9)(g)*a.hd*j)}function F(h,g,x){return function U(h,g){return 0===g||(0,y.W8)(h,g)||h<g}(h,g)&&function S(h,g){return 0===g||(0,y.W8)(h,g)||h>g}(h,x)}},10616:(q,N,i)=>{i.r(N),i.d(N,{default:()=>ct});var he,y=i(15861),a=i(50484),j=i(11931),B=i(35458),w=i(62691),L=i(66476),$=i(83944),Z=i(5603),F=i(84303),U=i(34222),S=i(3233),h=i(79412),g=i(77675),x=i(6785),u=i(80543),v=i(1535),m=i(62185),f=i(10141),K=i(7547),V=i(82206),G=i(26894),W=i(43814),z=i(40408),ee=i(33721),fe=i(95060),Y=i(19855),M=i(80099),P=i(70509),p=i(25836),c=i(29717),R=i(12522),C=i(74623),ae=i(89713),ne=i(56956),re=i(6523),ye=i(53715),te=i(84373),ke=i(73018);i(65311),i(14007);let qe=0,A=he=class extends((0,te.IG)(S.w)){constructor(t){super(t),this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.legendUrl=null,this.legendEnabled=!0,this.layer=null,this.maxScale=0,this.minScale=0,this.name=null,this.parent=null,this.popupEnabled=!1,this.queryable=!1,this.sublayers=null,this.spatialReferences=null,this.title=null,this.addHandles([(0,g.on)(()=>this.sublayers,"after-add",({item:r})=>{r.parent=this,r.layer=this.layer},g.Z_),(0,g.on)(()=>this.sublayers,"after-remove",({item:r})=>{r.layer=r.parent=null},g.Z_),(0,g.YP)(()=>this.sublayers,(r,s)=>{if(s)for(const o of s)o.layer=o.parent=null;if(r)for(const o of r)o.parent=this,o.layer=this.layer},g.Z_),(0,g.YP)(()=>this.layer,r=>{if(this.sublayers)for(const s of this.sublayers)s.layer=r},g.Z_)])}get id(){return this._get("id")??qe++}set id(t){this._set("id",t)}readLegendUrl(t,r){return r.legendUrl??r.legendURL??null}get effectiveScaleRange(){const{minScale:t,maxScale:r}=this;return{minScale:t,maxScale:r}}castSublayers(t){return(0,v.se)($.Z.ofType(he),t)}set visible(t){this._setAndNotifyLayer("visible",t)}clone(){const t=new he;return this.hasOwnProperty("description")&&(t.description=this.description),this.hasOwnProperty("fullExtent")&&(t.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(t.fullExtents=this.fullExtents?.map(r=>r.clone())??null),this.hasOwnProperty("legendUrl")&&(t.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(t.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(t.layer=this.layer),this.hasOwnProperty("name")&&(t.name=this.name),this.hasOwnProperty("parent")&&(t.parent=this.parent),this.hasOwnProperty("queryable")&&(t.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(t.sublayers=this.sublayers?.map(r=>r.clone())),this.hasOwnProperty("spatialReferences")&&(t.spatialReferences=this.spatialReferences?.map(r=>r)),this.hasOwnProperty("visible")&&(t.visible=this.visible),this.hasOwnProperty("title")&&(t.title=this.title),t}_setAndNotifyLayer(t,r){const s=this.layer;this._get(t)!==r&&(this._set(t,r),s&&s.emit("wms-sublayer-update",{propertyName:t,id:this.id}))}};(0,a._)([(0,u.Cb)()],A.prototype,"description",void 0),(0,a._)([(0,u.Cb)({readOnly:!0})],A.prototype,"dimensions",void 0),(0,a._)([(0,u.Cb)({type:G.Z,json:{name:"extent"}})],A.prototype,"fullExtent",void 0),(0,a._)([(0,u.Cb)()],A.prototype,"fullExtents",void 0),(0,a._)([(0,u.Cb)({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],A.prototype,"id",null),(0,a._)([(0,u.Cb)({type:String,json:{name:"legendUrl",write:{ignoreOrigin:!0}}})],A.prototype,"legendUrl",void 0),(0,a._)([(0,m.r)("legendUrl",["legendUrl","legendURL"])],A.prototype,"readLegendUrl",null),(0,a._)([(0,u.Cb)({type:Boolean,json:{name:"showLegend",origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],A.prototype,"legendEnabled",void 0),(0,a._)([(0,u.Cb)()],A.prototype,"layer",void 0),(0,a._)([(0,u.Cb)()],A.prototype,"maxScale",void 0),(0,a._)([(0,u.Cb)()],A.prototype,"minScale",void 0),(0,a._)([(0,u.Cb)({readOnly:!0})],A.prototype,"effectiveScaleRange",null),(0,a._)([(0,u.Cb)({type:String,json:{write:{ignoreOrigin:!0}}})],A.prototype,"name",void 0),(0,a._)([(0,u.Cb)()],A.prototype,"parent",void 0),(0,a._)([(0,u.Cb)({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],A.prototype,"popupEnabled",void 0),(0,a._)([(0,u.Cb)({type:Boolean,json:{write:{ignoreOrigin:!0}}})],A.prototype,"queryable",void 0),(0,a._)([(0,u.Cb)()],A.prototype,"sublayers",void 0),(0,a._)([(0,ke.p)("sublayers")],A.prototype,"castSublayers",null),(0,a._)([(0,u.Cb)({type:[Number],json:{read:{source:"spatialReferences"}}})],A.prototype,"spatialReferences",void 0),(0,a._)([(0,u.Cb)({type:String,json:{write:{ignoreOrigin:!0}}})],A.prototype,"title",void 0),(0,a._)([(0,u.Cb)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],A.prototype,"visible",null),A=he=(0,a._)([(0,f.j)("esri.layers.support.WMSSublayer")],A);const ge=A;var de=i(57678),et=i(57964),De=i(25037);const Te={84:4326,83:4269,27:4267};function tt(t){if(!t)return null;const r={idCounter:-1};"string"==typeof t&&(t=(new DOMParser).parseFromString(t,"text/xml"));const s=t.documentElement;if("ServiceExceptionReport"===s.nodeName){const X=Array.prototype.slice.call(s.childNodes).map(me=>me.textContent).join("\r\n");throw new et.Z("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",X)}const o=J("Capability",s),l=J("Service",s),_=o&&J("Request",o);if(!o||!l||!_)return null;const d=J("Layer",o);if(!d)return null;const b="WMS_Capabilities"===s.nodeName||"WMT_MS_Capabilities"===s.nodeName?s.getAttribute("version"):"1.3.0",E=k("Title",l,"")||k("Name",l,""),I=k("AccessConstraints",l,""),D=/^none$/i.test(I)?"":I,T=k("Abstract",l,""),Q=parseInt(k("MaxWidth",l,"5000"),10),se=parseInt(k("MaxHeight",l,"5000"),10),ie=Ae(_,"GetMap"),oe=Se(_,"GetMap"),H=ce(d,b,r);if(!H)return null;let Ve,Me=0;const mt=Array.prototype.slice.call(o.childNodes),ft=H.sublayers??[],be=X=>{null!=X&&ft.push(X)};mt.forEach(X=>{"Layer"===X.nodeName&&(0===Me?Ve=X:(1===Me&&H.name&&(H.name="",be(ce(Ve,b,r))),be(ce(X,b,r))),Me++)});let ue=H.sublayers,Ue=H.extent;const yt=H.fullExtents??[];if(ue||(ue=[]),0===ue.length&&ue.push(H),!Ue){const X=new G.Z(ue[0].extent);H.extent=X.toJSON(),Ue=H.extent}const ht=H.spatialReferences.length>0?H.spatialReferences:Le(H),Je=Se(_,"GetFeatureInfo"),_t=Je?Ae(_,"GetFeatureInfo"):null,Xe=Re(ue),vt=H.minScale||0,Et=H.maxScale||0,ze=H.dimensions??[],gt=Xe.reduce((X,me)=>X.concat(me.dimensions??[]),[]),Ye=ze.concat(gt).filter(Ie);let Qe=null;if(Ye.length){const X=Ye.map(me=>{const{extent:xe}=me;return function st(t){return Array.isArray(t)&&t.length>0&&t[0]instanceof Date}(xe)?xe.map(Ee=>Ee.getTime()):xe?.map(Ee=>[Ee.min.getTime(),Ee.max.getTime()])}).flat(2).filter(de.pC);Qe={startTimeField:null,endTimeField:null,trackIdField:void 0,timeExtent:[Math.min(...X),Math.max(...X)]}}return{copyright:D,description:T,dimensions:ze,extent:Ue,fullExtents:yt,featureInfoFormats:_t,featureInfoUrl:Je,mapUrl:oe,maxWidth:Q,maxHeight:se,maxScale:Et,minScale:vt,layers:Xe,spatialReferences:ht,supportedImageFormatTypes:ie,timeInfo:Qe,title:E,version:b}}function Le(t){if(t.spatialReferences.length>0)return t.spatialReferences;if(t.sublayers)for(const r of t.sublayers){const s=Le(r);if(s.length>0)return s}return[]}function Re(t){let r=[];for(const s of t)r.push(s),s.sublayers?.length&&(r=r.concat(Re(s.sublayers)),delete s.sublayers);return r}function _e(t,r,s){return r.getAttribute(t)??s}function J(t,r){for(let s=0;s<r.childNodes.length;s++){const o=r.childNodes[s];if(Be(o)&&o.nodeName===t)return o}return null}function ve(t,r){if(null==r)return[];const s=[];for(let o=0;o<r.childNodes.length;o++){const l=r.childNodes[o];Be(l)&&l.nodeName===t&&s.push(l)}return s}function k(t,r,s){return J(t,r)?.textContent??s}function pe(t,r,s){if(!t)return null;const o=parseFloat(t.getAttribute("minx")),l=parseFloat(t.getAttribute("miny")),_=parseFloat(t.getAttribute("maxx")),d=parseFloat(t.getAttribute("maxy"));let b,E,I,D;s?(b=isNaN(l)?-Number.MAX_VALUE:l,E=isNaN(o)?-Number.MAX_VALUE:o,I=isNaN(d)?Number.MAX_VALUE:d,D=isNaN(_)?Number.MAX_VALUE:_):(b=isNaN(o)?-Number.MAX_VALUE:o,E=isNaN(l)?-Number.MAX_VALUE:l,I=isNaN(_)?Number.MAX_VALUE:_,D=isNaN(d)?Number.MAX_VALUE:d);const T=new W.Z({wkid:r});return new G.Z({xmin:b,ymin:E,xmax:I,ymax:D,spatialReference:T})}function Se(t,r){const s=J(r,t);if(s){const o=J("DCPType",s);if(o){const l=J("HTTP",o);if(l){const _=J("Get",l);if(_){let d=function nt(t,r,s,o){const l=J(t,s);return l?_e(r,l,o):o}("OnlineResource","xlink:href",_,null);if(d)return d.indexOf("&")===d.length-1&&(d=d.substring(0,d.length-1)),function it(t,r){const s=[],o=(0,x.mN)(t);for(const l in o.query)o.query.hasOwnProperty(l)&&(r.includes(l.toLowerCase())||s.push(l+"="+o.query[l]));return o.path+(s.length?"?"+s.join("&"):"")}(d,["service","request"])}}}}return null}function Ae(t,r){const s=ve("Operation",t);if(!s.length)return ve("Format",J(r,t)).map(({textContent:l})=>l).filter(de.pC);const o=[];for(const l of s)if(l.getAttribute("name")===r){const _=ve("Format",l);for(const{textContent:d}of _)null!=d&&o.push(d)}return o}function je(t,r,s){const o=J(r,t);if(!o)return s;const{textContent:l}=o;if(null==l||""===l)return s;const _=Number(l);return isNaN(_)?s:_}function ce(t,r,s){if(!t)return null;const o={id:s.idCounter++,fullExtents:[],parentLayerId:null,queryable:"1"===t.getAttribute("queryable"),spatialReferences:[],sublayers:null},l=J("LatLonBoundingBox",t),_=J("EX_GeographicBoundingBox",t);let d=null;l&&(d=pe(l,4326)),_&&(d=new G.Z(0,0,0,0,new W.Z({wkid:4326})),d.xmin=parseFloat(k("westBoundLongitude",_,"0")),d.ymin=parseFloat(k("southBoundLatitude",_,"0")),d.xmax=parseFloat(k("eastBoundLongitude",_,"0")),d.ymax=parseFloat(k("northBoundLatitude",_,"0"))),l||_||(d=new G.Z(-180,-90,180,90,new W.Z({wkid:4326}))),o.minScale=je(t,"MaxScaleDenominator",0),o.maxScale=je(t,"MinScaleDenominator",0);const b=["1.0.0","1.1.0","1.1.1"].includes(r)?"SRS":"CRS";return Array.prototype.slice.call(t.childNodes).forEach(E=>{if("Name"===E.nodeName)o.name=E.textContent||"";else if("Title"===E.nodeName)o.title=E.textContent||"";else if("Abstract"===E.nodeName)o.description=E.textContent||"";else if("BoundingBox"===E.nodeName){const I=E.getAttribute(b);if(I&&0===I.indexOf("EPSG:")){const T=parseInt(I.substring(5),10);0===T||isNaN(T)||d||(d="1.3.0"===r?pe(E,T,(0,C.A)(T)):pe(E,T))}const D=I?.indexOf(":");if(D&&D>-1){let T=parseInt(I.substring(D+1,I.length),10);0===T||isNaN(T)||(T=Te[T]??T);const Q="1.3.0"===r?pe(E,T,(0,C.A)(T)):pe(E,T);Q&&o.fullExtents&&o.fullExtents.push(Q)}}else if(E.nodeName===b)(E.textContent?.split(" ")??[]).forEach(I=>{const D=I.includes(":")?parseInt(I.split(":")[1],10):parseInt(I,10);if(0!==D&&!isNaN(D)){const T=Te[D]??D;o.spatialReferences.includes(T)||o.spatialReferences.push(T)}});else if("Style"!==E.nodeName||o.legendUrl){if("Layer"===E.nodeName){const I=ce(E,r,s);I&&(I.parentLayerId=o.id,o.sublayers||(o.sublayers=[]),o.sublayers.push(I))}}else{const I=J("LegendURL",E);if(I){const D=J("OnlineResource",I);D&&(o.legendUrl=D.getAttribute("xlink:href"))}}}),o.extent=d?.toJSON(),o.dimensions=ve("Dimension",t).filter(E=>E.getAttribute("name")&&E.getAttribute("units")&&E.textContent).map(E=>{const I=E.getAttribute("name"),D=E.getAttribute("units"),T=E.textContent,Q=E.getAttribute("unitSymbol")??void 0,se=E.getAttribute("default")??void 0,ie="0"!==_e("default",E,"0"),oe="0"!==_e("nearestValue",E,"0"),H="0"!==_e("current",E,"0");return Ie({name:I,units:D})?{name:"time",units:"ISO8601",extent:we(T),default:we(se),multipleValues:ie,nearestValue:oe,current:H}:function Fe(t){return/^elevation$/i.test(t.name)&&/^(epsg|crs):\d+$/i.test(t.units)}({name:I,units:D})?{name:"elevation",units:D,extent:We(T),unitSymbol:Q,default:We(se),multipleValues:ie,nearestValue:oe}:{name:I,units:D,extent:Ne(T),unitSymbol:Q,default:Ne(se),multipleValues:ie,nearestValue:oe}}),o}function Be(t){return t.nodeType===Node.ELEMENT_NODE}function Ie(t){return/^time$/i.test(t.name)&&/^iso8601$/i.test(t.units)}function We(t){if(!t)return;const r=t.includes("/"),s=t.split(",");return r?s.map(o=>{const l=o.split("/");return l.length<2?null:{min:parseFloat(l[0]),max:parseFloat(l[1]),resolution:l.length>=3&&"0"!==l[2]?parseFloat(l[2]):void 0}}).filter(de.pC):s.map(o=>parseFloat(o))}function Ne(t){if(!t)return;const r=t.includes("/"),s=t.split(",");return r?s.map(o=>{const l=o.split("/");return l.length<2?null:{min:l[0],max:l[1],resolution:l.length>=3&&"0"!==l[2]?l[2]:void 0}}).filter(de.pC):s}function we(t){if(!t)return;const r=t.includes("/"),s=t.split(",");return r?s.map(o=>{const l=o.split("/");return l.length<2?null:{min:Pe(l[0]),max:Pe(l[1]),resolution:l.length>=3&&"0"!==l[2]?ot(l[2]):void 0}}).filter(de.pC):s.map(o=>Pe(o))}function Pe(t){return De.ou.fromISO(t,{zone:De.Qf.utcInstance}).toJSDate()}function ot(t){const s=t.match(/(?:p(\d+y|\d+(?:\.|,)\d+y)?(\d+m|\d+(?:\.|,)\d+m)?(\d+d|\d+(?:\.|,)\d+d)?)?(?:t(\d+h|\d+(?:\.|,)\d+h)?(\d+m|\d+(?:\.|,)\d+m)?(\d+s|\d+(?:\.|,)\d+s)?)?/i);return s?{years:le(s[1]),months:le(s[2]),days:le(s[3]),hours:le(s[4]),minutes:le(s[5]),seconds:le(s[6])}:null}function le(t){if(!t)return 0;const s=t.match(/(?:\d+(?:\.|,)\d+|\d+)/);if(!s)return 0;const o=s[0].replace(",",".");return Number(o)}function Oe(t){return t.toISOString().replace(/\.[0-9]{3}/,"")}function Ke(t){if(!t||t.isAllTime||t.isEmpty)return;const{start:r,end:s}=t;return r&&s&&r.getTime()===s.getTime()?`${Oe(r)}`:`${r?Oe(r):"0000-01-01T00:00:00Z"}/${s?Oe(s):"9999-12-31T23:59:59Z"}`}const Ze=new Set([102100,3857,102113,900913]),ut=new Set([3395,54004]),Ce=new F.X({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});function $e(t){return"text/html"===t}function Ge(t){return"text/plain"===t}let O=class extends((0,Y.h7)((0,R.n)((0,p.Q)((0,c.M)((0,M.q)((0,P.I)((0,S.R)(fe.Z)))))))){constructor(...t){super(...t),this.allSublayers=new Z.Z({getCollections:()=>[this.sublayers],getChildrenFunction:r=>r.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.version=null,this.addHandles([(0,g.on)(()=>this.sublayers,"after-add",({item:r})=>{r.parent=r.layer=this},g.Z_),(0,g.on)(()=>this.sublayers,"after-remove",({item:r})=>{r.layer=r.parent=null},g.Z_),(0,g.YP)(()=>this.sublayers,(r,s)=>{if(s)for(const o of s)o.layer=o.parent=null;if(r)for(const o of r)o.parent=o.layer=this},g.Z_)])}normalizeCtorArgs(t,r){return"string"==typeof t?{url:t,...r}:t}destroy(){this.allSublayers.destroy()}load(t){const r=null!=t?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},t).catch(h.r9).then(()=>this._fetchService(r))),Promise.resolve(this)}readFullExtentFromItemOrMap(t,r){const s=r.extent;return s?new G.Z({xmin:s[0][0],ymin:s[0][1],xmax:s[1][0],ymax:s[1][1]}):null}writeFullExtent(t,r){r.extent=[[t.xmin,t.ymin],[t.xmax,t.ymax]]}get featureInfoFormat(){return null==this.featureInfoFormats?null:this.featureInfoFormats.find($e)??this.featureInfoFormats.find(Ge)??null}set featureInfoFormat(t){null==t?(this.revert("featureInfoFormat","service"),this._clearOverride("featureInfoFormat")):($e(t)||Ge(t))&&this._override("featureInfoFormat",t)}readImageFormat(t,r){const s=r.supportedImageFormatTypes;return s&&s.includes("image/png")?"image/png":s&&s[0]}readSpatialReferenceFromItemOrDocument(t,r){return new W.Z(r.spatialReferences[0])}writeSpatialReferences(t,r){const s=this.spatialReference?.wkid;t&&s?(r.spatialReferences=t.filter(o=>o!==s),r.spatialReferences.unshift(s)):r.spatialReferences=t}readSublayersFromItemOrMap(t,r,s){return He(r.layers,s,r.visibleLayers)}readSublayers(t,r,s){return He(r.layers,s)}writeSublayers(t,r,s,o){r.layers=[];const l=new Map,_=t.flatten(({sublayers:d})=>d??[]);for(const d of _)if("number"==typeof d.parent?.id){const b=l.get(d.parent.id);null!=b?b.push(d.id):l.set(d.parent.id,[d.id])}for(const d of _){const b={sublayer:d,...o},E=d.write({parentLayerId:"number"==typeof d.parent?.id?d.parent.id:-1},b);if(l.has(d.id)&&(E.sublayerIds=l.get(d.id)),!d.sublayers&&d.name){const I=d.write({},b);delete I.id,r.layers.push(I)}}r.visibleLayers=_.filter(({visible:d,sublayers:b})=>d&&!b).map(({name:d})=>d).toArray()}set url(t){if(!t)return void this._set("url",t);const{path:r,query:s}=(0,x.mN)(t);for(const l in s)/^(request|service)$/i.test(l)&&delete s[l];const o=(0,x.fl)(r,s??{});this._set("url",o)}createExportImageParameters(t,r,s,o){const l=o?.pixelRatio??1,_=(0,z.yZ)({extent:t,width:r})*l,d=new re.j({layer:this,scale:_}),{xmin:b,ymin:E,xmax:I,ymax:D,spatialReference:T}=t,Q=function dt(t,r){let s=t.wkid;return null==r?s:(null!=s&&r.includes(s)||!t.latestWkid||(s=t.latestWkid),null!=s&&Ze.has(s)?r.find(o=>Ze.has(o))||r.find(o=>ut.has(o))||102100:s)}(T,this.spatialReferences),se="1.3.0"===this.version&&(0,C.A)(Q)?`${E},${b},${D},${I}`:`${b},${E},${I},${D}`,ie=d.toJSON();return{bbox:se,["1.3.0"===this.version?"crs":"srs"]:null==Q||isNaN(Q)?void 0:"EPSG:"+Q,...ie}}fetchImage(t,r,s,o){var l=this;return(0,y.Z)(function*(){const _=l.mapUrl,d=l.createExportImageParameters(t,r,s,o);if(!d.layers){const I=document.createElement("canvas");return I.width=r,I.height=s,I}const b=Ke(o?.timeExtent),E={responseType:"image",query:l._mixCustomParameters({width:r,height:s,...d,time:b,...l.refreshParameters}),signal:o?.signal};return(0,L.Z)(_??"",E).then(I=>I.data)})()}fetchImageBitmap(t,r,s,o){var l=this;return(0,y.Z)(function*(){const _=l.mapUrl??"",d=l.createExportImageParameters(t,r,s,o);if(!d.layers){const D=document.createElement("canvas");return D.width=r,D.height=s,D}const b=Ke(o?.timeExtent),E={responseType:"blob",query:l._mixCustomParameters({width:r,height:s,...d,time:b,...l.refreshParameters}),signal:o?.signal},{data:I}=yield(0,L.Z)(_,E);return(0,ye.g)(I,_,o?.signal)})()}fetchFeatureInfo(t,r,s,o,l){const _=(0,z.yZ)({extent:t,width:r}),b=function rt(t){const r=t.filter(s=>s.popupEnabled&&s.name&&s.queryable);return r.length?r.map(({name:s})=>s).join():null}(new re.j({layer:this,scale:_}).visibleSublayers);if(null==this.featureInfoUrl||null==b)return Promise.resolve([]);if(null==this.fetchFeatureInfoFunction&&null==this.featureInfoFormat)return Promise.resolve([]);const I={query_layers:b,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:r,height:s,..."1.3.0"===this.version?{I:o,J:l}:{x:o,y:l}},D={...this.createExportImageParameters(t,r,s),...I},T=this._mixCustomParameters(D);return null!=this.fetchFeatureInfoFunction?this.fetchFeatureInfoFunction(T):this._defaultFetchFeatureInfoFunction((0,x.fl)(this.featureInfoUrl,T))}findSublayerById(t){return this.allSublayers.find(r=>r.id===t)}findSublayerByName(t){return this.allSublayers.find(r=>r.name===t)}serviceSupportsSpatialReference(t){return(0,ae.G)(this.url)||null!=this.spatialReferences&&this.spatialReferences.some(r=>{const s=900913===r?W.Z.WebMercator:new W.Z({wkid:r});return(0,ee.fS)(s,t)})}_defaultFetchFeatureInfoFunction(t){const r=document.createElement("iframe");r.src=(0,x.qg)(t),r.style.border="none",r.style.margin="0",r.style.width="100%",r.setAttribute("sandbox","");const s=new w.Z({title:this.title,content:r}),o=new B.Z({sourceLayer:this,popupTemplate:s});return Promise.resolve([o])}_fetchService(t){var r=this;return(0,y.Z)(function*(){if(!r.resourceInfo&&r.parsedUrl?.path){const{path:s,query:o}=r.parsedUrl,{data:l}=yield(0,L.Z)(s,{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...o,...r.customParameters},responseType:"xml",signal:t});r.resourceInfo=tt(l)}if(r.parsedUrl){const s=new x.R9(r.parsedUrl.path),{httpsDomains:o}=j.default.request;"https"!==s.scheme||s.port&&"443"!==s.port||!s.host||o.includes(s.host)||o.push(s.host)}r.read(r.resourceInfo,{origin:"service"})})()}_mixCustomParameters(t){if(!this.customLayerParameters&&!this.customParameters)return t;const r={...this.customParameters,...this.customLayerParameters};for(const s in r)t[s.toLowerCase()]=r[s];return t}};function He(t,r,s){t=t??[];const o=new Map;t.every(_=>null==_.id)&&(t=(0,U.d9)(t)).forEach((_,d)=>_.id=d);for(const _ of t){const d=new ge;d.read(_,r),s&&!s.includes(d.name)&&(d.visible=!1),o.set(d.id,d)}const l=[];for(const _ of t){const d=null!=_.id?o.get(_.id):null;if(d)if(null!=_.parentLayerId&&_.parentLayerId>=0){const b=o.get(_.parentLayerId);if(!b)continue;b.sublayers||(b.sublayers=new $.Z),b.sublayers.push(d)}else l.push(d)}return l}(0,a._)([(0,u.Cb)({readOnly:!0})],O.prototype,"allSublayers",void 0),(0,a._)([(0,u.Cb)({json:{type:Object,write:!0}})],O.prototype,"customParameters",void 0),(0,a._)([(0,u.Cb)({json:{type:Object,write:!0}})],O.prototype,"customLayerParameters",void 0),(0,a._)([(0,u.Cb)({type:String,json:{write:!0}})],O.prototype,"copyright",void 0),(0,a._)([(0,u.Cb)()],O.prototype,"description",void 0),(0,a._)([(0,u.Cb)({readOnly:!0})],O.prototype,"dimensions",void 0),(0,a._)([(0,u.Cb)({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],O.prototype,"fullExtent",void 0),(0,a._)([(0,m.r)(["web-document","portal-item"],"fullExtent",["extent"])],O.prototype,"readFullExtentFromItemOrMap",null),(0,a._)([(0,K.c)(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],O.prototype,"writeFullExtent",null),(0,a._)([(0,u.Cb)()],O.prototype,"fullExtents",void 0),(0,a._)([(0,u.Cb)({type:String,json:{write:{ignoreOrigin:!0}}})],O.prototype,"featureInfoFormat",null),(0,a._)([(0,u.Cb)({type:[String],readOnly:!0})],O.prototype,"featureInfoFormats",void 0),(0,a._)([(0,u.Cb)({type:String,json:{write:{ignoreOrigin:!0}}})],O.prototype,"featureInfoUrl",void 0),(0,a._)([(0,u.Cb)()],O.prototype,"fetchFeatureInfoFunction",void 0),(0,a._)([(0,u.Cb)({type:String,json:{origins:{"web-document":{default:"image/png",type:Ce.jsonValues,read:{reader:Ce.read,source:"format"},write:{writer:Ce.write,target:"format"}}}}})],O.prototype,"imageFormat",void 0),(0,a._)([(0,m.r)("imageFormat",["supportedImageFormatTypes"])],O.prototype,"readImageFormat",null),(0,a._)([(0,u.Cb)({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],O.prototype,"imageMaxHeight",void 0),(0,a._)([(0,u.Cb)({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],O.prototype,"imageMaxWidth",void 0),(0,a._)([(0,u.Cb)()],O.prototype,"imageTransparency",void 0),(0,a._)([(0,u.Cb)(ne.rn)],O.prototype,"legendEnabled",void 0),(0,a._)([(0,u.Cb)({type:["show","hide","hide-children"]})],O.prototype,"listMode",void 0),(0,a._)([(0,u.Cb)({type:String,json:{write:{ignoreOrigin:!0}}})],O.prototype,"mapUrl",void 0),(0,a._)([(0,u.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],O.prototype,"isReference",void 0),(0,a._)([(0,u.Cb)({type:["WMS"]})],O.prototype,"operationalLayerType",void 0),(0,a._)([(0,u.Cb)()],O.prototype,"resourceInfo",void 0),(0,a._)([(0,u.Cb)({type:W.Z,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],O.prototype,"spatialReference",void 0),(0,a._)([(0,m.r)(["web-document","portal-item"],"spatialReference",["spatialReferences"])],O.prototype,"readSpatialReferenceFromItemOrDocument",null),(0,a._)([(0,u.Cb)({type:[v.z8],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],O.prototype,"spatialReferences",void 0),(0,a._)([(0,K.c)(["web-document","portal-item"],"spatialReferences")],O.prototype,"writeSpatialReferences",null),(0,a._)([(0,u.Cb)({type:$.Z.ofType(ge),json:{write:{target:"layers",overridePolicy(t,r,s){if(function pt(t,r){return t.some(s=>{for(const o in s)if((0,V.d)(s,o,null,r))return!0;return!1})}(this.allSublayers,s))return{ignoreOrigin:!0}}}}})],O.prototype,"sublayers",void 0),(0,a._)([(0,m.r)(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],O.prototype,"readSublayersFromItemOrMap",null),(0,a._)([(0,m.r)("service","sublayers",["layers"])],O.prototype,"readSublayers",null),(0,a._)([(0,K.c)("sublayers",{layers:{type:[ge]},visibleLayers:{type:[String]}})],O.prototype,"writeSublayers",null),(0,a._)([(0,u.Cb)({json:{read:!1},readOnly:!0,value:"wms"})],O.prototype,"type",void 0),(0,a._)([(0,u.Cb)(ne.HQ)],O.prototype,"url",null),(0,a._)([(0,u.Cb)({type:String,json:{write:{ignoreOrigin:!0}}})],O.prototype,"version",void 0),O=(0,a._)([(0,f.j)("esri.layers.WMSLayer")],O);const ct=O},70509:(q,N,i)=>{i.d(N,{I:()=>z});var y=i(15861),a=i(50484),j=i(11931),B=i(26152),w=i(66476),L=i(37636),$=i(57964),Z=i(4703),F=i(51172),U=i(79412),S=i(6785),h=i(80543),u=(i(14007),i(65311),i(62185)),v=i(10141),m=i(7547),f=i(85971),K=i(61018),V=i(27835),G=i(57437),W=i(50318);const z=fe=>{let Y=class extends fe{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,F.SC)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(M){M!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",M))}readPortalItem(M,P,p){if(P.itemId)return new V.default({id:P.itemId,portal:p?.portal})}writePortalItem(M,P){M?.id&&(P.itemId=M.id)}loadFromPortal(M,P){var p=this;return(0,y.Z)(function*(){if(p.portalItem?.id)try{const{load:c}=yield Promise.all([i.e(2772),i.e(8592),i.e(6964)]).then(i.bind(i,36964));return(0,U.k_)(P),yield c({instance:p,supportedTypes:M.supportedTypes,validateItem:M.validateItem,supportsData:M.supportsData,layerModuleTypeMap:M.layerModuleTypeMap},P)}catch(c){throw(0,U.D_)(c)||Z.Z.getLogger(p).warn(`Failed to load layer (${p.title}, ${p.id}) portal item (${p.portalItem.id})\n  ${c}`),c}})()}finishLoadEditablePortalLayer(M){var P=this;return(0,y.Z)(function*(){P._set("userHasEditingPrivileges",yield P._fetchUserHasEditingPrivileges(M).catch(p=>((0,U.r9)(p),!0)))})()}setUserPrivileges(M,P){var p=this;return(0,y.Z)(function*(){if(!j.default.userPrivilegesApplied)return p.finishLoadEditablePortalLayer(P);if(p.url)try{const{features:{edit:c,fullEdit:R},content:{updateItem:C}}=yield p._fetchUserPrivileges(M,P);p._set("userHasEditingPrivileges",c),p._set("userHasFullEditingPrivileges",R),p._set("userHasUpdateItemPrivileges",C)}catch(c){(0,U.r9)(c)}})()}_fetchUserPrivileges(M,P){var p=this;return(0,y.Z)(function*(){let c=p.portalItem;if(!M||!c||!c.loaded||c.sourceUrl)return p._fetchFallbackUserPrivileges(P);const R=M===c.id;if(R&&c.portal.user)return(0,W.Ss)(c);let C,ae;if(R)C=c.portal.url;else try{C=yield(0,f.oP)(p.url,P)}catch(te){(0,U.r9)(te)}if(!C||!(0,S.Zo)(C,c.portal.url))return p._fetchFallbackUserPrivileges(P);try{const te=null!=P?P.signal:null;ae=yield B.id?.getCredential(`${C}/sharing`,{prompt:!1,signal:te})}catch(te){(0,U.r9)(te)}if(!ae)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(R?yield c.reload():(c=new V.default({id:M,portal:{url:C}}),yield c.load(P)),c.portal.user)return(0,W.Ss)(c)}catch(te){(0,U.r9)(te)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_fetchFallbackUserPrivileges(M){var P=this;return(0,y.Z)(function*(){let p=!0;try{p=yield P._fetchUserHasEditingPrivileges(M)}catch(c){(0,U.r9)(c)}return{features:{edit:p,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(M){var P=this;return(0,y.Z)(function*(){const p=P.url?B.id?.findCredential(P.url):null;if(!p)return!0;const c=ee.credential===p?ee.user:yield P._fetchEditingUser(M);return ee.credential=p,ee.user=c,null==c?.privileges||c.privileges.includes("features:user:edit")})()}_fetchEditingUser(M){var P=this;return(0,y.Z)(function*(){const p=P.portalItem?.portal?.user;if(p)return p;const c=B.id?.findServerInfo(P.url??"");if(!c?.owningSystemUrl)return null;const R=`${c.owningSystemUrl}/sharing/rest`,C=K.Z.getDefault();if(C&&C.loaded&&(0,S.Fv)(C.restUrl)===(0,S.Fv)(R))return C.user;const ae=`${R}/community/self`,ne=null!=M?M.signal:null,re=yield(0,L.q6)((0,w.Z)(ae,{authMode:"no-prompt",query:{f:"json"},signal:ne}));return re.ok?G.Z.fromJSON(re.value.data):null})()}read(M,P){P&&(P.layer=this),super.read(M,P)}write(M,P){const p=P?.portal,c=this.portalItem?.id&&(this.portalItem.portal||K.Z.getDefault());return p&&c&&!(0,S.tm)(c.restUrl,p.restUrl)?(P.messages&&P.messages.push(new $.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(M,{...P,layer:this})}};return(0,a._)([(0,h.Cb)({type:V.default})],Y.prototype,"portalItem",null),(0,a._)([(0,u.r)("web-document","portalItem",["itemId"])],Y.prototype,"readPortalItem",null),(0,a._)([(0,m.c)("web-document","portalItem",{itemId:{type:String}})],Y.prototype,"writePortalItem",null),(0,a._)([(0,h.Cb)({clonable:!1})],Y.prototype,"resourceReferences",void 0),(0,a._)([(0,h.Cb)({type:Boolean,readOnly:!0})],Y.prototype,"userHasEditingPrivileges",void 0),(0,a._)([(0,h.Cb)({type:Boolean,readOnly:!0})],Y.prototype,"userHasFullEditingPrivileges",void 0),(0,a._)([(0,h.Cb)({type:Boolean,readOnly:!0})],Y.prototype,"userHasUpdateItemPrivileges",void 0),Y=(0,a._)([(0,v.j)("esri.layers.mixins.PortalLayer")],Y),Y},ee={credential:null,user:null}},25836:(q,N,i)=>{i.d(N,{Q:()=>P});var y=i(15861),a=i(50484),B=(i(14007),i(4703)),w=i(79412),L=i(80543),$=i(73018),F=(i(65311),i(10141)),U=i(76215),S=i(83944),u=(i(37636),i(57964),i(12926),i(43571));const v=new S.Z,m=new WeakMap;function G(p,c){return Number.isFinite(p)&&Number.isFinite(c)?c<=0?p:G(c,p%c):0}let W=0,z=0;function ee(){const p=Date.now();let c=!1;for(const R of v){const C=R.deref();C?C.refreshInterval&&p-(m.get(C)??0)+5>=6e4*C.refreshInterval&&(m.set(C,p),C.refresh(p)):c=!0}if(c)for(let R=v.length-1;R>=0;R--)v.at(R).deref()||v.removeAt(R)}(0,u.EH)(()=>{const p=Date.now();let c=0;for(const R of v){const C=R.deref();C&&(c=G(Math.round(6e4*C.refreshInterval),c),C.refreshInterval?m.get(C)||m.set(C,p):m.delete(C))}if(c!==z){if(z=c,clearInterval(W),0===z)return void(W=0);W=setInterval(ee,z)}});const P=p=>{let c=class extends p{constructor(...R){super(...R),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,w.Ds)(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||function f(p){(function V(p){return null!=p&&"object"==typeof p&&"refreshInterval"in p&&"refresh"in p})(p)&&v.push(new WeakRef(p))}(this)},()=>{})}destroy(){!function K(p){const c=v.find(R=>R.deref()===p);c&&v.remove(c)}(this)}castRefreshInterval(R){return R>=.1?R:R<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(R=Date.now()){(0,w.R8)(this._debounceHasDataChanged()).then(C=>{C&&this._set("refreshTimestamp",R),this.emit("refresh",{dataChanged:C})},C=>{B.Z.getLogger(this).error(C),this.emit("refresh",{dataChanged:!1,error:C})})}hasDataChanged(){return(0,y.Z)(function*(){return!0})()}get test(){}};return(0,a._)([(0,L.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:U.C}}}}})],c.prototype,"refreshInterval",void 0),(0,a._)([(0,$.p)("refreshInterval")],c.prototype,"castRefreshInterval",null),(0,a._)([(0,L.Cb)({readOnly:!0})],c.prototype,"refreshTimestamp",void 0),(0,a._)([(0,L.Cb)({readOnly:!0})],c.prototype,"refreshParameters",null),c=(0,a._)([(0,F.j)("esri.layers.mixins.RefreshableLayer")],c),c}},12522:(q,N,i)=>{i.d(N,{I:()=>x,n:()=>u});var y=i(50484),a=i(34411),j=i(95539),B=i(80543),Z=(i(14007),i(4703),i(65311),i(62185)),F=i(10141),U=i(76215),S=i(85295),h=i(97403),g=i(81238);const x={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:U.C}}},u=v=>{let m=class extends v{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(f,K){const V=K.timeInfo.exportOptions;if(!V)return null;const G=V.timeOffset,W=g.v.fromJSON(V.timeOffsetUnits);return G&&W?new j.Z({value:G,unit:W}):null}set timeInfo(f){(0,S.UF)(f,this.fieldsIndex),this._set("timeInfo",f)}};return(0,y._)([(0,B.Cb)({type:a.Z,json:{write:!1}})],m.prototype,"timeExtent",void 0),(0,y._)([(0,B.Cb)({type:j.Z})],m.prototype,"timeOffset",void 0),(0,y._)([(0,Z.r)("service","timeOffset",["timeInfo.exportOptions"])],m.prototype,"readOffset",null),(0,y._)([(0,B.Cb)({value:null,type:h.Z,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],m.prototype,"timeInfo",null),(0,y._)([(0,B.Cb)(x)],m.prototype,"useViewTime",void 0),m=(0,y._)([(0,F.j)("esri.layers.mixins.TemporalLayer")],m),m}},97403:(q,N,i)=>{i.d(N,{Z:()=>v});var y=i(50484),a=i(34411),j=i(95539),B=i(25387),w=i(89317),L=i(80543),U=(i(14007),i(4703),i(65311),i(62185)),S=i(10141),h=i(7547),g=i(764);function x(m,f){return j.Z.fromJSON({value:m,unit:f})}let u=class extends((0,B.J)(w.wq)){constructor(m){super(m),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(m,f){return f.timeExtent&&Array.isArray(f.timeExtent)&&2===f.timeExtent.length?a.Z.fromArray(f.timeExtent):null}writeFullTimeExtent(m,f){f.timeExtent=null!=m?.start&&null!=m.end?m.toArray():null}readInterval(m,f){return f.timeInterval&&f.timeIntervalUnits?x(f.timeInterval,f.timeIntervalUnits):f.defaultTimeInterval&&f.defaultTimeIntervalUnits?x(f.defaultTimeInterval,f.defaultTimeIntervalUnits):null}writeInterval(m,f){f.timeInterval=m?.toJSON().value??null,f.timeIntervalUnits=m?.toJSON().unit??null}};(0,y._)([(0,L.Cb)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],u.prototype,"cumulative",void 0),(0,y._)([(0,L.Cb)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],u.prototype,"endField",void 0),(0,y._)([(0,L.Cb)({type:a.Z,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"fullTimeExtent",void 0),(0,y._)([(0,U.r)("fullTimeExtent",["timeExtent"])],u.prototype,"readFullTimeExtent",null),(0,y._)([(0,h.c)("fullTimeExtent")],u.prototype,"writeFullTimeExtent",null),(0,y._)([(0,L.Cb)({type:Boolean,json:{write:!0}})],u.prototype,"hasLiveData",void 0),(0,y._)([(0,L.Cb)({type:j.Z,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"interval",void 0),(0,y._)([(0,U.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],u.prototype,"readInterval",null),(0,y._)([(0,h.c)("interval")],u.prototype,"writeInterval",null),(0,y._)([(0,L.Cb)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],u.prototype,"startField",void 0),(0,y._)([(0,L.Cb)((0,g.mi)("timeReference",!0))],u.prototype,"timeZone",void 0),(0,y._)([(0,L.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"trackIdField",void 0),(0,y._)([(0,L.Cb)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],u.prototype,"useTime",void 0),(0,y._)([(0,L.Cb)({type:[Date],json:{read:!1}})],u.prototype,"stops",void 0),u=(0,y._)([(0,S.j)("esri.layers.support.TimeInfo")],u);const v=u},53715:(q,N,i)=>{i.d(N,{V:()=>L,g:()=>B});var y=i(15861),a=i(57964),j=i(79412);function B(Z,F,U){return w.apply(this,arguments)}function w(){return(w=(0,y.Z)(function*(Z,F,U){let S;try{S=yield createImageBitmap(Z)}catch(h){throw new a.Z("request:server",`Unable to load ${F}`,{url:F,error:h})}return(0,j.k_)(U),S})).apply(this,arguments)}function L(Z,F,U,S,h){return $.apply(this,arguments)}function $(){return($=(0,y.Z)(function*(Z,F,U,S,h){let g;try{g=yield createImageBitmap(Z)}catch(x){throw new a.Z("request:server",`Unable to load tile ${F}/${U}/${S}`,{error:x,level:F,row:U,col:S})}return(0,j.k_)(h),g})).apply(this,arguments)}},50318:(q,N,i)=>{i.d(N,{$o:()=>h,Fj:()=>F,IW:()=>S,Ss:()=>u,_$:()=>Z,ck:()=>U,hz:()=>x,qj:()=>$});var y=i(15861),a=i(83821),j=i(43814),B=i(48230);function L(){return(L=(0,y.Z)(function*(v){const m=v.spatialReference;if(m.isWGS84)return v.clone();if(m.isWebMercator)return(0,B.Sx)(v);const f=j.Z.WGS84;return yield(0,a.initializeProjection)(m,f),(0,a.project)(v,f)})).apply(this,arguments)}function $(v,m){if(!Z(v,m)){const f=v.typeKeywords;f?f.push(m):v.typeKeywords=[m]}}function Z(v,m){return!!v.typeKeywords?.includes(m)}function F(v){return Z(v,x.HOSTED_SERVICE)}function U(v,m){const f=v.typeKeywords;if(f){const K=f.indexOf(m);K>-1&&f.splice(K,1)}}function S(v,m,f){f?$(v,m):U(v,m)}function h(v){return g.apply(this,arguments)}function g(){return g=(0,y.Z)(function*(v){const m=v.clone().normalize();let f;if(m.length>1)for(const K of m)f?K.width>f.width&&(f=K):f=K;else f=m[0];return function w(v){return L.apply(this,arguments)}(f)}),g.apply(this,arguments)}const x={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function u(v){const{portal:m,isOrgItem:f,itemControl:K}=v,V=m.user?.privileges;let G=!V||V.includes("features:user:edit"),W=!!f&&!!V?.includes("features:user:fullEdit");const z="update"===K||"admin"===K;return z?W=G=!0:W&&(G=!0),{features:{edit:G,fullEdit:W},content:{updateItem:z}}}},81238:(q,N,i)=>{i.d(N,{v:()=>a});const a=(0,i(84303).w)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})}}]);