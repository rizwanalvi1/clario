"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[8570],{2599:(nt,tt,i)=>{i.d(tt,{a:()=>Y,b:()=>H,n:()=>et,s:()=>w,t:()=>G}),i(14007);var Q=i(4703);function Y(r,a,o){G(r.typedBuffer,a.typedBuffer,o,r.typedBufferStride,a.typedBufferStride)}function G(r,a,o,M=4,s=M){if(r.length/M!=a.length/s)return;const T=r.length/M,C=o[0],y=o[1],O=o[2],g=o[3],D=o[4],v=o[5],L=o[6],I=o[7],U=o[8];let W=0,F=0;for(let b=0;b<T;b++){const $=a[W],Z=a[W+1],u=a[W+2],p=a[W+3];r[F]=C*$+g*Z+L*u,r[F+1]=y*$+D*Z+I*u,r[F+2]=O*$+v*Z+U*u,r[F+3]=p,W+=s,F+=M}}function et(r,a){const o=Math.min(r.count,a.count),M=r.typedBuffer,s=r.typedBufferStride,T=a.typedBuffer,C=a.typedBufferStride;for(let y=0;y<o;y++){const O=y*s,g=y*C,D=T[g],v=T[g+1],L=T[g+2],I=D*D+v*v+L*L;if(I>0){const U=1/Math.sqrt(I);M[O]=U*D,M[O+1]=U*v,M[O+2]=U*L}}}function H(r,a,o){w(r.typedBuffer,a,o,r.typedBufferStride)}function w(r,a,o,M=4){const s=Math.min(r.length/M,a.count),T=a.typedBuffer,C=a.typedBufferStride;let y=0,O=0;for(let g=0;g<s;g++)r[O]=o*T[y],r[O+1]=o*T[y+1],r[O+2]=o*T[y+2],r[O+3]=o*T[y+3],y+=C,O+=M}Object.freeze(Object.defineProperty({__proto__:null,normalize:et,scale:w,scaleView:H,transformMat3:G,transformMat3View:Y,transformMat4:function X(r,a,o,M=4,s=M){if(r.length/M!=a.length/s)return void Q.Z.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const T=r.length/M,C=o[0],y=o[1],O=o[2],g=o[3],D=o[4],v=o[5],L=o[6],I=o[7],U=o[8],W=o[9],F=o[10],b=o[11],$=o[12],Z=o[13],u=o[14],p=o[15];let j=0,R=0;for(let z=0;z<T;z++){const S=a[j],N=a[j+1],K=a[j+2],B=a[j+3];r[R]=C*S+D*N+U*K+$*B,r[R+1]=y*S+v*N+W*K+Z*B,r[R+2]=O*S+L*N+F*K+u*B,r[R+3]=g*S+I*N+b*K+p*B,j+=s,R+=M}},transformMat4View:function k(r,a,o){if(r.count!==a.count)return;const M=r.count,s=o[0],T=o[1],C=o[2],y=o[3],O=o[4],g=o[5],D=o[6],v=o[7],L=o[8],I=o[9],U=o[10],W=o[11],F=o[12],b=o[13],$=o[14],Z=o[15],u=r.typedBuffer,p=r.typedBufferStride,j=a.typedBuffer,R=a.typedBufferStride;for(let z=0;z<M;z++){const S=z*p,N=z*R,K=j[N],B=j[N+1],A=j[N+2],h=j[N+3];u[S]=s*K+O*B+L*A+F*h,u[S+1]=T*K+g*B+I*A+b*h,u[S+2]=C*K+D*B+U*A+$*h,u[S+3]=y*K+v*B+W*A+Z*h}}},Symbol.toStringTag,{value:"Module"}))},38570:(nt,tt,i)=>{i.r(tt),i.d(tt,{VectorType:()=>u,loadProjectErrorMessage:()=>y,logProjectionError:()=>O,project:()=>z,projectFromPCPF:()=>L,projectNormalFromPCPF:()=>D,projectNormalToPCPF:()=>g,projectTangentFromPCPF:()=>Z,projectTangentToPCPF:()=>$,projectToPCPF:()=>v,transformNormal:()=>I,transformTangent:()=>U,transformVectorENUPlateCarree:()=>W,transformVectorWMPlateCarree:()=>F});var ot=i(55117),Q=i(92899),rt=i(38519),k=i(39061),X=i(41666),Y=i(43548),G=i(73145),et=i(83821),H=i(66588),w=i(44381),q=i(83639),r=i(93404),a=i(82301),o=i(33721),M=i(48230),s=i(11716),T=i(43589),C=i(2599);const y="Projection may be possible after calling projection.load().";function O(t,e,n,_){t.error(`Failed to project from (wkid:${e.wkid}) to (wkid:${n.wkid}).${_?" ":""}${_}`)}function g(t,e,n,_,f){return R(p.TO_PCPF,s.ct.fromTypedArray(t),u.NORMAL,s.fP.fromTypedArray(e),s.fP.fromTypedArray(n),_,s.ct.fromTypedArray(f))?f:null}function D(t,e,n,_,f){return R(p.FROM_PCPF,s.ct.fromTypedArray(t),u.NORMAL,s.fP.fromTypedArray(e),s.fP.fromTypedArray(n),_,s.ct.fromTypedArray(f))?f:null}function v(t,e,n){return(0,q.projectBuffer)(t,e,0,n,(0,H.rS)(e),0,t.length/3)?n:null}function L(t,e,n){return(0,q.projectBuffer)(t,(0,H.rS)(n),0,e,n,0,t.length/3)?e:null}function I(t,e,n){return(0,Q.XL)(E,n),(0,T.t)(e,t,E),(0,ot.oc)(E)&&(0,T.n)(e,e),e}function U(t,e,n){return(0,Q.xO)(E,n),(0,C.t)(e,t,E),(0,ot.oc)(E)&&(0,T.n)(e,e,4),e}function W(t,e,n,_){const f=e===u.NORMAL;return b(t,e,n,(P,m)=>{const c=Math.cos((0,ot.Vl)(P));m[0]=f?c:1/c,m[1]=1},_)}function F(t,e,n,_){const f=e===u.NORMAL;return b(t,e,n,(P,m)=>{const c=Math.cosh(-P/a.sv.radius);m[0]=1,m[1]=f?c:1/c},_)}function b(t,e,n,_,f){const P=e===u.NORMAL?3:4,m=[0,0];for(let c=0,V=1;c<t.length;c+=P,V+=3){_(n[V],m);const d=t[c]*m[0],x=t[c+1]*m[1],l=t[c+2],J=1/Math.sqrt(d*d+x*x+l*l);f[c]=d*J,f[c+1]=x*J,f[c+2]=l*J,4===P&&(f[c+3]=t[c+3])}return f}function $(t,e,n,_,f){if(!R(p.TO_PCPF,s.ct.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),u.TANGENT,s.fP.fromTypedArray(e),s.fP.fromTypedArray(n),_,s.ct.fromTypedArray(f,4*Float32Array.BYTES_PER_ELEMENT)))return null;for(let P=3;P<t.length;P+=4)f[P]=t[P];return f}function Z(t,e,n,_,f){if(!R(p.FROM_PCPF,s.ct.fromTypedArray(t,16),u.TANGENT,s.fP.fromTypedArray(e),s.fP.fromTypedArray(n),_,s.ct.fromTypedArray(f,16)))return null;for(let P=3;P<t.length;P+=4)f[P]=t[P];return f}var u,p,t;function j(t,e,n,_,f){switch((0,w.B)(_,n,h,_),t===p.FROM_PCPF&&(0,k.U_)(h,h),e){case u.NORMAL:return(0,Q.XL)(f,h);case u.TANGENT:return(0,Q.xO)(f,h)}}function R(t,e,n,_,f,P,m){if(!e)return;const c=_.count,V=(0,H.rS)(P);if(function K(t){return t.isWGS84||(0,o.yW)(t)||(0,o.BZ)(t)||(0,o.V2)(t)}(P))for(let d=0;d<c;d++)f.getVec(d,B),e.getVec(d,A),(0,Y.t)(A,A,j(t,n,B,V,E)),m.setVec(d,A);else for(let d=0;d<c;d++){f.getVec(d,B),e.getVec(d,A);const x=(0,M.mZ)(_.get(d,1));let l=Math.cos(x);n===u.TANGENT!=(t===p.TO_PCPF)&&(l=1/l),j(t,n,B,V,E),t===p.TO_PCPF?(E[0]*=l,E[1]*=l,E[2]*=l,E[3]*=l,E[4]*=l,E[5]*=l):(E[0]*=l,E[3]*=l,E[6]*=l,E[1]*=l,E[4]*=l,E[7]*=l),(0,Y.t)(A,A,E),(0,Y.n)(A,A),m.setVec(d,A)}return m}function z(t){return"local"===t.vertexSpace.type?function S({vertexSpace:t,transform:e,inSpatialReference:n,outSpatialReference:_,localMode:f,outPositions:P,positions:m}){const c=t.origin??G.AG,V=null!=t.origin?e?.localMatrix??X.Wd:X.Wd,d=(0,H.rS)(n),x=_.isWebMercator&&f||!(0,et.canProjectWithoutEngine)(n,d)?n:d;(0,w.B)(n,c,h,x),(0,k.Jp)(h,h,V);const l=P??(0,r.bg)(m.length);return(0,T.a)(l,m,h),(0,q.projectBuffer)(l,x,0,l,_,0,l.length/3),l}(t):function N({vertexSpace:t,transform:e,outPositions:n,positions:_,inSpatialReference:f,outSpatialReference:P}){const m=null!=t.origin?e?.localMatrix??X.Wd:X.Wd,c=n??(0,r.bg)(_.length);(0,k.fS)(m,X.Wd)?(0,r.JK)(c,_):(0,T.a)(c,_,m);const V=t.origin??G.AG;if(!(0,Y.e)(V,G.AG)){const[d,x,l]=V;for(let J=0;J<c.length;J+=3)c[J]+=d,c[J+1]+=x,c[J+2]+=l}return(0,q.projectBuffer)(c,f,0,c,P,0,c.length/3)?c:null}(t)}(t=u||(u={}))[t.NORMAL=0]="NORMAL",t[t.TANGENT=1]="TANGENT",function(t){t[t.TO_PCPF=0]="TO_PCPF",t[t.FROM_PCPF=1]="FROM_PCPF"}(p||(p={}));const B=(0,G.Ue)(),A=(0,G.Ue)(),h=(0,X.Ue)(),E=(0,rt.Ue)()}}]);