"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[7400,318,5398],{52540:(Re,ge,p)=>{p.d(ge,{z:()=>i});var K=p(39921);class i{constructor(V,Q){this._storage=new K.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=V,this._storage.register(this),Q&&this._storage.registerRemoveFunc("",Q)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(V,Q,j=1){this._storage.put(this,V,Q,j,1)}pop(V){return this._storage.pop(this,V)}get(V){return this._storage.get(this,V)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(V){this._storage.maxSize=V}resetHitRate(){}}},39921:(Re,ge,p)=>{p.d(ge,{WJ:()=>j,Xq:()=>Q});var V,he,K=p(43029);(he=V||(V={}))[he.ALL=0]="ALL",he[he.SOME=1]="SOME";class Q{constructor(w,b,C){this.name=w,this._storage=b,this.id=k+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),C&&(this._storage.registerRemoveFunc(this.id,C),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(w){return this._storage.getSize(this,w)}resetHitRate(){this._hit=this._miss=0}put(w,b,C,L=0){this._storage.put(this,w,b,C,L)}pop(w){const b=this._storage.pop(this,w);return void 0===b?++this._miss:++this._hit,b}get(w){const b=this._storage.get(this,w);return void 0===b?++this._miss:++this._hit,b}peek(w){return this._storage.peek(this,w)}updateSize(w,b,C){this._storage.updateSize(this,w,b,C)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class j{get size(){return this._size}constructor(w=10485760){this._maxSize=w,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new K.Z,this._users=new K.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(w){this._users.push(w)}deregister(w){this._users.removeUnordered(w)}registerRemoveFunc(w,b){this._removeFuncs.push([w,b])}deregisterRemoveFunc(w){this._removeFuncs.filterInPlace(b=>b[0]!==w)}get maxSize(){return this._maxSize}set maxSize(w){this._maxSize=Math.max(w,-1),this._checkSize()}getSize(w,b){return this._db.get(w.id+b)?.size??0}put(w,b,C,L,Y){const N=this._db.get(b=w.id+b);if(N&&(this._size-=N.size,w.size-=N.size,this._db.delete(b),N.entry!==C&&this._notifyRemove(b,N.entry,N.size,V.ALL)),L>this._maxSize)return void this._notifyRemove(b,C,L,V.ALL);if(void 0===C)return void console.warn("Refusing to cache undefined entry ");if(!L||L<0)return console.warn(`Refusing to cache entry with size ${L} for key ${b}`),void this._notifyRemove(b,C,0,V.ALL);const Z=1+Math.max(Y,-4)- -3;this._db.set(b,new Se(C,L,Z)),this._size+=L,w.size+=L,this._checkSize()}updateSize(w,b,C,L){const Y=this._db.get(b=w.id+b);if(Y&&Y.entry===C){for(this._size-=Y.size,w.size-=Y.size;L>this._maxSize;){const N=this._notifyRemove(b,C,L,V.SOME);if(!(null!=N&&N>0))return void this._db.delete(b);L=N}Y.size=L,this._size+=L,w.size+=L,this._checkSize()}}pop(w,b){const C=this._db.get(b=w.id+b);if(C)return this._size-=C.size,w.size-=C.size,this._db.delete(b),++this._hit,C.entry;++this._miss}get(w,b){const C=this._db.get(b=w.id+b);if(void 0!==C)return this._db.delete(b),C.lives=C.lifetime,this._db.set(b,C),++this._hit,C.entry;++this._miss}peek(w,b){const C=this._db.get(w.id+b);return C?++this._hit:++this._miss,C?.entry}get performanceInfo(){const w={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},b={},C=new Array;this._db.forEach((N,Z)=>{const f=N.lifetime;C[f]=(C[f]||0)+N.size,this._users.forAll(m=>{const{id:g,name:v}=m;Z.startsWith(g)&&(b[v]=(b[v]||0)+N.size)})});const L={};this._users.forAll(N=>{const Z=N.name;"hitRate"in N&&"number"==typeof N.hitRate&&!isNaN(N.hitRate)&&N.hitRate>0?(b[Z]=b[Z]||0,L[Z]=Math.round(100*N.hitRate)+"%"):L[Z]="0%"});const Y=Object.keys(b);Y.sort((N,Z)=>b[Z]-b[N]),Y.forEach(N=>w[N]=Math.round(b[N]/2**20)+"MB / "+L[N]);for(let N=C.length-1;N>=0;--N){const Z=C[N];Z&&(w["Priority "+(N+-3-1)]=Math.round(Z/this._size*100)+"%")}return w}resetStats(){this._hit=this._miss=0,this._users.forAll(w=>w.resetHitRate())}clear(w){const b=w.id;this._db.forEach((C,L)=>{L.startsWith(b)&&(this._size-=C.size,this._db.delete(L),this._notifyRemove(L,C.entry,C.size,V.ALL))}),w.size=0}clearAll(){this._db.forEach((w,b)=>this._notifyRemove(b,w.entry,w.size,V.ALL)),this._users.forAll(w=>w.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(w,b,C,L){let Y;return this._removeFuncs.some(N=>{if(w.startsWith(N[0])){const Z=N[1](b,L,C);return"number"==typeof Z&&(Y=Z),!0}return!1}),Y}_checkSize(){this._users.forAll(w=>this._checkSizeLimits(w)),this._checkSizeLimits()}_checkSizeLimits(w){const b=w??this;if(b.maxSize<0||b.size<=b.maxSize)return;const C=w?.id;let L=!0;for(;L;){L=!1;for(const[Y,N]of this._db)if(0===N.lifetime&&(!C||Y.startsWith(C))){if(this._purgeItem(Y,N,w),b.size<=.9*b.maxSize)return;L||=this._db.has(Y)}}for(const[Y,N]of this._db)if((!C||Y.startsWith(C))&&(this._purgeItem(Y,N,w),b.size<=.9*b.maxSize))return}_purgeItem(w,b,C=this._users.find(L=>w.startsWith(L.id))){if(this._db.delete(w),b.lives<=1){this._size-=b.size,C&&(C.size-=b.size);const L=this._notifyRemove(w,b.entry,b.size,V.SOME);null!=L&&L>0&&(this._size+=L,C&&(C.size+=L),b.lives=b.lifetime,b.size=L,this._db.set(w,b))}else--b.lives,this._db.set(w,b)}}let k=0;class Se{constructor(w,b,C){this.entry=w,this.size=b,this.lifetime=C,this.lives=C}}},657:(Re,ge,p)=>{p.d(ge,{$c:()=>Y,Hg:()=>N,jW:()=>b,uD:()=>C});var K=p(73514),i=p(83944),ve=p(49301);const V=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function Q(f){return f instanceof K.Z}function j(f){return f instanceof i.Z?Object.keys(f.items):Q(f)?(0,ve.vw)(f).keys():f?Object.keys(f):[]}function k(f,m){return f instanceof i.Z?f.items[m]:f[m]}function he(f){return f?f.declaredClass:null}function w(f,m){const g=f.diff;if(g&&"function"==typeof g)return g(f,m);const v=j(f),I=j(m);if(0===v.length&&0===I.length)return;if(!v.length||!I.length||function Se(f,m){return!(!Array.isArray(f)||!Array.isArray(m))&&f.length!==m.length}(f,m))return{type:"complete",oldValue:f,newValue:m};const E=I.filter(_=>!v.includes(_)),T=v.filter(_=>!I.includes(_)),z=v.filter(_=>I.includes(_)&&k(f,_)!==k(m,_)).concat(E,T).sort(),l=he(f);if(l&&V.has(l)&&z.length)return{type:"complete",oldValue:f,newValue:m};let x;const J=Q(f)&&Q(m);for(const _ of z){const h=k(f,_),M=k(m,_);let G;if((J||"function"!=typeof h&&"function"!=typeof M)&&h!==M&&(null!=h||null!=M)){if(g&&g[_]&&"function"==typeof g[_])G=g[_]?.(h,M);else if(h instanceof Date&&M instanceof Date){if(h.getTime()===M.getTime())continue;G={type:"complete",oldValue:h,newValue:M}}else G="object"==typeof h&&"object"==typeof M&&he(h)===he(M)?w(h,M):{type:"complete",oldValue:h,newValue:M};null!=G&&(null!=x?x.diff[_]=G:x={type:"partial",diff:{[_]:G}})}}return x}function b(f,m){return C(f,m)}function C(f,m){if(null==f)return!1;const g=m.split(".");let v=f;for(const I of g){if("complete"===v.type)return!0;if("partial"!==v.type)return!1;{const E=v.diff[I];if(!E)return!1;v=E}}return!0}function Y(f,m){if(!f)return!1;if("partial"===f.type){const g=Object.keys(f.diff);return 1===g.length&&g[0]===m}return!1}function N(f,m){if("function"!=typeof f&&"function"!=typeof m&&(null!=f||null!=m))return null==f||null==m||"object"==typeof f&&"object"==typeof m&&he(f)!==he(m)?{type:"complete",oldValue:f,newValue:m}:w(f,m)}},60084:(Re,ge,p)=>{p.d(ge,{D:()=>i});var K=p(26496);function i(ve){ve?.writtenProperties&&ve.writtenProperties.forEach(({target:V,propName:Q,newOrigin:j})=>{(0,K.l)(V)&&j&&V.originOf(Q)!==j&&V.updateOrigin(Q,j)})}},26496:(Re,ge,p)=>{function K(i){return i&&"getAtOrigin"in i&&"originOf"in i}p.d(ge,{l:()=>K})},15398:(Re,ge,p)=>{p.d(ge,{A4:()=>ve,L9:()=>V,yV:()=>i});var K=p(25037);class i{}function ve(j){return j instanceof K.ld?j===i.instance:"unknown"===j?.toString().toLowerCase()}function V(j){return ve(j)?i.instance:j}i.instance=new K.vF("Etc/UTC")},66398:(Re,ge,p)=>{function i(c){return c?{originPosition:"upper-left"===c.originPosition?"upperLeft":"lower-left"===c.originPosition?"lowerLeft":c.originPosition,scale:c.tolerance?[c.tolerance,c.tolerance,1,1]:[1,1,1,1],translate:null!=c.extent?[c.extent.xmin,c.extent.ymax,c.extent.zmin??0,c.extent.mmin??0]:[0,0,0,0]}:null}function V(c){if(function ve(c){return"lowerLeft"===c.originPosition&&4===c.scale.length&&4===c.translate.length}(c))return c;const{originPosition:a,scale:d,translate:P}=c,B=d[1]??1;return{originPosition:"lowerLeft",scale:[d[0]??1,"lowerLeft"===a?B:-B,d[2]??1,d[3]??1],translate:[P[0]??0,P[1]??0,P[2]??0,P[3]??0]}}function f({scale:c,translate:a},d){return d*c[0]+a[0]}function m({scale:c,translate:a},d){return d*c[1]+a[1]}function g({scale:c,translate:a},d){return(d??0)*c[2]+a[2]}function v({scale:c,translate:a},d){return d?d*c[3]+a[3]:0}function I(c,a){return c&&a?l:c&&!a?T:!c&&a?z:E}p.d(ge,{G6:()=>Ae,Ie:()=>Me,J9:()=>lt,RF:()=>Le,U1:()=>Te,vY:()=>i}),p(40637);const E=(c,a)=>{const d=new Array(a.length);if(!a.length)return d;const P=a[0];let O=f(c,P[0]),B=m(c,P[1]);d[0]=[O,B];const{scale:q,originPosition:ne}=c,Pe=q[0],de="lowerLeft"===ne?q[1]:-q[1];for(let te=1;te<a.length;te++){const[re,ee]=a[te];O+=Pe*re,B+=de*ee,d[te]=[O,B]}return d},T=(c,a)=>{const d=new Array(a.length);if(!a.length)return d;const P=a[0];let O=f(c,P[0]),B=m(c,P[1]);d[0]=[O,B,g(c,P[2])];const{scale:q,originPosition:ne}=c,Pe=q[0],de="lowerLeft"===ne?q[1]:-q[1];for(let te=1;te<a.length;te++){const[re,ee,ce]=a[te];O+=Pe*re,B+=de*ee,d[te]=[O,B,g(c,ce)]}return d},z=(c,a)=>{const d=new Array(a.length);if(!a.length)return d;const P=a[0];let O=f(c,P[0]),B=m(c,P[1]);d[0]=[O,B,v(c,P[2])];const{scale:q,originPosition:ne}=c,Pe=q[0],de="lowerLeft"===ne?q[1]:-q[1];for(let te=1;te<a.length;te++){const[re,ee,ce]=a[te];O+=Pe*re,B+=de*ee,d[te]=[O,B,v(c,ce)]}return d},l=(c,a)=>{const d=new Array(a.length);if(!a.length)return d;const P=a[0];let O=f(c,P[0]),B=m(c,P[1]);d[0]=[O,B,g(c,P[2]),v(c,P[3])];const{scale:q,originPosition:ne}=c,Pe=q[0],de="lowerLeft"===ne?q[1]:-q[1];for(let te=1;te<a.length;te++){const[re,ee,ce,ze]=a[te];O+=Pe*re,B+=de*ee,d[te]=[O,B,g(c,ce),v(c,ze)]}return d};function x(c,a,d){const P=new Array(d.length);for(let O=0;O<d.length;O++)P[O]=a(c,d[O]);return P}function Le(c,a,d){const P=V(c);return a.x=function Q({scale:c,translate:a},d){return Math.round((d-a[0])/c[0])}(P,d.x),a.y=function j({scale:c,translate:a},d){return Math.round((d-a[1])/c[1])}(P,d.y),null!=d.z&&(a.z=function k({scale:c,translate:a},d){return Math.round(((d??0)-a[2])/c[2])}(P,d.z)),null!=d.m&&(a.m=function Se({scale:c,translate:a},d){return d?Math.round((d-a[3])/c[3]):0}(P,d.m)),a}function lt(c,a,d,P=d?.hasZ??!1,O=d?.hasM??!1){if(null!=d){const B=V(c);a.points=I(P,O)(B,d.points),a.hasZ=P,a.hasM=O}return a}function Te(c,a,d,P=null!=d?.z,O=null!=d?.m){if(null==d)return a;const B=V(c);return a.x=f(B,d.x),a.y=m(B,d.y),P&&(a.z=g(B,d.z)),O&&(a.m=v(B,d.m)),a}function Me(c,a,d,P=d?.hasZ??!1,O=d?.hasM??!1){if(null!=d){const B=V(c);a.rings=x(B,I(P,O),d.rings),a.hasZ=P,a.hasM=O}return a}function Ae(c,a,d,P=d?.hasZ??!1,O=d?.hasM??!1){if(null!=d){const B=V(c);a.paths=x(B,I(P,O),d.paths),a.hasZ=P,a.hasM=O}return a}},25607:(Re,ge,p)=>{p.r(ge),p.d(ge,{default:()=>Er});var K=p(15861),i=p(50484),ve=p(11931),V=p(2189),Q=p(35458),j=p(62691),N=(p(36699),p(12610),p(53722),p(82752),p(28999),p(38748),p(50923),p(42212),p(91963)),Z=p(4703),f=p(83944),m=p(57964),g=p(3233),v=p(71763),I=p(79412),E=p(77675),T=p(49602),z=p(6785),l=p(80543),_=(p(14007),p(65311),p(62185)),h=p(10141),M=p(7547),G=p(60084),X=p(26894),be=p(83821),ue=p(33721),Le=p(95060),We=p(19855),Be=p(80099),wt=p(70509),Ct=p(29717),lt=p(89713),Te=p(71950),Me=p(89317),Ae=p(35451);let c=class extends Me.wq{constructor(s){super(s),this.break=new Ae.Z({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),this.first=new Ae.Z({color:[0,255,0],size:20,outline:{color:[255,255,255],width:4}}),this.unlocated=new Ae.Z({color:[255,0,0],size:12,outline:{color:[255,255,255],width:3}}),this.last=new Ae.Z({color:[255,0,0],size:20,outline:{color:[255,255,255],width:4}}),this.middle=new Ae.Z({color:[51,51,51],size:12,outline:{color:[0,122,194],width:3}}),this.waypoint=new Ae.Z({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}})}};(0,i._)([(0,l.Cb)({types:Te.jY})],c.prototype,"break",void 0),(0,i._)([(0,l.Cb)({types:Te.jY})],c.prototype,"first",void 0),(0,i._)([(0,l.Cb)({types:Te.jY})],c.prototype,"unlocated",void 0),(0,i._)([(0,l.Cb)({types:Te.jY})],c.prototype,"last",void 0),(0,i._)([(0,l.Cb)({types:Te.jY})],c.prototype,"middle",void 0),(0,i._)([(0,l.Cb)({types:Te.jY})],c.prototype,"waypoint",void 0),c=(0,i._)([(0,h.j)("esri.layers.support.RouteStopSymbols")],c);const a=c;var d=p(66637),P=p(89481);let O=class extends Me.wq{constructor(s){super(s),this.directionLines=new d.Z({color:[0,122,194],width:6}),this.directionPoints=new Ae.Z({color:[255,255,255],size:6,outline:{color:[0,122,194],width:2}}),this.pointBarriers=new Ae.Z({style:"x",size:10,outline:{color:[255,0,0],width:3}}),this.polygonBarriers=new P.Z({color:[255,170,0,.6],outline:{width:7.5,color:[255,0,0,.6]}}),this.polylineBarriers=new d.Z({width:7.5,color:[255,85,0,.7]}),this.routeInfo=new d.Z({width:8,color:[20,89,127]}),this.stops=new a}};(0,i._)([(0,l.Cb)({types:Te.tY})],O.prototype,"directionLines",void 0),(0,i._)([(0,l.Cb)({types:Te.jY})],O.prototype,"directionPoints",void 0),(0,i._)([(0,l.Cb)({types:Te.jY})],O.prototype,"pointBarriers",void 0),(0,i._)([(0,l.Cb)({types:Te.CR})],O.prototype,"polygonBarriers",void 0),(0,i._)([(0,l.Cb)({types:Te.tY})],O.prototype,"polylineBarriers",void 0),(0,i._)([(0,l.Cb)({types:Te.tY})],O.prototype,"routeInfo",void 0),(0,i._)([(0,l.Cb)({type:a})],O.prototype,"stops",void 0),O=(0,i._)([(0,h.j)("esri.layers.support.RouteSymbols")],O);const B=O;var q=p(61018),ne=p(27835),Pe=p(50318),de=p(66476),te=p(15462),re=p(21070),ee=p(61142);let ce=class extends Me.wq{constructor(s){super(s),this.dataType=null,this.name=null,this.parameterNames=null,this.restrictionUsageParameterName=null,this.timeNeutralAttributeName=null,this.trafficSupport=null,this.units=null,this.usageType=null}};(0,i._)([(0,l.Cb)({type:String})],ce.prototype,"dataType",void 0),(0,i._)([(0,re.J)(ee.Ul,{ignoreUnknown:!1})],ce.prototype,"name",void 0),(0,i._)([(0,l.Cb)({type:[String]})],ce.prototype,"parameterNames",void 0),(0,i._)([(0,l.Cb)({type:String})],ce.prototype,"restrictionUsageParameterName",void 0),(0,i._)([(0,re.J)(ee.ZI,{ignoreUnknown:!1})],ce.prototype,"timeNeutralAttributeName",void 0),(0,i._)([(0,l.Cb)({type:String})],ce.prototype,"trafficSupport",void 0),(0,i._)([(0,re.J)(ee.dg)],ce.prototype,"units",void 0),(0,i._)([(0,re.J)(ee.E2)],ce.prototype,"usageType",void 0),ce=(0,i._)([(0,h.j)("esri.rest.support.NetworkAttribute")],ce);const ze=ce;let De=class extends Me.wq{constructor(s){super(s),this.buildTime=null,this.name=null,this.networkAttributes=null,this.networkSources=null,this.state=null}};(0,i._)([(0,l.Cb)({type:Number})],De.prototype,"buildTime",void 0),(0,i._)([(0,l.Cb)({type:String})],De.prototype,"name",void 0),(0,i._)([(0,l.Cb)({type:[ze]})],De.prototype,"networkAttributes",void 0),(0,i._)([(0,l.Cb)()],De.prototype,"networkSources",void 0),(0,i._)([(0,l.Cb)({type:String})],De.prototype,"state",void 0),De=(0,i._)([(0,h.j)("esri.rest.support.NetworkDataset")],De);const Ke=De;var at=p(98346);let we=class extends Me.wq{constructor(s){super(s),this.accumulateAttributeNames=null,this.attributeParameterValues=null,this.currentVersion=null,this.defaultTravelMode=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsSupportedLanguages=null,this.directionsTimeAttribute=null,this.hasZ=null,this.impedance=null,this.networkDataset=null,this.supportedTravelModes=null}readAccumulateAttributes(s){return null==s?null:s.map(u=>ee.Ul.fromJSON(u))}writeAccumulateAttributes(s,u,y){s?.length&&(u[y]=s.map(S=>ee.Ul.toJSON(S)))}get capabilities(){return{supportsNow:(this.currentVersion??10)>=10.81}}readDefaultTravelMode(s,u){const y=u.supportedTravelModes?.find(({id:S})=>S===u.defaultTravelMode)??u.supportedTravelModes?.find(({itemId:S})=>S===u.defaultTravelMode);return y?at.Z.fromJSON(y):null}};(0,i._)([(0,l.Cb)()],we.prototype,"accumulateAttributeNames",void 0),(0,i._)([(0,_.r)("accumulateAttributeNames")],we.prototype,"readAccumulateAttributes",null),(0,i._)([(0,M.c)("accumulateAttributeNames")],we.prototype,"writeAccumulateAttributes",null),(0,i._)([(0,l.Cb)()],we.prototype,"attributeParameterValues",void 0),(0,i._)([(0,l.Cb)()],we.prototype,"capabilities",null),(0,i._)([(0,l.Cb)()],we.prototype,"currentVersion",void 0),(0,i._)([(0,l.Cb)()],we.prototype,"defaultTravelMode",void 0),(0,i._)([(0,_.r)("defaultTravelMode",["defaultTravelMode","supportedTravelModes"])],we.prototype,"readDefaultTravelMode",null),(0,i._)([(0,l.Cb)()],we.prototype,"directionsLanguage",void 0),(0,i._)([(0,re.J)(ee.GX)],we.prototype,"directionsLengthUnits",void 0),(0,i._)([(0,l.Cb)()],we.prototype,"directionsSupportedLanguages",void 0),(0,i._)([(0,re.J)(ee.ZI,{ignoreUnknown:!1})],we.prototype,"directionsTimeAttribute",void 0),(0,i._)([(0,l.Cb)()],we.prototype,"hasZ",void 0),(0,i._)([(0,re.J)(ee.Ul,{ignoreUnknown:!1})],we.prototype,"impedance",void 0),(0,i._)([(0,l.Cb)({type:Ke})],we.prototype,"networkDataset",void 0),(0,i._)([(0,l.Cb)({type:[at.Z]})],we.prototype,"supportedTravelModes",void 0),we=(0,i._)([(0,h.j)("esri.rest.support.NetworkServiceDescription")],we);const zt=we;function qe(s,u,y,S){S[y]=[u.length,u.length+s.length],s.forEach(R=>{u.push(R.geometry)})}function Mt(s,u,y){return ut.apply(this,arguments)}function ut(){return ut=(0,K.Z)(function*(s,u,y){if(!s)throw new m.Z("network-service:missing-url","Url to Network service is missing");const S=(0,te.lA)({f:"json",token:u},y),{data:R}=yield(0,de.Z)(s,S),W=R.currentVersion>=10.4?function Vt(s,u,y){return ct.apply(this,arguments)}(s,u,y):function Kt(s,u){return pt.apply(this,arguments)}(s,y),{defaultTravelMode:U,supportedTravelModes:$}=yield W;return R.defaultTravelMode=U,R.supportedTravelModes=$,zt.fromJSON(R)}),ut.apply(this,arguments)}function pt(){return(pt=(0,K.Z)(function*(s,u){const y=(0,te.lA)({f:"json"},u),{data:S}=yield(0,de.Z)(s.replace(/\/rest\/.*$/i,"/info"),y);if(!S?.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};const{owningSystemUrl:R}=S,W=(0,z.Qj)(R)+"/sharing/rest/portals/self",{data:U}=yield(0,de.Z)(W,y),$=(0,v.hS)("helperServices.routingUtilities.url",U);if(!$)return{supportedTravelModes:[],defaultTravelMode:null};const pe=(0,te.en)(R),ae=/\/solve$/i.test(pe.path)?"Route":/\/solveclosestfacility$/i.test(pe.path)?"ClosestFacility":"ServiceAreas",D=(0,te.lA)({f:"json",serviceName:ae},u),ye=(0,z.Qj)($)+"/GetTravelModes/execute",Ce=yield(0,de.Z)(ye,D),me=[];let oe=null;if(Ce?.data?.results?.length){const ie=Ce.data.results;for(const se of ie)if("supportedTravelModes"===se.paramName){if(se.value?.features)for(const{attributes:A}of se.value.features)if(A){const _e=JSON.parse(A.TravelMode);me.push(_e)}}else"defaultTravelMode"===se.paramName&&(oe=se.value)}return{supportedTravelModes:me,defaultTravelMode:oe}})).apply(this,arguments)}function ct(){return(ct=(0,K.Z)(function*(s,u,y){try{const S=(0,te.lA)({f:"json",token:u},y),R=(0,z.Qj)(s)+"/retrieveTravelModes",{data:{supportedTravelModes:W,defaultTravelMode:U}}=yield(0,de.Z)(R,S);return{supportedTravelModes:W,defaultTravelMode:U}}catch(S){throw new m.Z("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:S})}})).apply(this,arguments)}var Ht=p(37718),Yt=p(93566),Et=p(77185),Ne=p(93792),Tt=p(57678),Ot=p(84303);const Rt=new Ot.X({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let Ve=class extends Me.wq{constructor(s){super(s),this.description=null,this.type=null}};(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],Ve.prototype,"description",void 0),(0,i._)([(0,l.Cb)({type:String,json:{read:Rt.read,write:Rt.write}})],Ve.prototype,"type",void 0),Ve=(0,i._)([(0,h.j)("esri.rest.support.GPMessage")],Ve);const $t=Ve,Dt=new Ot.X({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});let et=class extends $t{constructor(s){super(s),this.type=null}};(0,i._)([(0,l.Cb)({type:String,json:{read:Dt.read,write:Dt.write}})],et.prototype,"type",void 0),et=(0,i._)([(0,h.j)("esri.rest.support.NAMessage")],et);const Qt=et;let He=class extends Me.wq{constructor(s){super(s)}};(0,i._)([(0,l.Cb)({json:{read:{source:"string"}}})],He.prototype,"text",void 0),(0,i._)([(0,re.J)(ee.Ks,{name:"stringType"})],He.prototype,"type",void 0),He=(0,i._)([(0,h.j)("esri.rest.support.DirectionsString")],He);const It=He;var Bt=p(44107);let Ue=class extends Me.wq{constructor(s){super(s),this.arriveTime=null,this.arriveTimeOffset=null,this.geometry=null,this.strings=null}readArriveTimeOffset(s,u){return(0,Et.pQ)(u.ETA,u.arriveTimeUTC)}readGeometry(s,u){return Bt.Z.fromJSON(u.point)}};(0,i._)([(0,l.Cb)({type:Date,json:{read:{source:"arriveTimeUTC"}}})],Ue.prototype,"arriveTime",void 0),(0,i._)([(0,l.Cb)()],Ue.prototype,"arriveTimeOffset",void 0),(0,i._)([(0,_.r)("arriveTimeOffset",["arriveTimeUTC","ETA"])],Ue.prototype,"readArriveTimeOffset",null),(0,i._)([(0,l.Cb)({type:Bt.Z})],Ue.prototype,"geometry",void 0),(0,i._)([(0,_.r)("geometry",["point"])],Ue.prototype,"readGeometry",null),(0,i._)([(0,l.Cb)({type:[It]})],Ue.prototype,"strings",void 0),Ue=(0,i._)([(0,h.j)("esri.rest.support.DirectionsEvent")],Ue);const Xt=Ue;var dt=p(64222);let Ge=class extends Q.Z{constructor(s){super(s),this.events=null,this.strings=null}readGeometry(s,u){const y=function kt(s){if(null==s||""===s)return null;let u=0,y=0,S=0,R=0;const W=[];let U,$,pe,ae,D,ye,Ce,me,oe=0,ie=0,se=0;if(D=s.match(/((\+|-)[^+\-|]+|\|)/g),D||(D=[]),0===parseInt(D[oe],32)){oe=2;const A=parseInt(D[oe],32);oe++,ye=parseInt(D[oe],32),oe++,1&A&&(ie=D.indexOf("|")+1,Ce=parseInt(D[ie],32),ie++),2&A&&(se=D.indexOf("|",ie)+1,me=parseInt(D[se],32),se++)}else ye=parseInt(D[oe],32),oe++;for(;oe<D.length&&"|"!==D[oe];){U=parseInt(D[oe],32)+u,oe++,u=U,$=parseInt(D[oe],32)+y,oe++,y=$;const A=[U/ye,$/ye];ie&&(ae=parseInt(D[ie],32)+S,ie++,S=ae,A.push(ae/Ce)),se&&(pe=parseInt(D[se],32)+R,se++,R=pe,A.push(pe/me)),W.push(A)}return{paths:[W],hasZ:ie>0,hasM:se>0}}(u.compressedGeometry);return null!=y?dt.Z.fromJSON(y):null}};(0,i._)([(0,l.Cb)({type:[Xt]})],Ge.prototype,"events",void 0),(0,i._)([(0,_.r)("geometry",["compressedGeometry"])],Ge.prototype,"readGeometry",null),(0,i._)([(0,l.Cb)({type:[It]})],Ge.prototype,"strings",void 0),Ge=(0,i._)([(0,h.j)("esri.rest.support.DirectionsFeature")],Ge);const qt=Ge;var xe=p(43814);let Oe=class extends Ne.Z{constructor(s){super(s),this.extent=null,this.features=[],this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(s,u){if(!s)return[];const y=u.summary.envelope.spatialReference??u.spatialReference,S=y&&xe.Z.fromJSON(y);return s.map(R=>{const W=qt.fromJSON(R);if(null!=W.geometry&&(W.geometry.spatialReference=S),null!=W.events)for(const U of W.events)null!=U.geometry&&(U.geometry.spatialReference=S);return W})}get mergedGeometry(){return this.features?function er(s,u){if(0===s.length)return new dt.Z({spatialReference:u});const y=[];for(const U of s)for(const $ of U.paths)y.push(...$);const S=[];y.forEach((U,$)=>{0!==$&&U[0]===y[$-1][0]&&U[1]===y[$-1][1]||S.push(U)});const{hasM:R,hasZ:W}=s[0];return new dt.Z({hasM:R,hasZ:W,paths:[S],spatialReference:u})}(this.features.map(({geometry:s})=>s),this.extent.spatialReference):null}get strings(){return this.features.flatMap(({strings:s})=>s).filter(Tt.pC)}};(0,i._)([(0,l.Cb)({type:X.Z,json:{read:{source:"summary.envelope"}}})],Oe.prototype,"extent",void 0),(0,i._)([(0,l.Cb)({nonNullable:!0})],Oe.prototype,"features",void 0),(0,i._)([(0,_.r)("features")],Oe.prototype,"readFeatures",null),(0,i._)([(0,l.Cb)()],Oe.prototype,"geometryType",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],Oe.prototype,"mergedGeometry",null),(0,i._)([(0,l.Cb)()],Oe.prototype,"routeId",void 0),(0,i._)([(0,l.Cb)()],Oe.prototype,"routeName",void 0),(0,i._)([(0,l.Cb)({value:null,readOnly:!0})],Oe.prototype,"strings",null),(0,i._)([(0,l.Cb)({json:{read:{source:"summary.totalDriveTime"}}})],Oe.prototype,"totalDriveTime",void 0),(0,i._)([(0,l.Cb)({json:{read:{source:"summary.totalLength"}}})],Oe.prototype,"totalLength",void 0),(0,i._)([(0,l.Cb)({json:{read:{source:"summary.totalTime"}}})],Oe.prototype,"totalTime",void 0),Oe=(0,i._)([(0,h.j)("esri.rest.support.DirectionsFeatureSet")],Oe);const tr=Oe;let Ie=class extends Me.wq{constructor(s){super(s),this.directionLines=null,this.directionPoints=null,this.directions=null,this.route=null,this.routeName=null,this.stops=null,this.traversedEdges=null,this.traversedJunctions=null,this.traversedTurns=null}};(0,i._)([(0,l.Cb)({type:Ne.Z,json:{write:!0}})],Ie.prototype,"directionLines",void 0),(0,i._)([(0,l.Cb)({type:Ne.Z,json:{write:!0}})],Ie.prototype,"directionPoints",void 0),(0,i._)([(0,l.Cb)({type:tr,json:{write:!0}})],Ie.prototype,"directions",void 0),(0,i._)([(0,l.Cb)({type:Q.Z,json:{write:!0}})],Ie.prototype,"route",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],Ie.prototype,"routeName",void 0),(0,i._)([(0,l.Cb)({type:[Q.Z],json:{write:!0}})],Ie.prototype,"stops",void 0),(0,i._)([(0,l.Cb)({type:Ne.Z,json:{write:!0}})],Ie.prototype,"traversedEdges",void 0),(0,i._)([(0,l.Cb)({type:Ne.Z,json:{write:!0}})],Ie.prototype,"traversedJunctions",void 0),(0,i._)([(0,l.Cb)({type:Ne.Z,json:{write:!0}})],Ie.prototype,"traversedTurns",void 0),Ie=(0,i._)([(0,h.j)("esri.rest.support.RouteResult")],Ie);const rr=Ie;function yt(s){return s?Ne.Z.fromJSON(s).features.filter(Tt.pC):[]}let Ze=class extends Me.wq{constructor(s){super(s),this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(s,u){return yt(u.barriers)}readPolylineBarriers(s){return yt(s)}readPolygonBarriers(s){return yt(s)}};(0,i._)([(0,l.Cb)({type:[Qt]})],Ze.prototype,"messages",void 0),(0,i._)([(0,l.Cb)({type:[Q.Z]})],Ze.prototype,"pointBarriers",void 0),(0,i._)([(0,_.r)("pointBarriers",["barriers"])],Ze.prototype,"readPointBarriers",null),(0,i._)([(0,l.Cb)({type:[Q.Z]})],Ze.prototype,"polylineBarriers",void 0),(0,i._)([(0,_.r)("polylineBarriers")],Ze.prototype,"readPolylineBarriers",null),(0,i._)([(0,l.Cb)({type:[Q.Z]})],Ze.prototype,"polygonBarriers",void 0),(0,i._)([(0,_.r)("polygonBarriers")],Ze.prototype,"readPolygonBarriers",null),(0,i._)([(0,l.Cb)({type:[rr]})],Ze.prototype,"routeResults",void 0),Ze=(0,i._)([(0,h.j)("esri.rest.support.RouteSolveResult")],Ze);const or=Ze;function tt(s){return s instanceof Ne.Z}function ht(){return(ht=(0,K.Z)(function*(s,u,y){const S=[],R=[],W={},U={},$=(0,te.en)(s),{path:pe}=$;tt(u.stops)&&qe(u.stops.features,R,"stops.features",W),tt(u.pointBarriers)&&qe(u.pointBarriers.features,R,"pointBarriers.features",W),tt(u.polylineBarriers)&&qe(u.polylineBarriers.features,R,"polylineBarriers.features",W),tt(u.polygonBarriers)&&qe(u.polygonBarriers.features,R,"polygonBarriers.features",W);const ae=yield(0,Yt.aX)(R);for(const me in W){const oe=W[me];S.push(me),U[me]=ae.slice(oe[0],oe[1])}if(function Gt(s,u){for(let y=0;y<u.length;y++){const S=s[u[y]];if(S&&S.length)for(const R of S)if(null!=R&&R.hasZ)return!0}return!1}(U,S)){let me=null;try{me=yield Mt(pe,u.apiKey,y)}catch{}me&&!me.hasZ&&function Wt(s,u){for(let y=0;y<u.length;y++){const S=s[u[y]];if(S&&S.length)for(const R of S)R.z=void 0}Z.Z.getLogger("esri.rest.networkService").warnOnce("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}(U,S)}for(const me in U)U[me].forEach((oe,ie)=>{(0,Ht.U2)(u,me)[ie].geometry=oe});const D={...y,query:{...$.query,...(0,Et.Yc)(u),f:"json"}},ye=pe.endsWith("/solve")?pe:`${pe}/solve`,{data:Ce}=yield(0,de.Z)(ye,D);return function ir(s){const{barriers:u,directionLines:y,directionPoints:S,directions:R,messages:W,polygonBarriers:U,polylineBarriers:$,routes:pe,stops:ae,traversedEdges:D,traversedJunctions:ye,traversedTurns:Ce}=s,me=A=>{const _e=ie.find(Ee=>Ee.routeName===A);if(null!=_e)return _e;const fe={routeId:ie.length+1,routeName:A};return ie.push(fe),fe},oe=A=>{const _e=ie.find(Ee=>Ee.routeId===A);if(null!=_e)return _e;const fe={routeId:A,routeName:null};return ie.push(fe),fe},ie=[];pe?.features.forEach((A,_e)=>{A.geometry.spatialReference=pe.spatialReference??void 0,ie.push({routeId:_e+1,routeName:A.attributes.Name,route:A})}),R?.forEach(A=>{const{routeName:_e}=A;me(_e).directions=A});const se=ae?.features.every(A=>null==A.attributes.RouteName)&&ie.length>0?ie[0].routeName:null;return ae?.features.forEach(A=>{A.geometry&&(A.geometry.spatialReference??=ae.spatialReference??void 0);const fe=me(se??A.attributes.RouteName);fe.stops??=[],fe.stops.push(A)}),y?.features.forEach(A=>{const fe=oe(A.attributes.RouteID),{geometryType:Ee,spatialReference:Fe}=y;fe.directionLines??={features:[],geometryType:Ee,spatialReference:Fe},fe.directionLines.features.push(A)}),S?.features.forEach(A=>{const fe=oe(A.attributes.RouteID),{geometryType:Ee,spatialReference:Fe}=S;fe.directionPoints??={features:[],geometryType:Ee,spatialReference:Fe},fe.directionPoints.features.push(A)}),D?.features.forEach(A=>{const fe=oe(A.attributes.RouteID),{geometryType:Ee,spatialReference:Fe}=D;fe.traversedEdges??={features:[],geometryType:Ee,spatialReference:Fe},fe.traversedEdges.features.push(A)}),ye?.features.forEach(A=>{const fe=oe(A.attributes.RouteID),{geometryType:Ee,spatialReference:Fe}=ye;fe.traversedJunctions??={features:[],geometryType:Ee,spatialReference:Fe},fe.traversedJunctions.features.push(A)}),Ce?.features.forEach(A=>{const fe=oe(A.attributes.RouteID);fe.traversedTurns??={features:[]},fe.traversedTurns.features.push(A)}),or.fromJSON({routeResults:ie,barriers:u,polygonBarriers:U,polylineBarriers:$,messages:W})}(Ce)})).apply(this,arguments)}var rt=p(40579),ot=p(21664),Ye=p(46947),$e=p(44042),Qe=p(74539),mt=p(62737),ft=p(25387),nr=p(1535);const lr={type:String,json:{read:{source:"token"},write:{target:"token"}}};var ar=p(40637);let je=class extends((0,ft.J)(Me.wq)){constructor(s){super(s),this.doNotLocateOnRestrictedElements=null,this.geometry=null,this.geometryType=null,this.name=null,this.spatialRelationship=null,this.type="layer",this.where=null}};(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],je.prototype,"doNotLocateOnRestrictedElements",void 0),(0,i._)([(0,l.Cb)({types:V.qM,json:{read:ar.im,write:!0}})],je.prototype,"geometry",void 0),(0,i._)([(0,re.J)(ee.KA)],je.prototype,"geometryType",void 0),(0,i._)([(0,l.Cb)({type:String,json:{name:"layerName",write:!0}})],je.prototype,"name",void 0),(0,i._)([(0,re.J)(ee.S7,{name:"spatialRel"})],je.prototype,"spatialRelationship",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],je.prototype,"type",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],je.prototype,"where",void 0),je=(0,i._)([(0,h.j)("esri.rest.support.DataLayer")],je);const ur=je;var gt;let st=gt=class extends Ne.Z{constructor(s){super(s),this.doNotLocateOnRestrictedElements=null}clone(){return new gt({doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements,...this.cloneProperties()})}};(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],st.prototype,"doNotLocateOnRestrictedElements",void 0),st=gt=(0,i._)([(0,h.j)("esri.rest.support.NetworkFeatureSet")],st);const pr=st;let Xe=class extends((0,ft.J)(Me.wq)){constructor(s){super(s),this.doNotLocateOnRestrictedElements=null,this.url=null}};(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],Xe.prototype,"doNotLocateOnRestrictedElements",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],Xe.prototype,"url",void 0),Xe=(0,i._)([(0,h.j)("esri.rest.support.NetworkUrl")],Xe);const cr=Xe;var vt;let F=vt=class extends((0,ft.J)(Me.wq)){constructor(s){super(s),this.accumulateAttributes=null,this.apiKey=null,this.attributeParameterValues=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsOutputType=null,this.directionsStyleName=null,this.directionsTimeAttribute=null,this.findBestSequence=null,this.geometryPrecision=null,this.geometryPrecisionM=null,this.geometryPrecisionZ=null,this.ignoreInvalidLocations=null,this.impedanceAttribute=null,this.outputGeometryPrecision=null,this.outputGeometryPrecisionUnits=null,this.outputLines="true-shape",this.outSpatialReference=null,this.overrides=null,this.pointBarriers=null,this.polygonBarriers=null,this.polylineBarriers=null,this.preserveFirstStop=null,this.preserveLastStop=null,this.preserveObjectID=null,this.restrictionAttributes=null,this.restrictUTurns=null,this.returnBarriers=!1,this.returnDirections=!1,this.returnPolygonBarriers=!1,this.returnPolylineBarriers=!1,this.returnRoutes=!0,this.returnStops=!1,this.returnTraversedEdges=null,this.returnTraversedJunctions=null,this.returnTraversedTurns=null,this.returnZ=!0,this.startTime=null,this.startTimeIsUTC=!0,this.stops=null,this.timeWindowsAreUTC=null,this.travelMode=null,this.useHierarchy=null,this.useTimeWindows=null}static from(s){return(0,nr.TJ)(vt,s)}readAccumulateAttributes(s){return null==s?null:s.map(u=>ee.Ul.fromJSON(u))}writeAccumulateAttributes(s,u,y){s?.length&&(u[y]=s.map(S=>ee.Ul.toJSON(S)))}writePointBarriers(s,u,y){it(s,u,y)}writePolygonBarrier(s,u,y){it(s,u,y)}writePolylineBarrier(s,u,y){it(s,u,y)}readRestrictionAttributes(s){return null==s?null:s.map(u=>ee.kL.fromJSON(u))}writeRestrictionAttributes(s,u,y){s?.length&&(u[y]=s.map(S=>ee.kL.toJSON(S)))}readStartTime(s,u){const{startTime:y}=u;return null==y?null:"now"===y?"now":new Date(y)}writeStartTime(s,u){null!=s&&(u.startTime="now"===s?"now":s.getTime())}readStops(s,u){return function gr(s){return function yr(s){return s&&"type"in s}(s)?ur.fromJSON(s):function mr(s){return s&&"url"in s}(s)?cr.fromJSON(s):function hr(s){return s&&"features"in s&&"doNotLocateOnRestrictedElements"in s}(s)?pr.fromJSON(s):function fr(s){return s&&"features"in s}(s)?Ne.Z.fromJSON(s):null}(u.stops)}writeStops(s,u,y){it(s,u,y)}};(0,i._)([(0,l.Cb)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],F.prototype,"accumulateAttributes",void 0),(0,i._)([(0,_.r)("accumulateAttributes")],F.prototype,"readAccumulateAttributes",null),(0,i._)([(0,M.c)("accumulateAttributes")],F.prototype,"writeAccumulateAttributes",null),(0,i._)([(0,l.Cb)(lr)],F.prototype,"apiKey",void 0),(0,i._)([(0,l.Cb)({json:{write:!0}})],F.prototype,"attributeParameterValues",void 0),(0,i._)([(0,l.Cb)({type:String,json:{write:!0}})],F.prototype,"directionsLanguage",void 0),(0,i._)([(0,re.J)(ee.GX)],F.prototype,"directionsLengthUnits",void 0),(0,i._)([(0,re.J)(ee.$7)],F.prototype,"directionsOutputType",void 0),(0,i._)([(0,re.J)(ee.WP)],F.prototype,"directionsStyleName",void 0),(0,i._)([(0,re.J)(ee.ZI,{name:"directionsTimeAttributeName",ignoreUnknown:!1})],F.prototype,"directionsTimeAttribute",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"findBestSequence",void 0),(0,i._)([(0,l.Cb)({type:Number,json:{write:!0}})],F.prototype,"geometryPrecision",void 0),(0,i._)([(0,l.Cb)({type:Number,json:{write:!0}})],F.prototype,"geometryPrecisionM",void 0),(0,i._)([(0,l.Cb)({type:Number,json:{write:!0}})],F.prototype,"geometryPrecisionZ",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"ignoreInvalidLocations",void 0),(0,i._)([(0,re.J)(ee.Ul,{name:"impedanceAttributeName",ignoreUnknown:!1})],F.prototype,"impedanceAttribute",void 0),(0,i._)([(0,l.Cb)({type:Number,json:{write:!0}})],F.prototype,"outputGeometryPrecision",void 0),(0,i._)([(0,re.J)(ee.q$)],F.prototype,"outputGeometryPrecisionUnits",void 0),(0,i._)([(0,re.J)(ee.no)],F.prototype,"outputLines",void 0),(0,i._)([(0,l.Cb)({type:xe.Z,json:{name:"outSR",write:!0}})],F.prototype,"outSpatialReference",void 0),(0,i._)([(0,l.Cb)({json:{write:!0}})],F.prototype,"overrides",void 0),(0,i._)([(0,l.Cb)({json:{name:"barriers",write:!0}})],F.prototype,"pointBarriers",void 0),(0,i._)([(0,M.c)("pointBarriers")],F.prototype,"writePointBarriers",null),(0,i._)([(0,l.Cb)({json:{write:!0}})],F.prototype,"polygonBarriers",void 0),(0,i._)([(0,M.c)("polygonBarriers")],F.prototype,"writePolygonBarrier",null),(0,i._)([(0,l.Cb)({json:{write:!0}})],F.prototype,"polylineBarriers",void 0),(0,i._)([(0,M.c)("polylineBarriers")],F.prototype,"writePolylineBarrier",null),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"preserveFirstStop",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"preserveLastStop",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"preserveObjectID",void 0),(0,i._)([(0,l.Cb)({type:[String],json:{name:"restrictionAttributeNames",write:!0}})],F.prototype,"restrictionAttributes",void 0),(0,i._)([(0,_.r)("restrictionAttributes")],F.prototype,"readRestrictionAttributes",null),(0,i._)([(0,M.c)("restrictionAttributes")],F.prototype,"writeRestrictionAttributes",null),(0,i._)([(0,re.J)(ee.ip)],F.prototype,"restrictUTurns",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"returnBarriers",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"returnDirections",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"returnPolygonBarriers",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"returnPolylineBarriers",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"returnRoutes",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"returnStops",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"returnTraversedEdges",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"returnTraversedJunctions",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"returnTraversedTurns",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"returnZ",void 0),(0,i._)([(0,l.Cb)({json:{write:!0}})],F.prototype,"startTime",void 0),(0,i._)([(0,_.r)("startTime")],F.prototype,"readStartTime",null),(0,i._)([(0,M.c)("startTime")],F.prototype,"writeStartTime",null),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"startTimeIsUTC",void 0),(0,i._)([(0,l.Cb)({json:{write:!0}})],F.prototype,"stops",void 0),(0,i._)([(0,_.r)("stops")],F.prototype,"readStops",null),(0,i._)([(0,M.c)("stops")],F.prototype,"writeStops",null),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"timeWindowsAreUTC",void 0),(0,i._)([(0,l.Cb)({type:at.Z,json:{write:!0}})],F.prototype,"travelMode",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"useHierarchy",void 0),(0,i._)([(0,l.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"useTimeWindows",void 0),F=vt=(0,i._)([(0,h.j)("esri.rest.support.RouteParameters")],F);const dr=F;function it(s,u,y){null!=s&&(u[y]=f.Z.isCollection(s)?{features:s.toArray().map(S=>S.toJSON())}:s.toJSON())}var vr=p(70263),ke=p(64157),_r=p(12628);function _t(s){return s.length?s:null}function St(s){switch(s){case"esriGeometryPoint":return{type:"esriSMS",style:"esriSMSCircle",size:12,color:[0,0,0,0],outline:St("esriGeometryPolyline")};case"esriGeometryPolyline":return{type:"esriSLS",style:"esriSLSSolid",width:1,color:[0,0,0,0]};case"esriGeometryPolygon":return{type:"esriSFS",style:"esriSFSNull",outline:St("esriGeometryPolyline")}}}function nt(s){return"layers"in s}function Zt(s){return bt.apply(this,arguments)}function bt(){return(bt=(0,K.Z)(function*(s){const u=xe.Z.WGS84;return yield(0,be.initializeProjection)(s.spatialReference,u),(0,be.project)(s,u)})).apply(this,arguments)}function Je(s,u){switch(u){case"seconds":return s/60;case"hours":return 60*s;case"days":return 60*s*24;default:return s}}function Pt(s,u){return"decimal-degrees"===u||"points"===u||"unknown"===u?s:(0,T.En)(s,u,"meters")}const Cr=f.Z.ofType(rt.Z),Mr=f.Z.ofType(ot.Z),Lt=f.Z.ofType(Ye.Z),At=f.Z.ofType($e.Z),Nt=f.Z.ofType(Qe.Z),jt=f.Z.ofType(ke.Z),Ut="esri.layers.RouteLayer",xt=()=>Z.Z.getLogger(Ut);let le=class extends((0,We.h7)((0,Ct.M)((0,Be.q)((0,wt.I)((0,g.R)(Le.Z)))))){constructor(s){super(s),this._cachedServiceDescription=null,this._featureCollection=null,this._type="Feature Collection",this.defaultSymbols=new B,this.directionLines=null,this.directionPoints=null,this.featureCollectionType="route",this.legendEnabled=!1,this.maxScale=0,this.minScale=0,this.pointBarriers=new Lt,this.polygonBarriers=new At,this.polylineBarriers=new Nt,this.routeInfo=null,this.spatialReference=xe.Z.WGS84,this.stops=new jt,this.type="route";const u=()=>{this._setStopSymbol(this.stops)};this.addHandles((0,E.on)(()=>this.stops,"change",u,{sync:!0,onListenerAdd:u}))}writeFeatureCollectionWebmap(s,u,y,S){const R=[this._writePolygonBarriers(),this._writePolylineBarriers(),this._writePointBarriers(),this._writeRouteInfo(),this._writeDirectionLines(),this._writeDirectionPoints(),this._writeStops()].filter($=>!!$),W=R.map(($,pe)=>pe);(0,v.RB)("web-map"===S.origin?"featureCollection.layers":"layers",R,u),u.opacity=this.opacity,u.visibility=this.visible,u.visibleLayers=W}readDirectionLines(s,u){return this._getNetworkFeatures(u,"DirectionLines",y=>rt.Z.fromGraphic(y))}readDirectionPoints(s,u){return this._getNetworkFeatures(u,"DirectionPoints",y=>ot.Z.fromGraphic(y))}get fullExtent(){const s=new X.Z({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:xe.Z.WGS84});if(null!=this.routeInfo?.geometry)return this.routeInfo.geometry.extent??s;if(null==this.stops)return s;const u=this.stops.filter(R=>null!=R.geometry);if(u.length<2)return s;const{spatialReference:y}=u.at(0).geometry;if(null==y)return s;const S=u.toArray().map(R=>{const W=R.geometry;return[W.x,W.y]});return new _r.Z({points:S,spatialReference:y}).extent}readMaxScale(s,u){return(nt(u)?u.layers:u.featureCollection?.layers)?.find(R=>null!=R.layerDefinition.maxScale)?.layerDefinition.maxScale??0}readMinScale(s,u){return(nt(u)?u.layers:u.featureCollection?.layers)?.find(R=>null!=R.layerDefinition.minScale)?.layerDefinition.minScale??0}readPointBarriers(s,u){return this._getNetworkFeatures(u,"Barriers",y=>Ye.Z.fromGraphic(y))}readPolygonBarriers(s,u){return this._getNetworkFeatures(u,"PolygonBarriers",y=>$e.Z.fromGraphic(y))}readPolylineBarriers(s,u){return this._getNetworkFeatures(u,"PolylineBarriers",y=>Qe.Z.fromGraphic(y))}readRouteInfo(s,u){return this._getNetworkFeatures(u,"RouteInfo",y=>mt.Z.fromGraphic(y)).at(0)??null}readSpatialReference(s,u){const y=nt(u)?u.layers:u.featureCollection?.layers;if(!y?.length)return xe.Z.WGS84;const{layerDefinition:S,featureSet:R}=y[0],W=R.features[0];return xe.Z.fromJSON(W?.geometry?.spatialReference??R.spatialReference??S.spatialReference??S.extent.spatialReference??ue.YU)}readStops(s,u){return this._getNetworkFeatures(u,"Stops",y=>ke.Z.fromGraphic(y),y=>this._setStopSymbol(y))}get title(){return this.routeInfo?.name??"Route"}set title(s){this._overrideIfSome("title",s)}get url(){return ve.default.routeServiceUrl}set url(s){this._set("url",null!=s?(0,lt.Nm)(s,xt()):ve.default.routeServiceUrl)}load(s){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},s)),Promise.resolve(this)}removeAll(){this.removeResult(),this.pointBarriers.removeAll(),this.polygonBarriers.removeAll(),this.polylineBarriers.removeAll(),this.stops.removeAll()}removeResult(){null!=this.directionLines&&(this.directionLines.removeAll(),this._set("directionLines",null)),null!=this.directionPoints&&(this.directionPoints.removeAll(),this._set("directionPoints",null)),null!=this.routeInfo&&this._set("routeInfo",null)}save(){var s=this;return(0,K.Z)(function*(){yield s.load();const{fullExtent:u,portalItem:y}=s;if(!y)throw new m.Z("routelayer:portal-item-not-set","save() requires to the layer to have a portal item");if(!y.id)throw new m.Z("routelayer:portal-item-not-saved","Please use saveAs() first to save the routelayer");if("Feature Collection"!==y.type)throw new m.Z("routelayer:portal-item-wrong-type",'Portal item needs to have type "Feature Collection"');if(null==s.routeInfo)throw new m.Z("routelayer:route-unsolved","save() requires a solved route");const{portal:S}=y;yield S.signIn(),S.user||(yield y.reload());const{itemUrl:R,itemControl:W}=y;if("admin"!==W&&"update"!==W)throw new m.Z("routelayer:insufficient-permissions","To save this layer, you need to be the owner or an administrator of your organization");const U={messages:[],origin:"portal-item",portal:S,url:R?(0,z.mN)(R):void 0,writtenProperties:[]},$=s.write(void 0,U);return y.extent=yield Zt(u),y.title=s.title,yield y.update({data:$}),y})()}saveAs(s,u={}){var y=this;return(0,K.Z)(function*(){if(yield y.load(),null==y.routeInfo)throw new m.Z("routelayer:route-unsolved","saveAs() requires a solved route");const S=ne.default.from(s).clone();S.extent??=(yield Zt(y.fullExtent)),S.id=null,S.portal??=q.Z.getDefault(),S.title??=y.title,S.type="Feature Collection",S.typeKeywords=["Data","Feature Collection",Pe.hz.MULTI_LAYER,"Route Layer"];const{portal:R}=S,W={messages:[],origin:"portal-item",portal:R,url:null,writtenProperties:[]};yield R.signIn();const U=u?.folder,$=y.write(void 0,W);return yield R.user?.addItem({item:S,folder:U,data:$}),y.portalItem=S,(0,G.D)(W),W.portalItem=S,S})()}solve(s,u){var y=this;return(0,K.Z)(function*(){const S=s?.stops??y.stops,R=s?.pointBarriers??_t(y.pointBarriers),W=s?.polylineBarriers??_t(y.polylineBarriers),U=s?.polygonBarriers??_t(y.polygonBarriers);if(null==S)throw new m.Z("routelayer:undefined-stops","the route layer must have stops defined in the route parameters.");if((function Sr(s){return"esri.rest.support.FeatureSet"===s.declaredClass}(S)||function br(s){return"esri.rest.support.NetworkFeatureSet"===s.declaredClass}(S))&&S.features.length<2||f.Z.isCollection(S)&&S.length<2)throw new m.Z("routelayer:insufficent-stops","the route layer must have two or more stops to solve a route.");if(f.Z.isCollection(S))for(const se of S)se.routeName=null;const $=s?.apiKey,pe=y.url,ae=yield y._getServiceDescription(pe,$,u),D=s?.travelMode??ae.defaultTravelMode,ye=s?.accumulateAttributes??[];null!=D&&(ye.push(D.distanceAttributeName),D.timeAttributeName&&ye.push(D.timeAttributeName));const Ce={accumulateAttributes:ye,directionsOutputType:"featuresets",ignoreInvalidLocations:!0,pointBarriers:R,polylineBarriers:W,polygonBarriers:U,preserveFirstStop:!0,preserveLastStop:!0,returnBarriers:!!R,returnDirections:!0,returnPolygonBarriers:!!U,returnPolylineBarriers:!!W,returnRoutes:!0,returnStops:!0,stops:S},me=dr.from(s??{});let oe;me.set(Ce);try{oe=yield function sr(s,u,y){return ht.apply(this,arguments)}(pe,me,u)}catch(se){throw(0,I.D_)(se)?se:new m.Z("routelayer:failed-route-request","the routing request failed",{error:se})}const ie=y._toRouteLayerSolution(oe);return y._isOverridden("title")||(y.title=ie.routeInfo.name??"Route"),function Pr(s,u,y){const S=u.networkDataset?.networkAttributes,R=S?.filter(({usageType:H})=>"cost"===H)??[],W=y.travelMode??u.defaultTravelMode;if(null==W)return void xt().warn("route-layer:missing-travel-mode","The routing service must have a default travel mode or one must be specified in the route parameter.");const{timeAttributeName:U,distanceAttributeName:$}=W,pe=R.find(({name:H})=>H===U),ae=R.find(({name:H})=>H===$),D=y.travelMode?.impedanceAttributeName??y.impedanceAttribute??u.impedance,ye=pe?.units,Ce=ae?.units;if(!ye||!Ce)throw new m.Z("routelayer:unknown-impedance-units","the units of either the distance or time impedance are unknown");const me=y.directionsLanguage??u.directionsLanguage,oe=y.accumulateAttributes??u.accumulateAttributeNames??[],ie=new Set(R.filter(({name:H})=>H===U||H===$||H===D||null!=H&&oe.includes(H)).map(({name:H})=>H)),se=H=>{for(const Ft in H)ie.has(Ft)||delete H[Ft]};for(const H of s.pointBarriers)null!=H.costs&&(H.addedCost=H.costs[D]??0,se(H.costs));for(const H of s.polygonBarriers)null!=H.costs&&(H.scaleFactor=H.costs[D]??1,se(H.costs));for(const H of s.polylineBarriers)null!=H.costs&&(H.scaleFactor=H.costs[D]??1,se(H.costs));const{routeInfo:A}=s,{findBestSequence:_e,preserveFirstStop:fe,preserveLastStop:Ee,startTimeIsUTC:Fe,timeWindowsAreUTC:Tr}=y;A.analysisSettings=new vr.Z({accumulateAttributes:oe,directionsLanguage:me,findBestSequence:_e,preserveFirstStop:fe,preserveLastStop:Ee,startTimeIsUTC:Fe,timeWindowsAreUTC:Tr,travelMode:W}),A.totalDuration=Je(A.totalCosts?.[U]??0,ye),A.totalDistance=Pt(A.totalCosts?.[$]??0,Ce),A.totalLateDuration=Je(A.totalViolations?.[U]??0,ye),A.totalWaitDuration=Je(A.totalWait?.[U]??0,ye),null!=A.totalCosts&&se(A.totalCosts),null!=A.totalViolations&&se(A.totalViolations),null!=A.totalWait&&se(A.totalWait);for(const H of s.stops)null!=H.serviceCosts&&(H.serviceDuration=Je(H.serviceCosts[U]??0,ye),H.serviceDistance=Pt(H.serviceCosts[$]??0,Ce),se(H.serviceCosts)),null!=H.cumulativeCosts&&(H.cumulativeDuration=Je(H.cumulativeCosts[U]??0,ye),H.cumulativeDistance=Pt(H.cumulativeCosts[$]??0,Ce),se(H.cumulativeCosts)),null!=H.violations&&(H.lateDuration=Je(H.violations[U]??0,ye),se(H.violations)),null!=H.wait&&(H.waitDuration=Je(H.wait[U]??0,ye),se(H.wait))}(ie,ae,me),ie})()}update(s){const{stops:u,directionLines:y,directionPoints:S,pointBarriers:R,polylineBarriers:W,polygonBarriers:U,routeInfo:$}=s;this.set({stops:u,pointBarriers:R,polylineBarriers:W,polygonBarriers:U}),this._set("directionLines",y),this._set("directionPoints",S),this._set("routeInfo",$),null!=$.geometry&&(this.spatialReference=$.geometry.spatialReference)}_getNetworkFeatures(s,u,y,S){const R=nt(s)?s.layers:s.featureCollection?.layers,W=R?.find(ie=>ie.layerDefinition.name===u);if(null==W)return new f.Z;const{layerDefinition:U,popupInfo:$,featureSet:pe}=W,ae=U.drawingInfo.renderer,{features:D}=pe,ye=pe.spatialReference??U.spatialReference??U.extent.spatialReference??ue.YU,Ce=ae&&(0,N.a)(ae),me=xe.Z.fromJSON(ye),oe=D.map(ie=>{const se=Q.Z.fromJSON(ie);null!=se.geometry&&null!=ie.geometry&&null==ie.geometry.spatialReference&&(se.geometry.spatialReference=me);const A=y(se);return A.symbol??=Ce?.getSymbol(se)??this._getNetworkSymbol(u),A.popupTemplate??=$&&j.Z.fromJSON($),A});return S&&oe.some(({symbol:ie})=>!ie)&&S(oe),new f.Z(oe)}_getNetworkSymbol(s){switch(s){case"Barriers":return this.defaultSymbols.pointBarriers;case"DirectionPoints":return this.defaultSymbols.directionPoints;case"DirectionLines":return this.defaultSymbols.directionLines;case"PolylineBarriers":return this.defaultSymbols.polylineBarriers;case"PolygonBarriers":return this.defaultSymbols.polygonBarriers;case"RouteInfo":return this.defaultSymbols.routeInfo;case"Stops":return null}}_getServiceDescription(s,u,y){var S=this;return(0,K.Z)(function*(){if(null!=S._cachedServiceDescription&&S._cachedServiceDescription.url===s)return S._cachedServiceDescription.serviceDescription;const R=yield Mt(s,u,y);return S._cachedServiceDescription={serviceDescription:R,url:s},R})()}_setStopSymbol(s){if(!s||0===s.length||null==this.defaultSymbols.stops||s.every(({symbol:D})=>null!=D))return;const{first:u,last:y,middle:S,unlocated:R,waypoint:W,break:U}=this.defaultSymbols.stops;if(null==this.routeInfo||1===s.length)return void s.forEach((D,ye)=>{switch(ye){case 0:D.symbol=u;break;case s.length-1:D.symbol=y;break;default:D.symbol=S}});const $=s.map(({sequence:D})=>D).filter(D=>null!=D),pe=Math.min(...$),ae=Math.max(...$);for(const D of s)D.symbol=D.sequence!==pe?D.sequence!==ae?"ok"===D.status||"not-located-on-closest"===D.status?"waypoint"!==D.locationType?"break"!==D.locationType?S:U:W:R:y:u}_toRouteLayerSolution(s){const u=s.routeResults[0].stops?.map(ae=>ke.Z.fromJSON(ae.toJSON()));this._setStopSymbol(u);const y=new jt(u),S=new At(s.polygonBarriers?.map(ae=>{const D=$e.Z.fromJSON(ae.toJSON());return D.symbol=this.defaultSymbols.polygonBarriers,D})),R=new Nt(s.polylineBarriers?.map(ae=>{const D=Qe.Z.fromJSON(ae.toJSON());return D.symbol=this.defaultSymbols.polylineBarriers,D})),W=new Lt(s.pointBarriers?.map(ae=>{const D=Ye.Z.fromJSON(ae.toJSON());return D.symbol=this.defaultSymbols.pointBarriers,D})),U=s.routeResults[0].route?.toJSON(),$=mt.Z.fromJSON(U);$.symbol=this.defaultSymbols.routeInfo;const pe=new Mr(s.routeResults[0].directionPoints?.features.map(ae=>{const D=ot.Z.fromJSON(ae.toJSON());return D.symbol=this.defaultSymbols.directionPoints,D}));return{directionLines:new Cr(s.routeResults[0].directionLines?.features.map(ae=>{const D=rt.Z.fromJSON(ae.toJSON());return D.symbol=this.defaultSymbols.directionLines,D})),directionPoints:pe,pointBarriers:W,polygonBarriers:S,polylineBarriers:R,routeInfo:$,stops:y}}_writeDirectionLines(){return this._writeNetworkFeatures(this.directionLines,this.defaultSymbols.directionLines,"esriGeometryPolyline",rt.Z.fields,"DirectionLines","Direction Lines")}_writeDirectionPoints(){return this._writeNetworkFeatures(this.directionPoints,this.defaultSymbols.directionPoints,"esriGeometryPoint",ot.Z.fields,"DirectionPoints","Direction Points")}_writeNetworkFeatures(s,u,y,S,R,W){if(!s?.length)return null;const U=this.spatialReference.toJSON(),{fullExtent:$,maxScale:pe,minScale:ae}=this;return{featureSet:{features:s.toArray().map(D=>function wr(s){const{attributes:u,geometry:y,popupTemplate:S,symbol:R}=s.toGraphic().toJSON();return{attributes:u,geometry:y,popupInfo:S,symbol:R}}(D)),geometryType:y,spatialReference:U},layerDefinition:{capabilities:"Query,Update,Editing",drawingInfo:{renderer:{type:"simple",symbol:null!=u?u.toJSON():St(y)}},extent:$.toJSON(),fields:S,geometryType:y,hasM:!1,hasZ:!1,maxScale:pe,minScale:ae,name:R,objectIdField:"ObjectID",spatialReference:U,title:W,type:"Feature Layer",typeIdField:""}}}_writePointBarriers(){return this._writeNetworkFeatures(this.pointBarriers,this.defaultSymbols.pointBarriers,"esriGeometryPoint",Ye.Z.fields,"Barriers","Point Barriers")}_writePolygonBarriers(){return this._writeNetworkFeatures(this.polygonBarriers,this.defaultSymbols.polygonBarriers,"esriGeometryPolygon",$e.Z.fields,"PolygonBarriers","Polygon Barriers")}_writePolylineBarriers(){return this._writeNetworkFeatures(this.polylineBarriers,this.defaultSymbols.polylineBarriers,"esriGeometryPolyline",Qe.Z.fields,"PolylineBarriers","Line Barriers")}_writeRouteInfo(){return this._writeNetworkFeatures(null!=this.routeInfo?new f.Z([this.routeInfo]):null,this.defaultSymbols.routeInfo,"esriGeometryPolyline",mt.Z.fields,"RouteInfo","Route Details")}_writeStops(){const s=this._writeNetworkFeatures(this.stops,null,"esriGeometryPoint",ke.Z.fields,"Stops","Stops");if(null==s)return null;const{stops:u}=this.defaultSymbols,y=u?.first?.toJSON(),S=u?.middle?.toJSON(),R=u?.last?.toJSON();return s.layerDefinition.drawingInfo.renderer={type:"uniqueValue",field1:"Sequence",defaultSymbol:S,uniqueValueInfos:[{value:"1",symbol:y,label:"First Stop"},{value:`${this.stops.length}`,symbol:R,label:"Last Stop"}]},s}};(0,i._)([(0,l.Cb)({readOnly:!0,json:{read:!1,origins:{"portal-item":{write:{allowNull:!0,ignoreOrigin:!0}},"web-map":{write:{overridePolicy(){return{allowNull:!0,ignoreOrigin:null==this.portalItem}}}}}}})],le.prototype,"_featureCollection",void 0),(0,i._)([(0,M.c)(["web-map","portal-item"],"_featureCollection")],le.prototype,"writeFeatureCollectionWebmap",null),(0,i._)([(0,l.Cb)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{target:"type",overridePolicy(){return{ignoreOrigin:null!=this.portalItem}}}}}}})],le.prototype,"_type",void 0),(0,i._)([(0,l.Cb)({nonNullable:!0,type:B})],le.prototype,"defaultSymbols",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],le.prototype,"directionLines",void 0),(0,i._)([(0,_.r)(["web-map","portal-item"],"directionLines",["layers","featureCollection.layers"])],le.prototype,"readDirectionLines",null),(0,i._)([(0,l.Cb)({readOnly:!0})],le.prototype,"directionPoints",void 0),(0,i._)([(0,_.r)(["web-map","portal-item"],"directionPoints",["layers","featureCollection.layers"])],le.prototype,"readDirectionPoints",null),(0,i._)([(0,l.Cb)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],le.prototype,"featureCollectionType",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],le.prototype,"fullExtent",null),(0,i._)([(0,l.Cb)({json:{origins:{"web-map":{name:"featureCollection.showLegend"}},write:!0}})],le.prototype,"legendEnabled",void 0),(0,i._)([(0,l.Cb)({type:["show","hide"]})],le.prototype,"listMode",void 0),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],le.prototype,"maxScale",void 0),(0,i._)([(0,_.r)(["web-map","portal-item"],"maxScale",["layers","featureCollection.layers"])],le.prototype,"readMaxScale",null),(0,i._)([(0,l.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],le.prototype,"minScale",void 0),(0,i._)([(0,_.r)(["web-map","portal-item"],"minScale",["layers","featureCollection.layers"])],le.prototype,"readMinScale",null),(0,i._)([(0,l.Cb)({type:["ArcGISFeatureLayer"],value:"ArcGISFeatureLayer"})],le.prototype,"operationalLayerType",void 0),(0,i._)([(0,l.Cb)({nonNullable:!0,type:f.Z.ofType(Ye.Z)})],le.prototype,"pointBarriers",void 0),(0,i._)([(0,_.r)(["web-map","portal-item"],"pointBarriers",["layers","featureCollection.layers"])],le.prototype,"readPointBarriers",null),(0,i._)([(0,l.Cb)({nonNullable:!0,type:f.Z.ofType($e.Z)})],le.prototype,"polygonBarriers",void 0),(0,i._)([(0,_.r)(["web-map","portal-item"],"polygonBarriers",["layers","featureCollection.layers"])],le.prototype,"readPolygonBarriers",null),(0,i._)([(0,l.Cb)({nonNullable:!0,type:f.Z.ofType(Qe.Z)})],le.prototype,"polylineBarriers",void 0),(0,i._)([(0,_.r)(["web-map","portal-item"],"polylineBarriers",["layers","featureCollection.layers"])],le.prototype,"readPolylineBarriers",null),(0,i._)([(0,l.Cb)({readOnly:!0})],le.prototype,"routeInfo",void 0),(0,i._)([(0,_.r)(["web-map","portal-item"],"routeInfo",["layers","featureCollection.layers"])],le.prototype,"readRouteInfo",null),(0,i._)([(0,l.Cb)({type:xe.Z})],le.prototype,"spatialReference",void 0),(0,i._)([(0,_.r)(["web-map","portal-item"],"spatialReference",["layers","featureCollection.layers"])],le.prototype,"readSpatialReference",null),(0,i._)([(0,l.Cb)({nonNullable:!0,type:f.Z.ofType(ke.Z)})],le.prototype,"stops",void 0),(0,i._)([(0,_.r)(["web-map","portal-item"],"stops",["layers","featureCollection.layers"])],le.prototype,"readStops",null),(0,i._)([(0,l.Cb)()],le.prototype,"title",null),(0,i._)([(0,l.Cb)({readOnly:!0,json:{read:!1}})],le.prototype,"type",void 0),(0,i._)([(0,l.Cb)()],le.prototype,"url",null),le=(0,i._)([(0,h.j)(Ut)],le);const Er=le},70509:(Re,ge,p)=>{p.d(ge,{I:()=>T});var K=p(15861),i=p(50484),ve=p(11931),V=p(26152),Q=p(66476),j=p(37636),k=p(57964),Se=p(4703),he=p(51172),w=p(79412),b=p(6785),C=p(80543),N=(p(14007),p(65311),p(62185)),Z=p(10141),f=p(7547),m=p(85971),g=p(61018),v=p(27835),I=p(57437),E=p(50318);const T=l=>{let x=class extends l{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,he.SC)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(J){J!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",J))}readPortalItem(J,_,h){if(_.itemId)return new v.default({id:_.itemId,portal:h?.portal})}writePortalItem(J,_){J?.id&&(_.itemId=J.id)}loadFromPortal(J,_){var h=this;return(0,K.Z)(function*(){if(h.portalItem?.id)try{const{load:M}=yield Promise.all([p.e(2772),p.e(8592),p.e(6964)]).then(p.bind(p,36964));return(0,w.k_)(_),yield M({instance:h,supportedTypes:J.supportedTypes,validateItem:J.validateItem,supportsData:J.supportsData,layerModuleTypeMap:J.layerModuleTypeMap},_)}catch(M){throw(0,w.D_)(M)||Se.Z.getLogger(h).warn(`Failed to load layer (${h.title}, ${h.id}) portal item (${h.portalItem.id})\n  ${M}`),M}})()}finishLoadEditablePortalLayer(J){var _=this;return(0,K.Z)(function*(){_._set("userHasEditingPrivileges",yield _._fetchUserHasEditingPrivileges(J).catch(h=>((0,w.r9)(h),!0)))})()}setUserPrivileges(J,_){var h=this;return(0,K.Z)(function*(){if(!ve.default.userPrivilegesApplied)return h.finishLoadEditablePortalLayer(_);if(h.url)try{const{features:{edit:M,fullEdit:G},content:{updateItem:X}}=yield h._fetchUserPrivileges(J,_);h._set("userHasEditingPrivileges",M),h._set("userHasFullEditingPrivileges",G),h._set("userHasUpdateItemPrivileges",X)}catch(M){(0,w.r9)(M)}})()}_fetchUserPrivileges(J,_){var h=this;return(0,K.Z)(function*(){let M=h.portalItem;if(!J||!M||!M.loaded||M.sourceUrl)return h._fetchFallbackUserPrivileges(_);const G=J===M.id;if(G&&M.portal.user)return(0,E.Ss)(M);let X,be;if(G)X=M.portal.url;else try{X=yield(0,m.oP)(h.url,_)}catch(Be){(0,w.r9)(Be)}if(!X||!(0,b.Zo)(X,M.portal.url))return h._fetchFallbackUserPrivileges(_);try{const Be=null!=_?_.signal:null;be=yield V.id?.getCredential(`${X}/sharing`,{prompt:!1,signal:Be})}catch(Be){(0,w.r9)(Be)}if(!be)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(G?yield M.reload():(M=new v.default({id:J,portal:{url:X}}),yield M.load(_)),M.portal.user)return(0,E.Ss)(M)}catch(Be){(0,w.r9)(Be)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_fetchFallbackUserPrivileges(J){var _=this;return(0,K.Z)(function*(){let h=!0;try{h=yield _._fetchUserHasEditingPrivileges(J)}catch(M){(0,w.r9)(M)}return{features:{edit:h,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(J){var _=this;return(0,K.Z)(function*(){const h=_.url?V.id?.findCredential(_.url):null;if(!h)return!0;const M=z.credential===h?z.user:yield _._fetchEditingUser(J);return z.credential=h,z.user=M,null==M?.privileges||M.privileges.includes("features:user:edit")})()}_fetchEditingUser(J){var _=this;return(0,K.Z)(function*(){const h=_.portalItem?.portal?.user;if(h)return h;const M=V.id?.findServerInfo(_.url??"");if(!M?.owningSystemUrl)return null;const G=`${M.owningSystemUrl}/sharing/rest`,X=g.Z.getDefault();if(X&&X.loaded&&(0,b.Fv)(X.restUrl)===(0,b.Fv)(G))return X.user;const be=`${G}/community/self`,ue=null!=J?J.signal:null,Le=yield(0,j.q6)((0,Q.Z)(be,{authMode:"no-prompt",query:{f:"json"},signal:ue}));return Le.ok?I.Z.fromJSON(Le.value.data):null})()}read(J,_){_&&(_.layer=this),super.read(J,_)}write(J,_){const h=_?.portal,M=this.portalItem?.id&&(this.portalItem.portal||g.Z.getDefault());return h&&M&&!(0,b.tm)(M.restUrl,h.restUrl)?(_.messages&&_.messages.push(new k.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(J,{..._,layer:this})}};return(0,i._)([(0,C.Cb)({type:v.default})],x.prototype,"portalItem",null),(0,i._)([(0,N.r)("web-document","portalItem",["itemId"])],x.prototype,"readPortalItem",null),(0,i._)([(0,f.c)("web-document","portalItem",{itemId:{type:String}})],x.prototype,"writePortalItem",null),(0,i._)([(0,C.Cb)({clonable:!1})],x.prototype,"resourceReferences",void 0),(0,i._)([(0,C.Cb)({type:Boolean,readOnly:!0})],x.prototype,"userHasEditingPrivileges",void 0),(0,i._)([(0,C.Cb)({type:Boolean,readOnly:!0})],x.prototype,"userHasFullEditingPrivileges",void 0),(0,i._)([(0,C.Cb)({type:Boolean,readOnly:!0})],x.prototype,"userHasUpdateItemPrivileges",void 0),x=(0,i._)([(0,Z.j)("esri.layers.mixins.PortalLayer")],x),x},z={credential:null,user:null}},40100:(Re,ge,p)=>{p.d(ge,{Z:()=>L});var K=p(57964),i=p(89317),ve=p(4703),V=p(8611),Q=p(15398),j=p(85295),k=p(764),Se=p(25037);const C=new Map;class L{static fromJSON(g){return new L(g.fields,g.timeZoneByFieldName)}static fromLayer(g){return new L(g.fields??[],f(g))}static fromLayerJSON(g){return new L(g.fields??[],f(g))}constructor(g=[],v){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=g||[],this._timeZoneByFieldName=v?new Map(v):null;const I=[];for(const E of this.fields){const T=E?.name,z=N(T);if(T&&z){const l=Y(T);this._fieldsMap.set(T,E),this._fieldsMap.set(l,E),this._normalizedFieldsMap.set(z,E),I.push(`${l}:${E.type}:${this._timeZoneByFieldName?.get(T)}`),(0,j.y2)(E)?(this.dateFields.push(E),this._dateFieldsSet.add(E)):(0,j.H7)(E)&&(this._numericFieldsSet.add(E),this.numericFields.push(E)),(0,j.Dl)(E)||(0,j.Se)(E)||(E.editable=null==E.editable||!!E.editable,E.nullable=null==E.nullable||!!E.nullable)}}I.sort(),this.uid=I.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const g of this.fields)(0,j.Dl)(g)||(0,j.Se)(g)||g.nullable||void 0!==(0,j.os)(g)||this._requiredFields.push(g)}return this._requiredFields}equals(g){return this.uid===g?.uid}has(g){return null!=this.get(g)}get(g){if(!g)return;let v=this._fieldsMap.get(g);return v||(v=this._fieldsMap.get(Y(g))??this._normalizedFieldsMap.get(N(g)),v&&this._fieldsMap.set(g,v),v)}getTimeZone(g){const v=this.get(g&&"string"!=typeof g?g.name:g);return v?this._timeZoneByFieldName?this._timeZoneByFieldName.get(v.name):"date"===v.type||"esriFieldTypeDate"===v.type?(ve.Z.getLogger("esri.layers.support.FieldsIndex").error(new K.Z("getTimeZone:no-timezone-information",`no time zone information for field '${v.name}'`)),k.pt):Z.has(v.type)?k._4:null:null}getLuxonTimeZone(g){const v=this.getTimeZone(g);return v?v===k._4?Q.yV.instance:v===k.pt?Se.Qf.utcInstance:(0,V.s1)(C,v,()=>Se.vF.create(v)):null}isDateField(g){return this._dateFieldsSet.has(this.get(g))}isTimeOnlyField(g){return(0,j.sX)(this.get(g))}isNumericField(g){return this._numericFieldsSet.has(this.get(g))}normalizeFieldName(g){return this.get(g)?.name??void 0}toJSON(){return{fields:this.fields.map(g=>(0,i.AK)(g)?g.toJSON():g),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function Y(m){return m.trim().toLowerCase()}function N(m){return(0,j.q6)(m)?.toLowerCase()??""}const Z=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function f(m){const g=new Map;if(!m.fields)return g;const v=!0===m.datesInUnknownTimezone,{timeInfo:I,editFieldsInfo:E}=m,T=(I?"startField"in I?I.startField:I.startTimeField:"")??"",z=(I?"endField"in I?I.endField:I.endTimeField:"")??"",l=function b(m){return"dateFieldsTimeZone"in m}(m)?m.dateFieldsTimeZone??null:m.dateFieldsTimeReference?(0,k.Jv)(m.dateFieldsTimeReference):null,x=E?function he(m){return"timeZone"in m}(E)?E.timeZone??l:E.dateFieldsTimeReference?(0,k.Jv)(E.dateFieldsTimeReference):l??k.pt:null,J=I?function w(m){return"timeZone"in m}(I)?I.timeZone??l:I.timeReference?(0,k.Jv)(I.timeReference):l:null,_=new Map([[Y(E?.creationDateField??""),x],[Y(E?.editDateField??""),x],[Y(T),J],[Y(z),J]]);for(const{name:h,type:M}of m.fields)if(Z.has(M))g.set(h,k._4);else if("date"!==M&&"esriFieldTypeDate"!==M)g.set(h,null);else if(v)g.set(h,k._4);else{const G=_.get(Y(h??""))??l;g.set(h,G)}return g}},50318:(Re,ge,p)=>{p.d(ge,{$o:()=>C,Fj:()=>he,IW:()=>b,Ss:()=>N,_$:()=>Se,ck:()=>w,hz:()=>Y,qj:()=>k});var K=p(15861),i=p(83821),ve=p(43814),V=p(48230);function j(){return(j=(0,K.Z)(function*(Z){const f=Z.spatialReference;if(f.isWGS84)return Z.clone();if(f.isWebMercator)return(0,V.Sx)(Z);const m=ve.Z.WGS84;return yield(0,i.initializeProjection)(f,m),(0,i.project)(Z,m)})).apply(this,arguments)}function k(Z,f){if(!Se(Z,f)){const m=Z.typeKeywords;m?m.push(f):Z.typeKeywords=[f]}}function Se(Z,f){return!!Z.typeKeywords?.includes(f)}function he(Z){return Se(Z,Y.HOSTED_SERVICE)}function w(Z,f){const m=Z.typeKeywords;if(m){const g=m.indexOf(f);g>-1&&m.splice(g,1)}}function b(Z,f,m){m?k(Z,f):w(Z,f)}function C(Z){return L.apply(this,arguments)}function L(){return L=(0,K.Z)(function*(Z){const f=Z.clone().normalize();let m;if(f.length>1)for(const g of f)m?g.width>m.width&&(m=g):m=g;else m=f[0];return function Q(Z){return j.apply(this,arguments)}(m)}),L.apply(this,arguments)}const Y={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function N(Z){const{portal:f,isOrgItem:m,itemControl:g}=Z,v=f.user?.privileges;let I=!v||v.includes("features:user:edit"),E=!!m&&!!v?.includes("features:user:fullEdit");const T="update"===g||"admin"===g;return T?E=I=!0:E&&(I=!0),{features:{edit:I,fullEdit:E},content:{updateItem:T}}}},96043:(Re,ge,p)=>{p.d(ge,{AJ:()=>k,If:()=>w,k0:()=>j,uI:()=>he,ul:()=>Q,wx:()=>b});var K=p(55117),i=p(55768),ve=p(5710),V=p(23515);const Q=2.4;function j(C){return(0,i.Wz)(C*Q)}function k(C){return(0,i.F2)(C)/Q}function Se(C,L,Y,N){let{color:Z,ratio:f}=L,{color:m,ratio:g}=Y;g===f&&(1===g?f-=1e-6:g+=1e-6);const v=(0,K.uZ)((N-f)/(g-f),0,1);(0,ve.l)(C,Z.toArray(),m.toArray(),v)}function he(C){const Y=new Uint8ClampedArray(2048);if((C=C.filter(({ratio:g})=>g>=0&&g<=1).sort((g,v)=>g.ratio-v.ratio).map(({color:g,ratio:v})=>({color:g,ratio:Math.max(v,.001)}))).length<1)return Y;let N=C[0],Z=C[0],f=1;const m=(0,V.Ue)();for(let g=0;g<512;g++){const v=(g+.5)/512;for(;v>Z.ratio&&f<C.length;)N=Z,Z=C[f++];Se(m,N,Z,v),Y.set(m,4*g)}return Y}function w(C,L,Y){const N=Math.sqrt(C**2+L**2)/Y;return N>1?0:3/(Math.PI*Y**2)*(1-N**2)**2}function b(C){return"function"==typeof C?C:C?L=>+L[C]:()=>1}},93792:(Re,ge,p)=>{p.d(ge,{Z:()=>g});var Z,K=p(50484),i=p(2189),ve=p(35458),V=p(84303),Q=p(89317),j=p(34222),k=p(80543),w=(p(14007),p(4703),p(62185)),b=p(10141),C=p(7547),L=p(43814),Y=p(40637),N=p(81247);const f=new V.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let m=Z=class extends Q.wq{constructor(v){super(v),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(v,I){const E=L.Z.fromJSON(I.spatialReference),T=[];for(let z=0;z<v.length;z++){const l=v[z],x=ve.Z.fromJSON(l),J=l.geometry?.spatialReference;null==x.geometry||J||(x.geometry.spatialReference=E);const _=l.aggregateGeometries,h=x.aggregateGeometries;if(_&&null!=h)for(const M in h){const G=h[M],X=_[M],be=X?.spatialReference;null==G||be||(G.spatialReference=E)}T.push(x)}return T}writeGeometryType(v,I,E,T){if(v)return void f.write(v,I,E,T);const{features:z}=this;if(z)for(const l of z)if(null!=l?.geometry)return void f.write(l.geometry.type,I,E,T)}readQueryGeometry(v,I){if(!v)return null;const E=!!v.spatialReference,T=(0,Y.im)(v);return T&&!E&&I.spatialReference&&(T.spatialReference=L.Z.fromJSON(I.spatialReference)),T}writeSpatialReference(v,I){if(v)return void(I.spatialReference=v.toJSON());const{features:E}=this;if(E)for(const T of E)if(T&&null!=T.geometry&&T.geometry.spatialReference)return void(I.spatialReference=T.geometry.spatialReference.toJSON())}clone(){return new Z(this.cloneProperties())}cloneProperties(){return(0,j.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(v){const I=this.write();if(I.features&&Array.isArray(v)&&v.length>0)for(let E=0;E<I.features.length;E++){const T=I.features[E];if(T.geometry){const z=v?.[E];T.geometry=z?.toJSON()||T.geometry}}return I}quantize(v){const{scale:[I,E],translate:[T,z]}=v,J=this.features,_=this._getQuantizationFunction(this.geometryType,h=>Math.round((h-T)/I),h=>Math.round((z-h)/E));for(let h=0,M=J.length;h<M;h++)_?.(J[h].geometry)||(J.splice(h,1),h--,M--);return this.transform=v,this}unquantize(){const{geometryType:v,features:I,transform:E}=this;if(!E)return this;const{translate:[T,z],scale:[l,x]}=E;let h=null,M=null;if(this.hasZ&&null!=E?.scale?.[2]){const{translate:[,,X],scale:[,,be]}=E;h=ue=>ue*be+X}if(this.hasM&&null!=E?.scale?.[3]){const{translate:[,,,X],scale:[,,,be]}=E;M=ue=>null==ue?ue:ue*be+X}const G=this._getHydrationFunction(v,X=>X*l+T,X=>z-X*x,h,M);for(const{geometry:X}of I)null!=X&&G&&G(X);return this.transform=null,this}_quantizePoints(v,I,E){let T,z;const l=[];for(let x=0,J=v.length;x<J;x++){const _=v[x];if(x>0){const h=I(_[0]),M=E(_[1]);h===T&&M===z||(l.push([h-T,M-z]),T=h,z=M)}else T=I(_[0]),z=E(_[1]),l.push([T,z])}return l.length>0?l:null}_getQuantizationFunction(v,I,E){return"point"===v?T=>(T.x=I(T.x),T.y=E(T.y),T):"polyline"===v||"polygon"===v?T=>{const z=(0,Y.oU)(T)?T.rings:T.paths,l=[];for(let x=0,J=z.length;x<J;x++){const h=this._quantizePoints(z[x],I,E);h&&l.push(h)}return l.length>0?((0,Y.oU)(T)?T.rings=l:T.paths=l,T):null}:"multipoint"===v?T=>{const z=this._quantizePoints(T.points,I,E);return z&&z.length>0?(T.points=z,T):null}:"extent"===v?T=>T:null}_getHydrationFunction(v,I,E,T,z){return"point"===v?l=>{l.x=I(l.x),l.y=E(l.y),T&&(l.z=T(l.z))}:"polyline"===v||"polygon"===v?l=>{const x=(0,Y.oU)(l)?l.rings:l.paths;let J,_;for(let h=0,M=x.length;h<M;h++){const G=x[h];for(let X=0,be=G.length;X<be;X++){const ue=G[X];X>0?(J+=ue[0],_+=ue[1]):(J=ue[0],_=ue[1]),ue[0]=I(J),ue[1]=E(_)}}if(T&&z)for(let h=0,M=x.length;h<M;h++){const G=x[h];for(let X=0,be=G.length;X<be;X++){const ue=G[X];ue[2]=T(ue[2]),ue[3]=z(ue[3])}}else if(T)for(let h=0,M=x.length;h<M;h++){const G=x[h];for(let X=0,be=G.length;X<be;X++){const ue=G[X];ue[2]=T(ue[2])}}else if(z)for(let h=0,M=x.length;h<M;h++){const G=x[h];for(let X=0,be=G.length;X<be;X++){const ue=G[X];ue[2]=z(ue[2])}}}:"extent"===v?l=>{l.xmin=I(l.xmin),l.ymin=E(l.ymin),l.xmax=I(l.xmax),l.ymax=E(l.ymax),T&&null!=l.zmax&&null!=l.zmin&&(l.zmax=T(l.zmax),l.zmin=T(l.zmin)),z&&null!=l.mmax&&null!=l.mmin&&(l.mmax=z(l.mmax),l.mmin=z(l.mmin))}:"multipoint"===v?l=>{const x=l.points;let J,_;for(let h=0,M=x.length;h<M;h++){const G=x[h];h>0?(J+=G[0],_+=G[1]):(J=G[0],_=G[1]),G[0]=I(J),G[1]=E(_)}if(T&&z)for(let h=0,M=x.length;h<M;h++){const G=x[h];G[2]=T(G[2]),G[3]=z(G[3])}else if(T)for(let h=0,M=x.length;h<M;h++){const G=x[h];G[2]=T(G[2])}else if(z)for(let h=0,M=x.length;h<M;h++){const G=x[h];G[2]=z(G[2])}}:null}};(0,K._)([(0,k.Cb)({type:String,json:{write:!0}})],m.prototype,"displayFieldName",void 0),(0,K._)([(0,k.Cb)({type:Boolean,json:{write:{overridePolicy:v=>({enabled:v})}}})],m.prototype,"exceededTransferLimit",void 0),(0,K._)([(0,k.Cb)({type:[ve.Z],json:{write:!0}})],m.prototype,"features",void 0),(0,K._)([(0,w.r)("features")],m.prototype,"readFeatures",null),(0,K._)([(0,k.Cb)({type:[N.Z],json:{write:!0}})],m.prototype,"fields",void 0),(0,K._)([(0,k.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:f.read}}})],m.prototype,"geometryType",void 0),(0,K._)([(0,C.c)("geometryType")],m.prototype,"writeGeometryType",null),(0,K._)([(0,k.Cb)({type:Boolean,json:{write:{overridePolicy:v=>({enabled:v})}}})],m.prototype,"hasM",void 0),(0,K._)([(0,k.Cb)({type:Boolean,json:{write:{overridePolicy:v=>({enabled:v})}}})],m.prototype,"hasZ",void 0),(0,K._)([(0,k.Cb)({types:i.qM,json:{write:!0}})],m.prototype,"queryGeometry",void 0),(0,K._)([(0,w.r)("queryGeometry")],m.prototype,"readQueryGeometry",null),(0,K._)([(0,k.Cb)({type:L.Z,json:{write:!0}})],m.prototype,"spatialReference",void 0),(0,K._)([(0,C.c)("spatialReference")],m.prototype,"writeSpatialReference",null),(0,K._)([(0,k.Cb)({json:{write:!0}})],m.prototype,"transform",void 0),m=Z=(0,K._)([(0,b.j)("esri.rest.support.FeatureSet")],m),m.prototype.toJSON.isDefaultToJSON=!0;const g=m}}]);