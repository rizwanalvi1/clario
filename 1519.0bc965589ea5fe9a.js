"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[1519,5398,9005],{52540:(te,H,x)=>{x.d(H,{z:()=>N});var w=x(39921);class N{constructor(T,b){this._storage=new w.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=T,this._storage.register(this),b&&this._storage.registerRemoveFunc("",b)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(T,b,R=1){this._storage.put(this,T,b,R,1)}pop(T){return this._storage.pop(this,T)}get(T){return this._storage.get(this,T)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(T){this._storage.maxSize=T}resetHitRate(){}}},39921:(te,H,x)=>{x.d(H,{WJ:()=>R,Xq:()=>b});var T,K,w=x(43029);(K=T||(T={}))[K.ALL=0]="ALL",K[K.SOME=1]="SOME";class b{constructor(p,f,d){this.name=p,this._storage=f,this.id=A+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),d&&(this._storage.registerRemoveFunc(this.id,d),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(p){return this._storage.getSize(this,p)}resetHitRate(){this._hit=this._miss=0}put(p,f,d,M=0){this._storage.put(this,p,f,d,M)}pop(p){const f=this._storage.pop(this,p);return void 0===f?++this._miss:++this._hit,f}get(p){const f=this._storage.get(this,p);return void 0===f?++this._miss:++this._hit,f}peek(p){return this._storage.peek(this,p)}updateSize(p,f,d){this._storage.updateSize(this,p,f,d)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class R{get size(){return this._size}constructor(p=10485760){this._maxSize=p,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new w.Z,this._users=new w.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(p){this._users.push(p)}deregister(p){this._users.removeUnordered(p)}registerRemoveFunc(p,f){this._removeFuncs.push([p,f])}deregisterRemoveFunc(p){this._removeFuncs.filterInPlace(f=>f[0]!==p)}get maxSize(){return this._maxSize}set maxSize(p){this._maxSize=Math.max(p,-1),this._checkSize()}getSize(p,f){return this._db.get(p.id+f)?.size??0}put(p,f,d,M,I){const v=this._db.get(f=p.id+f);if(v&&(this._size-=v.size,p.size-=v.size,this._db.delete(f),v.entry!==d&&this._notifyRemove(f,v.entry,v.size,T.ALL)),M>this._maxSize)return void this._notifyRemove(f,d,M,T.ALL);if(void 0===d)return void console.warn("Refusing to cache undefined entry ");if(!M||M<0)return console.warn(`Refusing to cache entry with size ${M} for key ${f}`),void this._notifyRemove(f,d,0,T.ALL);const L=1+Math.max(I,-4)- -3;this._db.set(f,new $(d,M,L)),this._size+=M,p.size+=M,this._checkSize()}updateSize(p,f,d,M){const I=this._db.get(f=p.id+f);if(I&&I.entry===d){for(this._size-=I.size,p.size-=I.size;M>this._maxSize;){const v=this._notifyRemove(f,d,M,T.SOME);if(!(null!=v&&v>0))return void this._db.delete(f);M=v}I.size=M,this._size+=M,p.size+=M,this._checkSize()}}pop(p,f){const d=this._db.get(f=p.id+f);if(d)return this._size-=d.size,p.size-=d.size,this._db.delete(f),++this._hit,d.entry;++this._miss}get(p,f){const d=this._db.get(f=p.id+f);if(void 0!==d)return this._db.delete(f),d.lives=d.lifetime,this._db.set(f,d),++this._hit,d.entry;++this._miss}peek(p,f){const d=this._db.get(p.id+f);return d?++this._hit:++this._miss,d?.entry}get performanceInfo(){const p={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},f={},d=new Array;this._db.forEach((v,L)=>{const m=v.lifetime;d[m]=(d[m]||0)+v.size,this._users.forAll(c=>{const{id:a,name:u}=c;L.startsWith(a)&&(f[u]=(f[u]||0)+v.size)})});const M={};this._users.forAll(v=>{const L=v.name;"hitRate"in v&&"number"==typeof v.hitRate&&!isNaN(v.hitRate)&&v.hitRate>0?(f[L]=f[L]||0,M[L]=Math.round(100*v.hitRate)+"%"):M[L]="0%"});const I=Object.keys(f);I.sort((v,L)=>f[L]-f[v]),I.forEach(v=>p[v]=Math.round(f[v]/2**20)+"MB / "+M[v]);for(let v=d.length-1;v>=0;--v){const L=d[v];L&&(p["Priority "+(v+-3-1)]=Math.round(L/this._size*100)+"%")}return p}resetStats(){this._hit=this._miss=0,this._users.forAll(p=>p.resetHitRate())}clear(p){const f=p.id;this._db.forEach((d,M)=>{M.startsWith(f)&&(this._size-=d.size,this._db.delete(M),this._notifyRemove(M,d.entry,d.size,T.ALL))}),p.size=0}clearAll(){this._db.forEach((p,f)=>this._notifyRemove(f,p.entry,p.size,T.ALL)),this._users.forAll(p=>p.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(p,f,d,M){let I;return this._removeFuncs.some(v=>{if(p.startsWith(v[0])){const L=v[1](f,M,d);return"number"==typeof L&&(I=L),!0}return!1}),I}_checkSize(){this._users.forAll(p=>this._checkSizeLimits(p)),this._checkSizeLimits()}_checkSizeLimits(p){const f=p??this;if(f.maxSize<0||f.size<=f.maxSize)return;const d=p?.id;let M=!0;for(;M;){M=!1;for(const[I,v]of this._db)if(0===v.lifetime&&(!d||I.startsWith(d))){if(this._purgeItem(I,v,p),f.size<=.9*f.maxSize)return;M||=this._db.has(I)}}for(const[I,v]of this._db)if((!d||I.startsWith(d))&&(this._purgeItem(I,v,p),f.size<=.9*f.maxSize))return}_purgeItem(p,f,d=this._users.find(M=>p.startsWith(M.id))){if(this._db.delete(p),f.lives<=1){this._size-=f.size,d&&(d.size-=f.size);const M=this._notifyRemove(p,f.entry,f.size,T.SOME);null!=M&&M>0&&(this._size+=M,d&&(d.size+=M),f.lives=f.lifetime,f.size=M,this._db.set(p,f))}else--f.lives,this._db.set(p,f)}}let A=0;class ${constructor(p,f,d){this.entry=p,this.size=f,this.lifetime=d,this.lives=d}}},657:(te,H,x)=>{x.d(H,{$c:()=>I,Hg:()=>v,jW:()=>f,uD:()=>d});var w=x(73514),N=x(83944),V=x(49301);const T=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function b(m){return m instanceof w.Z}function R(m){return m instanceof N.Z?Object.keys(m.items):b(m)?(0,V.vw)(m).keys():m?Object.keys(m):[]}function A(m,c){return m instanceof N.Z?m.items[c]:m[c]}function K(m){return m?m.declaredClass:null}function p(m,c){const a=m.diff;if(a&&"function"==typeof a)return a(m,c);const u=R(m),z=R(c);if(0===u.length&&0===z.length)return;if(!u.length||!z.length||function $(m,c){return!(!Array.isArray(m)||!Array.isArray(c))&&m.length!==c.length}(m,c))return{type:"complete",oldValue:m,newValue:c};const E=z.filter(U=>!u.includes(U)),_=u.filter(U=>!z.includes(U)),y=u.filter(U=>z.includes(U)&&A(m,U)!==A(c,U)).concat(E,_).sort(),O=K(m);if(O&&T.has(O)&&y.length)return{type:"complete",oldValue:m,newValue:c};let S;const J=b(m)&&b(c);for(const U of y){const g=A(m,U),F=A(c,U);let j;if((J||"function"!=typeof g&&"function"!=typeof F)&&g!==F&&(null!=g||null!=F)){if(a&&a[U]&&"function"==typeof a[U])j=a[U]?.(g,F);else if(g instanceof Date&&F instanceof Date){if(g.getTime()===F.getTime())continue;j={type:"complete",oldValue:g,newValue:F}}else j="object"==typeof g&&"object"==typeof F&&K(g)===K(F)?p(g,F):{type:"complete",oldValue:g,newValue:F};null!=j&&(null!=S?S.diff[U]=j:S={type:"partial",diff:{[U]:j}})}}return S}function f(m,c){return d(m,c)}function d(m,c){if(null==m)return!1;const a=c.split(".");let u=m;for(const z of a){if("complete"===u.type)return!0;if("partial"!==u.type)return!1;{const E=u.diff[z];if(!E)return!1;u=E}}return!0}function I(m,c){if(!m)return!1;if("partial"===m.type){const a=Object.keys(m.diff);return 1===a.length&&a[0]===c}return!1}function v(m,c){if("function"!=typeof m&&"function"!=typeof c&&(null!=m||null!=c))return null==m||null==c||"object"==typeof m&&"object"==typeof c&&K(m)!==K(c)?{type:"complete",oldValue:m,newValue:c}:p(m,c)}},15398:(te,H,x)=>{x.d(H,{A4:()=>V,L9:()=>T,yV:()=>N});var w=x(25037);class N{}function V(R){return R instanceof w.ld?R===N.instance:"unknown"===R?.toString().toLowerCase()}function T(R){return V(R)?N.instance:R}N.instance=new w.vF("Etc/UTC")},66398:(te,H,x)=>{function N(l){return l?{originPosition:"upper-left"===l.originPosition?"upperLeft":"lower-left"===l.originPosition?"lowerLeft":l.originPosition,scale:l.tolerance?[l.tolerance,l.tolerance,1,1]:[1,1,1,1],translate:null!=l.extent?[l.extent.xmin,l.extent.ymax,l.extent.zmin??0,l.extent.mmin??0]:[0,0,0,0]}:null}function T(l){if(function V(l){return"lowerLeft"===l.originPosition&&4===l.scale.length&&4===l.translate.length}(l))return l;const{originPosition:s,scale:i,translate:h}=l,D=i[1]??1;return{originPosition:"lowerLeft",scale:[i[0]??1,"lowerLeft"===s?D:-D,i[2]??1,i[3]??1],translate:[h[0]??0,h[1]??0,h[2]??0,h[3]??0]}}function m({scale:l,translate:s},i){return i*l[0]+s[0]}function c({scale:l,translate:s},i){return i*l[1]+s[1]}function a({scale:l,translate:s},i){return(i??0)*l[2]+s[2]}function u({scale:l,translate:s},i){return i?i*l[3]+s[3]:0}function z(l,s){return l&&s?O:l&&!s?_:!l&&s?y:E}x.d(H,{G6:()=>ce,Ie:()=>_e,J9:()=>ae,RF:()=>re,U1:()=>ue,vY:()=>N}),x(40637);const E=(l,s)=>{const i=new Array(s.length);if(!s.length)return i;const h=s[0];let P=m(l,h[0]),D=c(l,h[1]);i[0]=[P,D];const{scale:C,originPosition:Z}=l,Y=C[0],k="lowerLeft"===Z?C[1]:-C[1];for(let B=1;B<s.length;B++){const[Q,X]=s[B];P+=Y*Q,D+=k*X,i[B]=[P,D]}return i},_=(l,s)=>{const i=new Array(s.length);if(!s.length)return i;const h=s[0];let P=m(l,h[0]),D=c(l,h[1]);i[0]=[P,D,a(l,h[2])];const{scale:C,originPosition:Z}=l,Y=C[0],k="lowerLeft"===Z?C[1]:-C[1];for(let B=1;B<s.length;B++){const[Q,X,q]=s[B];P+=Y*Q,D+=k*X,i[B]=[P,D,a(l,q)]}return i},y=(l,s)=>{const i=new Array(s.length);if(!s.length)return i;const h=s[0];let P=m(l,h[0]),D=c(l,h[1]);i[0]=[P,D,u(l,h[2])];const{scale:C,originPosition:Z}=l,Y=C[0],k="lowerLeft"===Z?C[1]:-C[1];for(let B=1;B<s.length;B++){const[Q,X,q]=s[B];P+=Y*Q,D+=k*X,i[B]=[P,D,u(l,q)]}return i},O=(l,s)=>{const i=new Array(s.length);if(!s.length)return i;const h=s[0];let P=m(l,h[0]),D=c(l,h[1]);i[0]=[P,D,a(l,h[2]),u(l,h[3])];const{scale:C,originPosition:Z}=l,Y=C[0],k="lowerLeft"===Z?C[1]:-C[1];for(let B=1;B<s.length;B++){const[Q,X,q,se]=s[B];P+=Y*Q,D+=k*X,i[B]=[P,D,a(l,q),u(l,se)]}return i};function S(l,s,i){const h=new Array(i.length);for(let P=0;P<i.length;P++)h[P]=s(l,i[P]);return h}function re(l,s,i){const h=T(l);return s.x=function b({scale:l,translate:s},i){return Math.round((i-s[0])/l[0])}(h,i.x),s.y=function R({scale:l,translate:s},i){return Math.round((i-s[1])/l[1])}(h,i.y),null!=i.z&&(s.z=function A({scale:l,translate:s},i){return Math.round(((i??0)-s[2])/l[2])}(h,i.z)),null!=i.m&&(s.m=function $({scale:l,translate:s},i){return i?Math.round((i-s[3])/l[3]):0}(h,i.m)),s}function ae(l,s,i,h=i?.hasZ??!1,P=i?.hasM??!1){if(null!=i){const D=T(l);s.points=z(h,P)(D,i.points),s.hasZ=h,s.hasM=P}return s}function ue(l,s,i,h=null!=i?.z,P=null!=i?.m){if(null==i)return s;const D=T(l);return s.x=m(D,i.x),s.y=c(D,i.y),h&&(s.z=a(D,i.z)),P&&(s.m=u(D,i.m)),s}function _e(l,s,i,h=i?.hasZ??!1,P=i?.hasM??!1){if(null!=i){const D=T(l);s.rings=S(D,z(h,P),i.rings),s.hasZ=h,s.hasM=P}return s}function ce(l,s,i,h=i?.hasZ??!1,P=i?.hasM??!1){if(null!=i){const D=T(l);s.paths=S(D,z(h,P),i.paths),s.hasZ=h,s.hasM=P}return s}},50243:(te,H,x)=>{x.d(H,{Z:()=>I});var w=x(50484),N=x(25387),V=x(89317),T=x(80543),$=(x(14007),x(4703),x(65311),x(62185)),K=x(10141),p=x(7547),f=x(59300),d=x(30457);let M=class extends((0,N.J)(V.wq)){constructor(v){super(v),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(v){const L={};for(const m of Object.keys(v))L[m]=(0,f.im)(v[m]);return L}writeDomains(v,L){const m={};for(const c of Object.keys(v))v[c]&&(m[c]=v[c]?.toJSON());L.domains=m}};(0,w._)([(0,T.Cb)({json:{write:!0}})],M.prototype,"id",void 0),(0,w._)([(0,T.Cb)({json:{write:!0}})],M.prototype,"name",void 0),(0,w._)([(0,T.Cb)({json:{write:!0}})],M.prototype,"domains",void 0),(0,w._)([(0,$.r)("domains")],M.prototype,"readDomains",null),(0,w._)([(0,p.c)("domains")],M.prototype,"writeDomains",null),(0,w._)([(0,T.Cb)({type:[d.Z],json:{write:!0}})],M.prototype,"templates",void 0),M=(0,w._)([(0,K.j)("esri.layers.support.FeatureType")],M);const I=M},40100:(te,H,x)=>{x.d(H,{Z:()=>M});var w=x(57964),N=x(89317),V=x(4703),T=x(8611),b=x(15398),R=x(85295),A=x(764),$=x(25037);const d=new Map;class M{static fromJSON(a){return new M(a.fields,a.timeZoneByFieldName)}static fromLayer(a){return new M(a.fields??[],m(a))}static fromLayerJSON(a){return new M(a.fields??[],m(a))}constructor(a=[],u){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=a||[],this._timeZoneByFieldName=u?new Map(u):null;const z=[];for(const E of this.fields){const _=E?.name,y=v(_);if(_&&y){const O=I(_);this._fieldsMap.set(_,E),this._fieldsMap.set(O,E),this._normalizedFieldsMap.set(y,E),z.push(`${O}:${E.type}:${this._timeZoneByFieldName?.get(_)}`),(0,R.y2)(E)?(this.dateFields.push(E),this._dateFieldsSet.add(E)):(0,R.H7)(E)&&(this._numericFieldsSet.add(E),this.numericFields.push(E)),(0,R.Dl)(E)||(0,R.Se)(E)||(E.editable=null==E.editable||!!E.editable,E.nullable=null==E.nullable||!!E.nullable)}}z.sort(),this.uid=z.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const a of this.fields)(0,R.Dl)(a)||(0,R.Se)(a)||a.nullable||void 0!==(0,R.os)(a)||this._requiredFields.push(a)}return this._requiredFields}equals(a){return this.uid===a?.uid}has(a){return null!=this.get(a)}get(a){if(!a)return;let u=this._fieldsMap.get(a);return u||(u=this._fieldsMap.get(I(a))??this._normalizedFieldsMap.get(v(a)),u&&this._fieldsMap.set(a,u),u)}getTimeZone(a){const u=this.get(a&&"string"!=typeof a?a.name:a);return u?this._timeZoneByFieldName?this._timeZoneByFieldName.get(u.name):"date"===u.type||"esriFieldTypeDate"===u.type?(V.Z.getLogger("esri.layers.support.FieldsIndex").error(new w.Z("getTimeZone:no-timezone-information",`no time zone information for field '${u.name}'`)),A.pt):L.has(u.type)?A._4:null:null}getLuxonTimeZone(a){const u=this.getTimeZone(a);return u?u===A._4?b.yV.instance:u===A.pt?$.Qf.utcInstance:(0,T.s1)(d,u,()=>$.vF.create(u)):null}isDateField(a){return this._dateFieldsSet.has(this.get(a))}isTimeOnlyField(a){return(0,R.sX)(this.get(a))}isNumericField(a){return this._numericFieldsSet.has(this.get(a))}normalizeFieldName(a){return this.get(a)?.name??void 0}toJSON(){return{fields:this.fields.map(a=>(0,N.AK)(a)?a.toJSON():a),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function I(c){return c.trim().toLowerCase()}function v(c){return(0,R.q6)(c)?.toLowerCase()??""}const L=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function m(c){const a=new Map;if(!c.fields)return a;const u=!0===c.datesInUnknownTimezone,{timeInfo:z,editFieldsInfo:E}=c,_=(z?"startField"in z?z.startField:z.startTimeField:"")??"",y=(z?"endField"in z?z.endField:z.endTimeField:"")??"",O=function f(c){return"dateFieldsTimeZone"in c}(c)?c.dateFieldsTimeZone??null:c.dateFieldsTimeReference?(0,A.Jv)(c.dateFieldsTimeReference):null,S=E?function K(c){return"timeZone"in c}(E)?E.timeZone??O:E.dateFieldsTimeReference?(0,A.Jv)(E.dateFieldsTimeReference):O??A.pt:null,J=z?function p(c){return"timeZone"in c}(z)?z.timeZone??O:z.timeReference?(0,A.Jv)(z.timeReference):O:null,U=new Map([[I(E?.creationDateField??""),S],[I(E?.editDateField??""),S],[I(_),J],[I(y),J]]);for(const{name:g,type:F}of c.fields)if(L.has(F))a.set(g,A._4);else if("date"!==F&&"esriFieldTypeDate"!==F)a.set(g,null);else if(u)a.set(g,A._4);else{const j=U.get(I(g??""))??O;a.set(g,j)}return a}},56761:(te,H,x)=>{x.d(H,{UG:()=>f,UO:()=>v,YI:()=>I,dI:()=>L,el:()=>E,hV:()=>M,z7:()=>d});var w=x(72578);const N="__begin__",V="__end__",T=new RegExp(N,"ig"),b=new RegExp(V,"ig"),R=new RegExp("^"+N,"i"),A=new RegExp(V+"$","i"),$='"',K=$+" + ",p=" + "+$;function f(_){return _.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function d(_){return _.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function M(_){const y={expression:"",type:"none"};return _.labelExpressionInfo?_.labelExpressionInfo.value?(y.expression=_.labelExpressionInfo.value,y.type="conventional"):_.labelExpressionInfo.expression&&(y.expression=_.labelExpressionInfo.expression,y.type="arcade"):null!=_.labelExpression&&(y.expression=f(_.labelExpression),y.type="conventional"),y}function I(_){const y=M(_);if(!y)return null;switch(y.type){case"conventional":return L(y.expression);case"arcade":return y.expression}return null}function v(_){const y=M(_);if(!y)return null;switch(y.type){case"conventional":return function c(_){return _?.match(m)?.[1].trim()||null}(y.expression);case"arcade":return E(y.expression)}return null}function L(_){let y;return _?(y=(0,w.gx)(_,O=>N+'$feature["'+O+'"]'+V),y=R.test(y)?y.replace(R,""):$+y,y=A.test(y)?y.replace(A,""):y+$,y=y.replaceAll(T,K).replaceAll(b,p)):y='""',y}const m=/^\s*\{([^}]+)\}\s*$/i,a=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,u=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,z=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function E(_){if(!_)return null;let y=a.exec(_)||u.exec(_);return y?y[1]||y[3]:(y=z.exec(_),y?y[2]:null)}},96043:(te,H,x)=>{x.d(H,{AJ:()=>A,If:()=>p,k0:()=>R,uI:()=>K,ul:()=>b,wx:()=>f});var w=x(55117),N=x(55768),V=x(5710),T=x(23515);const b=2.4;function R(d){return(0,N.Wz)(d*b)}function A(d){return(0,N.F2)(d)/b}function $(d,M,I,v){let{color:L,ratio:m}=M,{color:c,ratio:a}=I;a===m&&(1===a?m-=1e-6:a+=1e-6);const u=(0,w.uZ)((v-m)/(a-m),0,1);(0,V.l)(d,L.toArray(),c.toArray(),u)}function K(d){const I=new Uint8ClampedArray(2048);if((d=d.filter(({ratio:a})=>a>=0&&a<=1).sort((a,u)=>a.ratio-u.ratio).map(({color:a,ratio:u})=>({color:a,ratio:Math.max(u,.001)}))).length<1)return I;let v=d[0],L=d[0],m=1;const c=(0,T.Ue)();for(let a=0;a<512;a++){const u=(a+.5)/512;for(;u>L.ratio&&m<d.length;)v=L,L=d[m++];$(c,v,L,u),I.set(c,4*a)}return I}function p(d,M,I){const v=Math.sqrt(d**2+M**2)/I;return v>1?0:3/(Math.PI*I**2)*(1-v**2)**2}function f(d){return"function"==typeof d?d:d?M=>+M[d]:()=>1}},8295:(te,H,x)=>{x.d(H,{p:()=>N});var w=x(53456);function N(V,T,b){if(!b?.features||!b.hasZ)return;const R=(0,w.k)(b.geometryType,T,V.outSpatialReference);if(null!=R)for(const A of b.features)R(A.geometry)}},93792:(te,H,x)=>{x.d(H,{Z:()=>a});var L,w=x(50484),N=x(2189),V=x(35458),T=x(84303),b=x(89317),R=x(34222),A=x(80543),p=(x(14007),x(4703),x(62185)),f=x(10141),d=x(7547),M=x(43814),I=x(40637),v=x(81247);const m=new T.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let c=L=class extends b.wq{constructor(u){super(u),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(u,z){const E=M.Z.fromJSON(z.spatialReference),_=[];for(let y=0;y<u.length;y++){const O=u[y],S=V.Z.fromJSON(O),J=O.geometry?.spatialReference;null==S.geometry||J||(S.geometry.spatialReference=E);const U=O.aggregateGeometries,g=S.aggregateGeometries;if(U&&null!=g)for(const F in g){const j=g[F],W=U[F],ee=W?.spatialReference;null==j||ee||(j.spatialReference=E)}_.push(S)}return _}writeGeometryType(u,z,E,_){if(u)return void m.write(u,z,E,_);const{features:y}=this;if(y)for(const O of y)if(null!=O?.geometry)return void m.write(O.geometry.type,z,E,_)}readQueryGeometry(u,z){if(!u)return null;const E=!!u.spatialReference,_=(0,I.im)(u);return _&&!E&&z.spatialReference&&(_.spatialReference=M.Z.fromJSON(z.spatialReference)),_}writeSpatialReference(u,z){if(u)return void(z.spatialReference=u.toJSON());const{features:E}=this;if(E)for(const _ of E)if(_&&null!=_.geometry&&_.geometry.spatialReference)return void(z.spatialReference=_.geometry.spatialReference.toJSON())}clone(){return new L(this.cloneProperties())}cloneProperties(){return(0,R.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(u){const z=this.write();if(z.features&&Array.isArray(u)&&u.length>0)for(let E=0;E<z.features.length;E++){const _=z.features[E];if(_.geometry){const y=u?.[E];_.geometry=y?.toJSON()||_.geometry}}return z}quantize(u){const{scale:[z,E],translate:[_,y]}=u,J=this.features,U=this._getQuantizationFunction(this.geometryType,g=>Math.round((g-_)/z),g=>Math.round((y-g)/E));for(let g=0,F=J.length;g<F;g++)U?.(J[g].geometry)||(J.splice(g,1),g--,F--);return this.transform=u,this}unquantize(){const{geometryType:u,features:z,transform:E}=this;if(!E)return this;const{translate:[_,y],scale:[O,S]}=E;let g=null,F=null;if(this.hasZ&&null!=E?.scale?.[2]){const{translate:[,,W],scale:[,,ee]}=E;g=G=>G*ee+W}if(this.hasM&&null!=E?.scale?.[3]){const{translate:[,,,W],scale:[,,,ee]}=E;F=G=>null==G?G:G*ee+W}const j=this._getHydrationFunction(u,W=>W*O+_,W=>y-W*S,g,F);for(const{geometry:W}of z)null!=W&&j&&j(W);return this.transform=null,this}_quantizePoints(u,z,E){let _,y;const O=[];for(let S=0,J=u.length;S<J;S++){const U=u[S];if(S>0){const g=z(U[0]),F=E(U[1]);g===_&&F===y||(O.push([g-_,F-y]),_=g,y=F)}else _=z(U[0]),y=E(U[1]),O.push([_,y])}return O.length>0?O:null}_getQuantizationFunction(u,z,E){return"point"===u?_=>(_.x=z(_.x),_.y=E(_.y),_):"polyline"===u||"polygon"===u?_=>{const y=(0,I.oU)(_)?_.rings:_.paths,O=[];for(let S=0,J=y.length;S<J;S++){const g=this._quantizePoints(y[S],z,E);g&&O.push(g)}return O.length>0?((0,I.oU)(_)?_.rings=O:_.paths=O,_):null}:"multipoint"===u?_=>{const y=this._quantizePoints(_.points,z,E);return y&&y.length>0?(_.points=y,_):null}:"extent"===u?_=>_:null}_getHydrationFunction(u,z,E,_,y){return"point"===u?O=>{O.x=z(O.x),O.y=E(O.y),_&&(O.z=_(O.z))}:"polyline"===u||"polygon"===u?O=>{const S=(0,I.oU)(O)?O.rings:O.paths;let J,U;for(let g=0,F=S.length;g<F;g++){const j=S[g];for(let W=0,ee=j.length;W<ee;W++){const G=j[W];W>0?(J+=G[0],U+=G[1]):(J=G[0],U=G[1]),G[0]=z(J),G[1]=E(U)}}if(_&&y)for(let g=0,F=S.length;g<F;g++){const j=S[g];for(let W=0,ee=j.length;W<ee;W++){const G=j[W];G[2]=_(G[2]),G[3]=y(G[3])}}else if(_)for(let g=0,F=S.length;g<F;g++){const j=S[g];for(let W=0,ee=j.length;W<ee;W++){const G=j[W];G[2]=_(G[2])}}else if(y)for(let g=0,F=S.length;g<F;g++){const j=S[g];for(let W=0,ee=j.length;W<ee;W++){const G=j[W];G[2]=y(G[2])}}}:"extent"===u?O=>{O.xmin=z(O.xmin),O.ymin=E(O.ymin),O.xmax=z(O.xmax),O.ymax=E(O.ymax),_&&null!=O.zmax&&null!=O.zmin&&(O.zmax=_(O.zmax),O.zmin=_(O.zmin)),y&&null!=O.mmax&&null!=O.mmin&&(O.mmax=y(O.mmax),O.mmin=y(O.mmin))}:"multipoint"===u?O=>{const S=O.points;let J,U;for(let g=0,F=S.length;g<F;g++){const j=S[g];g>0?(J+=j[0],U+=j[1]):(J=j[0],U=j[1]),j[0]=z(J),j[1]=E(U)}if(_&&y)for(let g=0,F=S.length;g<F;g++){const j=S[g];j[2]=_(j[2]),j[3]=y(j[3])}else if(_)for(let g=0,F=S.length;g<F;g++){const j=S[g];j[2]=_(j[2])}else if(y)for(let g=0,F=S.length;g<F;g++){const j=S[g];j[2]=y(j[2])}}:null}};(0,w._)([(0,A.Cb)({type:String,json:{write:!0}})],c.prototype,"displayFieldName",void 0),(0,w._)([(0,A.Cb)({type:Boolean,json:{write:{overridePolicy:u=>({enabled:u})}}})],c.prototype,"exceededTransferLimit",void 0),(0,w._)([(0,A.Cb)({type:[V.Z],json:{write:!0}})],c.prototype,"features",void 0),(0,w._)([(0,p.r)("features")],c.prototype,"readFeatures",null),(0,w._)([(0,A.Cb)({type:[v.Z],json:{write:!0}})],c.prototype,"fields",void 0),(0,w._)([(0,A.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:m.read}}})],c.prototype,"geometryType",void 0),(0,w._)([(0,d.c)("geometryType")],c.prototype,"writeGeometryType",null),(0,w._)([(0,A.Cb)({type:Boolean,json:{write:{overridePolicy:u=>({enabled:u})}}})],c.prototype,"hasM",void 0),(0,w._)([(0,A.Cb)({type:Boolean,json:{write:{overridePolicy:u=>({enabled:u})}}})],c.prototype,"hasZ",void 0),(0,w._)([(0,A.Cb)({types:N.qM,json:{write:!0}})],c.prototype,"queryGeometry",void 0),(0,w._)([(0,p.r)("queryGeometry")],c.prototype,"readQueryGeometry",null),(0,w._)([(0,A.Cb)({type:M.Z,json:{write:!0}})],c.prototype,"spatialReference",void 0),(0,w._)([(0,d.c)("spatialReference")],c.prototype,"writeSpatialReference",null),(0,w._)([(0,A.Cb)({json:{write:!0}})],c.prototype,"transform",void 0),c=L=(0,w._)([(0,f.j)("esri.rest.support.FeatureSet")],c),c.prototype.toJSON.isDefaultToJSON=!0;const a=c}}]);