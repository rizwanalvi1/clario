"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[6973],{70794:(F,w,s)=>{s.d(w,{EX:()=>k,Y3:()=>G,_Y:()=>E,jQ:()=>j,sJ:()=>T,xr:()=>O});var c=s(66599);function j(e){return"r"in e&&"g"in e&&"b"in e}function I(e){return"h"in e&&"s"in e&&"v"in e}function _(e){return"l"in e&&"a"in e&&"b"in e}function L(e){return"l"in e&&"c"in e&&"h"in e}s(5710),s(23515);const v=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],A=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function B(e,u){const d=[];let m,M;if(e[0].length!==u.length)throw new Error("dimensions do not match");const U=e.length,S=e[0].length;let z=0;for(m=0;m<U;m++){for(z=0,M=0;M<S;M++)z+=e[m][M]*u[M];d.push(z)}return d}function V(e){const u=[e.r/255,e.g/255,e.b/255].map(m=>m<=.04045?m/12.92:((m+.055)/1.055)**2.4),d=B(v,u);return{x:100*d[0],y:100*d[1],z:100*d[2]}}function K(e){const u=B(A,[e.x/100,e.y/100,e.z/100]).map(d=>Math.min(1,Math.max(d<=.0031308?12.92*d:1.055*d**.4166666666666667-.055,0)));return{r:Math.round(255*u[0]),g:Math.round(255*u[1]),b:Math.round(255*u[2])}}function b(e){const u=[e.x/95.047,e.y/100,e.z/108.883].map(d=>d>.008856451679035631?d**.3333333333333333:7.787037037037035*d+.13793103448275862);return{l:116*u[1]-16,a:500*(u[0]-u[1]),b:200*(u[1]-u[2])}}function f(e){const u=e.l,d=[(u+16)/116+e.a/500,(u+16)/116,(u+16)/116-e.b/200].map(m=>m>6/29?m**3:3*(6/29)**2*(m-4/29));return{x:95.047*d[0],y:100*d[1],z:108.883*d[2]}}function O(e){return j(e)?e:L(e)?function h(e){return K(f(function i(e){const d=e.c,m=e.h;return{l:e.l,a:d*Math.cos(m),b:d*Math.sin(m)}}(e)))}(e):_(e)?function l(e){return K(f(e))}(e):function R(e){return"x"in e&&"y"in e&&"z"in e}(e)?K(e):I(e)?function C(e){const u=(e.h+360)%360/60,m=e.v/100*255,M=m*(e.s/100),U=M*(1-Math.abs(u%2-1));let S;switch(Math.floor(u)){case 0:S={r:M,g:U,b:0};break;case 1:S={r:U,g:M,b:0};break;case 2:S={r:0,g:M,b:U};break;case 3:S={r:0,g:U,b:M};break;case 4:S={r:U,g:0,b:M};break;case 5:case 6:S={r:M,g:0,b:U};break;default:S={r:0,g:0,b:0}}return S.r=Math.round(S.r+m-M),S.g=Math.round(S.g+m-M),S.b=Math.round(S.b+m-M),S}(e):e}function E(e){return I(e)?e:function D(e){const u=e.r,d=e.g,m=e.b,M=Math.max(u,d,m),U=M-Math.min(u,d,m);let S=M,z=0===U?0:M===u?(d-m)/U%6:M===d?(m-u)/U+2:(u-d)/U+4,$=0===U?0:U/S;return z<0&&(z+=6),z*=60,$*=100,S*=100/255,{h:z,s:$,v:S}}(O(e))}function G(e){return _(e)?e:function o(e){return b(V(e))}(O(e))}function T(e){return L(e)?e:function p(e){return function g(e){const u=e.l,d=e.a,m=e.b,M=Math.sqrt(d*d+m*m);let U=Math.atan2(m,d);return U=U>0?U:U+2*Math.PI,{l:u,c:M,h:U}}(b(V(e)))}(O(e))}function k(e,u){const{r:d,g:m,b:M}=u?.ignoreAlpha?e:function H(e){let{r:u,g:d,b:m,a:M}=e;return M<1&&(u=Math.round(M*u+255*(1-M)),d=Math.round(M*d+255*(1-M)),m=Math.round(M*m+255*(1-M))),new c.Z({r:u,g:d,b:m})}(e);return.2126*d+.7152*m+.0722*M}var a,e;(e=a||(a={}))[e.Low=160]="Low",e[e.High=225]="High"},69411:(F,w,s)=>{s.d(w,{E:()=>f});var c=s(15861),W=s(66599),x=s(70794),j=s(34222),I=s(4978),_=s(25896),L=s(57964),R=s(4703),v=s(66398);function A(g,i,o,l,p){if(null==g)return null;const h=g.referencesGeometry()&&p?function V(g,i,o){const{transform:l,hasZ:p,hasM:h}=o;B.has(i)||B.set(i,function K(g){const i={};switch(g){case"esriGeometryPoint":return(o,l,p,h)=>(0,v.U1)(l,i,o,p,h);case"esriGeometryPolygon":return(o,l,p,h)=>(0,v.Ie)(l,i,o,p,h);case"esriGeometryPolyline":return(o,l,p,h)=>(0,v.G6)(l,i,o,p,h);case"esriGeometryMultipoint":return(o,l,p,h)=>(0,v.J9)(l,i,o,p,h);default:return R.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new L.Z("mapview-arcade",`Unable to handle geometryType: ${g}`)),o=>o}}(i));const D=B.get(i)(g.geometry,l,p,h);return{...g,geometry:D}}(i,l,p):i,D=g.repurposeFeature(h);try{return g.evaluate({...o,$feature:D},g.services)}catch(C){return R.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",C),null}}const B=new Map,b=g=>{if(!g)return[0,0,0,0];const{r:i,g:o,b:l,a:p}=g;return[i,o,l,255*p]};class f{static findApplicableOverrides(i,o,l){if(i&&o){if(i.primitiveName){let p=!1;for(const h of l)if(h.primitiveName===i.primitiveName){p=!0;break}if(!p)for(const h of o)h.primitiveName===i.primitiveName&&l.push(h)}switch(i.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(i.effects)for(const p of i.effects)f.findApplicableOverrides(p,o,l);if(i.symbolLayers)for(const p of i.symbolLayers)f.findApplicableOverrides(p,o,l);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(i.effects)for(const p of i.effects)f.findApplicableOverrides(p,o,l);if(i.markerPlacement&&f.findApplicableOverrides(i.markerPlacement,o,l),"CIMVectorMarker"===i.type){if(i.markerGraphics)for(const p of i.markerGraphics)f.findApplicableOverrides(p,o,l),f.findApplicableOverrides(p.symbol,o,l)}else"CIMCharacterMarker"===i.type?f.findApplicableOverrides(i.symbol,o,l):"CIMHatchFill"===i.type?f.findApplicableOverrides(i.lineSymbol,o,l):"CIMPictureMarker"===i.type&&f.findApplicableOverrides(i.animatedSymbolProperties,o,l)}}}static findEffectOverrides(i,o){if(!i)return null;if("CIMGeometricEffectDashes"===i.type&&(0,_.T2)(i),!o||!i.primitiveName)return{type:"cim-effect-param",effect:i,overrides:[]};const l=(0,_.Ml)(i),p=i.primitiveName,h=[];for(const D of o)D.primitiveName===p&&h.push((0,_.Ml)(D));return{type:"cim-effect-param",effect:l,overrides:(0,_.Ul)(h)}}static resolveSymbolOverrides(i,o,l,p,h,D,C){return(0,c.Z)(function*(){if(!i?.symbol)return null;let{symbol:O,primitiveOverrides:E}=i;const G=!!E;if(!G&&!p)return O;O=(0,j.d9)(O),E=(0,j.d9)(E);let T=!0;if(o||(o={attributes:{}},T=!1),G){if(T||(E=E.filter(N=>!N.valueExpressionInfo?.expression.includes("$feature"))),C||(E=E.filter(N=>!N.valueExpressionInfo?.expression.includes("$view"))),E.length>0){const N={spatialReference:l,fields:(0,_.Qf)(o.attributes),geometryType:h};yield f.createRenderExpressions(E,N),f.evaluateOverrides(E,o,h??"esriGeometryPoint",D,C)}f.applyOverrides(O,E)}return p&&f.applyDictionaryTextOverrides(O,o,p,null),O})()}static createRenderExpressions(i,o){return(0,c.Z)(function*(){const l=[];for(const p of i){const h=p.valueExpressionInfo;if(!h||f._expressionToRenderExpression.has(h.expression))continue;const D=(0,I.Yi)(h.expression,o.spatialReference,o.fields);l.push(D),D.then(C=>f._expressionToRenderExpression.set(h.expression,C))}l.length>0&&(yield Promise.all(l))})()}static evaluateOverrides(i,o,l,p,h){const D={$view:{scale:h?.scale}};for(const C of i){C.value&&"object"==typeof C.value&&(0,x.jQ)(C.value)&&("Color"===C.propertyName||"StrokeColor"===C.propertyName)&&(C.value=b(C.value));const O=C.valueExpressionInfo;if(!O)continue;const E=f._expressionToRenderExpression.get(O.expression);E&&(C.value=A(E,o,D,l,p))}}static applyDictionaryTextOverrides(i,o,l,p,h="Normal"){if(i?.type)switch(i.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const D=i.symbolLayers;if(!D)return;for(const C of D)C&&"CIMVectorMarker"===C.type&&f.applyDictionaryTextOverrides(C,o,l,p,"CIMTextSymbol"===i.type?i.textCase:h)}break;case"CIMVectorMarker":{const D=i.markerGraphics;if(!D)return;for(const C of D)C&&f.applyDictionaryTextOverrides(C,o,l,p)}break;case"CIMMarkerGraphic":{const D=i.textString;if(D&&D.includes("[")){const C=(0,_.H1)(D,l);i.textString=(0,_.E_)(o,C,p,h)}}}}static applyOverrides(i,o,l,p){if(i.primitiveName)for(const h of o)if(h.primitiveName===i.primitiveName){const D=(0,_.Le)(h.propertyName);if(p&&p.push({cim:i,nocapPropertyName:D,value:i[D]}),l){let C=!1;for(const O of l)O.primitiveName===i.primitiveName&&(C=!0);C||l.push(h)}null!=h.value&&(i[D]=h.value)}switch(i.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(i.effects)for(const h of i.effects)f.applyOverrides(h,o,l,p);if(i.symbolLayers)for(const h of i.symbolLayers)f.applyOverrides(h,o,l,p);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(i.effects)for(const h of i.effects)f.applyOverrides(h,o,l,p);if("CIMVectorMarker"===i.type&&i.markerGraphics)for(const h of i.markerGraphics)f.applyOverrides(h,o,l,p),f.applyOverrides(h.symbol,o,l,p)}}static restoreOverrides(i){for(const o of i)o.cim[o.nocapPropertyName]=o.value}static buildOverrideKey(i){let o="";for(const l of i)void 0!==l.value&&(o+=`${l.primitiveName}${l.propertyName}${JSON.stringify(l.value)}`);return o}static toValue(i,o){if("DashTemplate"===i)return o.split(" ").map(l=>Number(l));if("Color"===i){const l=new W.Z(o).toRgba();return l[3]*=255,l}return o}}f._expressionToRenderExpression=new Map},83124:(F,w,s)=>{s.d(w,{y:()=>D});var b,c=s(50484),W=s(83944),x=s(18626),j=s(57964),I=s(77675),_=s(80543),A=(s(14007),s(4703),s(65311),s(10141)),B=s(85338),V=s(30640),K=s(38954);let f=b=class extends K.Z{constructor(C){super(C),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new b({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,c._)([(0,_.Cb)({type:[Number,String],json:{write:!0}})],f.prototype,"left",void 0),(0,c._)([(0,_.Cb)({type:[Number,String],json:{write:!0}})],f.prototype,"right",void 0),(0,c._)([(0,_.Cb)({type:[Number,String],json:{write:!0}})],f.prototype,"top",void 0),(0,c._)([(0,_.Cb)({type:[Number,String],json:{write:!0}})],f.prototype,"bottom",void 0),f=b=(0,c._)([(0,A.j)("esri.views.layers.support.ClipRect")],f);const g=f;var i=s(87265);let o=class extends K.Z{constructor(C){super(C),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,c._)([(0,_.Cb)({type:[[[Number]]],json:{write:!0}})],o.prototype,"path",void 0),o=(0,c._)([(0,A.j)("esri.views.layers.support.Path")],o);const l=o;var p=s(64579);const h=W.Z.ofType({key:"type",base:null,typeMap:{rect:g,path:l,geometry:i.Z}}),D=C=>{let O=class extends C{constructor(){super(...arguments),this.attached=!1,this.clips=new h,this.highlightOptions=null,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this._visibleAtCurrentScale=!0}initialize(){const E=this.view?.spatialReferenceLocked??!0;this.view?.spatialReference&&E&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new j.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new B.W),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,I.YP)(()=>this.suspended,T=>{this.container&&(this.container.visible=!T)},I.tX),(0,I.YP)(()=>this.updateSuspended,T=>{this.view&&!T&&this.updateRequested&&this.view.requestUpdate()},I.tX),(0,I.YP)(()=>this.layer?.opacity??1,T=>{this.container&&(this.container.opacity=T)},I.tX),(0,I.YP)(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",T=>{this.container&&(this.container.blendMode=T)},I.tX),(0,I.YP)(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,T=>{this.container&&(this.container.effect=T)},I.tX),(0,I.YP)(()=>this.highlightOptions,T=>this.container.highlightOptions=T,I.tX),(0,I.on)(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)},I.tX),(0,I.YP)(()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null}),({scale:T,scaleRange:N})=>{const H=(0,p.GB)(N,T);H!==this._visibleAtCurrentScale&&(this._visibleAtCurrentScale=H)},I.tX)],"constructor"),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then(T=>{T===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){const E=this.view?.spatialReference;return null==E||this.supportsSpatialReference(E)}get updating(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this._updatingHandles?.updating)}get visibleAtCurrentScale(){return this._visibleAtCurrentScale}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.updateSuspended||this.view.requestUpdate())}processUpdate(E){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",E),this.updateRequested&&!this.updateSuspended&&(this.updateRequested=!1,this.update(E))):this.updateRequested=!1}hitTest(E,G){return Promise.resolve(null)}supportsSpatialReference(E){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const E=super.getSuspendInfo(),G=!this.spatialReferenceSupported;return G&&(E.spatialReferenceNotSupported=G),E}addAttachHandles(E){this.addHandles(E,"attach")}};return(0,c._)([(0,_.Cb)()],O.prototype,"attached",void 0),(0,c._)([(0,_.Cb)({type:h,set(E){const G=(0,x.Z)(E,this._get("clips"),h);this._set("clips",G)}})],O.prototype,"clips",void 0),(0,c._)([(0,_.Cb)()],O.prototype,"container",void 0),(0,c._)([(0,_.Cb)({type:V.Z})],O.prototype,"highlightOptions",void 0),(0,c._)([(0,_.Cb)()],O.prototype,"moving",void 0),(0,c._)([(0,_.Cb)({readOnly:!0})],O.prototype,"spatialReferenceSupported",null),(0,c._)([(0,_.Cb)({readOnly:!0})],O.prototype,"updateParameters",void 0),(0,c._)([(0,_.Cb)()],O.prototype,"updateRequested",void 0),(0,c._)([(0,_.Cb)()],O.prototype,"updating",null),(0,c._)([(0,_.Cb)()],O.prototype,"view",void 0),(0,c._)([(0,_.Cb)()],O.prototype,"_visibleAtCurrentScale",void 0),(0,c._)([(0,_.Cb)({readOnly:!0})],O.prototype,"visibleAtCurrentScale",null),O=(0,c._)([(0,A.j)("esri.views.2d.layers.LayerView2D")],O),O}},86635:(F,w,s)=>{s.r(w),s.d(w,{default:()=>k});var c=s(15861),W=s(50484),x=s(57678),j=s(83944),I=s(5603),_=s(1258),L=s(77675),R=s(80543),B=(s(14007),s(4703),s(10141)),V=s(40579),K=s(21664),b=s(46947),f=s(44042),g=s(74539),i=s(62737),o=s(64157),l=s(5633),p=s(83124),h=s(50800),D=s(37348),C=s(50145);const O=["route-info","direction-line","direction-point","polygon-barrier","polyline-barrier","point-barrier","stop"],E={graphic:null,property:null,oldValue:null,newValue:null};function G(a){return a instanceof V.Z||a instanceof K.Z||a instanceof b.Z||a instanceof f.Z||a instanceof g.Z||a instanceof i.Z||a instanceof o.Z}let H=class extends((0,p.y)(C.Z)){constructor(){super(...arguments),this._graphics=new j.Z,this._highlightIds=new Map,this._networkFeatureMap=new Map,this._networkGraphicMap=new Map}get _routeItems(){return new I.Z({getCollections:()=>null==this.layer||this.destroyed?[]:[null!=this.layer.routeInfo?new j.Z([this.layer.routeInfo]):null,this.layer.directionLines,this.layer.directionPoints,this.layer.polygonBarriers,this.layer.polylineBarriers,this.layer.pointBarriers,this.layer.stops]})}initialize(){this._updatingHandles.addOnCollectionChange(()=>this._routeItems,a=>this._routeItemsChanged(a),L.nn)}destroy(){this._networkFeatureMap.clear(),this._networkGraphicMap.clear(),this._graphics.removeAll(),this._get("_routeItems")?.destroy()}attach(){this._createGraphicsView()}detach(){this._destroyGraphicsView()}fetchPopupFeaturesAtLocation(a,y){var P=this;return(0,c.Z)(function*(){return P._graphicsView.hitTest(a).filter(({popupTemplate:Z})=>!!Z)})()}highlight(a){let y;y=G(a)?[this._getNetworkFeatureUid(a)]:function N(a){return Array.isArray(a)&&a.length>0&&G(a[0])}(a)?a.map(Z=>this._getNetworkFeatureUid(Z)):function T(a){return j.Z.isCollection(a)&&a.length&&G(a.at(0))}(a)?a.map(Z=>this._getNetworkFeatureUid(Z)).toArray():[a.uid];const P=y.filter(x.pC);return P.length?(this._addHighlight(P),(0,_.kB)(()=>this._removeHighlight(P))):(0,_.kB)()}hitTest(a,y){var P=this;return(0,c.Z)(function*(){if(P.suspended)return null;const Z=P._graphicsView.hitTest(a).filter(x.pC).map(Y=>P._networkGraphicMap.get(Y));if(!Z.length)return null;const{layer:X}=P;return Z.reverse().map(Y=>({type:"route",layer:X,mapPoint:a,networkFeature:Y}))})()}isUpdating(){return this._graphicsView.updating}moveEnd(){}update(a){this._graphicsView.processUpdate(a)}viewChange(){this._graphicsView.viewChange()}_addHighlight(a){for(const y of a)if(this._highlightIds.has(y)){const P=this._highlightIds.get(y);this._highlightIds.set(y,P+1)}else this._highlightIds.set(y,1);this._updateHighlight()}_createGraphic(a){const y=a.toGraphic();return y.layer=this.layer,y.sourceLayer=this.layer,y}_createGraphicsView(){const a=this.view,P=new h.Z(a.featuresTilingScheme);this._graphicsView=new D.Z({container:P,graphics:this._graphics,requestUpdateCallback:()=>this.requestUpdate(),view:a}),this.container.addChild(P),this._updateHighlight()}_destroyGraphicsView(){this.container.removeChild(this._graphicsView.container),this._graphicsView.destroy()}_getDrawOrder(a){const y=this._networkGraphicMap.get(a);return O.indexOf(y.type)}_getNetworkFeatureUid(a){return this._networkFeatureMap.has(a)?this._networkFeatureMap.get(a).uid:null}_removeHighlight(a){for(const y of a)if(this._highlightIds.has(y)){const P=this._highlightIds.get(y)-1;0===P?this._highlightIds.delete(y):this._highlightIds.set(y,P)}this._updateHighlight()}_routeItemsChanged(a){if(a.removed.length){this._graphics.removeMany(a.removed.map(y=>{const P=this._networkFeatureMap.get(y);return this._networkFeatureMap.delete(y),this._networkGraphicMap.delete(P),P}));for(const y of a.removed)this.removeHandles(y)}if(a.added.length){this._graphics.addMany(a.added.map(y=>{const P=this._createGraphic(y);return null==P.symbol?null:(this._networkFeatureMap.set(y,P),this._networkGraphicMap.set(P,y),P)}).filter(x.pC));for(const y of a.added)this.addHandles([(0,L.YP)(()=>y.geometry,(P,Z)=>{this._updateGraphic(y,"geometry",P,Z)}),(0,L.YP)(()=>y.symbol,(P,Z)=>{this._updateGraphic(y,"symbol",P,Z)})],y);this._graphics.sort((y,P)=>this._getDrawOrder(y)-this._getDrawOrder(P))}}_updateGraphic(a,y,P,Z){if(!this._networkFeatureMap.has(a)){const Y=this._createGraphic(a);return this._networkFeatureMap.set(a,Y),this._networkGraphicMap.set(Y,a),void this._graphics.add(Y)}const X=this._networkFeatureMap.get(a);X[y]=P,E.graphic=X,E.property=y,E.oldValue=Z,E.newValue=P,this._graphicsView.graphicUpdateHandler(E)}_updateHighlight(){const a=Array.from(this._highlightIds.keys()),y=(0,l.ck)("highlight");this._graphicsView.setHighlight(a.map(P=>({objectId:P,highlightFlags:y})))}};(0,W._)([(0,R.Cb)()],H.prototype,"_graphics",void 0),(0,W._)([(0,R.Cb)()],H.prototype,"_routeItems",null),H=(0,W._)([(0,B.j)("esri.views.2d.layers.RouteLayerView2D")],H);const k=H},50800:(F,w,s)=>{s.d(w,{Z:()=>j});var c=s(43101),W=s(89791),x=s(31043);class j extends W.K{renderChildren(_){for(const L of this.children)L.setTransform(_.state);if(super.renderChildren(_),this.attributeView.update(),this.children.some(L=>L.hasData)){switch(_.drawPhase){case c.jx.MAP:this._renderChildren(_,c.Xq.All);break;case c.jx.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(_)}this._boundsRenderer&&this._boundsRenderer.doRender(_)}}_renderHighlight(_){(0,x.P9)(_,!1,L=>{this._renderChildren(L,c.Xq.Highlight)})}}},50145:(F,w,s)=>{s.d(w,{Z:()=>f});var c=s(50484),W=s(73514),x=s(88278),j=s(84373),I=s(4703),_=s(51172),L=s(47868),R=s(80543),B=(s(14007),s(65311),s(10141)),V=s(90110),K=s(64579);let b=class extends((0,j.IG)((0,L.v)(x.Z.EventedMixin(W.Z)))){constructor(g){super(g),this._updatingHandles=new V.R,this.layer=null,this.parent=null}initialize(){this.when().catch(g=>{if("layerview:create-error"!==g.name){const i=this.layer&&this.layer.id||"no id",o=this.layer?.title||"no title";I.Z.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${o}', id: '${i}')`,g)}})}destroy(){this._updatingHandles=(0,_.SC)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(g){this._overrideIfSome("visible",g)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const g=this.view.timeExtent,i=this.layer?.visibilityTimeExtent;return!g||!i||!g.intersection(i).isEmpty}canResume(){const g=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready&&(0,K.Cy)(g)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const g=this.parent?.suspended?this.parent.suspendInfo:{};return this.view?.ready||(g.viewNotReady=!0),this.layer&&this.layer.loaded||(g.layerNotLoaded=!0),(0,K.Cy)(this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null)&&this.visibleAtCurrentScale||(g.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(g.outsideVisibilityTimeExtent=!0),this.visible||(g.layerInvisible=!0),g}isUpdating(){return!1}};(0,c._)([(0,R.Cb)()],b.prototype,"view",void 0),(0,c._)([(0,R.Cb)()],b.prototype,"fullOpacity",null),(0,c._)([(0,R.Cb)()],b.prototype,"layer",void 0),(0,c._)([(0,R.Cb)()],b.prototype,"parent",void 0),(0,c._)([(0,R.Cb)({readOnly:!0})],b.prototype,"suspended",null),(0,c._)([(0,R.Cb)({readOnly:!0})],b.prototype,"suspendInfo",null),(0,c._)([(0,R.Cb)({readOnly:!0})],b.prototype,"legendEnabled",null),(0,c._)([(0,R.Cb)({type:Boolean,readOnly:!0})],b.prototype,"updating",null),(0,c._)([(0,R.Cb)({readOnly:!0})],b.prototype,"updatingProgress",null),(0,c._)([(0,R.Cb)()],b.prototype,"updateSuspended",null),(0,c._)([(0,R.Cb)()],b.prototype,"visible",null),(0,c._)([(0,R.Cb)({readOnly:!0})],b.prototype,"visibleAtCurrentScale",null),(0,c._)([(0,R.Cb)({readOnly:!0})],b.prototype,"visibleAtCurrentTimeExtent",null),b=(0,c._)([(0,B.j)("esri.views.layers.LayerView")],b);const f=b},38954:(F,w,s)=>{s.d(w,{Z:()=>v});var c=s(50484),W=s(89317),x=s(80543),L=(s(14007),s(4703),s(65311),s(10141));let R=class extends W.wq{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,c._)([(0,x.Cb)({readOnly:!0})],R.prototype,"version",null),R=(0,c._)([(0,L.j)("esri.views.layers.support.ClipArea")],R);const v=R},87265:(F,w,s)=>{s.d(w,{Z:()=>g});var K,c=s(50484),x=(s(2189),s(80543)),L=(s(14007),s(4703),s(65311),s(10141)),R=s(32184),v=s(40637),A=s(38954),B=s(26894),V=s(5391);const b={base:R.Z,key:"type",typeMap:{extent:B.Z,polygon:V.Z}};let f=K=class extends A.Z{constructor(i){super(i),this.type="geometry",this.geometry=null}clone(){return new K({geometry:this.geometry?.clone()??null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,c._)([(0,x.Cb)({types:b,json:{read:v.im,write:!0}})],f.prototype,"geometry",void 0),f=K=(0,c._)([(0,L.j)("esri.views.layers.support.Geometry")],f);const g=f},64579:(F,w,s)=>{function c(v){return v&&"function"==typeof v.highlight}function j(v,A){if(A&&v){const{minScale:B,maxScale:V}=v;if(function I(v,A){return null!=v&&v>0||null!=A&&A>0}(B,V))return function x(v,A,B){return null==v||v>=B&&(0===A||v<=A)}(A,B,V)}return!0}function _(v){return!v?.minScale||!v.maxScale||v.minScale>=v.maxScale}s.d(w,{Cy:()=>_,GB:()=>j,tl:()=>c})}}]);