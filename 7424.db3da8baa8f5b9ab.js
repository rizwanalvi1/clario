"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[7424,318,5398],{15398:(Y,F,t)=>{t.d(F,{A4:()=>A,L9:()=>K,yV:()=>u});var y=t(25037);class u{}function A(f){return f instanceof y.ld?f===u.instance:"unknown"===f?.toString().toLowerCase()}function K(f){return A(f)?u.instance:f}u.instance=new y.vF("Etc/UTC")},70265:(Y,F,t)=>{t.r(F),t.d(F,{default:()=>fe});var y=t(15861),u=t(50484),A=t(62691),K=t(66476),W=t(57964),f=t(34222),E=t(4703),L=t(3233),D=t(71763),M=t(79412),R=t(6785),h=t(80543),$=(t(14007),t(62185)),x=t(10141),T=t(7547),j=t(95060),v=t(29674),_=t(4257),I=t(27426),U=t(80099),P=t(70509),V=t(29717),G=t(38866),z=t(1535),Z=t(21070),g=t(89317);t(65311);let d=class extends g.wq{constructor(c){super(c),this.field=null,this.type=null}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}};(0,u._)([(0,h.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],d.prototype,"field",void 0),(0,u._)([(0,h.Cb)({readOnly:!0,nonNullable:!0,json:{read:!1}})],d.prototype,"type",void 0),d=(0,u._)([(0,x.j)("esri.layers.pointCloudFilters.PointCloudFilter")],d);const r=d;var o;let p=o=class extends r{constructor(c){super(c),this.requiredClearBits=null,this.requiredSetBits=null,this.type="bitfield"}clone(){return new o({field:this.field,requiredClearBits:(0,f.d9)(this.requiredClearBits),requiredSetBits:(0,f.d9)(this.requiredSetBits)})}};(0,u._)([(0,h.Cb)({type:[z.z8],json:{write:{enabled:!0,overridePolicy(){return{enabled:!0,isRequired:!this.requiredSetBits}}}}})],p.prototype,"requiredClearBits",void 0),(0,u._)([(0,h.Cb)({type:[z.z8],json:{write:{enabled:!0,overridePolicy(){return{enabled:!0,isRequired:!this.requiredClearBits}}}}})],p.prototype,"requiredSetBits",void 0),(0,u._)([(0,Z.J)({pointCloudBitfieldFilter:"bitfield"})],p.prototype,"type",void 0),p=o=(0,u._)([(0,x.j)("esri.layers.pointCloudFilters.PointCloudBitfieldFilter")],p);const m=p;var C;let B=C=class extends r{constructor(c){super(c),this.includedReturns=[],this.type="return"}clone(){return new C({field:this.field,includedReturns:(0,f.d9)(this.includedReturns)})}};(0,u._)([(0,h.Cb)({type:[["firstOfMany","last","lastOfMany","single"]],json:{write:{enabled:!0,isRequired:!0}}})],B.prototype,"includedReturns",void 0),(0,u._)([(0,Z.J)({pointCloudReturnFilter:"return"})],B.prototype,"type",void 0),B=C=(0,u._)([(0,x.j)("esri.layers.pointCloudFilters.PointCloudReturnFilter")],B);const J=B;var S;let Q=S=class extends r{constructor(c){super(c),this.mode="exclude",this.type="value",this.values=[]}clone(){return new S({field:this.field,mode:this.mode,values:(0,f.d9)(this.values)})}};(0,u._)([(0,h.Cb)({type:["exclude","include"],json:{write:{enabled:!0,isRequired:!0}}})],Q.prototype,"mode",void 0),(0,u._)([(0,Z.J)({pointCloudValueFilter:"value"})],Q.prototype,"type",void 0),(0,u._)([(0,h.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],Q.prototype,"values",void 0),Q=S=(0,u._)([(0,x.j)("esri.layers.pointCloudFilters.PointCloudValueFilter")],Q);const le={key:"type",base:r,typeMap:{value:Q,bitfield:m,return:J}};var re,ee=t(56956),te=t(81247),ae=t(27969),ne=t(59869),de=t(21705),se=t(86627);let k=re=class extends se.Z{constructor(c){super(c),this.type="point-cloud-rgb",this.field=null}clone(){return new re({...this.cloneProperties(),field:(0,f.d9)(this.field)})}};(0,u._)([(0,Z.J)({pointCloudRGBRenderer:"point-cloud-rgb"})],k.prototype,"type",void 0),(0,u._)([(0,h.Cb)({type:String,json:{write:!0}})],k.prototype,"field",void 0),k=re=(0,u._)([(0,x.j)("esri.renderers.PointCloudRGBRenderer")],k);const ue=k;var _e=t(71212),pe=t(70615);const oe={key:"type",base:se.Z,typeMap:{"point-cloud-class-breaks":de.Z,"point-cloud-rgb":ue,"point-cloud-stretch":_e.Z,"point-cloud-unique-value":pe.Z},errorContext:"renderer"};var q=t(43688),ce=t(33331);const ie=(0,ae.v)();let b=class extends((0,G.Vt)((0,_.Y)((0,U.q)((0,P.I)((0,V.M)((0,L.R)((0,I.N)((0,v.V)(j.Z))))))))){constructor(...c){super(...c),this.operationalLayerType="PointCloudLayer",this.popupEnabled=!0,this.popupTemplate=null,this.opacity=1,this.filters=[],this.fields=null,this.fieldsIndex=null,this.outFields=null,this.path=null,this.legendEnabled=!0,this.renderer=null,this.type="point-cloud"}normalizeCtorArgs(c,O){return"string"==typeof c?{url:c,...O}:c}get defaultPopupTemplate(){return this.attributeStorageInfo?this.createPopupTemplate():null}getFieldDomain(c){const O=this.fieldsIndex.get(c);return O?.domain?O.domain:null}readServiceFields(c,O,N){return Array.isArray(c)?c.map(H=>{const X=new te.Z;return"FieldTypeInteger"===H.type&&((H=(0,f.d9)(H)).type="esriFieldTypeInteger"),X.read(H,N),X}):Array.isArray(O.attributeStorageInfo)?O.attributeStorageInfo.map(H=>new te.Z({name:H.name,type:"ELEVATION"===H.name?"double":"integer"})):null}set elevationInfo(c){this._set("elevationInfo",c),this._validateElevationInfo()}writeRenderer(c,O,N,H){(0,D.RB)("layerDefinition.drawingInfo.renderer",c.write({},H),O)}load(c){const O=null!=c?c.signal:null,N=this.loadFromPortal({supportedTypes:["Scene Service"]},c).catch(M.r9).then(()=>this._fetchService(O));return this.addResolvingPromise(N),Promise.resolve(this)}createPopupTemplate(c){const O=(0,ce.eZ)(this,c);return O&&(this._formatPopupTemplateReturnsField(O),this._formatPopupTemplateRGBField(O)),O}_formatPopupTemplateReturnsField(c){const O=this.fieldsIndex.get("RETURNS");if(!O)return;const N=c.fieldInfos?.find(X=>X.fieldName===O.name);if(!N)return;const H=new ne.Z({name:"pcl-returns-decoded",title:O.alias||O.name,expression:`\n        var returnValue = $feature.${O.name};\n        return (returnValue % 16) + " / " + Floor(returnValue / 16);\n      `});c.expressionInfos=[...c.expressionInfos||[],H],N.fieldName="expression/pcl-returns-decoded"}_formatPopupTemplateRGBField(c){const O=this.fieldsIndex.get("RGB");if(!O)return;const N=c.fieldInfos?.find(X=>X.fieldName===O.name);if(!N)return;const H=new ne.Z({name:"pcl-rgb-decoded",title:O.alias||O.name,expression:`\n        var rgb = $feature.${O.name};\n        var red = Floor(rgb / 65536, 0);\n        var green = Floor((rgb - (red * 65536)) / 256,0);\n        var blue = rgb - (red * 65536) - (green * 256);\n\n        return "rgb(" + red + "," + green + "," + blue + ")";\n      `});c.expressionInfos=[...c.expressionInfos||[],H],N.fieldName="expression/pcl-rgb-decoded"}queryCachedStatistics(c,O){var N=this;return(0,y.Z)(function*(){if(yield N.load(O),!N.attributeStorageInfo)throw new W.Z("scenelayer:no-cached-statistics","Cached statistics are not available for this layer");const H=N.fieldsIndex.get(c);if(!H)throw new W.Z("pointcloudlayer:field-unexisting",`Field '${c}' does not exist on the layer`);for(const X of N.attributeStorageInfo)if(X.name===H.name){const Ee=(0,R.v_)(N.parsedUrl?.path??"",`./statistics/${X.key}`);return(0,K.Z)(Ee,{query:{f:"json",...N.customParameters,token:N.apiKey},responseType:"json",signal:O?O.signal:null}).then(ve=>ve.data)}throw new W.Z("pointcloudlayer:no-cached-statistics","Cached statistics for this attribute are not available")})()}saveAs(c,O){var N=this;return(0,y.Z)(function*(){return N._debouncedSaveOperations(G.xp.SAVE_AS,{...O,getTypeKeywords:()=>N._getTypeKeywords(),portalItemLayerType:"point-cloud"},c)})()}save(){var c=this;return(0,y.Z)(function*(){const O={getTypeKeywords:()=>c._getTypeKeywords(),portalItemLayerType:"point-cloud"};return c._debouncedSaveOperations(G.xp.SAVE,O)})()}validateLayer(c){if(c.layerType&&"PointCloud"!==c.layerType)throw new W.Z("pointcloudlayer:layer-type-not-supported","PointCloudLayer does not support this layer type",{layerType:c.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new W.Z("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x-2.x"});if(this.version.major>2)throw new W.Z("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x-2.x"})}hasCachedStatistics(c){return null!=this.attributeStorageInfo&&this.attributeStorageInfo.some(O=>O.name===c)}_getTypeKeywords(){return["PointCloud"]}_validateElevationInfo(){const c=this.elevationInfo;(0,q.LR)(E.Z.getLogger(this),(0,q.Uy)("Point cloud layers","absolute-height",c)),(0,q.LR)(E.Z.getLogger(this),(0,q.kf)("Point cloud layers",c))}};(0,u._)([(0,h.Cb)({type:["PointCloudLayer"]})],b.prototype,"operationalLayerType",void 0),(0,u._)([(0,h.Cb)(ee.C_)],b.prototype,"popupEnabled",void 0),(0,u._)([(0,h.Cb)({type:A.Z,json:{name:"popupInfo",write:!0}})],b.prototype,"popupTemplate",void 0),(0,u._)([(0,h.Cb)({readOnly:!0,json:{read:!1}})],b.prototype,"defaultPopupTemplate",null),(0,u._)([(0,h.Cb)({readOnly:!0,json:{write:!1,read:!1,origins:{"web-document":{write:!1,read:!1}}}})],b.prototype,"opacity",void 0),(0,u._)([(0,h.Cb)({type:["show","hide"]})],b.prototype,"listMode",void 0),(0,u._)([(0,h.Cb)({types:[le],json:{origins:{service:{read:{source:"filters"}}},name:"layerDefinition.filters",write:!0}})],b.prototype,"filters",void 0),(0,u._)([(0,h.Cb)({type:[te.Z]})],b.prototype,"fields",void 0),(0,u._)([(0,h.Cb)(ie.fieldsIndex)],b.prototype,"fieldsIndex",void 0),(0,u._)([(0,$.r)("service","fields",["fields","attributeStorageInfo"])],b.prototype,"readServiceFields",null),(0,u._)([(0,h.Cb)(ie.outFields)],b.prototype,"outFields",void 0),(0,u._)([(0,h.Cb)({readOnly:!0})],b.prototype,"attributeStorageInfo",void 0),(0,u._)([(0,h.Cb)(ee.PV)],b.prototype,"elevationInfo",null),(0,u._)([(0,h.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],b.prototype,"path",void 0),(0,u._)([(0,h.Cb)(ee.rn)],b.prototype,"legendEnabled",void 0),(0,u._)([(0,h.Cb)({types:oe,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:{target:{"layerDefinition.drawingInfo.renderer":{types:oe},"layerDefinition.drawingInfo.transparency":{type:Number}}}}})],b.prototype,"renderer",void 0),(0,u._)([(0,T.c)("renderer")],b.prototype,"writeRenderer",null),(0,u._)([(0,h.Cb)({json:{read:!1},readOnly:!0})],b.prototype,"type",void 0),b=(0,u._)([(0,x.j)("esri.layers.PointCloudLayer")],b);const fe=b},29674:(Y,F,t)=>{t.d(F,{V:()=>L});var y=t(50484),u=t(80543),f=(t(14007),t(4703),t(65311),t(10141));const L=D=>{let M=class extends D{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function E(D){return"portalItem"in D}(this)?this.portalItem?.apiKey:null}set apiKey(R){null!=R?this._override("apiKey",R):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,y._)([(0,u.Cb)({type:String})],M.prototype,"apiKey",null),M=(0,y._)([(0,f.j)("esri.layers.mixins.APIKeyMixin")],M),M}},4257:(Y,F,t)=>{t.d(F,{Y:()=>L});var y=t(50484),u=t(4703),A=t(80543),f=(t(14007),t(65311),t(10141)),E=t(89713);const L=D=>{let M=class extends D{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const R=(0,E.Qc)(this.url);if(null!=R&&R.title)return R.title}return this._get("title")||""}set title(R){this._set("title",R)}set url(R){this._set("url",(0,E.Nm)(R,u.Z.getLogger(this)))}};return(0,y._)([(0,A.Cb)()],M.prototype,"title",null),(0,y._)([(0,A.Cb)({type:String})],M.prototype,"url",null),M=(0,y._)([(0,f.j)("esri.layers.mixins.ArcGISService")],M),M}},27426:(Y,F,t)=>{t.d(F,{N:()=>E});var y=t(50484),u=t(80543),f=(t(14007),t(4703),t(65311),t(10141));const E=L=>{let D=class extends L{constructor(){super(...arguments),this.customParameters=null}};return(0,y._)([(0,u.Cb)({type:Object,json:{write:{overridePolicy:M=>({enabled:!!(M&&Object.keys(M).length>0)})}}})],D.prototype,"customParameters",void 0),D=(0,y._)([(0,f.j)("esri.layers.mixins.CustomParametersMixin")],D),D}},70509:(Y,F,t)=>{t.d(F,{I:()=>V});var y=t(15861),u=t(50484),A=t(11931),K=t(26152),W=t(66476),f=t(37636),E=t(57964),L=t(4703),D=t(51172),M=t(79412),R=t(6785),h=t(80543),x=(t(14007),t(65311),t(62185)),T=t(10141),j=t(7547),v=t(85971),_=t(61018),I=t(27835),U=t(57437),P=t(50318);const V=z=>{let Z=class extends z{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,D.SC)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(g){g!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",g))}readPortalItem(g,i,d){if(i.itemId)return new I.default({id:i.itemId,portal:d?.portal})}writePortalItem(g,i){g?.id&&(i.itemId=g.id)}loadFromPortal(g,i){var d=this;return(0,y.Z)(function*(){if(d.portalItem?.id)try{const{load:r}=yield Promise.all([t.e(2772),t.e(8592),t.e(6964)]).then(t.bind(t,36964));return(0,M.k_)(i),yield r({instance:d,supportedTypes:g.supportedTypes,validateItem:g.validateItem,supportsData:g.supportsData,layerModuleTypeMap:g.layerModuleTypeMap},i)}catch(r){throw(0,M.D_)(r)||L.Z.getLogger(d).warn(`Failed to load layer (${d.title}, ${d.id}) portal item (${d.portalItem.id})\n  ${r}`),r}})()}finishLoadEditablePortalLayer(g){var i=this;return(0,y.Z)(function*(){i._set("userHasEditingPrivileges",yield i._fetchUserHasEditingPrivileges(g).catch(d=>((0,M.r9)(d),!0)))})()}setUserPrivileges(g,i){var d=this;return(0,y.Z)(function*(){if(!A.default.userPrivilegesApplied)return d.finishLoadEditablePortalLayer(i);if(d.url)try{const{features:{edit:r,fullEdit:o},content:{updateItem:p}}=yield d._fetchUserPrivileges(g,i);d._set("userHasEditingPrivileges",r),d._set("userHasFullEditingPrivileges",o),d._set("userHasUpdateItemPrivileges",p)}catch(r){(0,M.r9)(r)}})()}_fetchUserPrivileges(g,i){var d=this;return(0,y.Z)(function*(){let r=d.portalItem;if(!g||!r||!r.loaded||r.sourceUrl)return d._fetchFallbackUserPrivileges(i);const o=g===r.id;if(o&&r.portal.user)return(0,P.Ss)(r);let p,m;if(o)p=r.portal.url;else try{p=yield(0,v.oP)(d.url,i)}catch(S){(0,M.r9)(S)}if(!p||!(0,R.Zo)(p,r.portal.url))return d._fetchFallbackUserPrivileges(i);try{const S=null!=i?i.signal:null;m=yield K.id?.getCredential(`${p}/sharing`,{prompt:!1,signal:S})}catch(S){(0,M.r9)(S)}if(!m)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(o?yield r.reload():(r=new I.default({id:g,portal:{url:p}}),yield r.load(i)),r.portal.user)return(0,P.Ss)(r)}catch(S){(0,M.r9)(S)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_fetchFallbackUserPrivileges(g){var i=this;return(0,y.Z)(function*(){let d=!0;try{d=yield i._fetchUserHasEditingPrivileges(g)}catch(r){(0,M.r9)(r)}return{features:{edit:d,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(g){var i=this;return(0,y.Z)(function*(){const d=i.url?K.id?.findCredential(i.url):null;if(!d)return!0;const r=G.credential===d?G.user:yield i._fetchEditingUser(g);return G.credential=d,G.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")})()}_fetchEditingUser(g){var i=this;return(0,y.Z)(function*(){const d=i.portalItem?.portal?.user;if(d)return d;const r=K.id?.findServerInfo(i.url??"");if(!r?.owningSystemUrl)return null;const o=`${r.owningSystemUrl}/sharing/rest`,p=_.Z.getDefault();if(p&&p.loaded&&(0,R.Fv)(p.restUrl)===(0,R.Fv)(o))return p.user;const m=`${o}/community/self`,C=null!=g?g.signal:null,B=yield(0,f.q6)((0,W.Z)(m,{authMode:"no-prompt",query:{f:"json"},signal:C}));return B.ok?U.Z.fromJSON(B.value.data):null})()}read(g,i){i&&(i.layer=this),super.read(g,i)}write(g,i){const d=i?.portal,r=this.portalItem?.id&&(this.portalItem.portal||_.Z.getDefault());return d&&r&&!(0,R.tm)(r.restUrl,d.restUrl)?(i.messages&&i.messages.push(new E.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(g,{...i,layer:this})}};return(0,u._)([(0,h.Cb)({type:I.default})],Z.prototype,"portalItem",null),(0,u._)([(0,x.r)("web-document","portalItem",["itemId"])],Z.prototype,"readPortalItem",null),(0,u._)([(0,j.c)("web-document","portalItem",{itemId:{type:String}})],Z.prototype,"writePortalItem",null),(0,u._)([(0,h.Cb)({clonable:!1})],Z.prototype,"resourceReferences",void 0),(0,u._)([(0,h.Cb)({type:Boolean,readOnly:!0})],Z.prototype,"userHasEditingPrivileges",void 0),(0,u._)([(0,h.Cb)({type:Boolean,readOnly:!0})],Z.prototype,"userHasFullEditingPrivileges",void 0),(0,u._)([(0,h.Cb)({type:Boolean,readOnly:!0})],Z.prototype,"userHasUpdateItemPrivileges",void 0),Z=(0,u._)([(0,T.j)("esri.layers.mixins.PortalLayer")],Z),Z},G={credential:null,user:null}},40100:(Y,F,t)=>{t.d(F,{Z:()=>w});var y=t(57964),u=t(89317),A=t(4703),K=t(8611),W=t(15398),f=t(85295),E=t(764),L=t(25037);const h=new Map;class w{static fromJSON(_){return new w(_.fields,_.timeZoneByFieldName)}static fromLayer(_){return new w(_.fields??[],j(_))}static fromLayerJSON(_){return new w(_.fields??[],j(_))}constructor(_=[],I){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=_||[],this._timeZoneByFieldName=I?new Map(I):null;const U=[];for(const P of this.fields){const V=P?.name,G=x(V);if(V&&G){const z=$(V);this._fieldsMap.set(V,P),this._fieldsMap.set(z,P),this._normalizedFieldsMap.set(G,P),U.push(`${z}:${P.type}:${this._timeZoneByFieldName?.get(V)}`),(0,f.y2)(P)?(this.dateFields.push(P),this._dateFieldsSet.add(P)):(0,f.H7)(P)&&(this._numericFieldsSet.add(P),this.numericFields.push(P)),(0,f.Dl)(P)||(0,f.Se)(P)||(P.editable=null==P.editable||!!P.editable,P.nullable=null==P.nullable||!!P.nullable)}}U.sort(),this.uid=U.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const _ of this.fields)(0,f.Dl)(_)||(0,f.Se)(_)||_.nullable||void 0!==(0,f.os)(_)||this._requiredFields.push(_)}return this._requiredFields}equals(_){return this.uid===_?.uid}has(_){return null!=this.get(_)}get(_){if(!_)return;let I=this._fieldsMap.get(_);return I||(I=this._fieldsMap.get($(_))??this._normalizedFieldsMap.get(x(_)),I&&this._fieldsMap.set(_,I),I)}getTimeZone(_){const I=this.get(_&&"string"!=typeof _?_.name:_);return I?this._timeZoneByFieldName?this._timeZoneByFieldName.get(I.name):"date"===I.type||"esriFieldTypeDate"===I.type?(A.Z.getLogger("esri.layers.support.FieldsIndex").error(new y.Z("getTimeZone:no-timezone-information",`no time zone information for field '${I.name}'`)),E.pt):T.has(I.type)?E._4:null:null}getLuxonTimeZone(_){const I=this.getTimeZone(_);return I?I===E._4?W.yV.instance:I===E.pt?L.Qf.utcInstance:(0,K.s1)(h,I,()=>L.vF.create(I)):null}isDateField(_){return this._dateFieldsSet.has(this.get(_))}isTimeOnlyField(_){return(0,f.sX)(this.get(_))}isNumericField(_){return this._numericFieldsSet.has(this.get(_))}normalizeFieldName(_){return this.get(_)?.name??void 0}toJSON(){return{fields:this.fields.map(_=>(0,u.AK)(_)?_.toJSON():_),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function $(v){return v.trim().toLowerCase()}function x(v){return(0,f.q6)(v)?.toLowerCase()??""}const T=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function j(v){const _=new Map;if(!v.fields)return _;const I=!0===v.datesInUnknownTimezone,{timeInfo:U,editFieldsInfo:P}=v,V=(U?"startField"in U?U.startField:U.startTimeField:"")??"",G=(U?"endField"in U?U.endField:U.endTimeField:"")??"",z=function R(v){return"dateFieldsTimeZone"in v}(v)?v.dateFieldsTimeZone??null:v.dateFieldsTimeReference?(0,E.Jv)(v.dateFieldsTimeReference):null,Z=P?function D(v){return"timeZone"in v}(P)?P.timeZone??z:P.dateFieldsTimeReference?(0,E.Jv)(P.dateFieldsTimeReference):z??E.pt:null,g=U?function M(v){return"timeZone"in v}(U)?U.timeZone??z:U.timeReference?(0,E.Jv)(U.timeReference):z:null,i=new Map([[$(P?.creationDateField??""),Z],[$(P?.editDateField??""),Z],[$(V),g],[$(G),g]]);for(const{name:d,type:r}of v.fields)if(T.has(r))_.set(d,E._4);else if("date"!==r&&"esriFieldTypeDate"!==r)_.set(d,null);else if(I)_.set(d,E._4);else{const o=i.get($(d??""))??z;_.set(d,o)}return _}},27969:(Y,F,t)=>{t.d(F,{v:()=>f});var y=t(14007),u=t(4703),A=t(81247),K=t(40100),W=t(85295);function f(){return{fields:{type:[A.Z],value:null,set:function(E){if(E&&(0,y.Z)("big-integer-warning-enabled")){const L=E.filter(D=>"big-integer"===D.type||"oid"===D.type&&(D.length||0)>=8);if(L.length){const D=L.map(M=>`'${M.name}'`).join(", ");u.Z.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${D}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",E)}},fieldsIndex:{readOnly:!0,get(){return K.Z.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(E){this._userOutFields=E,this.notifyChange("outFields")},get:function(){const E=this._userOutFields;if(!E?.length)return null;if(E.includes("*"))return["*"];if(!this.fields)return E;for(const L of E)this.fieldsIndex?.has(L)||u.Z.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${L} found in outFields`,{layer:this,outFields:E});return(0,W.Q0)(this.fieldsIndex,E)}}}}},50318:(Y,F,t)=>{t.d(F,{$o:()=>h,Fj:()=>D,IW:()=>R,Ss:()=>x,_$:()=>L,ck:()=>M,hz:()=>$,qj:()=>E});var y=t(15861),u=t(83821),A=t(43814),K=t(48230);function f(){return(f=(0,y.Z)(function*(T){const j=T.spatialReference;if(j.isWGS84)return T.clone();if(j.isWebMercator)return(0,K.Sx)(T);const v=A.Z.WGS84;return yield(0,u.initializeProjection)(j,v),(0,u.project)(T,v)})).apply(this,arguments)}function E(T,j){if(!L(T,j)){const v=T.typeKeywords;v?v.push(j):T.typeKeywords=[j]}}function L(T,j){return!!T.typeKeywords?.includes(j)}function D(T){return L(T,$.HOSTED_SERVICE)}function M(T,j){const v=T.typeKeywords;if(v){const _=v.indexOf(j);_>-1&&v.splice(_,1)}}function R(T,j,v){v?E(T,j):M(T,j)}function h(T){return w.apply(this,arguments)}function w(){return w=(0,y.Z)(function*(T){const j=T.clone().normalize();let v;if(j.length>1)for(const _ of j)v?_.width>v.width&&(v=_):v=_;else v=j[0];return function W(T){return f.apply(this,arguments)}(v)}),w.apply(this,arguments)}const $={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function x(T){const{portal:j,isOrgItem:v,itemControl:_}=T,I=j.user?.privileges;let U=!I||I.includes("features:user:edit"),P=!!v&&!!I?.includes("features:user:fullEdit");const V="update"===_||"admin"===_;return V?P=U=!0:P&&(U=!0),{features:{edit:U,fullEdit:P},content:{updateItem:V}}}},37764:(Y,F,t)=>{t.d(F,{I:()=>D});var L,y=t(50484),u=t(89317),A=t(80543),E=(t(14007),t(4703),t(65311),t(10141));let D=L=class extends u.wq{constructor(){super(...arguments),this.title=null}clone(){return new L({title:this.title})}};(0,y._)([(0,A.Cb)({type:String,json:{write:!0}})],D.prototype,"title",void 0),D=L=(0,y._)([(0,E.j)("esri.renderers.support.LegendOptions")],D)},11892:(Y,F,t)=>{t.d(F,{Z:()=>h});var M,y=t(50484),u=t(66599),A=t(89317),K=t(80543),W=t(1535),L=(t(65311),t(14007),t(10141)),D=t(7547);let R=M=class extends A.wq{constructor(w){super(w),this.color=null,this.label=null,this.value=null}writeValue(w,$,x){$[x]=w??0}clone(){return new M({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,y._)([(0,K.Cb)({type:u.Z,json:{type:[W.z8],write:!0}})],R.prototype,"color",void 0),(0,y._)([(0,K.Cb)({type:String,json:{write:!0}})],R.prototype,"label",void 0),(0,y._)([(0,K.Cb)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],R.prototype,"value",void 0),(0,y._)([(0,D.c)("value")],R.prototype,"writeValue",null),R=M=(0,y._)([(0,L.j)("esri.renderers.visualVariables.support.ColorStop")],R);const h=R},43688:(Y,F,t)=>{t.d(F,{LR:()=>Z,Uy:()=>V,VW:()=>f,Wb:()=>G,fm:()=>g,kf:()=>z}),t(49602);var u=t(1678);function f(r,o){return function K(r,o){return o?.mode?o.mode:function A(r){return r?i:d}(r).mode}(null!=r&&r.hasZ,o)}function V(r,o,p){return p&&p.mode!==o?`${r} only support ${o} elevation mode`:null}function G(r,o,p){return p?.mode===o?`${r} do not support ${o} elevation mode`:null}function z(r,o){return null!=o?.featureExpressionInfo&&"0"!==o.featureExpressionInfo.expression?`${r} do not support featureExpressionInfo`:null}function Z(r,o){o&&r.warn(".elevationInfo=",o)}function g(r){return(r?.offset??0)*(0,u.Z7)(r?.unit)}const i={mode:"absolute-height",offset:0},d={mode:"on-the-ground",offset:null}},33331:(Y,F,t)=>{t.d(F,{eZ:()=>w});var y=t(62691),u=t(85295),A=t(20004),E=(t(37462),t(52225),t(49497),t(90629)),R=(t(57229),t(98522),t(23002),t(42271)),h=t(17831);function w({displayField:i,editFieldsInfo:d,fields:r,objectIdField:o,title:p},m){if(!r)return null;const C=function _(i,d){const r=d?.visibleFieldNames;return function T(i,d){const r=i;return d&&(i=i.filter(o=>!d.includes(o.type))),i===r&&(i=i.slice()),i.sort(j),i}(i.fields??[],d?.ignoreFieldTypes||g).map(o=>new R.Z({fieldName:o.name,isEditable:(0,u.Hp)(o,i),label:o.alias,format:P(o),visible:x(o,{...i,visibleFieldNames:r})}))}({editFieldsInfo:d,fields:r,objectIdField:o},m);if(!C.length)return null;const B=function z(i){const d=(0,u.O5)(i),{titleBase:r}=i;return d?`${r}: {${d.trim()}}`:r??""}({titleBase:p,fields:r,displayField:i}),J=function V(){return[new E.Z,new A.Z]}();return new y.Z({title:B,content:J,fieldInfos:C})}const x=(i,d)=>d.visibleFieldNames?d.visibleFieldNames.has(i.name):(0,u.Fv)(i,d);function j(i,d){return"oid"===i.type?-1:"oid"===d.type?1:Z(i)?-1:Z(d)?1:(i.alias||i.name).toLocaleLowerCase().localeCompare((d.alias||d.name).toLocaleLowerCase())}function P(i){switch(i.type){case"small-integer":case"integer":case"single":return new h.Z({digitSeparator:!0,places:0});case"double":return new h.Z({digitSeparator:!0,places:2});case"string":return(0,u.Ec)(i.name)?new h.Z({digitSeparator:!0,places:0}):void 0;default:return}}function Z(i){return"name"===(i.name&&i.name.toLowerCase())||"name"===i.alias?.toLowerCase()}const g=["geometry","blob","raster","guid","xml"]}}]);