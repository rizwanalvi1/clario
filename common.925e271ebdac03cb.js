"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[8592],{73903:(re,z,s)=>{s.d(z,{Z:()=>v});var u=s(50484),E=s(73514),O=s(57678),R=s(25387),y=s(84373),g=s(89317),D=s(80543),T=(s(14007),s(4703),s(10141));let W=0,A=class extends((0,g.eC)((0,R.J)((0,y.IG)(E.Z)))){constructor(d){super(d),this.id=`${Date.now().toString(16)}-analysis-${W++}`,this.title=null}get parent(){return this._get("parent")}set parent(d){const S=this.parent;if(null!=S)switch(S.type){case"line-of-sight":case"dimension":S.releaseAnalysis(this);break;case"2d":case"3d":S.analyses.includes(this)&&S.analyses.remove(this)}this._set("parent",d)}get isEditable(){return this.requiredPropertiesForEditing.every(O.pC)}};(0,u._)([(0,D.Cb)({type:String,constructOnly:!0,clonable:!1})],A.prototype,"id",void 0),(0,u._)([(0,D.Cb)({type:String})],A.prototype,"title",void 0),(0,u._)([(0,D.Cb)({clonable:!1,value:null})],A.prototype,"parent",null),(0,u._)([(0,D.Cb)({readOnly:!0})],A.prototype,"isEditable",null),A=(0,u._)([(0,T.j)("esri.analysis.Analysis")],A);const v=A},29066:(re,z,s)=>{s.d(z,{Z:()=>u});class u{constructor(O=[]){this._elements=O}length(){return this._elements.length}get(O){return this._elements[O]}toArray(){return this.slice()}slice(O=0,R=this.length()){const y=[];for(let g=O;g<R;g++)y.push(this.get(g));return y}}},56803:(re,z,s)=>{s.d(z,{B:()=>O,R:()=>E});var u=s(60616);class E extends u.R{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let y=this.width(),g=this.height(),D=y,x=g,I=D/Math.abs(y),T=x/Math.abs(g);if((0,u.k)(D)&&(0,u.k)(x)){let W=Math.min(D,x)/2,A=(0,u.l)(this.get("cornerRadiusTL",8),W),v=(0,u.l)(this.get("cornerRadiusTR",8),W),d=(0,u.l)(this.get("cornerRadiusBR",8),W),S=(0,u.l)(this.get("cornerRadiusBL",8),W),P=Math.min(Math.abs(D/2),Math.abs(x/2));A=(0,u.f)(A,0,P),v=(0,u.f)(v,0,P),d=(0,u.f)(d,0,P),S=(0,u.f)(S,0,P);const p=this._display;p.moveTo(A*I,0),p.lineTo(D-v*I,0),v>0&&p.arcTo(D,0,D,v*T,v),p.lineTo(D,x-d*T),d>0&&p.arcTo(D,x,D-d*I,x,d),p.lineTo(S*I,x),S>0&&p.arcTo(0,x,0,x-S*T,S),p.lineTo(0,A*T),A>0&&p.arcTo(0,0,A*I,0,A),p.closePath()}}}Object.defineProperty(E,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"}),Object.defineProperty(E,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:u.R.classNames.concat([E.className])});class O extends u.g{_afterNew(){this._settings.themeTags=(0,u.m)(this._settings.themeTags,["button"]),super._afterNew(),this._settings.background||this.set("background",E.new(this._root,{themeTags:(0,u.m)(this._settings.themeTags,["background"])})),this.setPrivate("trustBounds",!0)}_prepareChildren(){if(super._prepareChildren(),this.isDirty("icon")){const y=this._prevSettings.icon,g=this.get("icon");g!==y&&(this._disposeProperty("icon"),y&&y.dispose(),g&&this.children.push(g),this._prevSettings.icon=g)}if(this.isDirty("label")){const y=this._prevSettings.label,g=this.get("label");g!==y&&(this._disposeProperty("label"),y&&y.dispose(),g&&this.children.push(g),this._prevSettings.label=g)}}}Object.defineProperty(O,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Button"}),Object.defineProperty(O,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:u.g.classNames.concat([O.className])})},58661:(re,z,s)=>{s.d(z,{T:()=>O});var u=s(60616);class E extends u.e{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let y=this.width(),g=this.height();if(y>0&&g>0){let D=this.get("cornerRadius",8);D=(0,u.f)(D,0,Math.min(y/2,g/2));let x=this.get("pointerX",0),I=this.get("pointerY",0),T=this.get("pointerBaseWidth",15)/2,W=0,A=0,v=0,d=(x-W)*(g-A)-(I-A)*(y-W),S=(x-v)*(0-g)-(I-g)*(y-v);const P=this._display;if(P.moveTo(D,0),d>0&&S>0){let p=Math.round((0,u.f)(x,D+T,y-T-D));I=(0,u.f)(I,-1/0,0),P.lineTo(p-T,0),P.lineTo(x,I),P.lineTo(p+T,0)}if(P.lineTo(y-D,0),P.arcTo(y,0,y,D,D),d>0&&S<0){let p=Math.round((0,u.f)(I,D+T,g-T-D));x=(0,u.f)(x,y,1/0),P.lineTo(y,D),P.lineTo(y,Math.max(p-T,D)),P.lineTo(x,I),P.lineTo(y,p+T)}if(P.lineTo(y,g-D),P.arcTo(y,g,y-D,g,D),d<0&&S<0){let p=Math.round((0,u.f)(x,D+T,y-T-D));I=(0,u.f)(I,g,1/0),P.lineTo(y-D,g),P.lineTo(p+T,g),P.lineTo(x,I),P.lineTo(p-T,g)}if(P.lineTo(D,g),P.arcTo(0,g,0,g-D,D),d<0&&S>0){let p=Math.round((0,u.f)(I,D+T,g-D-T));x=(0,u.f)(x,-1/0,0),P.lineTo(0,g-D),P.lineTo(0,p+T),P.lineTo(x,I),P.lineTo(0,Math.max(p-T,D))}P.lineTo(0,D),P.arcTo(0,0,D,0,D),P.closePath()}}}}Object.defineProperty(E,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(E,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:u.e.classNames.concat([E.className])});class O extends u.g{constructor(y,g,D,x=[]){super(y,g,D,x),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=(0,u.m)(this._settings.themeTags,["tooltip"]),super._afterNew(),this._setDefaultFn("background",()=>E.new(this._root,{})).set("themeTags",["tooltip","background"]),this._label=this.children.push(u.L.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()})),this._disposers.push(this.on("bounds",()=>{this._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",y=>{y&&(this._disposers.push((0,u.h)(y,"pointerover",g=>{this._htmlContentHovered=!0})),this._disposers.push((0,u.h)(y,"pointerout",g=>{this._htmlContentHovered=!1})))})),this.on("visible",y=>{this._handleReaderAnnouncement()}),this.label.events.on("dataitemchanged",y=>{this._handleReaderAnnouncement()}),this._root._tooltips.push(this)}_handleReaderAnnouncement(){this.get("readerAnnounce")&&this.isVisibleDeep()&&this._root.readerAlert(this.label.getAccessibleText())}get label(){return this._label}dispose(){super.dispose(),(0,u.r)(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),null!=this.get("labelText")&&this.label.set("text",this.get("labelText")),null!=this.get("labelHTML")&&this.label.set("html",this.get("labelHTML")),null!=this.get("labelAriaLabel")&&this.label.set("ariaLabel",this.get("labelAriaLabel"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const y=this.get("background");this._keepHoverDp=new u.M([y.events.on("pointerover",g=>{let D=this.get("tooltipTarget");D&&(D.parent&&D.parent.getPrivate("tooltipTarget")==D&&(D=D.parent),D.hover())}),y.events.on("pointerout",g=>{let D=this.get("tooltipTarget");D&&(D.parent&&D.parent.getPrivate("tooltipTarget")==D&&(D=D.parent),this._htmlContentHovered||D.unhover())})]),this.label.onPrivate("htmlElement",g=>{this._keepHoverDp&&g&&this._keepHoverDp.disposers.push((0,u.h)(g,"pointerleave",D=>{const x=this.root._renderer.getEvent(D);y.events.dispatch("pointerout",{type:"pointerout",originalEvent:x.event,point:x.point,simulated:!1,target:y})}))})}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let y=this.get("tooltipTarget");const g=this.get("background");let D,x;y&&g&&(D=y.get("fill"),x=y.get("stroke"),null==D&&(D=x),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=D&&g.set("fill",D),this._fillDp=y.on("fill",I=>{null!=I&&(g.set("fill",I),this._updateTextColor(I))}),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=D&&g.set("stroke",D),this._strokeDp=y.on("fill",I=>{null!=I&&g.set("stroke",I)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),null!=D&&this.label.set("fill",D),this._labelDp=y.on("fill",I=>{null!=I&&this.label.set("fill",I)}),this._disposers.push(this._labelDp))),this._updateTextColor(D)}_updateTextColor(y){this.get("autoTextColor")&&(null==y&&(y=this.get("background").get("fill")),null==y&&(y=this._root.interfaceColors.get("background")),y instanceof u.C&&this.label.set("fill",u.C.alternative(y,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(y){super._setDataItem(y),this.label._setDataItem(y)}_updateBackground(){super.updateBackground();const y=this._root.container;if(y){let g=.5,D=.5,x=this.get("centerX");x instanceof u.P&&(g=x.value);let I=this.get("centerY");I instanceof u.P&&(D=I.value);let T=y.width(),W=y.height(),A=this.parent,v=0,d=0;if(A){v=A.x(),d=A.y();const C=A.get("layerMargin");C&&(v+=C.left||0,d+=C.top||0,T+=(C.left||0)+(C.right||0),W+=(C.top||0)+(C.bottom||0))}const S=this.get("bounds",{left:-v,top:-d,right:T-v,bottom:W-d});this._updateBounds();let P=this.width(),p=this.height();0===P&&(P=this._w),0===p&&(p=this._h);let l=this.get("pointTo",{x:T/2,y:W/2}),_=l.x,m=l.y,M=this.get("pointerOrientation"),b=this.get("background"),L=0,U=0,j=0;b instanceof E&&(L=b.get("pointerLength",0),U=b.get("strokeWidth",0)/2,j=U,b.set("width",P),b.set("height",p));let Z=0,w=0,B=S.right-S.left,V=S.bottom-S.top;"horizontal"==M||"left"==M||"right"==M?(U=0,"horizontal"==M?_>S.left+B/2?(_-=P*(1-g)+L,j*=-1):_+=P*g+L:"left"==M?_+=P*(1-g)+L:(_-=P*g+L,j*=-1)):(j=0,"vertical"==M?m>S.top+p/2+L?m-=p*(1-D)+L:(m+=p*D+L,U*=-1):"down"==M?m-=p*(1-D)+L:(m+=p*D+L,U*=-1)),_=(0,u.f)(_,S.left+P*g,S.left+B-P*(1-g))+j,m=(0,u.f)(m,S.top+p*D,S.top+V-p*(1-D))-U,Z=l.x-_+P*g+j,w=l.y-m+p*D-U,this._fx=_,this._fy=m;const h=this.get("animationDuration",0);if(h>0&&this.get("visible")&&this.get("opacity")>.1){const C=this.get("animationEasing");this.animate({key:"x",to:_,duration:h,easing:C}),this.animate({key:"y",to:m,duration:h,easing:C})}else this.set("x",_),this.set("y",m);b instanceof E&&(b.set("pointerX",Z),b.set("pointerY",w)),P>0&&(this._w=P),p>0&&(this._h=p)}}}Object.defineProperty(O,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(O,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:u.g.classNames.concat([O.className])})},4254:(re,z,s)=>{s.d(z,{A:()=>B,B:()=>V,C:()=>h,D:()=>C,E:()=>N,F:()=>F,G:()=>$,H:()=>te,I:()=>X,J:()=>oe,K:()=>ae,L:()=>se,M:()=>H,N:()=>Q,a:()=>y,b:()=>g,c:()=>R,d:()=>D,e:()=>O,f:()=>x,g:()=>ce,h:()=>I,i:()=>T,j:()=>v,k:()=>P,l:()=>l,m:()=>_,n:()=>m,o:()=>d,p:()=>M,q:()=>L,r:()=>S,s:()=>p,t:()=>W,u:()=>b,v:()=>U,w:()=>A,x:()=>j,y:()=>Z,z:()=>w});var u=s(89465),E=s(27545);function O(k){return u.G.extendedSpatialReferenceInfo(k)}function R(k,G,J){return u.G.clip(E.N,k,G,J)}function y(k,G,J){return u.G.cut(E.N,k,G,J)}function g(k,G,J){return u.G.contains(E.N,k,G,J)}function D(k,G,J){return u.G.crosses(E.N,k,G,J)}function x(k,G,J,ee){return u.G.distance(E.N,k,G,J,ee)}function I(k,G,J){return u.G.equals(E.N,k,G,J)}function T(k,G,J){return u.G.intersects(E.N,k,G,J)}function W(k,G,J){return u.G.touches(E.N,k,G,J)}function A(k,G,J){return u.G.within(E.N,k,G,J)}function v(k,G,J){return u.G.disjoint(E.N,k,G,J)}function d(k,G,J){return u.G.overlaps(E.N,k,G,J)}function S(k,G,J,ee){return u.G.relate(E.N,k,G,J,ee)}function P(k,G){return u.G.isSimple(E.N,k,G)}function p(k,G){return u.G.simplify(E.N,k,G)}function l(k,G,J=!1){return u.G.convexHull(E.N,k,G,J)}function _(k,G,J){return u.G.difference(E.N,k,G,J)}function m(k,G,J){return u.G.symmetricDifference(E.N,k,G,J)}function M(k,G,J){return u.G.intersect(E.N,k,G,J)}function b(k,G,J=null){return u.G.union(E.N,k,G,J)}function L(k,G,J,ee,_e,he,pe){return u.G.offset(E.N,k,G,J,ee,_e,he,pe)}function U(k,G,J,ee,_e=!1){return u.G.buffer(E.N,k,G,J,ee,_e)}function j(k,G,J,ee,_e,he,pe){return u.G.geodesicBuffer(E.N,k,G,J,ee,_e,he,pe)}function Z(k,G,J,ee=!0){return u.G.nearestCoordinate(E.N,k,G,J,ee)}function w(k,G,J){return u.G.nearestVertex(E.N,k,G,J)}function B(k,G,J,ee,_e){return u.G.nearestVertices(E.N,k,G,J,ee,_e)}function V(k,G,J,ee){if(null==G||null==ee)throw new Error("Illegal Argument Exception");const _e=u.G.rotate(G,J,ee);return _e.spatialReference=k,_e}function h(k,G,J){if(null==G||null==J)throw new Error("Illegal Argument Exception");const ee=u.G.flipHorizontal(G,J);return ee.spatialReference=k,ee}function C(k,G,J){if(null==G||null==J)throw new Error("Illegal Argument Exception");const ee=u.G.flipVertical(G,J);return ee.spatialReference=k,ee}function N(k,G,J,ee,_e){return u.G.generalize(E.N,k,G,J,ee,_e)}function F(k,G,J,ee){return u.G.densify(E.N,k,G,J,ee)}function $(k,G,J,ee,_e=0){return u.G.geodesicDensify(E.N,k,G,J,ee,_e)}function te(k,G,J){return u.G.planarArea(E.N,k,G,J)}function X(k,G,J){return u.G.planarLength(E.N,k,G,J)}function oe(k,G,J,ee){return u.G.geodesicArea(E.N,k,G,J,ee)}function ae(k,G,J,ee){return u.G.geodesicLength(E.N,k,G,J,ee)}function se(k,G,J){return null==G||null==J?[]:u.G.intersectLinesToPoints(E.N,k,G,J)}function H(k,G){u.G.changeDefaultSpatialReferenceTolerance(k,G)}function Q(k){u.G.clearDefaultSpatialReferenceTolerance(k)}const ce=Object.freeze(Object.defineProperty({__proto__:null,buffer:U,changeDefaultSpatialReferenceTolerance:H,clearDefaultSpatialReferenceTolerance:Q,clip:R,contains:g,convexHull:l,crosses:D,cut:y,densify:F,difference:_,disjoint:v,distance:x,equals:I,extendedSpatialReferenceInfo:O,flipHorizontal:h,flipVertical:C,generalize:N,geodesicArea:oe,geodesicBuffer:j,geodesicDensify:$,geodesicLength:ae,intersect:M,intersectLinesToPoints:se,intersects:T,isSimple:P,nearestCoordinate:Z,nearestVertex:w,nearestVertices:B,offset:L,overlaps:d,planarArea:te,planarLength:X,relate:S,rotate:V,simplify:p,symmetricDifference:m,touches:W,union:b,within:A},Symbol.toStringTag,{value:"Module"}))},42214:(re,z,s)=>{s.d(z,{B:()=>W});var u=s(57964),E=s(19799),O=s(26496),R=s(6785),y=s(19986),g=s(9203),D=s(60301),x=s(80543),I=s(79387),T=s(19677);function W(M){const b=M?.origins??[void 0];return(L,U)=>{const j=function A(M,b,L){if("resource"===M?.type)return function v(M,b,L){const U=(0,g.Oe)(b,L);return{type:String,read:(j,Z,w)=>{const B=(0,T.r)(j,Z,w);return U.type===String?B:"function"==typeof U.type?new U.type({url:B}):void 0},write:{writer(j,Z,w,B){if(!B?.resources)return"string"==typeof j?void(Z[w]=(0,T.t)(j,B)):void(Z[w]=j.write({},B));const V=function _(M){return null==M?null:"string"==typeof M?M:M.url}(j),h=(0,T.t)(V,{...B,verifyItemRelativeUrls:B?.verifyItemRelativeUrls?{writtenUrls:B.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},T.M.NO),C=U.type!==String&&(!(0,O.l)(this)||B?.origin&&this.originIdOf(L)>(0,D.M9)(B.origin)),N={object:this,propertyName:L,value:j,targetUrl:h,dest:Z,targetPropertyName:w,context:B,params:M};B?.portalItem&&h&&!(0,R.YP)(h)?C&&M?.contentAddressed?d(N):C?function S(M){const{context:b,targetUrl:L,params:U,value:j,dest:Z,targetPropertyName:w}=M;if(!b.portalItem)return;const B=b.portalItem.resourceFromPath(L),V=l(j,L,b),h=(0,I.B)(V),C=(0,R.Ml)(B.path),N=U?.compress??!1;h===C?(b.resources&&p({...M,resource:B,content:V,compress:N,updates:b.resources.toUpdate}),Z[w]=L):d(M)}(N):function P({context:M,targetUrl:b,dest:L,targetPropertyName:U}){M.portalItem&&M.resources&&(M.resources.toKeep.push({resource:M.portalItem.resourceFromPath(b),compress:!1}),L[U]=b)}(N):B?.portalItem&&(null==h||null!=(0,T.i)(h)||(0,R.jc)(h)||C)?d(N):Z[w]=h}}}}(M,b,L);switch(M?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:U,write:j}=T.b;return{read:U,write:j}}}}(M,L,U);for(const Z of b){const w=(0,x.CJ)(L,Z,U);for(const B in j)w[B]=j[B]}}}function d(M){const{targetUrl:b,params:L,value:U,context:j,dest:Z,targetPropertyName:w}=M;if(!j.portalItem)return;const B=(0,T.p)(b),V=l(U,b,j);if(L?.contentAddressed&&"json"!==V.type)return void j.messages?.push(new u.Z("persistable:contentAddressingUnsupported",`Property "${w}" is trying to serializing a resource with content of type ${V.type} with content addressing. Content addressing is only supported for json resources.`,{content:V}));const h=L?.contentAddressed&&"json"===V.type?(0,E.F)(V.jsonString):B?.filename??(0,y.DO)(),C=(0,R.v_)(L?.prefix??B?.prefix,h),N=`${C}.${(0,I.B)(V)}`;if(L?.contentAddressed&&j.resources&&"json"===V.type){const te=j.resources.toKeep.find(({resource:X})=>X.path===N)??j.resources.toAdd.find(({resource:X})=>X.path===N);if(te)return void(Z[w]=te.resource.itemRelativeUrl)}const F=j.portalItem.resourceFromPath(N);(0,R.jc)(b)&&j.resources&&j.resources.pendingOperations.push((0,R.gi)(b).then(te=>{F.path=`${C}.${(0,I.B)({type:"blob",blob:te})}`,Z[w]=F.itemRelativeUrl}).catch(()=>{}));const $=L?.compress??!1;j.resources&&p({...M,resource:F,content:V,compress:$,updates:j.resources.toAdd}),Z[w]=F.itemRelativeUrl}function p({object:M,propertyName:b,updates:L,resource:U,content:j,compress:Z}){L.push({resource:U,content:j,compress:Z,finish:B=>{!function m(M,b,L){"string"==typeof M[b]?M[b]=L.url:M[b].url=L.url}(M,b,B)}})}function l(M,b,L){return"string"==typeof M?{type:"url",url:b}:{type:"json",jsonString:JSON.stringify(M.toJSON(L))}}},51937:(re,z,s)=>{s.d(z,{Qc:()=>W,WU:()=>y,lt:()=>T});var u=s(72578),E=s(55829);const O={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function R(P=(0,E.Kd)()){let p=(P=P.toLowerCase())in O;if(!p){const M=P.split("-");M.length>1&&M[0]in O&&(P=M[0],p=!0),p||(P="en")}const[l,_,m="#,##0.###"]=O[P];return{decimal:l,group:_,pattern:m}}function y(P,p){const l=R((p={...p}).locale);p.customs=l;const _=p.pattern||l.pattern;return isNaN(P)||Math.abs(P)===1/0?null:function D(P,p,l){const _=(l=l||{}).customs.group,m=l.customs.decimal,M=p.split(";"),b=M[0];if((p=M[P<0?1:0]||"-"+b).includes("%"))P*=100;else if(p.includes("\u2030"))P*=1e3;else{if(p.includes("\xa4"))throw new Error("currency notation not supported");if(p.includes("E"))throw new Error("exponential notation not supported")}const L=g,U=b.match(L);if(!U)throw new Error("unable to find a number expression in pattern: "+p);return!1===l.fractional&&(l.places=0),p.replace(L,function x(P,p,l){!0===(l=l||{}).places&&(l.places=0),l.places===1/0&&(l.places=6);const _=p.split("."),m="string"==typeof l.places&&l.places.indexOf(",");let M=l.places;m?M=l.places.substring(m+1):+M>=0||(M=(_[1]||[]).length),l.round<0||(P=Number(P.toFixed(Number(M))));const b=String(Math.abs(P)).split("."),L=b[1]||"";if(_[1]||l.places){m&&(l.places=l.places.substring(0,m));const h=void 0!==l.places?l.places:_[1]&&_[1].lastIndexOf("0")+1;+h>L.length&&(b[1]=L.padEnd(Number(h),"0")),+M<L.length&&(b[1]=L.substr(0,Number(M)))}else b[1]&&b.pop();const U=_[0].replace(",","");let j=U.indexOf("0");-1!==j&&(j=U.length-j,j>b[0].length&&(b[0]=b[0].padStart(j,"0")),U.includes("#")||(b[0]=b[0].substr(b[0].length-j)));let Z,w,B=_[0].lastIndexOf(",");if(-1!==B){Z=_[0].length-B-1;const h=_[0].substr(0,B);B=h.lastIndexOf(","),-1!==B&&(w=h.length-B-1)}const V=[];for(let h=b[0];h;){const C=h.length-Z;V.push(C>0?h.substr(C):h),h=C>0?h.slice(0,C):"",w&&(Z=w,w=void 0)}return b[0]=V.reverse().join(l.group||","),b.join(l.decimal||".")}(P,U[0],{decimal:m,group:_,places:l.places,round:l.round}))}(P,_,p)}const g=/[#0,]*[#0](?:\.0*#*)?/;function T(P){const p=R((P=P||{}).locale),l=P.pattern||p.pattern,_=p.group,m=p.decimal;let M=1;if(l.includes("%"))M/=100;else if(l.includes("\u2030"))M/=1e3;else if(l.includes("\xa4"))throw new Error("currency notation not supported");const b=l.split(";");return 1===b.length&&b.push("-"+b[0]),{regexp:d(b,U=>(U="(?:"+(0,u.Qs)(U,".")+")").replace(g,j=>{const Z={signed:!1,separator:P.strict?_:[_,""],fractional:P.fractional,decimal:m,exponent:!1},w=j.split(".");let B=P.places;1===w.length&&1!==M&&(w[1]="###"),1===w.length||0===B?Z.fractional=!1:(void 0===B&&(B=P.pattern?w[1].lastIndexOf("0")+1:1/0),B&&null==P.fractional&&(Z.fractional=!0),!P.places&&+B<w[1].length&&(B+=","+w[1].length),Z.places=B);const V=w[0].split(",");return V.length>1&&(Z.groupSize=V.pop().length,V.length>1&&(Z.groupSize2=V.pop().length)),"("+function A(P){"places"in(P=P||{})||(P.places=1/0),"string"!=typeof P.decimal&&(P.decimal="."),"fractional"in P&&!String(P.places).startsWith("0")||(P.fractional=[!0,!1]),"exponent"in P||(P.exponent=[!0,!1]),"eSigned"in P||(P.eSigned=[!0,!1]);const p=v(P),l=d(P.fractional,m=>{let M="";return m&&0!==P.places&&(M="\\"+P.decimal,P.places===1/0?M="(?:"+M+"\\d+)?":M+="\\d{"+P.places+"}"),M},!0);let _=p+l;return l&&(_="(?:(?:"+_+")|(?:"+l+"))"),_+d(P.exponent,m=>m?"([eE]"+v({signed:P.eSigned})+")":"")}(Z)+")"}),!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:_,decimal:m,factor:M}}function W(P,p){const l=T(p),_=new RegExp("^"+l.regexp+"$").exec(P);if(!_)return NaN;let m=_[1];if(!_[1]){if(!_[2])return NaN;m=_[2],l.factor*=-1}return m=m.replaceAll(new RegExp("["+l.group+"\\s\\xa0]","g"),"").replace(l.decimal,"."),Number(m)*l.factor}function v(P){return"signed"in(P=P||{})||(P.signed=[!0,!1]),"separator"in P?"groupSize"in P||(P.groupSize=3):P.separator="",d(P.signed,p=>p?"[-+]":"",!0)+d(P.separator,p=>{if(!p)return"(?:\\d+)";" "===(p=(0,u.Qs)(p))?p="\\s":"\xa0"===p&&(p="\\s\\xa0");const l=P.groupSize,_=P.groupSize2;if(_){const m="(?:0|[1-9]\\d{0,"+(_-1)+"}(?:["+p+"]\\d{"+_+"})*["+p+"]\\d{"+l+"})";return l-_>0?"(?:"+m+"|(?:0|[1-9]\\d{0,"+(l-1)+"}))":m}return"(?:0|[1-9]\\d{0,"+(l-1)+"}(?:["+p+"]\\d{"+l+"})*)"},!0)}const d=(P,p,l)=>{if(!Array.isArray(P))return p(P);const _=[];for(let m=0;m<P.length;m++)_.push(p(P[m]));return S(_.join("|"),!!l)},S=(P,p)=>"("+(p?"?:":"")+P+")"},12933:(re,z,s)=>{s.d(z,{E:()=>W,H:()=>T});var u=s(92899),E=s(38519),O=s(29726),R=s(43548);const g=(0,s(73145).Ue)(),D=(0,E.Ue)(),x=(0,E.Ue)(),I=(0,E.Ue)();function T(v,d,S){return(0,R.s)(g,d[0],d[1],1),(0,R.t)(g,g,(0,u.p4)(D,S)),0===g[2]?(0,O.t8)(v,g[0],g[1]):(0,O.t8)(v,g[0]/g[2],g[1]/g[2])}function W(v,d,S){return A(x,d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7]),A(I,S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7]),(0,u.Jp)(v,(0,u.uj)(x,x),I),0!==v[8]&&(v[0]/=v[8],v[1]/=v[8],v[2]/=v[8],v[3]/=v[8],v[4]/=v[8],v[5]/=v[8],v[6]/=v[8],v[7]/=v[8],v[8]/=v[8]),v}function A(v,d,S,P,p,l,_,m,M){(0,u.t8)(v,d,P,l,S,p,_,1,1,1),(0,R.s)(g,m,M,1),(0,u.uj)(D,v);const[b,L,U]=(0,R.t)(g,g,(0,u.p4)(D,D));return(0,u.t8)(D,b,0,0,0,L,0,0,0,U),(0,u.Jp)(v,D,v)}},93414:(re,z,s)=>{s.d(z,{q:()=>g});var u=s(57678),E=s(1258),O=s(4703),R=s(79412),y=s(36885);class g{constructor(x,I,T,W,A={}){this._mainMethod=I,this._transferLists=T,this._listeners=[],this._promise=(0,y.bA)(x,{...A,schedule:W}).then(v=>{if(void 0===this._thread){this._thread=v,this._promise=null,A.hasInitialize&&this.broadcast({},"initialize");for(const d of this._listeners)this._connectListener(d)}else v.close()}),this._promise.catch(v=>O.Z.getLogger("esri.core.workers.WorkerHandle").error(`Failed to initialize ${x} worker: ${v}`))}on(x,I){const T={removed:!1,eventName:x,callback:I,threadHandle:null};return this._listeners.push(T),this._connectListener(T),(0,E.kB)(()=>{T.removed=!0,(0,u.Od)(this._listeners,T),this._thread&&null!=T.threadHandle&&T.threadHandle.remove()})}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null,this._listeners.length=0,this._transferLists={}}invoke(x,I){return this.invokeMethod(this._mainMethod,x,I)}invokeMethod(x,I,T){if(this._thread){const W=this._transferLists[x],A=W?W(I):[];return this._thread.invoke(x,I,{transferList:A,signal:T})}return this._promise?this._promise.then(()=>((0,R.k_)(T),this.invokeMethod(x,I,T))):Promise.reject(null)}broadcast(x,I){return this._thread?Promise.all(this._thread.broadcast(I,x)).then(()=>{}):this._promise?this._promise.then(()=>this.broadcast(x,I)):Promise.reject()}get promise(){return this._promise}_connectListener(x){this._thread&&this._thread.on(x.eventName,x.callback).then(I=>{x.removed||(x.threadHandle=I)})}}},65601:(re,z,s)=>{s.r(z),s.d(z,{hydratedAdapter:()=>g});var u=s(26894),E=s(12628),O=s(44107),R=s(5391),y=s(64222);const g={convertToGEGeometry:function D(v,d){if(null==d)return null;let S="cache"in d?d.cache._geVersion:void 0;return null==S&&(S=v.convertJSONToGeometry(d),"cache"in d&&(d.cache._geVersion=S)),S},exportPoint:function x(v,d,S){const P=v.hasZ(d),p=v.hasM(d),l=new O.Z({x:v.getPointX(d),y:v.getPointY(d),spatialReference:S});return P&&(l.z=v.getPointZ(d)),p&&(l.m=v.getPointM(d)),l.cache._geVersion=d,l},exportPolygon:function I(v,d,S){const P=new R.Z({rings:v.exportPaths(d),hasZ:v.hasZ(d),hasM:v.hasM(d),spatialReference:S});return P.cache._geVersion=d,P},exportPolyline:function T(v,d,S){const P=new y.Z({paths:v.exportPaths(d),hasZ:v.hasZ(d),hasM:v.hasM(d),spatialReference:S});return P.cache._geVersion=d,P},exportMultipoint:function W(v,d,S){const P=new E.Z({hasZ:v.hasZ(d),hasM:v.hasM(d),points:v.exportPoints(d),spatialReference:S});return P.cache._geVersion=d,P},exportExtent:function A(v,d,S){const P=v.hasZ(d),p=v.hasM(d),l=new u.Z({xmin:v.getXMin(d),ymin:v.getYMin(d),xmax:v.getXMax(d),ymax:v.getYMax(d),spatialReference:S});if(P){const _=v.getZExtent(d);l.zmin=_.vmin,l.zmax=_.vmax}if(p){const _=v.getMExtent(d);l.mmin=_.vmin,l.mmax=_.vmax}return l.cache._geVersion=d,l}}},49574:(re,z,s)=>{s.r(z),s.d(z,{buffer:()=>O.v,changeDefaultSpatialReferenceTolerance:()=>O.M,clearDefaultSpatialReferenceTolerance:()=>O.N,clip:()=>O.c,contains:()=>O.b,convexHull:()=>O.l,crosses:()=>O.d,cut:()=>O.a,densify:()=>O.F,difference:()=>O.m,disjoint:()=>O.j,distance:()=>O.f,equals:()=>O.h,extendedSpatialReferenceInfo:()=>O.e,flipHorizontal:()=>O.C,flipVertical:()=>O.D,generalize:()=>O.E,geodesicArea:()=>O.J,geodesicBuffer:()=>O.x,geodesicDensify:()=>O.G,geodesicLength:()=>O.K,intersect:()=>O.p,intersectLinesToPoints:()=>O.L,intersects:()=>O.i,isSimple:()=>O.k,nearestCoordinate:()=>O.y,nearestVertex:()=>O.z,nearestVertices:()=>O.A,offset:()=>O.q,overlaps:()=>O.o,planarArea:()=>O.H,planarLength:()=>O.I,relate:()=>O.r,rotate:()=>O.B,simplify:()=>O.s,symmetricDifference:()=>O.n,touches:()=>O.t,union:()=>O.u,within:()=>O.w}),s(89465),s(27545);var O=s(4254)},28955:(re,z,s)=>{s.d(z,{Ue:()=>g,nF:()=>A,zk:()=>T});var u=s(55117),E=s(16573),O=s(43548),R=s(73145),y=s(65119);function g(m){return m?{origin:(0,R.d9)(m.origin),vector:(0,R.d9)(m.vector)}:{origin:(0,R.Ue)(),vector:(0,R.Ue)()}}function T(m,M,b=g()){return(0,O.c)(b.origin,m),(0,O.f)(b.vector,M,m),b}function A(m,M,b){return function d(m,M,b,L,U){const{vector:j,origin:Z}=m,w=(0,O.f)(y.WM.get(),M,Z),B=(0,O.m)(j,w)/(0,O.q)(j);return(0,O.j)(U,j,(0,u.uZ)(B,b,L)),(0,O.g)(U,U,m.origin)}(m,M,0,1,b)}(0,R.Ue)(),(0,R.Ue)(),new E.x(()=>g())},37127:(re,z,s)=>{s.d(z,{$7:()=>A,$e:()=>g,N5:()=>W,lW:()=>D});var u=s(15861),O=(s(14007),s(57964)),R=s(79412),y=s(6785);function g(v){const d=T(v);return null!=d?d.toDataURL():""}function D(v,d){return x.apply(this,arguments)}function x(){return(x=(0,u.Z)(function*(v,d){const S=T(v);if(null==S)throw new O.Z("imageToArrayBuffer","Unsupported image type");const P=function I(v){if(!(v instanceof HTMLImageElement))return"image/png";const d=v.src;if((0,y.HK)(d)){const S=(0,y.sJ)(d);return"image/jpeg"===S?.mediaType?S.mediaType:"image/png"}return/\.png$/i.test(d)?"image/png":/\.(jpg|jpeg)$/i.test(d)?"image/jpeg":"image/png"}(v),p=yield new Promise(_=>S.toBlob(_,P));if((0,R.k_)(d),!p)throw new O.Z("imageToArrayBuffer","Failed to encode image");const l=yield p.arrayBuffer();return(0,R.k_)(d),{data:l,type:P}})).apply(this,arguments)}function T(v){if(v instanceof HTMLCanvasElement)return v;if(v instanceof HTMLVideoElement)return null;const d=document.createElement("canvas");d.width=v.width,d.height=v.height;const S=d.getContext("2d");return v instanceof HTMLImageElement?S.drawImage(v,0,0,v.width,v.height):v instanceof ImageData&&S.putImageData(v,0,0),d}function W(v){const d=[],S=new Uint8Array(v);for(let P=0;P<S.length;P++)d.push(String.fromCharCode(S[P]));return"data:application/octet-stream;base64,"+btoa(d.join(""))}function A(v){if(v.byteLength<8)return!1;const d=new Uint8Array(v);return 137===d[0]&&80===d[1]&&78===d[2]&&71===d[3]&&13===d[4]&&10===d[5]&&26===d[6]&&10===d[7]}},80773:(re,z,s)=>{var u,E,O,R,y,g,D,x,I,T,W,A,v,d,S,l;s.d(z,{Em:()=>p,Nl:()=>S,Q3:()=>P}),(l=u||(u={})).U8="U8",l.I8="I8",l.U16="U16",l.I16="I16",l.U32="U32",l.I32="I32",l.F32="F32",l.F64="F64",l.Utf8String="Utf8String",l.NotSet="NotSet",function(l){l.Png="Png",l.Jpeg="Jpeg",l.Dds="Dds",l.Raw="Raw",l.Dxt1="Dxt1",l.Dxt5="Dxt5",l.Etc2="Etc2",l.Astc="Astc",l.Pvrtc="Pvrtc",l.NotSet="NotSet"}(E||(E={})),function(l){l.Rgb8="Rgb8",l.Rgba8="Rgba8",l.R8="R8",l.Bgr8="Bgr8",l.Bgra8="Bgra8",l.Rg8="Rg8",l.NotSet="NotSet"}(O||(O={})),function(l){l.Position="Position",l.Normal="Normal",l.TexCoord="TexCoord",l.Color="Color",l.Tangent="Tangent",l.FeatureIndex="FeatureIndex",l.UvRegion="UvRegion",l.NotSet="NotSet"}(R||(R={})),function(l){l.Opaque="Opaque",l.Mask="Mask",l.Blend="Blend"}(y||(y={})),function(l){l.None="None",l.Mask="Mask",l.Alpha="Alpha",l.PreMultAlpha="PreMultAlpha",l.NotSet="NotSet"}(g||(g={})),function(l){l.Points="Points",l.Lines="Lines",l.LineStrip="LineStrip",l.Triangles="Triangles",l.TriangleStrip="TriangleStrip",l.NotSet="NotSet"}(D||(D={})),function(l){l.None="None",l.WrapXBit="WrapXBit",l.WrapYBit="WrapYBit",l.WrapXy="WrapXy",l.NotSet="NotSet"}(x||(x={})),function(l){l.Linear="Linear",l.Nearest="Nearest",l.NotSet="NotSet"}(I||(I={})),function(l){l.Linear="Linear",l.Nearest="Nearest",l.NearestMipmapNearest="NearestMipmapNearest",l.LinearMipmapNearest="LinearMipmapNearest",l.NearestMipmapLinear="NearestMipmapLinear",l.LinearMipmapLinear="LinearMipmapLinear",l.NotSet="NotSet"}(T||(T={})),function(l){l.FeatureId="FeatureId",l.GlobalUid="GlobalUid",l.UnspecifiedDateTime="UnspecifiedDateTime",l.EcmaIso8601DateTime="EcmaIso8601DateTime",l.EcmaIso8601DateOnly="EcmaIso8601DateOnly",l.TimeOnly="TimeOnly",l.TimeStamp="TimeStamp",l.ColorRgb="ColorRgb",l.ColorRgba="ColorRgba",l.Unrecognized="Unrecognized",l.NotSet="NotSet"}(W||(W={})),function(l){l.Texture="Texture",l.VertexAtrb="VertexAtrb",l.Implicit="Implicit",l.NotSet="NotSet"}(A||(A={})),function(l){l.Front="Front",l.Back="Back",l.None="None",l.NotSet="NotSet"}(v||(v={})),function(l){l.Pbr="Pbr",l.Unlit="Unlit"}(d||(d={})),function(l){l[l.Succeeded=0]="Succeeded",l[l.Failed=1]="Failed",l[l.MissingInputs=2]="MissingInputs"}(S||(S={}));const P=-1,p=-2},64761:(re,z,s)=>{s.d(z,{S:()=>E,X:()=>u});const u=1;function E(O,R){let y=0;for(const g of R){const D=g.attributes?.[O];"number"==typeof D&&isFinite(D)&&(y=Math.max(y,D))}return y}},80751:(re,z,s)=>{s.r(z),s.d(z,{createConnection:()=>V});var u=s(15861),E=s(50484),R=(s(2189),s(66476)),y=s(57964),g=s(4703),D=s(79412),x=s(6785),W=(s(14007),s(65311),s(10141)),A=s(80543),v=s(53456),d=s(88278);let S=class extends d.Z.EventedAccessor{destroy(){this.emit("destroy")}get connectionError(){return this.errorString?new y.Z("stream-connection",this.errorString):null}onFeature(h){this.emit("data-received",h)}onMessage(h){this.emit("message-received",h)}};(0,E._)([(0,A.Cb)({readOnly:!0})],S.prototype,"connectionError",null),S=(0,E._)([(0,W.j)("esri.layers.support.StreamConnection")],S);const P=S;var p,h;(h=p||(p={}))[h.CONNECTING=0]="CONNECTING",h[h.OPEN=1]="OPEN",h[h.CLOSING=2]="CLOSING",h[h.CLOSED=3]="CLOSED";let l=class extends P{constructor(h){super({}),this._outstandingMessages=[],this.errorString=null;const{geometryType:C,spatialReference:N,sourceSpatialReference:F}=h;this._config=h,this._featureZScaler=(0,v.k)(C,F,N),this._open()}normalizeCtorArgs(){return{}}_open(){var h=this;return(0,u.Z)(function*(){yield h._tryCreateWebSocket(),h.destroyed||(yield h._handshake())})()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return"disconnected";switch(this._websocket.readyState){case p.CONNECTING:case p.OPEN:return"connected";case p.CLOSING:case p.CLOSED:return"disconnected"}}sendMessageToSocket(h){null!=this._websocket?this._websocket.send(JSON.stringify(h)):this._outstandingMessages.push(h)}sendMessageToClient(h){this._onMessage(h)}updateCustomParameters(h){this._config.customParameters=h,null!=this._websocket&&this._websocket.close()}_tryCreateWebSocket(h=this._config.source.path,C=1e3,N=0){var F=this;return(0,u.Z)(function*(){try{if(F.destroyed)return;const $=(0,x.fl)(h,F._config.customParameters??{});F._websocket=yield F._createWebSocket($),F.notifyChange("connectionStatus")}catch($){const te=C/1e3;return F._config.maxReconnectionAttempts&&N>=F._config.maxReconnectionAttempts?(g.Z.getLogger(F).error(new y.Z("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),void F.destroy()):(g.Z.getLogger(F).error(new y.Z("websocket-connection",`Failed to connect. Attempting to reconnect in ${te}s`,$)),yield(0,D.e4)(C),F._tryCreateWebSocket(h,Math.min(1.5*C,1e3*F._config.maxReconnectionInterval),N+1))}})()}_setWebSocketJSONParseHandler(h){h.onmessage=C=>{try{const N=JSON.parse(C.data);this._onMessage(N)}catch(N){return void g.Z.getLogger(this).error(new y.Z("websocket-connection","Failed to parse message, invalid JSON",{error:N}))}}}_createWebSocket(h){return new Promise((C,N)=>{const F=new WebSocket(h);F.onopen=()=>{if(F.onopen=null,this.destroyed)return F.onclose=null,void F.close();F.onclose=$=>this._onClose($),F.onerror=$=>this._onError($),this._setWebSocketJSONParseHandler(F),C(F)},F.onclose=$=>{F.onopen=F.onclose=null,N($)}})}_handshake(h=1e4){var C=this;return(0,u.Z)(function*(){const N=C._websocket;if(null==N)return;const F=(0,D.hh)(),$=N.onmessage,{filter:te,outFields:X,spatialReference:oe}=C._config;return F.timeout(h),N.onmessage=ae=>{let se=null;try{se=JSON.parse(ae.data)}catch{}se&&"object"==typeof se||(g.Z.getLogger(C).error(new y.Z("websocket-connection","Protocol violation. Handshake failed - malformed message",ae.data)),F.reject(),C.destroy()),se.spatialReference?.wkid!==oe?.wkid&&(g.Z.getLogger(C).error(new y.Z("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${oe.wkid}`,ae.data)),F.reject(),C.destroy()),"json"!==se.format&&(g.Z.getLogger(C).error(new y.Z("websocket-connection","Protocol violation. Handshake failed - format is not set",ae.data)),F.reject(),C.destroy()),te&&se.filter!==te&&g.Z.getLogger(C).error(new y.Z("websocket-connection","Tried to set filter, but server doesn't support it")),X&&se.outFields!==X&&g.Z.getLogger(C).error(new y.Z("websocket-connection","Tried to set outFields, but server doesn't support it")),N.onmessage=$;for(const H of C._outstandingMessages)N.send(JSON.stringify(H));C._outstandingMessages=[],F.resolve()},N.send(JSON.stringify({filter:te,outFields:X,format:"json",spatialReference:{wkid:oe.wkid}})),F.promise})()}_onMessage(h){if(this.onMessage(h),"type"in h)switch(h.type){case"features":case"featureResult":for(const C of h.features)null!=this._featureZScaler&&this._featureZScaler(C.geometry),this.onFeature(C)}}_onError(h){const C="Encountered an error over WebSocket connection";this._set("errorString",C),g.Z.getLogger(this).error("websocket-connection",C)}_onClose(h){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==h.code&&g.Z.getLogger(this).error("websocket-connection",`WebSocket closed unexpectedly with error code ${h.code}`),this.destroyed||this._open()}};(0,E._)([(0,A.Cb)()],l.prototype,"connectionStatus",null),(0,E._)([(0,A.Cb)()],l.prototype,"errorString",void 0),l=(0,E._)([(0,W.j)("esri.layers.graphics.sources.connections.WebSocketConnection")],l);var _=s(82784),m=s(91866),M=s(40637),b=s(43814);const U={maxQueryDepth:5,maxRecordCountFactor:3};let j=class extends l{constructor(h){super({...U,...h}),this._buddyServicesQuery=null,this._relatedFeatures=null}_open(){var h=this;return(0,u.Z)(function*(){const C=yield h._fetchServiceDefinition(h._config.source);C.timeInfo.trackIdField||g.Z.getLogger(h).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");const N=h._fetchWebSocketUrl(C.streamUrls,h._config.spatialReference);h._buddyServicesQuery||(h._buddyServicesQuery=h._queryBuddyServices()),yield h._buddyServicesQuery,yield h._tryCreateWebSocket(N);const{filter:F,outFields:$}=h._config;h.destroyed||h._setFilter(F,$)})()}_onMessage(h){if("attributes"in h){let C;try{C=this._enrich(h),null!=this._featureZScaler&&this._featureZScaler(C.geometry)}catch(N){return void g.Z.getLogger(this).error(new y.Z("geoevent-connection","Failed to parse message",N))}this.onFeature(C)}else this.onMessage(h)}_fetchServiceDefinition(h){var C=this;return(0,u.Z)(function*(){const N={f:"json",...C._config.customParameters},F=(0,R.Z)(h.path,{query:N,responseType:"json"}),$=(yield F).data;return C._serviceDefinition=$,$})()}_fetchWebSocketUrl(h,C){const N=h[0],{urls:F,token:$}=N,te=this._inferWebSocketBaseUrl(F);return(0,x.fl)(`${te}/subscribe`,{outSR:""+C.wkid,token:$})}_inferWebSocketBaseUrl(h){if(1===h.length)return h[0];for(const C of h)if(C.includes("wss"))return C;return g.Z.getLogger(this).error(new y.Z("geoevent-connection","Unable to infer WebSocket url",h)),null}_setFilter(h,C){var N=this;return(0,u.Z)(function*(){const F=N._websocket;if(null==F||null==h&&null==C)return;const $=JSON.stringify({filter:N._serializeFilter(h,C)});let te=!1;const X=(0,D.hh)();return F.onmessage=se=>{const H=JSON.parse(se.data);H.filter&&(H.error&&(g.Z.getLogger(N).error(new y.Z("geoevent-connection","Failed to set service filter",H.error)),N._set("errorString",`Could not set service filter - ${H.error}`),X.reject(H.error)),N._setWebSocketJSONParseHandler(F),te=!0,X.resolve())},F.send($),setTimeout(()=>{te||(N.destroyed||N._websocket!==F||g.Z.getLogger(N).error(new y.Z("geoevent-connection","Server timed out when setting filter")),X.reject())},1e4),X.promise})()}_serializeFilter(h,C){const N={};if(null==h&&null==C)return N;if(h?.geometry)try{const F=(0,M.im)(h.geometry);if("extent"!==F.type)throw new y.Z(`Expected extent but found type ${F.type}`);N.geometry=JSON.stringify(F.shiftCentralMeridian())}catch(F){g.Z.getLogger(this).error(new y.Z("geoevent-connection","Encountered an error when setting connection geometryDefinition",F))}return h?.where&&"1 = 1"!==h.where&&"1=1"!==h.where&&(N.where=h.where),null!=C&&(N.outFields=C.join(",")),N}_enrich(h){if(!this._relatedFeatures)return h;const F=this._relatedFeatures.get(h.attributes[this._serviceDefinition.relatedFeatures.joinField]);if(!F)return g.Z.getLogger(this).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",h),h;const{attributes:$,geometry:te}=F;for(const X in $)h.attributes[X]=$[X];return te&&(h.geometry=te),h.geometry||h.centroid||g.Z.getLogger(this).error(new y.Z("geoevent-connection","Found malformed feature - no geometry found",h)),h}_queryBuddyServices(){var h=this;return(0,u.Z)(function*(){try{const{relatedFeatures:C,keepLatestArchive:N}=h._serviceDefinition,F=h._queryRelatedFeatures(C),$=h._queryArchive(N);yield F;const te=yield $;if(!te)return;for(const X of te.features)h.onFeature(h._enrich(X))}catch(C){g.Z.getLogger(h).error(new y.Z("geoevent-connection","Encountered an error when querying buddy services",{error:C}))}})()}_queryRelatedFeatures(h){var C=this;return(0,u.Z)(function*(){if(!h)return;const N=yield C._queryBuddy(h.featuresUrl);C._addRelatedFeatures(N)})()}_queryArchive(h){var C=this;return(0,u.Z)(function*(){if(h)return C._queryBuddy(h.featuresUrl)})()}_queryBuddy(h){var C=this;return(0,u.Z)(function*(){const N=new((yield Promise.all([s.e(9370),s.e(638),s.e(1963),s.e(4271),s.e(8410),s.e(7512),s.e(5594),s.e(373),s.e(9005)]).then(s.bind(s,90373))).default)({url:h}),{capabilities:F}=yield N.load(),$=F.query.supportsMaxRecordCountFactor,te=F.query.supportsPagination,X=F.query.supportsCentroid,oe=C._config.maxRecordCountFactor,ae=N.capabilities.query.maxRecordCount,se=$?ae*oe:ae,H=new m.Z;if(H.outFields=C._config.outFields??["*"],H.where=C._config.filter?.where??"1=1",H.returnGeometry=!0,H.returnExceededLimitFeatures=!0,H.outSpatialReference=b.Z.fromJSON(C._config.spatialReference),X&&(H.returnCentroid=!0),$&&(H.maxRecordCountFactor=oe),te)return H.num=se,N.destroy(),C._queryPages(h,H);const Q=yield(0,_.JT)(h,H,C._config.sourceSpatialReference);return N.destroy(),Q.data})()}_queryPages(h,C,N=[],F=0){var $=this;return(0,u.Z)(function*(){C.start=null!=C.num?F*C.num:null;const{data:te}=yield(0,_.JT)(h,C,$._config.sourceSpatialReference);return te.exceededTransferLimit&&F<($._config.maxQueryDepth??0)?(te.features.forEach(X=>N.push(X)),$._queryPages(h,C,N,F+1)):(N.forEach(X=>te.features.push(X)),te)})()}_addRelatedFeatures(h){const C=new Map,N=h.features,F=this._serviceDefinition.relatedFeatures.joinField;for(const $ of N)C.set($.attributes[F],$);this._relatedFeatures=C}};j=(0,E._)([(0,W.j)("esri.layers.graphics.sources.connections.GeoEventConnection")],j);const Z=j;let w=class extends P{constructor(h){super({}),this.connectionStatus="connected",this.errorString=null;const{geometryType:C,spatialReference:N,sourceSpatialReference:F}=h;this._featureZScaler=(0,v.k)(C,F,N)}normalizeCtorArgs(){return{}}updateCustomParameters(h){}sendMessageToSocket(h){}sendMessageToClient(h){if("type"in h)switch(h.type){case"features":case"featureResult":for(const C of h.features)null!=this._featureZScaler&&this._featureZScaler(C.geometry),this.onFeature(C)}this.onMessage(h)}};function B(h,C){if(null==h&&null==C)return null;const N={};return null!=C&&(N.geometry=C),null!=h&&(N.where=h),N}function V(h,C,N,F,$,te,X,oe,ae){const se={source:h,sourceSpatialReference:C,spatialReference:N,geometryType:F,filter:B($,te),maxReconnectionAttempts:X,maxReconnectionInterval:oe,customParameters:ae};return h?h.path.startsWith("wss://")||h.path.startsWith("ws://")?new l(se):new Z(se):new w(se)}(0,E._)([(0,A.Cb)()],w.prototype,"connectionStatus",void 0),(0,E._)([(0,A.Cb)()],w.prototype,"errorString",void 0),w=(0,E._)([(0,W.j)("esri.layers.support.ClientSideConnection")],w)},52315:(re,z,s)=>{s.d(z,{AC:()=>D,Fz:()=>I,Q_:()=>v,_C:()=>x,fB:()=>T,i1:()=>d,jO:()=>W,kE:()=>g,ks:()=>y,s8:()=>A,sc:()=>R});var u=s(57964);const E="upload-assets",O=()=>new Error;class R extends u.Z{constructor(){super(`${E}:unsupported`,"Layer does not support asset uploads.",O())}}class y extends u.Z{constructor(){super(`${E}:no-glb-support`,"Layer does not support glb.",O())}}class g extends u.Z{constructor(){super(`${E}:no-supported-source`,"No supported external source found",O())}}class D extends u.Z{constructor(){super(`${E}:not-base-64`,"Expected gltf data in base64 format after conversion.",O())}}class x extends u.Z{constructor(){super(`${E}:unable-to-prepare-options`,"Unable to prepare uploadAsset request options.",O())}}class I extends u.Z{constructor(P,p){super(`${E}:bad-response`,`Bad response. Uploaded ${P} items and received ${p} results.`,O())}}class T extends u.Z{constructor(P,p){super(`${E}-layer:upload-failed`,`Failed to upload mesh file ${P}. Error code: ${p?.code??"-1"}. Error message: ${p?.messages??"unknown"}`,O())}}class W extends u.Z{constructor(P){super(`${E}-layer:unsupported-format`,`The service allowed us to upload an asset of FormatID ${P}, but it does not list it in its supported formats.`,O())}}class A extends u.Z{constructor(){super(`${E}:convert3D-failed`,"convert3D failed.")}}class v extends u.Z{constructor(){super("invalid-input:no-model","No supported model found")}}class d extends u.Z{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}},74623:(re,z,s)=>{s.d(z,{A:()=>E});const u=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function E(O){return null!=O&&u.some(([R,y])=>O>=R&&O<=y)}},69484:(re,z,s)=>{s.r(z),s.d(z,{save:()=>ve,saveAll:()=>De,saveAllAs:()=>Te,saveAs:()=>Ce});var u=s(15861),E=s(57678),O=s(57964),R=s(60084),y=s(85155),g=s(89713),D=s(23933),x=s(85971),I=s(79936),T=s(50318);const W="Feature Service",A="feature-layer-utils",v=`${A}-save`,d=`${A}-save-as`,S=`${A}-saveall`,P=`${A}-saveall-as`;function p(K){return{isValid:(0,x.fP)(K)&&("feature"!==K.type||!K.dynamicDataSource),errorMessage:"Feature layer should be a layer or table in a map or feature service"}}function l(K){const Y=[],q=[];for(const{layer:ne,layerJSON:ue}of K)ne.isTable?q.push(ue):Y.push(ue);return{layers:Y,tables:q}}function _(K){return l([K])}function m(K,Y){return M.apply(this,arguments)}function M(){return(M=(0,u.Z)(function*(K,Y){return/\/\d+\/?$/.test(K.url)?_(Y[0]):b(Y,K)})).apply(this,arguments)}function b(K,Y){return L.apply(this,arguments)}function L(){return L=(0,u.Z)(function*(K,Y){if(K.reverse(),!Y)return l(K);const q=yield function U(K,Y){return j.apply(this,arguments)}(Y,K);for(const ne of K)ae(ne.layer,ne.layerJSON,q);return function B(K,Y){const q=[],ne=[];for(const{layer:ue}of Y){const{isTable:le,layerId:ie}=ue;le?ne.push(ie):q.push(ie)}V(K.layers,q),V(K.tables,ne)}(q,K),q}),L.apply(this,arguments)}function j(){return j=(0,u.Z)(function*(K,Y){let q=yield K.fetchData("json");if(function Z(K){return!!(K&&Array.isArray(K.layers)&&Array.isArray(K.tables))}(q))return q;q||={},function w(K){K.layers||=[],K.tables||=[]}(q);const{layer:{url:ne,customParameters:ue,apiKey:le}}=Y[0];return yield function C(K,Y,q){return N.apply(this,arguments)}(q,{url:ne??"",customParameters:ue,apiKey:le},Y.map(ie=>ie.layer.layerId)),q}),j.apply(this,arguments)}function V(K,Y){if(K.length<2)return;const q=[];for(const{id:ne}of K)q.push(ne);(0,E.fS)(q.sort(h),Y.slice().sort(h))&&K.sort((ne,ue)=>{const le=Y.indexOf(ne.id),ie=Y.indexOf(ue.id);return le<ie?-1:le>ie?1:0})}function h(K,Y){return K<Y?-1:K>Y?1:0}function N(){return N=(0,u.Z)(function*(K,Y,q){const{url:ne,customParameters:ue,apiKey:le}=Y,{serviceJSON:ie,layersJSON:de}=yield(0,D.V)(ne,{customParameters:ue,apiKey:le}),fe=F(K.layers,ie.layers,q),ye=F(K.tables,ie.tables,q);K.layers=fe.itemResources,K.tables=ye.itemResources;const Ee=[...fe.added,...ye.added],Se=de?[...de.layers,...de.tables]:[];yield function $(K,Y,q,ne){return te.apply(this,arguments)}(K,Ee,ne,Se)}),N.apply(this,arguments)}function F(K,Y,q){const ne=(0,E.e5)(K,Y,(le,ie)=>le.id===ie.id);K=K.filter(le=>!ne.removed.some(ie=>ie.id===le.id));const ue=ne.added;return ue.forEach(({id:le})=>{K.push({id:le})}),{itemResources:K,added:ue.filter(({id:le})=>!q.includes(le))}}function te(){return te=(0,u.Z)(function*(K,Y,q,ne){const ue=yield function X(K){return oe.apply(this,arguments)}(Y),le=Y.map(({id:ie,type:de})=>new(ue.get(de))({url:q,layerId:ie,sourceJSON:ne.find(({id:fe})=>fe===ie)}));yield Promise.allSettled(le.map(ie=>ie.load())),le.forEach(ie=>{const{layerId:de,loaded:fe,defaultPopupTemplate:ye}=ie;if(!fe||null==ye)return;const Ee={id:de,popupInfo:ye.toJSON()};"ArcGISFeatureLayer"!==ie.operationalLayerType&&(Ee.layerType=ie.operationalLayerType),ae(ie,Ee,K)})}),te.apply(this,arguments)}function oe(){return(oe=(0,u.Z)(function*(K){const Y=[];K.forEach(({type:ue})=>{const le=(0,D.W)(ue);Y.push((0,I.T[le])())});const q=yield Promise.all(Y),ne=new Map;return K.forEach(({type:ue},le)=>{ne.set(ue,q[le])}),ne})).apply(this,arguments)}function ae(K,Y,q){!function se(K,Y){const q=K.findIndex(({id:ne})=>ne===Y.id);-1===q?K.push(Y):K[q]=Y}(K.isTable?q.tables:q.layers,Y)}function H(K,Y){if(!K.length)throw new O.Z(`${Y}:missing-parameters`,"'layers' array should contain at least one feature layer")}function ce(K,Y){const q=K.map(ne=>ne.layerId);if(new Set(q).size!==q.length)throw new O.Z(`${Y}:invalid-parameters`,"'layers' array should contain only one instance each of layer or table in a feature service")}function G(){return(G=(0,u.Z)(function*(K){H(K,S),yield Promise.all(K.map(Y=>Y.load()));for(const Y of K)(0,y.DC)(Y,S,p),(0,y.Ym)({layer:Y,itemType:W,errorNamePrefix:S});(function Q(K,Y){const q=K.map(ne=>ne.portalItem.id);if(new Set(q).size>1)throw new O.Z(`${Y}:invalid-parameters`,"All layers in the 'layers' array should be loaded from the same portal item")})(K,S),ce(K,S)})).apply(this,arguments)}function J(K,Y){return ee.apply(this,arguments)}function ee(){return(ee=(0,u.Z)(function*(K,Y){const{url:q,layerId:ne,title:ue,fullExtent:le,isTable:ie}=K,de=(0,g.Qc)(q);Y.url=("FeatureServer"===de?.serverType?q:`${q}/${ne}`)??null,Y.title||=ue,Y.extent=null,ie||null==le||(Y.extent=yield(0,T.$o)(le)),(0,T.ck)(Y,T.hz.METADATA),(0,T.ck)(Y,T.hz.MULTI_LAYER),(0,T.qj)(Y,T.hz.SINGLE_LAYER),ie&&(0,T.qj)(Y,T.hz.TABLE)})).apply(this,arguments)}function pe(){return(pe=(0,u.Z)(function*(K){H(K,P),yield Promise.all(K.map(Y=>Y.load()));for(const Y of K)(0,y.DC)(Y,P,p);(function _e(K,Y){for(const le of K){const ie=le.parsedUrl.path,de=(0,g.Qc)(ie);if(!de?.url.path)throw new O.Z(`${Y}:invalid-parameters`,(0,y.xG)(le,`has unsupported url pattern: ${ie}`),{layer:le});const ye=de?.serverType;if("FeatureServer"!==ye&&"MapServer"!==ye)throw new O.Z(`${Y}:invalid-parameters`,(0,y.xG)(le,`has unsupported server type: ${ye}`),{layer:le});if("MapServer"===ye&&K.length>1)throw new O.Z(`${Y}:invalid-parameters`,"Only one layer or table in a map service can be saved")}const q=(0,g.Qc)(K[0].parsedUrl.path),ne=q?.url.path;if(!K.every(le=>(0,g.Qc)(le.parsedUrl.path)?.url.path===ne))throw new O.Z(`${Y}:invalid-parameters`,"'layers' array should only contain layers or tables that belong to the same feature service")})(K,P),ce(K,P)})).apply(this,arguments)}function me(){return(me=(0,u.Z)(function*(K,Y){let q=0,ne=0;for(const{isTable:ie}of Y)ie?ne++:q++;const ue=Y[0].parsedUrl.path,le=(0,g.Qc)(ue);if(K.url="FeatureServer"===le?.serverType?le.url.path:ue,K.title||=le.title,K.extent=null,q>0){const ie=Y.map(de=>de.fullExtent).filter(E.pC).reduce((de,fe)=>de.clone().union(fe));ie&&(K.extent=yield(0,T.$o)(ie))}(0,T.ck)(K,T.hz.METADATA),(0,T.IW)(K,T.hz.MULTI_LAYER,Y.length>1),(0,T.IW)(K,T.hz.SINGLE_LAYER,1===Y.length),(0,T.IW)(K,T.hz.TABLE,ne>0&&0===q),(0,y.UY)(K)})).apply(this,arguments)}function ve(K,Y){return Me.apply(this,arguments)}function Me(){return(Me=(0,u.Z)(function*(K,Y){return(0,y.a1)({layer:K,itemType:W,validateLayer:p,createItemData:(q,ne)=>m(ne,[q]),errorNamePrefix:v},Y)})).apply(this,arguments)}function De(K,Y){return Oe.apply(this,arguments)}function Oe(){return Oe=(0,u.Z)(function*(K,Y){yield function k(K){return G.apply(this,arguments)}(K);const q=K[0].portalItem,ne=(0,y.V3)(q),ue=yield Promise.all(K.map(ie=>(0,y.Nw)(ie,ne,Y))),le=yield m(q,K.map((ie,de)=>({layer:ie,layerJSON:ue[de]})));return(0,y.UY)(q),yield q.update({data:le}),yield Promise.all(K.slice(1).map(ie=>ie.portalItem.reload())),(0,R.D)(ne),q.clone()}),Oe.apply(this,arguments)}function Ce(K,Y,q){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,u.Z)(function*(K,Y,q){return(0,y.po)({layer:K,itemType:W,validateLayer:p,createItemData:(ne,ue)=>Promise.resolve(_(ne)),errorNamePrefix:d,newItem:Y,setItemProperties:J},q)})).apply(this,arguments)}function Te(K,Y,q){return be.apply(this,arguments)}function be(){return be=(0,u.Z)(function*(K,Y,q){yield function he(K){return pe.apply(this,arguments)}(K);const ne=(0,y.uT)({itemType:W,errorNamePrefix:P,newItem:Y}),ue=(0,y.V3)(ne),le=yield Promise.all(K.map(de=>(0,y.Nw)(de,ue,q))),ie=yield b(K.map((de,fe)=>({layer:de,layerJSON:le[fe]})));yield function ge(K,Y){return me.apply(this,arguments)}(ne,K),yield(0,y.jX)(ne,ie,q);for(const de of K)de.portalItem=ne.clone();return(0,R.D)(ue),ne}),be.apply(this,arguments)}},85155:(re,z,s)=>{s.d(z,{DC:()=>T,Nw:()=>_,UY:()=>M,V3:()=>l,Ym:()=>P,a1:()=>U,jX:()=>b,po:()=>Z,uT:()=>p,xG:()=>v});var u=s(15861),E=s(57964),O=s(60084),R=s(61018),y=s(27835),g=s(453),D=s(50318),x=s(88911),I=s(46018);function T(B,V,h){const C=h(B);if(!C.isValid)throw new E.Z(`${V}:invalid-parameters`,C.errorMessage,{layer:B})}function W(B){return A.apply(this,arguments)}function A(){return(A=(0,u.Z)(function*(B){const{layer:V,errorNamePrefix:h,validateLayer:C}=B;yield V.load(),T(V,h,C)})).apply(this,arguments)}function v(B,V){return`Layer (title: ${B.title}, id: ${B.id}) of type '${B.declaredClass}' ${V}`}function d(B){const{item:V,errorNamePrefix:h,layer:C,validateItem:N}=B;if((0,x.w)(V),function S(B){const{item:V,itemType:h,additionalItemType:C,errorNamePrefix:N,layer:F}=B,$=[h];if(C&&$.push(C),!$.includes(V.type)){const te=$.map(X=>`'${X}'`).join(", ");throw new E.Z(`${N}:portal-item-wrong-type`,`Portal item type should be one of: "${te}"`,{item:V,layer:F})}}(B),N){const F=N(V);if(!F.isValid)throw new E.Z(`${h}:invalid-parameters`,F.errorMessage,{layer:C})}}function P(B){const{layer:V,errorNamePrefix:h}=B,{portalItem:C}=V;if(!C)throw new E.Z(`${h}:portal-item-not-set`,v(V,"requires the portalItem property to be set"));if(!C.loaded)throw new E.Z(`${h}:portal-item-not-loaded`,v(V,"cannot be saved to a portal item that does not exist or is inaccessible"));d({...B,item:C})}function p(B){const{newItem:V,itemType:h}=B;let C=y.default.from(V);return C.id&&(C=C.clone(),C.id=null),C.type??=h,C.portal??=R.Z.getDefault(),d({...B,item:C}),C}function l(B){return(0,g.Y)(B,"portal-item")}function _(B,V,h){return m.apply(this,arguments)}function m(){return(m=(0,u.Z)(function*(B,V,h){"beforeSave"in B&&"function"==typeof B.beforeSave&&(yield B.beforeSave());const C=B.write({},V);return yield Promise.all(V.resources?.pendingOperations??[]),(0,I.z)(V,{errorName:"layer-write:unsupported"},h),C})).apply(this,arguments)}function M(B){(0,D.qj)(B,D.hz.JSAPI),B.typeKeywords&&(B.typeKeywords=B.typeKeywords.filter((V,h,C)=>C.indexOf(V)===h))}function b(B,V,h){return L.apply(this,arguments)}function L(){return(L=(0,u.Z)(function*(B,V,h){const C=B.portal;yield C.signIn(),yield C.user?.addItem({item:B,data:V,folder:h?.folder})})).apply(this,arguments)}function U(B,V){return j.apply(this,arguments)}function j(){return(j=(0,u.Z)(function*(B,V){const{layer:h,createItemData:C,createJSONContext:N,setItemProperties:F,saveResources:$,supplementalUnsupportedErrors:te}=B;yield W(B),P(B);const X=h.portalItem,oe=N?N(X):l(X),ae=yield _(h,oe,{...V,supplementalUnsupportedErrors:te}),se=yield C({layer:h,layerJSON:ae},X);return yield F?.(h,X),M(X),yield X.update({data:se}),(0,O.D)(oe),yield $?.(X,oe),X})).apply(this,arguments)}function Z(B,V){return w.apply(this,arguments)}function w(){return(w=(0,u.Z)(function*(B,V){const{layer:h,createItemData:C,createJSONContext:N,setItemProperties:F,saveResources:$,supplementalUnsupportedErrors:te}=B;yield W(B);const X=p(B),oe=N?N(X):l(X),ae=yield _(h,oe,{...V,supplementalUnsupportedErrors:te}),se=yield C({layer:h,layerJSON:ae},X);return yield F(h,X),M(X),yield b(X,se,V),h.portalItem=X,(0,O.D)(oe),yield $?.(X,oe),X})).apply(this,arguments)}},61793:(re,z,s)=>{s.d(z,{R:()=>v});var u=s(50484),E=s(73514),O=s(38955),R=s(80543),x=(s(14007),s(4703),s(65311),s(10141)),I=s(40408),T=s(1865),W=s(45859);const A={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let v=class extends E.Z{constructor(d){super(d),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const d=this.visibleSublayers.map(S=>{const P=(0,T.f)(this.floors,S);return S.toExportImageJSON(P)});return d.length?JSON.stringify(d):null}get hasDynamicLayers(){return this.layer&&(0,W.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(d){this._get("layer")!==d&&(this._set("layer",d),this.removeHandles("layer"),d&&this.addHandles([d.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),d.on("sublayer-update",S=>this.notifyChange(A[S.propertyName]))],"layer"))}get layers(){const d=this.visibleSublayers;return d?d.length?"show:"+d.map(S=>S.id).join(","):"show:-1":null}get layerDefs(){const d=!!this.floors?.length,S=this.visibleSublayers.filter(P=>null!=P.definitionExpression||d&&null!=P.floorInfo);return S.length?JSON.stringify(S.reduce((P,p)=>{const l=(0,T.f)(this.floors,p),_=(0,O._)(l,p.definitionExpression);return null!=_&&(P[p.id]=_),P},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const d=this.layer;return d&&(d.commitProperty("dpi"),d.commitProperty("imageFormat"),d.commitProperty("imageTransparency"),d.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const d=[];if(!this.layer)return d;const S=this.layer.sublayers,P=this.scale,p=_=>{_.visible&&(0===P||(0,I.o2)(P,_.minScale,_.maxScale))&&(_.sublayers?_.sublayers.forEach(p):d.unshift(_))};S&&S.forEach(p);const l=this._get("visibleSublayers");return!l||l.length!==d.length||l.some((_,m)=>d[m]!==_)?d:l}toJSON(){const d=this.layer;let S={dpi:d.dpi,format:d.imageFormat,transparent:d.imageTransparency,gdbVersion:d.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?S.dynamicLayers=this.dynamicLayers:S={...S,layers:this.layers,layerDefs:this.layerDefs},S}};(0,u._)([(0,R.Cb)({readOnly:!0})],v.prototype,"dynamicLayers",null),(0,u._)([(0,R.Cb)()],v.prototype,"floors",void 0),(0,u._)([(0,R.Cb)({readOnly:!0})],v.prototype,"hasDynamicLayers",null),(0,u._)([(0,R.Cb)()],v.prototype,"layer",null),(0,u._)([(0,R.Cb)({readOnly:!0})],v.prototype,"layers",null),(0,u._)([(0,R.Cb)({readOnly:!0})],v.prototype,"layerDefs",null),(0,u._)([(0,R.Cb)({type:Number})],v.prototype,"scale",void 0),(0,u._)([(0,R.Cb)({readOnly:!0})],v.prototype,"version",null),(0,u._)([(0,R.Cb)({readOnly:!0})],v.prototype,"visibleSublayers",null),v=(0,u._)([(0,x.j)("esri.layers.support.ExportImageParameters")],v)},6523:(re,z,s)=>{s.d(z,{j:()=>I});var u=s(50484),E=s(73514),O=s(80543),D=(s(14007),s(4703),s(65311),s(10141));const x={visible:"visibleSublayers"};let I=class extends E.Z{constructor(T){super(T),this.scale=0}set layer(T){this._get("layer")!==T&&(this._set("layer",T),this.removeHandles("layer"),T&&this.addHandles([T.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),T.on("wms-sublayer-update",W=>this.notifyChange(x[W.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:T})=>T).map(({name:T})=>T).join()}get version(){this.commitProperty("layers");const T=this.layer;return T&&T.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:T,scale:W}=this,A=T?.sublayers,v=[],d=S=>{const{minScale:P,maxScale:p,sublayers:l,visible:_}=S;_&&(0===W||(0===P||W<=P)&&(0===p||W>=p))&&(l?l.forEach(d):v.push(S))};return A?.forEach(d),v}toJSON(){const{layer:T,layers:W}=this,{imageFormat:A,imageTransparency:v,version:d}=T;return{format:A,request:"GetMap",service:"WMS",styles:"",transparent:v?"TRUE":"FALSE",version:d,layers:W}}};(0,u._)([(0,O.Cb)()],I.prototype,"layer",null),(0,u._)([(0,O.Cb)({readOnly:!0})],I.prototype,"layers",null),(0,u._)([(0,O.Cb)({type:Number})],I.prototype,"scale",void 0),(0,u._)([(0,O.Cb)({readOnly:!0})],I.prototype,"version",null),(0,u._)([(0,O.Cb)({readOnly:!0})],I.prototype,"visibleSublayers",null),I=(0,u._)([(0,D.j)("esri.layers.support.ExportWMSImageParameters")],I)},46687:(re,z,s)=>{s.d(z,{L:()=>A});var u=s(50484),E=s(73514),O=s(80543),D=(s(14007),s(4703),s(65311),s(10141)),x=s(5391),I=s(83821),T=s(45425),W=s(95150);let A=class extends E.Z{constructor(v){super(v)}get bounds(){const v=this.coords;return null==v?.extent?null:(0,T.oJ)(v.extent)}get coords(){const v=this.element.georeference?.coords;return(0,I.projectOrLoad)(v,this.spatialReference).geometry}get normalizedCoords(){return x.Z.fromJSON((0,W.Ui)(this.coords))}get normalizedBounds(){const v=null!=this.normalizedCoords?this.normalizedCoords.extent:null;return null!=v?(0,T.oJ)(v):null}};(0,u._)([(0,O.Cb)()],A.prototype,"spatialReference",void 0),(0,u._)([(0,O.Cb)()],A.prototype,"element",void 0),(0,u._)([(0,O.Cb)()],A.prototype,"bounds",null),(0,u._)([(0,O.Cb)()],A.prototype,"coords",null),(0,u._)([(0,O.Cb)()],A.prototype,"normalizedCoords",null),(0,u._)([(0,O.Cb)()],A.prototype,"normalizedBounds",null),A=(0,u._)([(0,D.j)("esri.layers.support.MediaElementView")],A)},24124:(re,z,s)=>{s.d(z,{Z:()=>T});var u=s(50484),E=s(25387),O=s(89317),R=s(80543),x=(s(14007),s(4703),s(65311),s(10141));let I=class extends((0,E.J)(O.wq)){constructor(W){super(W),this.frameCenter=null,this.frameOutline=null,this.lineOfSight=null,this.sensorLocation=null,this.sensorTrail=null}};(0,u._)([(0,R.Cb)({type:Boolean})],I.prototype,"frameCenter",void 0),(0,u._)([(0,R.Cb)({type:Boolean})],I.prototype,"frameOutline",void 0),(0,u._)([(0,R.Cb)({type:Boolean})],I.prototype,"lineOfSight",void 0),(0,u._)([(0,R.Cb)({type:Boolean})],I.prototype,"sensorLocation",void 0),(0,u._)([(0,R.Cb)({type:Boolean})],I.prototype,"sensorTrail",void 0),I=(0,u._)([(0,x.j)("esri.layers.support.TelemetryDisplay")],I);const T=I},4906:(re,z,s)=>{s.r(z),s.d(z,{populateGroupLayer:()=>$,populateOperationalLayers:()=>v});var u=s(15861),E=s(83944),R=(s(14007),s(81390)),y=s(79936),g=s(27835);function T(H,Q){return!(!H.layerType||"ArcGISFeatureLayer"!==H.layerType)&&H.featureCollectionType===Q}var W=s(82772),A=s(39262);function v(H,Q,ce){return d.apply(this,arguments)}function d(){return d=(0,u.Z)(function*(H,Q,ce){if(!Q)return;const k=Q.map(J=>function j(H,Q){return Z.apply(this,arguments)}(J,ce)),G=yield Promise.allSettled(k);for(const J of G)"rejected"===J.status||J.value&&H.add(J.value)}),d.apply(this,arguments)}const S={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BuildingSceneLayer:"BuildingSceneLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer",IntegratedMeshLayer:"IntegratedMeshLayer",KML:"KMLLayer",LineOfSightLayer:"LineOfSightLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",PointCloudLayer:"PointCloudLayer",RasterDataLayer:"UnsupportedLayer",VectorTileLayer:"VectorTileLayer",Voxel:"VoxelLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},P={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},p={ArcGISFeatureLayer:"FeatureLayer"},l={ArcGISImageServiceLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WMS:"UnsupportedLayer",WebTiledLayer:"WebTileLayer"},_={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoJSON:"GeoJSONLayer",GeoRSS:"GeoRSSLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",KnowledgeGraphLayer:"KnowledgeGraphLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},m={ArcGISFeatureLayer:"FeatureLayer",SubtypeGroupTable:"UnsupportedLayer"},M={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",DefaultTileLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},b={..._,LinkChartLayer:"LinkChartLayer"},L={...m},U={...M};function Z(){return Z=(0,u.Z)(function*(H,Q){return function w(H,Q,ce){return B.apply(this,arguments)}(yield function V(H,Q){return h.apply(this,arguments)}(H,Q),H,Q)}),Z.apply(this,arguments)}function B(){return B=(0,u.Z)(function*(H,Q,ce){const k=new H;return k.read(Q,ce.context),"group"===k.type&&("GroupLayer"===Q.layerType?yield $(k,Q,ce):N(Q)?function X(H,Q,ce){Q.itemId&&(H.portalItem=new g.default({id:Q.itemId,portal:ce?.portal}),H.when(()=>{const k=G=>{const J=G.layerId;se(G,H,Q,J,ce);const ee=Q.featureCollection?.layers?.[J];ee&&G.read(ee,ce)};H.layers?.forEach(k),H.tables?.forEach(k)}))}(k,Q,ce.context):C(Q)&&(yield function oe(H,Q,ce){return ae.apply(this,arguments)}(k,Q,ce.context))),yield(0,A.y)(k,ce.context),k}),B.apply(this,arguments)}function h(){return(h=(0,u.Z)(function*(H,Q){const ce=Q.context,k=function F(H){let Q;switch(H.origin){case"web-scene":switch(H.layerContainerType){case"basemap":Q=l;break;case"ground":Q=P;break;case"tables":Q=p;break;default:Q=S}break;case"link-chart":switch(H.layerContainerType){case"basemap":Q=U;break;case"tables":Q=L;break;default:Q=b}break;default:switch(H.layerContainerType){case"basemap":Q=M;break;case"tables":Q=m;break;default:Q=_}}return Q}(ce);let G=H.layerType||H.type;!G&&Q?.defaultLayerType&&(G=Q.defaultLayerType);const J=k[G];let ee=J?y.T[J]:y.T.UnknownLayer;if(N(H)){const _e=ce?.portal;if(H.itemId){const he=new g.default({id:H.itemId,portal:_e});yield he.load();const pe=(yield(0,W.selectLayerClassPath)(he,new R.L)).className||"UnknownLayer";ee=y.T[pe]}}else"ArcGISFeatureLayer"===G?function D(H){return T(H,"notes")}(H)||function x(H){return T(H,"markup")}(H)?ee=y.T.MapNotesLayer:function I(H){return T(H,"route")}(H)?ee=y.T.RouteLayer:C(H)&&(ee=y.T.GroupLayer):H.wmtsInfo?.url&&H.wmtsInfo.layerIdentifier?ee=y.T.WMTSLayer:"WFS"===G&&"2.0.0"!==H.wfsInfo?.version&&(ee=y.T.UnsupportedLayer);return ee()})).apply(this,arguments)}function C(H){return"ArcGISFeatureLayer"===H.layerType&&!N(H)&&(H.featureCollection?.layers?.length??0)>1}function N(H){return"Feature Collection"===H.type}function $(H,Q,ce){return te.apply(this,arguments)}function te(){return(te=(0,u.Z)(function*(H,Q,ce){const k=new E.Z,G=v(k,Array.isArray(Q.layers)?Q.layers:[],ce);try{try{if(yield G,"group"===H.type)return H.layers.addMany(k),H}catch(J){H.destroy();for(const ee of k)ee.destroy();throw J}}catch(J){throw J}})).apply(this,arguments)}function ae(){return(ae=(0,u.Z)(function*(H,Q,ce){const k=y.T.FeatureLayer,G=yield k(),J=Q.featureCollection,ee=J?.showLegend,_e=J?.layers?.map((he,pe)=>{const ge=new G;ge.read(he,ce);const me={...ce,ignoreDefaults:!0};return se(ge,H,Q,pe,me),null!=ee&&ge.read({showLegend:ee},me),ge});H.layers.addMany(_e??[])})).apply(this,arguments)}function se(H,Q,ce,k,G){H.read({id:`${Q.id}-sublayer-${k}`,visibility:ce.visibleLayers?.includes(k)??!0},G)}},68595:(re,z,s)=>{s.d(z,{OE:()=>W,Gc:()=>d,Qg:()=>A,Rq:()=>D,gX:()=>v,z2:()=>x,ET:()=>I,Vx:()=>P}),s(2189);var O=s(89350),R=s(44107);const y=new Map,g=new class E{constructor(l=15e3,_=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=l,this._interval=Math.min(l,_)}decreaseRefCount(l,_){const m=l+"/"+_,M=this._cachedBlocks;if(M.has(m)){const b=M.get(m);return b.refCount--,b.refCount<=0&&(M.delete(m),b.controller&&b.controller.abort()),b.refCount}return 0}getBlock(l,_){const m=l+"/"+_,M=this._cachedBlocks;if(M.has(m)){const b=M.get(m);return b.ts=Date.now(),b.refCount++,M.delete(m),M.set(m,b),b.block}return null}putBlock(l,_,m,M){const b=this._cachedBlocks,L=l+"/"+_;if(b.has(L)){const U=b.get(L);U.ts=Date.now(),U.refCount++}else b.set(L,{block:m,ts:Date.now(),refCount:1,controller:M});this._trim(),this._updateTimer()}deleteBlock(l,_){const m=this._cachedBlocks,M=l+"/"+_;m.has(M)&&m.delete(M)}updateMaxSize(l){this._size=l,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(null!=this._timer)return;const l=this._cachedBlocks;this._timer=setInterval(()=>{const _=Array.from(l),m=Date.now();for(let M=0;M<_.length&&_[M][1].ts<=m-this._duration;M++)l.delete(_[M][0]);0===l.size&&this._clearTimer()},this._interval)}_trim(){const l=this._cachedBlocks;if(-1===this._size||this._size>=l.size)return;const _=Array.from(l);for(let m=0;m<_.length-this._size;m++)l.delete(_[m][0])}_clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function D(p,l){return null==l?p:`${p}?sliceId=${l}`}function x(p,l){const _={extent:null,rasterInfo:l,cache:new Map},m=y.get(p);return m?(m.push(_),m.length-1):(y.set(p,[_]),0)}function I(p,l){const _=y.get(p);_&&(_[l]=null,_.some(m=>null!=m)||y.delete(p))}function W(p,l,_){const m=y.get(p);if(!m)return null==l?g.decreaseRefCount(p,_):0;if(null==l||null==m[l])return g.decreaseRefCount(p,_);const M=m[l]?.cache,b=M?.get(_);if(M&&b){if(b.refCount--,0===b.refCount){M.delete(_);for(let L=0;L<m.length;L++)m[L]?.cache.delete(_);b.controller&&b.controller.abort()}return b.refCount}return 0}function A(p,l,_){const m=y.get(p);if(!m)return null==l?g.getBlock(p,_):null;if(null==l||null==m[l]){for(let b=0;b<m.length;b++){const L=m[b]?.cache.get(_);if(L)return L.refCount++,L.block}return g.getBlock(p,_)}const M=m[l]?.cache.get(_);if(M)return M.refCount++,M.block;for(let b=0;b<m.length;b++){if(b===l||!m[b])continue;const L=m[b]?.cache,U=L?.get(_);if(L&&U)return U.refCount++,L.set(_,U),U.block}return null}function v(p,l,_,m,M=null){const b=y.get(p);if(!b)return void(null==l&&g.putBlock(p,_,m,M));if(null==l||null==b[l])return void g.putBlock(p,_,m,M);const L={refCount:1,block:m,isResolved:!1,isRejected:!1,controller:M};m.then(()=>L.isResolved=!0).catch(()=>L.isRejected=!0),b[l]?.cache.set(_,L)}function d(p,l,_){const m=y.get(p);m?null!=l&&null!=m[l]?m[l]?.cache.delete(_):g.deleteBlock(p,_):null==l&&g.deleteBlock(p,_)}function P(p,l,_,m,M,b,L=null){const U=function S(p,l){const _=y.get(p);return _?_[l]??null:null}(p,l);if(!U)return;const j=U.extent,{cache:Z,rasterInfo:w}=U;if(j&&j.xmin===_.xmin&&j.xmax===_.xmax&&j.ymin===_.ymin&&j.ymax===_.ymax)return;m=m??0;const B=_.clone().normalize(),{spatialReference:V,transform:h}=w,C=new Set;for(let N=0;N<B.length;N++){const F=B[N];if(F.xmax-F.xmin<=m||F.ymax-F.ymin<=m)continue;let $=(0,O.tB)(F,V,L);null!=h&&($=h.inverseTransform($));const te=new R.Z({x:m,y:m,spatialReference:F.spatialReference});if(null==M&&!(M=(0,O.VO)(te,V,F,L)))return;const{pyramidLevel:X,pyramidResolution:oe,excessiveReading:ae}=(0,O.kr)(M,w,b||"closest");if(ae)return;const{storageInfo:se}=w,{origin:H}=se,Q={x:Math.max(0,Math.floor(($.xmin-H.x)/oe.x)),y:Math.max(0,Math.floor((H.y-$.ymax)/oe.y))},ce=Math.ceil(($.xmax-$.xmin)/oe.x-.1),k=Math.ceil(($.ymax-$.ymin)/oe.y-.1),G=X>0?se.pyramidBlockWidth:se.blockWidth,J=X>0?se.pyramidBlockHeight:se.blockHeight,ee=1,_e=Math.max(0,Math.floor(Q.x/G)-ee),he=Math.max(0,Math.floor(Q.y/J)-ee),pe=Math.floor((Q.x+ce-1)/G)+ee,ge=Math.floor((Q.y+k-1)/J)+ee;for(let me=he;me<=ge;me++)for(let ve=_e;ve<=pe;ve++)C.add(`${X}/${me}/${ve}`)}Z.forEach((N,F)=>{if(!C.has(F)){const $=Z.get(F);(null==$||$.isResolved||$.isRejected)&&Z.delete(F)}}),U.extent={xmin:_.xmin,ymin:_.ymin,xmax:_.xmax,ymax:_.ymax}}},51554:(re,z,s)=>{s.d(z,{J:()=>O,O:()=>E});var u=s(98930);function E(){return new Promise(y=>s.e(9064).then(s.bind(s,17099)).then(g=>g.l).then(({default:g})=>{const D=g({locateFile:R,onRuntimeInitialized:()=>y(D)})})).catch(y=>{throw y})}function O(){return new Promise(y=>s.e(67).then(s.bind(s,90067)).then(g=>g.l).then(({default:g})=>{const D=g({locateFile:R,onRuntimeInitialized:()=>y(D)})})).catch(y=>{throw y})}function R(y){return(0,u.V)(`esri/libs/lyr3d/${y}`)}},79387:(re,z,s)=>{s.d(z,{B:()=>E});var u=s(6785);function E(I){return y[function O(I){return"json"===I.type?"application/json":"blob"===I.type?I.blob.type:function R(I){const T=(0,u.Ml)(I);return x[T]||g}(I.url)}(I)]||D}const y={},g="text/plain",D=y[g],x={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const I in x)y[x[I]]=I},21705:(re,z,s)=>{s.d(z,{Z:()=>l});var v,u=s(50484),E=s(34222),O=s(80543),g=(s(14007),s(4703),s(21070)),D=s(10141),x=s(86627),I=s(37764),T=s(66599),W=s(89317),A=s(1535);let d=v=class extends W.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new v({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,E.d9)(this.color)})}};(0,u._)([(0,O.Cb)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,u._)([(0,O.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,u._)([(0,O.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],d.prototype,"minValue",void 0),(0,u._)([(0,O.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],d.prototype,"maxValue",void 0),(0,u._)([(0,O.Cb)({type:T.Z,json:{type:[A.z8],write:!0}})],d.prototype,"color",void 0),d=v=(0,u._)([(0,D.j)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],d);const S=d;var P;let p=P=class extends x.Z{constructor(_){super(_),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new P({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,E.d9)(this.colorClassBreakInfos),legendOptions:(0,E.d9)(this.legendOptions)})}};(0,u._)([(0,g.J)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],p.prototype,"type",void 0),(0,u._)([(0,O.Cb)({json:{write:!0},type:String})],p.prototype,"field",void 0),(0,u._)([(0,O.Cb)({type:I.I,json:{write:!0}})],p.prototype,"legendOptions",void 0),(0,u._)([(0,O.Cb)({type:x.Z.fieldTransformTypeKebabDict.apiValues,json:{type:x.Z.fieldTransformTypeKebabDict.jsonValues,read:x.Z.fieldTransformTypeKebabDict.read,write:x.Z.fieldTransformTypeKebabDict.write}})],p.prototype,"fieldTransformType",void 0),(0,u._)([(0,O.Cb)({type:[S],json:{write:!0}})],p.prototype,"colorClassBreakInfos",void 0),p=P=(0,u._)([(0,D.j)("esri.renderers.PointCloudClassBreaksRenderer")],p);const l=p},86627:(re,z,s)=>{s.d(z,{Z:()=>Z});var T,u=s(50484),E=s(84303),O=s(89317),R=s(34222),y=s(80543),x=(s(14007),s(4703),s(10141));s(65311);let W=T=class extends O.wq{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new T({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,u._)([(0,y.Cb)({type:String,json:{write:!0}})],W.prototype,"field",void 0),(0,u._)([(0,y.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],W.prototype,"minValue",void 0),(0,u._)([(0,y.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],W.prototype,"maxValue",void 0),W=T=(0,u._)([(0,x.j)("esri.renderers.support.pointCloud.ColorModulation")],W);const A=W,v=new E.X({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let d=class extends O.wq{};(0,u._)([(0,y.Cb)({type:v.apiValues,readOnly:!0,nonNullable:!0,json:{type:v.jsonValues,read:!1,write:v.write}})],d.prototype,"type",void 0),d=(0,u._)([(0,x.j)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],d);const S=d;var p,P=s(21070);let l=p=class extends S{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new p({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,u._)([(0,P.J)({pointCloudFixedSizeAlgorithm:"fixed-size"})],l.prototype,"type",void 0),(0,u._)([(0,y.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],l.prototype,"size",void 0),(0,u._)([(0,y.Cb)({type:Boolean,json:{write:!0}})],l.prototype,"useRealWorldSymbolSizes",void 0),l=p=(0,u._)([(0,x.j)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],l);const _=l;var m;let M=m=class extends S{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new m({scaleFactor:this.scaleFactor})}};(0,u._)([(0,P.J)({pointCloudSplatAlgorithm:"splat"})],M.prototype,"type",void 0),(0,u._)([(0,y.Cb)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],M.prototype,"scaleFactor",void 0),M=m=(0,u._)([(0,x.j)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],M);const L={key:"type",base:S,typeMap:{"fixed-size":_,splat:M}},U=(0,E.w)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let j=class extends O.wq{constructor(w){super(w),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,R.d9)(this.pointSizeAlgorithm),colorModulation:(0,R.d9)(this.colorModulation),pointsPerInch:(0,R.d9)(this.pointsPerInch)}}};(0,u._)([(0,y.Cb)({type:U.apiValues,readOnly:!0,nonNullable:!0,json:{type:U.jsonValues,read:!1,write:U.write}})],j.prototype,"type",void 0),(0,u._)([(0,y.Cb)({types:L,json:{write:!0}})],j.prototype,"pointSizeAlgorithm",void 0),(0,u._)([(0,y.Cb)({type:A,json:{write:!0}})],j.prototype,"colorModulation",void 0),(0,u._)([(0,y.Cb)({json:{write:!0},nonNullable:!0,type:Number})],j.prototype,"pointsPerInch",void 0),j=(0,u._)([(0,x.j)("esri.renderers.PointCloudRenderer")],j),(j||(j={})).fieldTransformTypeKebabDict=new E.X({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const Z=j},71212:(re,z,s)=>{s.d(z,{Z:()=>v});var W,u=s(50484),E=s(34222),O=s(80543),g=(s(14007),s(4703),s(21070)),D=s(10141),x=s(86627),I=s(37764),T=s(11892);let A=W=class extends x.Z{constructor(d){super(d),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new W({...this.cloneProperties(),field:(0,E.d9)(this.field),fieldTransformType:(0,E.d9)(this.fieldTransformType),stops:(0,E.d9)(this.stops),legendOptions:(0,E.d9)(this.legendOptions)})}};(0,u._)([(0,g.J)({pointCloudStretchRenderer:"point-cloud-stretch"})],A.prototype,"type",void 0),(0,u._)([(0,O.Cb)({json:{write:!0},type:String})],A.prototype,"field",void 0),(0,u._)([(0,O.Cb)({type:I.I,json:{write:!0}})],A.prototype,"legendOptions",void 0),(0,u._)([(0,O.Cb)({type:x.Z.fieldTransformTypeKebabDict.apiValues,json:{type:x.Z.fieldTransformTypeKebabDict.jsonValues,read:x.Z.fieldTransformTypeKebabDict.read,write:x.Z.fieldTransformTypeKebabDict.write}})],A.prototype,"fieldTransformType",void 0),(0,u._)([(0,O.Cb)({type:[T.Z],json:{write:!0}})],A.prototype,"stops",void 0),A=W=(0,u._)([(0,D.j)("esri.renderers.PointCloudStretchRenderer")],A);const v=A},70615:(re,z,s)=>{s.d(z,{Z:()=>l});var v,u=s(50484),E=s(34222),O=s(80543),g=(s(14007),s(4703),s(21070)),D=s(10141),x=s(86627),I=s(37764),T=s(66599),W=s(89317),A=s(1535);let d=v=class extends W.wq{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new v({description:this.description,label:this.label,values:(0,E.d9)(this.values),color:(0,E.d9)(this.color)})}};(0,u._)([(0,O.Cb)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,u._)([(0,O.Cb)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,u._)([(0,O.Cb)({type:[String],json:{write:!0}})],d.prototype,"values",void 0),(0,u._)([(0,O.Cb)({type:T.Z,json:{type:[A.z8],write:!0}})],d.prototype,"color",void 0),d=v=(0,u._)([(0,D.j)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],d);const S=d;var P;let p=P=class extends x.Z{constructor(_){super(_),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new P({...this.cloneProperties(),field:(0,E.d9)(this.field),fieldTransformType:(0,E.d9)(this.fieldTransformType),colorUniqueValueInfos:(0,E.d9)(this.colorUniqueValueInfos),legendOptions:(0,E.d9)(this.legendOptions)})}};(0,u._)([(0,g.J)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],p.prototype,"type",void 0),(0,u._)([(0,O.Cb)({json:{write:!0},type:String})],p.prototype,"field",void 0),(0,u._)([(0,O.Cb)({type:x.Z.fieldTransformTypeKebabDict.apiValues,json:{type:x.Z.fieldTransformTypeKebabDict.jsonValues,read:x.Z.fieldTransformTypeKebabDict.read,write:x.Z.fieldTransformTypeKebabDict.write}})],p.prototype,"fieldTransformType",void 0),(0,u._)([(0,O.Cb)({type:[S],json:{write:!0}})],p.prototype,"colorUniqueValueInfos",void 0),(0,u._)([(0,O.Cb)({type:I.I,json:{write:!0}})],p.prototype,"legendOptions",void 0),p=P=(0,u._)([(0,D.j)("esri.renderers.PointCloudUniqueValueRenderer")],p);const l=p},22497:(re,z,s)=>{s.d(z,{i:()=>I});var u=s(15861),E=s(66476),O=s(1535),R=s(40637),y=s(15462),g=s(60323),D=s(93305);const x=(0,O.se)(D.Z);function I(W,A,v){return T.apply(this,arguments)}function T(){return(T=(0,u.Z)(function*(W,A,v){A=x(A);const d=(0,y.en)(W),S={...d.query,f:"json",...A.toJSON()},P=A.outSpatialReference,p=(0,R.Ji)(A.geometries[0]),l=(0,y.lA)(S,v);return(0,E.Z)(d.path+"/project",l).then(({data:{geometries:_}})=>(0,g.o)(_,p,P))})).apply(this,arguments)}},18719:(re,z,s)=>{s.d(z,{IJ:()=>W,m5:()=>S,vB:()=>p,w7:()=>v});var u=s(15861),E=s(66476),O=s(6785),R=s(40637),y=s(93566),g=s(33721),D=s(90356),x=s(8295);const I="Layer does not support extent calculation.";function T(_,m){const M=_.geometry,b=_.toJSON(),L=b;if(null!=M&&(L.geometry=JSON.stringify(M),L.geometryType=(0,R.Ji)(M),L.inSR=(0,g.B9)(M.spatialReference)),b.topFilter?.groupByFields&&(L.topFilter.groupByFields=b.topFilter.groupByFields.join(",")),b.topFilter?.orderByFields&&(L.topFilter.orderByFields=b.topFilter.orderByFields.join(",")),b.topFilter&&(L.topFilter=JSON.stringify(L.topFilter)),b.objectIds&&(L.objectIds=b.objectIds.join(",")),b.orderByFields&&(L.orderByFields=b.orderByFields.join(",")),b.outFields&&!(m?.returnCountOnly||m?.returnExtentOnly||m?.returnIdsOnly)?L.outFields=b.outFields.includes("*")?"*":b.outFields.join(","):delete L.outFields,b.outSR?L.outSR=(0,g.B9)(b.outSR):M&&b.returnGeometry&&(L.outSR=L.inSR),b.returnGeometry&&delete b.returnGeometry,b.timeExtent){const U=b.timeExtent,{start:j,end:Z}=U;null==j&&null==Z||(L.time=j===Z?j:`${j??"null"},${Z??"null"}`),delete b.timeExtent}return L}function W(_,m,M,b){return A.apply(this,arguments)}function A(){return(A=(0,u.Z)(function*(_,m,M,b){const L=yield l(_,m,"json",b);return(0,x.p)(m,M,L.data),L})).apply(this,arguments)}function v(_,m,M){return d.apply(this,arguments)}function d(){return(d=(0,u.Z)(function*(_,m,M){return null!=m.timeExtent&&m.timeExtent.isEmpty?{data:{objectIds:[]}}:l(_,m,"json",M,{returnIdsOnly:!0})})).apply(this,arguments)}function S(_,m,M){return P.apply(this,arguments)}function P(){return(P=(0,u.Z)(function*(_,m,M){return null!=m.timeExtent&&m.timeExtent.isEmpty?{data:{count:0,extent:null}}:l(_,m,"json",M,{returnExtentOnly:!0,returnCountOnly:!0}).then(b=>{const L=b.data;if(L.hasOwnProperty("extent"))return b;if(L.features)throw new Error(I);if(L.hasOwnProperty("count"))throw new Error(I);return b})})).apply(this,arguments)}function p(_,m,M){return null!=m.timeExtent&&m.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):l(_,m,"json",M,{returnIdsOnly:!0,returnCountOnly:!0})}function l(_,m,M,b={},L={}){const U="string"==typeof _?(0,O.mN)(_):_,j=m.geometry?[m.geometry]:[];return b.responseType="json",(0,y.aX)(j,null,b).then(Z=>{const w=Z?.[0];null!=w&&((m=m.clone()).geometry=w);const B=(0,D.A)({...U.query,f:M,...L,...T(m,L)});return(0,E.Z)((0,O.v_)(U.path,"queryTopFeatures"),{...b,query:{...B,...b.query}})})}},93305:(re,z,s)=>{s.d(z,{Z:()=>W});var u=s(50484),E=s(89317),O=s(80543),D=(s(14007),s(4703),s(65311),s(10141)),x=s(40637),I=s(33721);let T=class extends E.wq{constructor(A){super(A),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const A=this.geometries.map(S=>S.toJSON()),v=this.geometries[0],d={};return d.outSR=(0,I.B9)(this.outSpatialReference),d.inSR=(0,I.B9)(v.spatialReference),d.geometries=JSON.stringify({geometryType:(0,x.Ji)(v),geometries:A}),this.transformation&&(d.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(d.transformForward=this.transformForward),d}};(0,u._)([(0,O.Cb)()],T.prototype,"geometries",void 0),(0,u._)([(0,O.Cb)({json:{read:{source:"outSR"}}})],T.prototype,"outSpatialReference",void 0),(0,u._)([(0,O.Cb)()],T.prototype,"transformation",void 0),(0,u._)([(0,O.Cb)()],T.prototype,"transformForward",void 0),T=(0,u._)([(0,D.j)("esri.rest.support.ProjectParameters")],T);const W=T},83068:(re,z,s)=>{s.d(z,{t:()=>O});var u=s(15861),E=s(66476);function O(y,g){return R.apply(this,arguments)}function R(){return(R=(0,u.Z)(function*(y,g){const{data:D}=yield(0,E.Z)(y,{responseType:"image",...g});return D})).apply(this,arguments)}},51571:(re,z,s)=>{s.d(z,{Z:()=>R});var u=s(15861),E=s(56123),O=s(26517);class R{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(g){return this._resourceMap.get(g)??null}fetchResource(g,D){var x=this;return(0,u.Z)(function*(){const I=x._resourceMap.get(g);if(I)return{width:I.width,height:I.height};let T=x._inFlightResourceMap.get(g);return T?T.then(W=>({width:W.width,height:W.height})):(T=(0,O.n$)(g,D),x._inFlightResourceMap.set(g,T),T.then(W=>(x._inFlightResourceMap.delete(g),x._resourceMap.set(g,W),{width:W.width,height:W.height}),()=>({width:0,height:0})))})()}deleteResource(g){this._inFlightResourceMap.delete(g),this._resourceMap.delete(g)}loadFont(g){return(0,E.mx)(g)}}},52793:(re,z,s)=>{s.d(z,{Y:()=>y,m:()=>g});var u=s(11462),E=s(55117),O=s(33820);const R=D=>"vertical"===D||"horizontal"===D||"cross"===D||"esriSFSCross"===D||"esriSFSVertical"===D||"esriSFSHorizontal"===D;function y(D,x,I){const T=x.style,W=(0,E.fp)(Math.ceil(I)),A=R(T)?8*W:16*W,v=2*W;D.width=A,D.height=A;const d=D.getContext("2d");d.strokeStyle="#FFFFFF",d.lineWidth=W,d.beginPath(),"vertical"!==T&&"cross"!==T&&"esriSFSCross"!==T&&"esriSFSVertical"!==T||(d.moveTo(A/2,-v),d.lineTo(A/2,A+v)),"horizontal"!==T&&"cross"!==T&&"esriSFSCross"!==T&&"esriSFSHorizontal"!==T||(d.moveTo(-v,A/2),d.lineTo(A+v,A/2)),"backward-diagonal"!==T&&"diagonal-cross"!==T&&"esriSFSDiagonalCross"!==T&&"esriSFSBackwardDiagonal"!==T||(d.moveTo(-v,-v),d.lineTo(A+v,A+v),d.moveTo(A-v,-v),d.lineTo(A+v,v),d.moveTo(-v,A-v),d.lineTo(v,A+v)),"forward-diagonal"!==T&&"diagonal-cross"!==T&&"esriSFSForwardDiagonal"!==T&&"esriSFSDiagonalCross"!==T||(d.moveTo(A+v,-v),d.lineTo(-v,A+v),d.moveTo(v,-v),d.lineTo(-v,v),d.moveTo(A+v,A-v),d.lineTo(A-v,A+v)),d.stroke();const S=d.getImageData(0,0,D.width,D.height),P=new Uint8Array(S.data);let p;for(let l=0;l<P.length;l+=4)p=P[l+3]/255,P[l]=P[l]*p,P[l+1]=P[l+1]*p,P[l+2]=P[l+2]*p;return[P,D.width,D.height,W]}function g(D,x){null==D&&(D=[]);const I="Butt"===x,T="Square"===x,W=!I&&!T;D.length%2==1&&(D=[...D,...D]);const A=O.v,v=2*A;let d=0;for(const U of D)d+=U;const S=Math.round(d*A),P=new Float32Array(S*v),p=.5*A;let l=0,_=0,m=.5,M=!0;for(const U of D){for(l=_,_+=U*A;m<=_;){let j=.5;for(;j<v;){const Z=(j-.5)*S+m-.5,w=W?(j-A)*(j-A):Math.abs(j-A);P[Z]=M?I?Math.max(Math.max(l+p-m,w),Math.max(m-_+p,w)):w:W?Math.min((m-l)*(m-l)+w,(m-_)*(m-_)+w):T?Math.min(Math.max(m-l,w),Math.max(_-m,w)):Math.min(Math.max(m-l+p,w),Math.max(_+p-m,w)),j++}m++}M=!M}const b=P.length,L=new Uint8Array(4*b);for(let U=0;U<b;++U){const j=(W?Math.sqrt(P[U]):P[U])/A;(0,u.I)(j,L,4*U)}return[L,S,v]}},81065:(re,z,s)=>{s.d(z,{c:()=>R});var u=s(15805),E=s(43101),O=s(92311);class R extends O.Z{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(g){super.beforeRender(g),this._manageFade()}prepareRenderPasses(g){const D=g.registerRenderPass({name:"bitmap",brushes:[u.U.bitmap],target:()=>this.children,drawPhase:E.jx.MAP});return[...super.prepareRenderPasses(g),D]}_manageFade(){this.children.reduce((g,D)=>g+(D.inFadeTransition?1:0),0)>=2?(this.children.forEach(g=>g.blendFunction="additive"),this._hasCrossfade=!0):(this.children.forEach(g=>g.blendFunction="standard"),this._hasCrossfade=!1)}}},71088:(re,z,s)=>{s.d(z,{Z:()=>O});var E,R,u=s(80247);(R=E||(E={}))[R.moveTo=1]="moveTo",R[R.lineTo=2]="lineTo",R[R.close=7]="close";class O{constructor(y,g,D=0){this.values={},this._geometry=void 0,this._pbfGeometry=null,this.featureIndex=D;const x=g.keys,I=g.values,T=y.asUnsafe();for(;T.next();)switch(T.tag()){case 1:this.id=T.getUInt64();break;case 2:{const W=T.getMessage().asUnsafe(),A=this.values;for(;!W.empty();){const v=W.getUInt32(),d=W.getUInt32();A[x[v]]=I[d]}W.release();break}case 3:this.type=T.getUInt32();break;case 4:this._pbfGeometry=T.getMessage();break;default:T.skip()}}getGeometry(y){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;const g=this._pbfGeometry.asUnsafe();let D,x;this._pbfGeometry=null,y?y.reset(this.type):D=[];let I,T=E.moveTo,W=0,A=0,v=0;for(;!g.empty();){if(0===W){const d=g.getUInt32();T=7&d,W=d>>3}switch(W--,T){case E.moveTo:A+=g.getSInt32(),v+=g.getSInt32(),y?y.moveTo(A,v):D&&(x&&D.push(x),x=[],x.push(new u.E9(A,v)));break;case E.lineTo:A+=g.getSInt32(),v+=g.getSInt32(),y?y.lineTo(A,v):x&&x.push(new u.E9(A,v));break;case E.close:y?y.close():x&&!x[0].equals(A,v)&&x.push(x[0].clone());break;default:throw g.release(),new Error("Invalid path operation")}}return y?I=y.result():D&&(x&&D.push(x),I=D),g.release(),this._geometry=I,I}}},14481:(re,z,s)=>{s.d(z,{Z:()=>u});class u{constructor(O){this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=O.clone();const R=O.asUnsafe();for(;R.next();)switch(R.tag()){case 1:this.name=R.getString();break;case 3:this.keys.push(R.getString());break;case 4:this.values.push(R.processMessage(u._parseValue));break;case 5:this.extent=R.getUInt32();break;default:R.skip()}}getData(){return this._pbfLayer}static _parseValue(O){for(;O.next();)switch(O.tag()){case 1:return O.getString();case 2:return O.getFloat();case 3:return O.getDouble();case 4:return O.getInt64();case 5:return O.getUInt64();case 6:return O.getSInt64();case 7:return O.getBool();default:O.skip()}return null}}},85460:(re,z,s)=>{s.d(z,{Z:()=>W});var u=s(92899),E=s(44406),O=s(93266),R=s(79144),y=s(93566),g=s(33721),D=s(31898),x=s(15805),I=s(43101),T=s(92311);class W extends T.Z{constructor(){super(...arguments),this._viewStateId=-1,this._dvsMat3=(0,E.Ue)()}get dvsMat3(){return this._dvsMat3}beforeRender(v){this._updateMatrices(v),this._updateOverlays(v,this.children);for(const d of this.children)d.beforeRender(v)}prepareRenderPasses(v){const d=v.registerRenderPass({name:"overlay",brushes:[x.U.overlay],target:()=>this.children,drawPhase:I.jx.MAP});return[...super.prepareRenderPasses(v),d]}_updateMatrices(v){const{state:d}=v,{id:S,size:P,pixelRatio:p,resolution:l,rotation:_,viewpoint:m,displayMat3:M}=d;if(this._viewStateId===S)return;const b=Math.PI/180*_,L=p*P[0],U=p*P[1];this._localOrigin=m.targetGeometry.clone();const{x:j,y:Z}=this._localOrigin,w=(0,y.or)(j,d.spatialReference);this._localOrigin.x=w,this._localOrigin.y=Z;const B=l*L,V=l*U,h=(0,u.yR)(this._dvsMat3);(0,u.Jp)(h,h,M),(0,u.Iu)(h,h,(0,O.al)(L/2,U/2)),(0,u.bA)(h,h,(0,R.al)(L/B,-U/V,1)),(0,u.U1)(h,h,-b),this._viewStateId=S}_updateOverlays(v,d){const{state:S}=v,{rotation:P,spatialReference:p,worldScreenWidth:l,size:_,viewpoint:m}=S,M=this._localOrigin;let b,L=0;const U=(0,g.C5)(p);if(U&&p.isWrappable){const j=_[0],Z=_[1],w=180/Math.PI*P,B=Math.abs(Math.cos(w)),V=Math.abs(Math.sin(w)),h=Math.round(j*B+Z*V),[C,N]=U.valid,F=(0,D.ut)(p),{x:$,y:te}=m.targetGeometry,oe=[0,0];S.toScreen(oe,[$,te]);const ae=[0,0];let se;se=h>l?.5*l:.5*h;const H=Math.floor(($+.5*F)/F),Q=C+H*F,ce=N+H*F,k=[oe[0]+se,0];S.toMap(ae,k),ae[0]>ce&&(L=F),k[0]=oe[0]-se,S.toMap(ae,k),ae[0]<Q&&(L=-F),b={worldWidth:F,xBounds:[C,N]}}for(const j of d)j.updateDrawCoords(M,L,p,b)}}},23306:(re,z,s)=>{s.d(z,{hY:()=>v});var u=s(1258),E=s(95854),R=(s(37127),s(11196)),y=s(46988);function T(l,_){const{width:m,height:M,getFrame:b}=l,L=l.frameDurations.slice(),U=L.pop();return L.push((0,E.HA)(U+_)),{frameCount:l.frameCount,duration:l.duration+_,frameDurations:L,getFrame:b,width:m,height:M}}class W{constructor(_,m,M,b){this._animation=_,this._repeatType=M,this._onFrameData=b,this._direction=1,this._currentFrame=0,this.timeToFrame=this._animation.frameDurations[this._currentFrame];let L=0;for(;m>L;)L+=this.timeToFrame,this.nextFrame();const U=this._animation.getFrame(this._currentFrame);this._onFrameData(U)}nextFrame(){if(this._currentFrame+=this._direction,this._direction>0){if(this._currentFrame===this._animation.frameDurations.length)switch(this._repeatType){case R.of.None:this._currentFrame-=this._direction;break;case R.of.Loop:this._currentFrame=0;break;case R.of.Oscillate:this._currentFrame-=this._direction,this._direction=-1}}else if(-1===this._currentFrame)switch(this._repeatType){case R.of.None:this._currentFrame-=this._direction;break;case R.of.Loop:this._currentFrame=this._animation.frameDurations.length-1;break;case R.of.Oscillate:this._currentFrame-=this._direction,this._direction=1}this.timeToFrame=this._animation.frameDurations[this._currentFrame];const _=this._animation.getFrame(this._currentFrame);this._onFrameData(_)}}function v(l,_,m,M){const b=null==_.playAnimation||_.playAnimation,L=function A(l,_,m,M){let b,{repeatType:L}=_;if(null==L&&(L=R.of.Loop),!0===_.reverseAnimation&&(l=function D(l){const{width:_,height:m}=l,M=l.frameDurations.reverse();return{frameCount:l.frameCount,duration:l.duration,frameDurations:M,getFrame:L=>l.getFrame(l.frameDurations.length-1-L),width:_,height:m}}(l)),null!=_.duration&&(l=function x(l,_){const{width:m,height:M,getFrame:b}=l,L=_/l.duration,U=l.frameDurations.map(j=>(0,E.HA)(j*L));return{frameCount:l.frameCount,duration:l.duration,frameDurations:U,getFrame:b,width:m,height:M}}(l,(0,E.HA)(1e3*_.duration))),null!=_.repeatDelay){const U=1e3*_.repeatDelay;L===R.of.Loop?l=T(l,(0,E.HA)(U)):L===R.of.Oscillate&&(l=function I(l,_){const{width:m,height:M,getFrame:b}=l,L=l.frameDurations.slice(),U=L.shift();return L.unshift((0,E.HA)(U+_)),{frameCount:l.frameCount,duration:l.duration+_,frameDurations:L,getFrame:b,width:m,height:M}}(T(l,(0,E.HA)(U/2)),(0,E.HA)(U/2)))}if(null!=_.startTimeOffset)b=(0,E.HA)(1e3*_.startTimeOffset);else if(null!=_.randomizeStartTime){const Z=(0,y.f)(m,null!=_.randomizeStartSeed?_.randomizeStartSeed:82749913);b=(0,E.HA)(Z*function g(l){return(0,E.HA)(l.frameDurations.reduce((_,m)=>_+m,0))}(l))}else b=(0,E.HA)(0);return new W(l,b,L,M)}(l,_,m,M);let U,j=L.timeToFrame;return function Z(){U=b?setTimeout(()=>{L.nextFrame(),j=L.timeToFrame,Z()},j):void 0}(),(0,u.kB)(()=>b&&clearTimeout(U))}},87653:(re,z,s)=>{s.d(z,{Z:()=>j});var u=s(15861),E=s(50484),O=s(73514),y=(s(14007),s(79412)),g=s(80543),I=(s(4703),s(65311),s(10141)),T=s(45425),W=s(33721),A=s(30220);const v=Math.PI/180;var p=s(6118),l=s(6777),_=s(54529);const m=(0,T.Ue)(),M=[0,0],b=new _.Z(0,0,0,0);let U=class extends O.Z{constructor(Z){var w;super(Z),w=this,this._imagePromise=null,this.bitmaps=[],this.hidpi=false,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=false,this.imageNormalizationSupported=false,this.update=(0,y.Ds)(function(){var B=(0,u.Z)(function*(V,h){if((0,y.k_)(h),!V.stationary||w.destroyed)return;const C=V.state,N=(0,W.C5)(C.spatialReference),F=w.hidpi?V.pixelRatio:1,$=C.worldScreenWidth>0,te=$&&w.imageNormalizationSupported&&C.worldScreenWidth<C.size[0],X=Math.round((w.imageMaxWidth??0)/F),oe=Math.round((w.imageMaxHeight??0)/F);te?(M[0]=C.worldScreenWidth,M[1]=C.size[1]):w.imageRotationSupported?(M[0]=C.size[0],M[1]=C.size[1]):function S(Z,w){const B=function d(Z){return Z*v}(w.rotation),V=Math.abs(Math.cos(B)),h=Math.abs(Math.sin(B)),[C,N]=w.size;return Z[0]=Math.round(N*h+C*V),Z[1]=Math.round(N*V+C*h),Z}(M,C);const Q=!(Math.floor(M[0])>X||Math.floor(M[1])>oe||!w.imageNormalizationSupported&&N&&(C.extent.xmin<N.valid[0]||C.extent.xmax>N.valid[1])),ce=w.imageRotationSupported?C.rotation:0,k=w.container.children.slice();if(Q)w._imagePromise=w._singleExport(C,M,te?C.paddedViewState.center:C.center,C.resolution,ce,F,h);else{let G=Math.min(X,oe);$&&(G=Math.min(C.worldScreenWidth,G),G=Math.round(C.worldScreenWidth/Math.ceil(C.worldScreenWidth/G))),w._imagePromise=w._tiledExport(C,G,F,h)}try{const G=(yield w._imagePromise)??[];(0,y.k_)(h);const J=[];if(w._imagePromise=null,w.destroyed)return;w.bitmaps=G;for(const ee of k)G.includes(ee)||J.push(ee.fadeOut().then(()=>{ee.remove(),ee.destroy()}));for(const ee of G)J.push(ee.fadeIn());yield Promise.all(J)}catch(G){w._imagePromise=null,(0,y.r9)(G)}});return function(V,h){return B.apply(this,arguments)}}(),5e3),this.updateExports=(0,y.Ds)(function(){var B=(0,u.Z)(function*(V){const h=[];for(const C of w.container.children){if(!C.visible||!C.stage)return;h.push(V(C).then(()=>{C.invalidateTexture(),C.requestRender()}))}w._imagePromise=(0,y.as)(h).then(()=>w._imagePromise=null),yield w._imagePromise});return function(V){return B.apply(this,arguments)}}())}destroy(){this.bitmaps.forEach(Z=>Z.destroy()),this.bitmaps=[]}get updating(){return!this.destroyed&&null!==this._imagePromise}_export(Z,w,B,V,h,C){var N=this;return(0,u.Z)(function*(){const F=yield N.fetchSource(Z,Math.floor(w*h),Math.floor(B*h),{rotation:V,pixelRatio:h,signal:C});(0,y.k_)(C);const $=new p.eY(null,!0);return $.x=Z.xmin,$.y=Z.ymax,$.resolution=Z.width/w,$.rotation=V,$.pixelRatio=h,$.opacity=0,N.container.addChild($),yield $.setSourceAsync(F,C),(0,y.k_)(C),$})()}_singleExport(Z,w,B,V,h,C,N){var F=this;return(0,u.Z)(function*(){!function P(Z,w,B,V){const[h,C]=w,[N,F]=V,$=.5*B;Z[0]=h-$*N,Z[1]=C-$*F,Z[2]=h+$*N,Z[3]=C+$*F}(m,B,V,w);const $=(0,T.HH)(m,Z.spatialReference);return[yield F._export($,w[0],w[1],h,C,N)]})()}_tiledExport(Z,w,B,V){const h=A.Z.create({size:w,spatialReference:Z.spatialReference,scales:[Z.scale]}),C=new l.Z(h),N=C.getTileCoverage(Z);if(!N)return null;const F=[];return N.forEach(($,te,X,oe)=>{b.set($,te,X,0),C.getTileBounds(m,b);const ae=(0,T.HH)(m,Z.spatialReference);F.push(this._export(ae,w,w,0,B,V).then(se=>(0!==oe&&(b.set($,te,X,oe),C.getTileBounds(m,b),se.x=m[0],se.y=m[3]),se)))}),Promise.all(F)}};(0,E._)([(0,g.Cb)()],U.prototype,"_imagePromise",void 0),(0,E._)([(0,g.Cb)()],U.prototype,"bitmaps",void 0),(0,E._)([(0,g.Cb)()],U.prototype,"container",void 0),(0,E._)([(0,g.Cb)()],U.prototype,"fetchSource",void 0),(0,E._)([(0,g.Cb)()],U.prototype,"hidpi",void 0),(0,E._)([(0,g.Cb)()],U.prototype,"imageMaxWidth",void 0),(0,E._)([(0,g.Cb)()],U.prototype,"imageMaxHeight",void 0),(0,E._)([(0,g.Cb)()],U.prototype,"imageRotationSupported",void 0),(0,E._)([(0,g.Cb)()],U.prototype,"imageNormalizationSupported",void 0),(0,E._)([(0,g.Cb)()],U.prototype,"requestUpdate",void 0),(0,E._)([(0,g.Cb)()],U.prototype,"updating",null),U=(0,E._)([(0,I.j)("esri.views.2d.layers.support.ExportStrategy")],U);const j=U},53387:(re,z,s)=>{s.d(z,{Br:()=>g,Fm:()=>A,N9:()=>d,RA:()=>S,Tc:()=>x,Ue:()=>I,iC:()=>D,s9:()=>y,v:()=>v,xW:()=>W,zS:()=>T});var u=s(89014),E=s(39237),O=s(17091),R=s(22784);function y(p,l,_="nearest",m=!1){const M=!(m&&"u8"===l.pixelType),b=M?E.Br.FLOAT:E.Br.UNSIGNED_BYTE,L=null==l.pixels||0===l.pixels.length?null:M?l.getAsRGBAFloat():l.getAsRGBA(),U=p.capabilities.textureFloatLinear,j=new R.X;return j.width=l.width,j.height=l.height,j.internalFormat=M?E.lP.RGBA32F:E.VI.RGBA,j.samplingMode=!U||"bilinear"!==_&&"cubic"!==_?E.cw.NEAREST:E.cw.LINEAR,j.dataType=b,j.wrapMode=E.e8.CLAMP_TO_EDGE,new O.x(p,j,L)}function g(p,l){const{spacing:_,offsets:m,coefficients:M,size:[b,L]}=l,U=_[0]>1,j=new R.X;j.width=U?4*b:b,j.height=L,j.internalFormat=E.lP.RGBA32F,j.dataType=E.Br.FLOAT,j.samplingMode=E.cw.NEAREST,j.wrapMode=E.e8.CLAMP_TO_EDGE;const Z=new Float32Array(U?b*L*16:2*m.length);if(U&&null!=M)for(let w=0,B=0;w<M.length;w++)Z[B++]=M[w],w%3==2&&(Z[B++]=1);else for(let w=0;w<L;w++)for(let B=0;B<b;B++){const V=4*(w*b+B),h=2*(B*L+w);Z[V]=m[h],Z[V+1]=m[h+1],Z[V+3]=-1===m[h]?0:1}return new O.x(p,j,Z)}function D(p,l){const _=new R.X;return _.internalFormat=E.VI.RGBA,_.width=l.length/4,_.height=1,_.samplingMode=E.cw.NEAREST,_.wrapMode=E.e8.CLAMP_TO_EDGE,new O.x(p,_,l)}function x(p,l,_,m=1,M=!0){return{u_flipY:M,u_applyTransform:!!p,u_opacity:m,u_transformSpacing:p?p.spacing:u.AG,u_transformGridSize:p?p.size:u.AG,u_targetImageSize:l,u_srcImageSize:_}}function I(p,l){return{u_colormapOffset:l||0,u_colormapMaxIndex:p?p.length/4-1:0}}function T(p,l){return{u_scale:p,u_offset:l}}function W(p){return{u_bandCount:p.bandCount,u_minOutput:p.outMin,u_maxOutput:p.outMax,u_minCutOff:p.minCutOff,u_maxCutOff:p.maxCutOff,u_factor:p.factor,u_useGamma:p.useGamma,u_gamma:p.gamma,u_gammaCorrection:p.gammaCorrection}}function A(p){return{u_hillshadeType:p.hillshadeType,u_sinZcosAs:p.sinZcosAs,u_sinZsinAs:p.sinZsinAs,u_cosZs:p.cosZs,u_weights:p.weights,u_factor:p.factor,u_minValue:p.minValue,u_maxValue:p.maxValue}}function v(p,l){const _=p.gl,m=l.glName,M=new Map;if(null==m)return M;const b=_.getProgramParameter(m,_.ACTIVE_UNIFORMS);let L;for(let U=0;U<b;U++)L=_.getActiveUniform(m,U),L&&M.set(L.name,{location:_.getUniformLocation(m,L.name),info:L});return M}function d(p,l,_){Object.keys(_).forEach(m=>{const M=l.get(m)||l.get(m+"[0]");M&&function P(p,l,_,m){if(null===m||null==_)return!1;const{info:M}=m;switch(M.type){case E.Se.FLOAT:M.size>1?p.setUniform1fv(l,_):p.setUniform1f(l,_);break;case E.Se.FLOAT_VEC2:p.setUniform2fv(l,_);break;case E.Se.FLOAT_VEC3:p.setUniform3fv(l,_);break;case E.Se.FLOAT_VEC4:p.setUniform4fv(l,_);break;case E.Se.FLOAT_MAT3:p.setUniformMatrix3fv(l,_);break;case E.Se.FLOAT_MAT4:p.setUniformMatrix4fv(l,_);break;case E.Se.INT:M.size>1?p.setUniform1iv(l,_):p.setUniform1i(l,_);break;case E.Se.BOOL:p.setUniform1i(l,_?1:0);break;case E.Se.INT_VEC2:case E.Se.BOOL_VEC2:p.setUniform2iv(l,_);break;case E.Se.INT_VEC3:case E.Se.BOOL_VEC3:p.setUniform3iv(l,_);break;case E.Se.INT_VEC4:case E.Se.BOOL_VEC4:p.setUniform4iv(l,_);break;default:return!1}}(p,m,_[m],M)})}function S(p,l,_,m){_.length===m.length&&(m.some(M=>null==M)||_.some(M=>null==M)||_.forEach((M,b)=>{l.setUniform1i(M,b),p.bindTexture(m[b],b)}))}},62888:(re,z,s)=>{s.d(z,{A:()=>l,S:()=>v,d:()=>_});var u=s(15861),E=s(12483),O=s(32722),R=s(31858),y=s(16083),g=s(67771),D=s(80154),x=s(12115),I=s(35782),T=s(47062),W=s(45481),A=s(59940);const v={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},l=(0,E.GH)(class extends E.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.setMenuOpen=M=>{this.menuOpen=!!M.target.open},this.handleMenuActionsSlotChange=M=>{this.hasMenuActions=(0,x.d)(M)},this.expanded=!1,this.label=void 0,this.layout="vertical",this.columns=void 0,this.menuOpen=!1,this.overlayPositioning="absolute",this.scale=void 0,this.menuFlipPlacements=void 0,this.menuPlacement=void 0,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0,this.hasMenuActions=!1}expandedHandler(){this.menuOpen=!1}onMessagesChange(){}effectiveLocaleChange(){(0,g.u)(this,this.effectiveLocale)}setFocus(){var M=this;return(0,u.Z)(function*(){yield(0,R.c)(M),M.el.focus()})()}connectedCallback(){(0,y.c)(this),(0,g.c)(this),(0,O.c)(this)}disconnectedCallback(){(0,y.d)(this),(0,g.d)(this),(0,O.d)(this)}componentWillLoad(){var M=this;return(0,u.Z)(function*(){(0,R.s)(M),yield(0,g.s)(M)})()}componentDidLoad(){(0,R.a)(this)}renderMenu(){const{expanded:M,menuOpen:b,scale:L,layout:U,messages:j,overlayPositioning:Z,hasMenuActions:w,menuFlipPlacements:B,menuPlacement:V}=this;return(0,E.h)("calcite-action-menu",{expanded:M,flipPlacements:B??("horizontal"===U?["top","bottom"]:["left","right"]),hidden:!w,label:j.more,onCalciteActionMenuOpen:this.setMenuOpen,open:b,overlayPositioning:Z,placement:V??("horizontal"===U?"bottom-start":"leading-start"),scale:L},(0,E.h)("calcite-action",{icon:"ellipsis",scale:L,slot:D.S.trigger,text:j.more,textEnabled:M}),(0,E.h)("slot",{name:v.menuActions,onSlotchange:this.handleMenuActionsSlotChange}),(0,E.h)("slot",{name:v.menuTooltip,slot:D.S.tooltip}))}render(){return(0,E.h)("div",{key:"8143606c5745053f15140f34ff5ea375a683325f","aria-label":this.label,class:"container",role:"group"},(0,E.h)("slot",{key:"e8c2821b9ce2e9d0293478989fc31d24f043f9c3"}),this.renderMenu())}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return':host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{display:flex;flex-direction:column;padding:0px;background-color:transparent;border-color:var(--calcite-action-group-border-color, var(--calcite-color-border-3));border-style:solid;border-width:0}.container{display:flex;flex-grow:1;flex-direction:column}:host([columns="1"]){--calcite-internal-action-group-columns:1}:host([columns="2"]){--calcite-internal-action-group-columns:2}:host([columns="3"]){--calcite-internal-action-group-columns:3}:host([columns="4"]){--calcite-internal-action-group-columns:4}:host([columns="5"]){--calcite-internal-action-group-columns:5}:host([columns="6"]){--calcite-internal-action-group-columns:6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]),:host([layout=horizontal]) .container{flex-direction:row}:host([layout=grid]){display:grid}:host([layout=grid]) .container{display:grid;place-content:stretch;background-color:transparent;grid-template-columns:repeat(var(--calcite-action-group-columns, var(--calcite-internal-action-group-columns, 3)), auto);gap:var(--calcite-action-group-gap, 1px);padding:var(--calcite-action-group-gap, 1px)}:host([hidden]){display:none}[hidden]{display:none}'}},[17,"calcite-action-group",{expanded:[516],label:[1],layout:[513],columns:[514],menuOpen:[1540,"menu-open"],overlayPositioning:[513,"overlay-positioning"],scale:[513],menuFlipPlacements:[16],menuPlacement:[513,"menu-placement"],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],hasMenuActions:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function _(){typeof customElements>"u"||["calcite-action-group","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(M=>{switch(M){case"calcite-action-group":customElements.get(M)||customElements.define(M,l);break;case"calcite-action":customElements.get(M)||(0,I.d)();break;case"calcite-action-menu":customElements.get(M)||(0,D.d)();break;case"calcite-icon":customElements.get(M)||(0,T.d)();break;case"calcite-loader":customElements.get(M)||(0,W.d)();break;case"calcite-popover":customElements.get(M)||(0,A.d)()}})}_()},32722:(re,z,s)=>{s.d(z,{c:()=>y,d:()=>g});var u=s(12483),E=s(31558);let O;const R={childList:!0};function y(x){O||(O=(0,E.c)("mutation",D)),O.observe(x.el,R)}function g(x){O.unobserve(x.el)}function D(x){x.forEach(({target:I})=>{(0,u.xE)(I)})}},33247:(re,z,s)=>{s.d(z,{C:()=>u,I:()=>R,M:()=>O,S:()=>E,a:()=>y});const u={wrapper:"wrapper",wrapperBordered:"wrapper--bordered",container:"container",containerHover:"container--hover",containerBorder:"container--border",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",contentContainer:"content-container",contentContainerUnavailable:"content-container--unavailable",contentContainerSelectable:"content-container--selectable",contentContainerHasCenterContent:"content-container--has-center-content",nestedContainer:"nested-container",nestedContainerOpen:"nested-container--open",content:"content",customContent:"custom-content",actionsStart:"actions-start",contentStart:"content-start",label:"label",description:"description",contentEnd:"content-end",contentBottom:"content-bottom",actionsEnd:"actions-end",selectionContainer:"selection-container",selectionContainerSingle:"selection-container--single",openContainer:"open-container",dragContainer:"drag-container",close:"close"},E={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentBottom:"content-bottom",contentEnd:"content-end",actionsEnd:"actions-end"},O=0,R={selectedMultiple:"check-square-f",selectedSingle:"bullet-point-large",unselectedMultiple:"square",unselectedSingle:"bullet-point-large",closedLTR:"chevron-right",closedRTL:"chevron-left",open:"chevron-down",blank:"blank",close:"x"},y="data-test-active"},84240:(re,z,s)=>{s.d(z,{d:()=>v});var u=s(15861),E=s(12483),O=s(16083),R=s(67771),y=s(31558),g=s(12115),D=s(45481);const A=(0,E.GH)(class extends E.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.resizeObserver=(0,y.c)("resize",()=>this.handleResize()),this.handleDefaultSlotChange=S=>{this.hasContent=(0,g.r)(S)},this.storeLoaderEl=S=>{this.loaderEl=S,this.handleResize()},this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.loaderScale=void 0,this.defaultMessages=void 0,this.effectiveLocale="",this.hasContent=!1}onMessagesChange(){}effectiveLocaleChange(){(0,R.u)(this,this.effectiveLocale)}connectedCallback(){(0,O.c)(this),(0,R.c)(this),this.resizeObserver?.observe(this.el)}componentWillLoad(){var S=this;return(0,u.Z)(function*(){yield(0,R.s)(S)})()}disconnectedCallback(){(0,O.d)(this),(0,R.d)(this),this.resizeObserver?.disconnect()}render(){const{hasContent:S,loading:P,messages:p}=this;return(0,E.h)("div",{key:"286b03bb4a18b45f1b6914684a5178e952a44127",class:"scrim"},P?(0,E.h)("calcite-loader",{label:p.loading,ref:this.storeLoaderEl,scale:this.loaderScale}):null,(0,E.h)("div",{key:"0f8cd111720239b204d0d201610c4145d5616753",class:"content",hidden:!S},(0,E.h)("slot",{key:"fe7bbced9871c9179971da0ef7ca07ea1c9ac33e",onSlotchange:this.handleDefaultSlotChange})))}getScale(S){return S<72?"s":S>=480?"l":"m"}handleResize(){const{loaderEl:S,el:P}=this;S&&(this.loaderScale=this.getScale(Math.min(P.clientHeight,P.clientWidth)??0))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return":host{--calcite-scrim-background:var(--calcite-color-transparent-scrim);position:absolute;inset:0px;z-index:var(--calcite-z-index-overlay);display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-color-transparent-scrim))}.content{padding:1rem}:host([hidden]){display:none}[hidden]{display:none}"}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],loaderScale:[32],defaultMessages:[32],effectiveLocale:[32],hasContent:[32]},void 0,{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}]);function v(){typeof customElements>"u"||["calcite-scrim","calcite-loader"].forEach(S=>{switch(S){case"calcite-scrim":customElements.get(S)||customElements.define(S,A);break;case"calcite-loader":customElements.get(S)||(0,D.d)()}})}v()},44160:(re,z,s)=>{s.d(z,{a:()=>x,b:()=>y,g:()=>g,u:()=>D});var u=s(28486);const E="calcite-list",O="calcite-list-item-group",R="calcite-list-item";function y(I){return Array.from(I.assignedElements({flatten:!0}).filter(T=>T.matches(E)))}function g(I){const T=I.assignedElements({flatten:!0}),W=T.filter(d=>d?.matches(O)).map(d=>Array.from(d.querySelectorAll(R))).reduce((d,S)=>[...d,...S],[]),A=T.filter(d=>d?.matches(R));return[...T.filter(d=>d?.matches(E)).map(d=>Array.from(d.querySelectorAll(R))).reduce((d,S)=>[...d,...S],[]),...W,...A]}function D(I){I.forEach(T=>{T.setPosition=I.indexOf(T)+1,T.setSize=I.length})}function x(I,T=!1){return(0,u.i)()?document.evaluate(T?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item",I,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:0}},24191:(re,z,s)=>{function u(E,O){this.v=E,this.k=O}s.d(z,{Z:()=>u})},16296:(re,z,s)=>{function u(O){var R,y,g,D=2;for(typeof Symbol<"u"&&(y=Symbol.asyncIterator,g=Symbol.iterator);D--;){if(y&&null!=(R=O[y]))return R.call(O);if(g&&null!=(R=O[g]))return new E(R.call(O));y="@@asyncIterator",g="@@iterator"}throw new TypeError("Object is not async iterable")}function E(O){function R(y){if(Object(y)!==y)return Promise.reject(new TypeError(y+" is not an object."));var g=y.done;return Promise.resolve(y.value).then(function(D){return{value:D,done:g}})}return(E=function(g){this.s=g,this.n=g.next}).prototype={s:null,n:null,next:function(){return R(this.n.apply(this.s,arguments))},return:function(g){var D=this.s.return;return void 0===D?Promise.resolve({value:g,done:!0}):R(D.apply(this.s,arguments))},throw:function(g){var D=this.s.return;return void 0===D?Promise.reject(g):R(D.apply(this.s,arguments))}},new E(O)}s.d(z,{Z:()=>u})},26420:(re,z,s)=>{s.d(z,{Z:()=>E});var u=s(24191);function E(O){return new u.Z(O,0)}},79671:(re,z,s)=>{s.d(z,{Z:()=>O});var u=s(24191);function E(R){var y,g;function D(I,T){try{var W=R[I](T),A=W.value,v=A instanceof u.Z;Promise.resolve(v?A.v:A).then(function(d){if(v){var S="return"===I?"return":"next";if(!A.k||d.done)return D(S,d);d=R[S](d).value}x(W.done?"return":"normal",d)},function(d){D("throw",d)})}catch(d){x("throw",d)}}function x(I,T){switch(I){case"return":y.resolve({value:T,done:!0});break;case"throw":y.reject(T);break;default:y.resolve({value:T,done:!1})}(y=y.next)?D(y.key,y.arg):g=null}this._invoke=function(I,T){return new Promise(function(W,A){var v={key:I,arg:T,resolve:W,reject:A,next:null};g?g=g.next=v:(y=g=v,D(I,T))})},"function"!=typeof R.return&&(this.return=void 0)}function O(R){return function(){return new E(R.apply(this,arguments))}}E.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},E.prototype.next=function(R){return this._invoke("next",R)},E.prototype.throw=function(R){return this._invoke("throw",R)},E.prototype.return=function(R){return this._invoke("return",R)}}}]);