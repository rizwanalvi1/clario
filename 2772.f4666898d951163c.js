"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[2772],{81390:(B,O,t)=>{t.d(O,{L:()=>n});var e=t(15861),T=t(6661);class n{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}fetchServiceMetadata(m,h){var L=this;return(0,e.Z)(function*(){const g=L._serviceMetadatas.get(m);if(g)return g;const v=yield(0,T.T)(m,h);return L._serviceMetadatas.set(m,v),v})()}fetchItemData(m){var h=this;return(0,e.Z)(function*(){const{id:L}=m;if(!L)return null;const{_itemDatas:g}=h;if(g.has(L))return g.get(L);const v=yield m.fetchData();return g.set(L,v),v})()}fetchCustomParameters(m,h){var L=this;return(0,e.Z)(function*(){const g=yield L.fetchItemData(m);return g&&"object"==typeof g&&(h?h(g):g.customParameters)||null})()}}},63724:(B,O,t)=>{t.d(O,{w:()=>v});var e=t(15861),T=t(26152),n=t(66476),r=t(57964),m=t(79412),h=t(89713),L=t(61018),g=t(27835);function v(u,c){return U.apply(this,arguments)}function U(){return U=(0,e.Z)(function*(u,c){const M=(0,h.Qc)(u);if(!M)throw new r.Z("invalid-url","Invalid scene service url");const f={...c,sceneServerUrl:M.url.path,layerId:M.sublayer??void 0};if(f.sceneLayerItem??=(yield function j(u){return N.apply(this,arguments)}(f)),null==f.sceneLayerItem)return i(f.sceneServerUrl.replace("/SceneServer","/FeatureServer"),f);const D=yield function K(u){return P.apply(this,arguments)}(f);if(!D?.url)throw new r.Z("related-service-not-found","Could not find feature service through portal item relationship");f.featureServiceItem=D;const x=yield i(D.url,f);return x.portalItem=D,x}),U.apply(this,arguments)}function N(){return N=(0,e.Z)(function*(u){const c=(yield y(u)).serviceItemId;if(!c)return null;const M=new g.default({id:c,apiKey:u.apiKey}),f=yield function a(u){return o.apply(this,arguments)}(u);null!=f&&(M.portal=new L.Z({url:f}));try{return M.load({signal:u.signal})}catch(D){return(0,m.r9)(D),null}}),N.apply(this,arguments)}function y(u){return E.apply(this,arguments)}function E(){return(E=(0,e.Z)(function*(u){if(u.rootDocument)return u.rootDocument;const c={query:{f:"json",...u.customParameters,token:u.apiKey},responseType:"json",signal:u.signal};try{const M=yield(0,n.Z)(u.sceneServerUrl,c);u.rootDocument=M.data}catch{u.rootDocument={}}return u.rootDocument})).apply(this,arguments)}function o(){return(o=(0,e.Z)(function*(u){const c=T.id?.findServerInfo(u.sceneServerUrl);if(c?.owningSystemUrl)return c.owningSystemUrl;const M=u.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const f=(yield(0,n.Z)(M,{query:{f:"json"},responseType:"json",signal:u.signal})).data.owningSystemUrl;if(f)return f}catch(f){(0,m.r9)(f)}return null})).apply(this,arguments)}function i(u,c){return S.apply(this,arguments)}function S(){return(S=(0,e.Z)(function*(u,c){const M=(0,h.Qc)(u);if(!M)throw new r.Z("invalid-feature-service-url","Invalid feature service url");const f=M.url.path,D=c.layerId;if(null==D)return{serverUrl:f};const x=y(c),J=c.featureServiceItem?yield c.featureServiceItem.fetchData("json"):null,V=(J?.layers?.[0]||J?.tables?.[0])?.customParameters,z=A=>{const p={query:{f:"json",...V},responseType:"json",authMode:A,signal:c.signal};return(0,n.Z)(f,p)},X=z("anonymous").catch(()=>z("no-prompt")),[Q,Y]=yield Promise.all([X,x]),$=Y?.layers,R=Q.data&&Q.data.layers;if(!Array.isArray(R))throw new Error("expected layers array");if(Array.isArray($)){for(let A=0;A<Math.min($.length,R.length);A++)if($[A].id===D)return{serverUrl:f,layerId:R[A].id}}else if(null!=D&&D<R.length)return{serverUrl:f,layerId:R[D].id};throw new Error("could not find matching associated sublayer")})).apply(this,arguments)}function P(){return(P=(0,e.Z)(function*({sceneLayerItem:u,signal:c}){if(!u)return null;try{const M=(yield u.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:c})).find(D=>"Feature Service"===D.type)||null;if(!M)return null;const f=new g.default({portal:M.portal,id:M.id});return yield f.load(),f}catch(M){return(0,m.r9)(M),null}})).apply(this,arguments)}},23933:(B,O,t)=>{t.d(O,{V:()=>r,W:()=>N});var e=t(15861),T=t(6661);const n=new Set(["Catalog Layer","Feature Layer","Oriented Imagery Layer"]);function r(y,E){return m.apply(this,arguments)}function m(){return(m=(0,e.Z)(function*(y,E){const{loadContext:a,...o}=E||{},i=a?yield a.fetchServiceMetadata(y,o):yield(0,T.T)(y,o);j(i),g(i);const S={serviceJSON:i};if((i.currentVersion??0)<10.5)return S;const K=`${y}/layers`,P=a?yield a.fetchServiceMetadata(K,o):yield(0,T.T)(K,o);return j(P),g(P),S.layersJSON={layers:P.layers,tables:P.tables},S})).apply(this,arguments)}function h(y){const{type:E}=y;return!!E&&n.has(E)}function L(y){return"Table"===y.type}function g(y){y.layers=y.layers?.filter(h),y.tables=y.tables?.filter(L)}function v(y){y.type||="Feature Layer"}function U(y){y.type||="Table"}function j(y){y.layers?.forEach(v),y.tables?.forEach(U)}function N(y){switch(y){case"Feature Layer":case"Table":return"FeatureLayer";case"Oriented Imagery Layer":return"OrientedImageryLayer";case"Catalog Layer":return"CatalogLayer"}return"FeatureLayer"}},79936:(B,O,t)=>{t.d(O,{T:()=>T});var e=t(15861);const T={BingMapsLayer:(n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(4499)]).then(t.bind(t,84499))).default}),function(){return n.apply(this,arguments)}),BuildingSceneLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(1963),t.e(4271),t.e(8410),t.e(7512),t.e(5594),t.e(373),t.e(4795),t.e(8866),t.e(3643),t.e(3276),t.e(6066)]).then(t.bind(t,23080))).default});return function(){return n.apply(this,arguments)}}(),CSVLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(1963),t.e(4271),t.e(8410),t.e(7512),t.e(5594),t.e(373),t.e(8326)]).then(t.bind(t,90257))).default});return function(){return n.apply(this,arguments)}}(),CatalogLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(2008),t.e(638),t.e(1963),t.e(4271),t.e(7512),t.e(5594),t.e(2784),t.e(8691),t.e(9211),t.e(5365),t.e(4159)]).then(t.bind(t,47899))).default});return function(){return n.apply(this,arguments)}}(),DimensionLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(8592),t.e(9645)]).then(t.bind(t,59645))).default});return function(){return n.apply(this,arguments)}}(),ElevationLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(3597),t.e(8592),t.e(3256)]).then(t.bind(t,83256))).default});return function(){return n.apply(this,arguments)}}(),FeatureLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(1963),t.e(4271),t.e(8410),t.e(7512),t.e(5594),t.e(373),t.e(1519)]).then(t.bind(t,90373))).default});return function(){return n.apply(this,arguments)}}(),GeoJSONLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(1963),t.e(4271),t.e(8410),t.e(8117)]).then(t.bind(t,80059))).default});return function(){return n.apply(this,arguments)}}(),GeoRSSLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(9050)]).then(t.bind(t,39050))).default});return function(){return n.apply(this,arguments)}}(),GroupLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(5641)]).then(t.bind(t,85641))).default});return function(){return n.apply(this,arguments)}}(),ImageryLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(2784),t.e(6062),t.e(6233),t.e(3338),t.e(4301),t.e(3491)]).then(t.bind(t,85840))).default});return function(){return n.apply(this,arguments)}}(),ImageryTileLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(6062),t.e(9350),t.e(6233),t.e(3338),t.e(3193),t.e(4301),t.e(8592),t.e(7652)]).then(t.bind(t,81519))).default});return function(){return n.apply(this,arguments)}}(),IntegratedMesh3DTilesLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(8639)]).then(t.bind(t,28639))).default});return function(){return n.apply(this,arguments)}}(),IntegratedMeshLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(8866),t.e(8592),t.e(4525)]).then(t.bind(t,74092))).default});return function(){return n.apply(this,arguments)}}(),KMLLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(1963),t.e(1183),t.e(2746)]).then(t.bind(t,22858))).default});return function(){return n.apply(this,arguments)}}(),KnowledgeGraphLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(2008),t.e(638),t.e(1963),t.e(3866),t.e(4271),t.e(7099),t.e(8410),t.e(5904),t.e(8691),t.e(4157),t.e(6380),t.e(4519),t.e(1799)]).then(t.bind(t,91799))).default});return function(){return n.apply(this,arguments)}}(),LineOfSightLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(8592),t.e(1295)]).then(t.bind(t,17551))).default});return function(){return n.apply(this,arguments)}}(),LinkChartLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(2008),t.e(638),t.e(1963),t.e(3866),t.e(4271),t.e(7099),t.e(8410),t.e(5904),t.e(8691),t.e(4157),t.e(6380),t.e(4519),t.e(4083)]).then(t.bind(t,88305))).default});return function(){return n.apply(this,arguments)}}(),MapImageLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(2008),t.e(638),t.e(1963),t.e(4271),t.e(7512),t.e(2784),t.e(9211),t.e(8256),t.e(8592),t.e(8956)]).then(t.bind(t,37803))).default});return function(){return n.apply(this,arguments)}}(),MapNotesLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(1963),t.e(4271),t.e(8410),t.e(7512),t.e(5594),t.e(373),t.e(8592),t.e(4269)]).then(t.bind(t,18191))).default});return function(){return n.apply(this,arguments)}}(),MediaLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(8592),t.e(2962)]).then(t.bind(t,94643))).default});return function(){return n.apply(this,arguments)}}(),OGCFeatureLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(2008),t.e(638),t.e(1963),t.e(4271),t.e(8410),t.e(2871),t.e(6847)]).then(t.bind(t,36019))).default});return function(){return n.apply(this,arguments)}}(),OpenStreetMapLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(4556),t.e(2439)]).then(t.bind(t,22439))).default});return function(){return n.apply(this,arguments)}}(),OrientedImageryLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(1963),t.e(4271),t.e(8410),t.e(7512),t.e(5594),t.e(373),t.e(4833)]).then(t.bind(t,60617))).default});return function(){return n.apply(this,arguments)}}(),PointCloudLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(8866),t.e(8592),t.e(7424)]).then(t.bind(t,70265))).default});return function(){return n.apply(this,arguments)}}(),RouteLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(1963),t.e(3301),t.e(7400)]).then(t.bind(t,25607))).default});return function(){return n.apply(this,arguments)}}(),SceneLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(1963),t.e(4271),t.e(1716),t.e(4795),t.e(8866),t.e(1317),t.e(3643),t.e(1868),t.e(3276),t.e(8592),t.e(3130)]).then(t.bind(t,79107))).default});return function(){return n.apply(this,arguments)}}(),StreamLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(1963),t.e(4271),t.e(8410),t.e(4709)]).then(t.bind(t,7157))).default});return function(){return n.apply(this,arguments)}}(),SubtypeGroupLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(1963),t.e(4271),t.e(7512),t.e(5594),t.e(2786)]).then(t.bind(t,46663))).default});return function(){return n.apply(this,arguments)}}(),TileLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(2008),t.e(638),t.e(1963),t.e(4271),t.e(7512),t.e(2784),t.e(9211),t.e(3597),t.e(8256),t.e(7183)]).then(t.bind(t,77183))).default});return function(){return n.apply(this,arguments)}}(),UnknownLayer:function(){var n=(0,e.Z)(function*(){return(yield t.e(4850).then(t.bind(t,84850))).default});return function(){return n.apply(this,arguments)}}(),UnsupportedLayer:function(){var n=(0,e.Z)(function*(){return(yield t.e(842).then(t.bind(t,60842))).default});return function(){return n.apply(this,arguments)}}(),VectorTileLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(6658),t.e(4433),t.e(3597),t.e(5031)]).then(t.bind(t,62003))).default});return function(){return n.apply(this,arguments)}}(),VideoLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(8592),t.e(4929)]).then(t.bind(t,94929))).default});return function(){return n.apply(this,arguments)}}(),VoxelLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(8866),t.e(8592),t.e(3872)]).then(t.bind(t,79232))).default});return function(){return n.apply(this,arguments)}}(),WFSLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(3754),t.e(9370),t.e(638),t.e(1963),t.e(4271),t.e(8410),t.e(1970),t.e(9762)]).then(t.bind(t,18504))).default});return function(){return n.apply(this,arguments)}}(),WMSLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(8592),t.e(616)]).then(t.bind(t,10616))).default});return function(){return n.apply(this,arguments)}}(),WMTSLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(4556),t.e(8592),t.e(7179)]).then(t.bind(t,67179))).default});return function(){return n.apply(this,arguments)}}(),WebTileLayer:function(){var n=(0,e.Z)(function*(){return(yield Promise.all([t.e(9370),t.e(4556)]).then(t.bind(t,54556))).default});return function(){return n.apply(this,arguments)}}()};var n},46011:(B,O,t)=>{t.d(O,{$O:()=>m,CD:()=>y,Q4:()=>U,ZC:()=>j,bS:()=>r,hq:()=>g,qT:()=>N,r9:()=>v,uE:()=>L});var e=t(15861),T=t(63724),n=t(23933);function r(a){const o={id:a.id,name:a.name},i=(0,n.W)(a.type);return"FeatureLayer"!==i&&(o.layerType=i),o}function m(a,o,i){return h.apply(this,arguments)}function h(){return(h=(0,e.Z)(function*(a,o,i){if(null==a?.layers||null==a?.tables){const S=yield i.fetchServiceMetadata(o,{customParameters:L(a)?.customParameters});(a=a||{}).layers=a.layers||S?.layers?.map(r),a.tables=a.tables||S?.tables?.map(r)}return a})).apply(this,arguments)}function L(a){if(!a)return null;const{layers:o,tables:i}=a;return o?.length?o[0]:i?.length?i[0]:null}function g(a,o){return null==o?null:[...a.layers||[],...a.tables||[]].find(i=>i.id===o)}function v(a,o){return[...a.layers||[],...a.tables||[]].filter(({layerType:i})=>i?i===o:"ArcGISFeatureLayer"===o)}function U(a){return(a?.layers?.length??0)+(a?.tables?.length??0)}function j(a){switch(a){case"catalog":return"CatalogLayer";case"feature":return"ArcGISFeatureLayer";case"oriented-imagery":return"OrientedImageryLayer";case"subtype-group":return"SubtypeGroupLayer"}return null}function N(a){switch(a){case"CatalogLayer":return"CatalogLayer";case"OrientedImageryLayer":return"OrientedImageryLayer";case"SubtypeGroupLayer":return"SubtypeGroupLayer"}return"FeatureLayer"}function y(a,o,i){return E.apply(this,arguments)}function E(){return(E=(0,e.Z)(function*(a,o,i){if(!a?.url)return o??{};if(o??={},!o.layers){const P=yield i.fetchServiceMetadata(a.url);o.layers=P.layers?.map(r)}const{serverUrl:S,portalItem:K}=yield(0,T.w)(a.url,{sceneLayerItem:a,customParameters:L(o)?.customParameters}).catch(()=>({serverUrl:null,portalItem:null}));if(null==S)return o.tables=[],o;if(!o.tables&&K){const P=yield K.fetchData();if(P?.tables)o.tables=P.tables.map(r);else{const u=yield i.fetchServiceMetadata(S,{customParameters:L(P)?.customParameters});o.tables=u?.tables?.map(r)}}if(o.tables)for(const P of o.tables)P.url=`${S}/${P.id}`;return o})).apply(this,arguments)}},82772:(B,O,t)=>{t.r(O),t.d(O,{fromItem:()=>j,selectLayerClassPath:()=>a});var e=t(15861),T=t(57964),n=t(63724),r=t(23933),m=t(81390),h=t(85971),L=t(79936),g=t(27835),v=t(46011),U=t(50318);function j(s){return N.apply(this,arguments)}function N(){return N=(0,e.Z)(function*(s){let{portalItem:l}=s;!l||l instanceof g.default||(l=new g.default(l));const d=yield function y(s){return E.apply(this,arguments)}(l);return new d.constructor({portalItem:l,...d.properties})}),N.apply(this,arguments)}function E(){return E=(0,e.Z)(function*(s){yield s.load();const l=new m.L;return function i(s){return S.apply(this,arguments)}(yield a(s,l))}),E.apply(this,arguments)}function a(s,l){return o.apply(this,arguments)}function o(){return o=(0,e.Z)(function*(s,l){switch(s.type){case"3DTiles Service":return{className:"IntegratedMesh3DTilesLayer"};case"CSV":return{className:"CSVLayer"};case"Feature Collection":return function D(s){return x.apply(this,arguments)}(s);case"Feature Service":return function u(s,l){return c.apply(this,arguments)}(s,l);case"Feed":case"Stream Service":return{className:"StreamLayer"};case"GeoJson":return{className:"GeoJSONLayer"};case"Group Layer":return{className:"GroupLayer"};case"Image Service":return function J(s,l){return V.apply(this,arguments)}(s,l);case"KML":return{className:"KMLLayer"};case"Knowledge Graph Layer":return{className:"KnowledgeGraphLayer"};case"Map Service":return function K(s,l){return P.apply(this,arguments)}(s,l);case"Media Layer":return{className:"MediaLayer"};case"Scene Service":return function M(s,l){return f.apply(this,arguments)}(s,l);case"Vector Tile Service":return{className:"VectorTileLayer"};case"WFS":return{className:"WFSLayer"};case"WMS":return{className:"WMSLayer"};case"WMTS":return{className:"WMTSLayer"};default:throw new T.Z("portal:unknown-item-type","Unknown item type '${type}'",{type:s.type})}}),o.apply(this,arguments)}function S(){return(S=(0,e.Z)(function*(s){const d=L.T[s.className];return{constructor:yield d(),properties:s.properties}})).apply(this,arguments)}function P(){return P=(0,e.Z)(function*(s,l){return(yield function rt(s,l){return b.apply(this,arguments)}(s,l))?{className:"TileLayer"}:{className:"MapImageLayer"}}),P.apply(this,arguments)}function c(){return(c=(0,e.Z)(function*(s,l){const d=yield q(s,l);if("object"==typeof d){const{sourceJSON:I,className:Z}=d,W={sourceJSON:I};return null!=d.id&&(W.layerId=d.id),{className:Z||"FeatureLayer",properties:W}}return{className:"GroupLayer"}})).apply(this,arguments)}function f(){return(f=(0,e.Z)(function*(s,l){const d=yield q(s,l,(0,e.Z)(function*(){try{if(!s.url)return[];const{serverUrl:I}=yield(0,n.w)(s.url,{sceneLayerItem:s});return(yield l.fetchServiceMetadata(I))?.tables??[]}catch{return[]}}));if("object"==typeof d){const I={};let Z;if(null!=d.id?(I.layerId=d.id,Z=`${s.url}/layers/${d.id}`):Z=s.url,s.typeKeywords?.length)for(const C of Object.keys(h.fb))if(s.typeKeywords.includes(C))return{className:h.fb[C]};const W=yield l.fetchServiceMetadata(Z,{customParameters:yield l.fetchCustomParameters(s,C=>(0,v.uE)(C)?.customParameters)});return{className:h.fb[W?.layerType]||"SceneLayer",properties:I}}return!1===d&&"Voxel"===(yield l.fetchServiceMetadata(s.url))?.layerType?{className:"VoxelLayer"}:{className:"GroupLayer"}})).apply(this,arguments)}function x(){return(x=(0,e.Z)(function*(s){yield s.load();const l=(0,U._$)(s,"Map Notes"),d=(0,U._$)(s,"Markup");if(l||d)return{className:"MapNotesLayer"};if((0,U._$)(s,"Route Layer"))return{className:"RouteLayer"};const I=yield s.fetchData();return 1===(0,v.Q4)(I)?{className:"FeatureLayer"}:{className:"GroupLayer"}})).apply(this,arguments)}function V(){return(V=(0,e.Z)(function*(s,l){yield s.load();const d=s.typeKeywords?.map(G=>G.toLowerCase())??[];if(d.includes("elevation 3d layer"))return{className:"ElevationLayer"};if(d.includes("tiled imagery"))return{className:"ImageryTileLayer"};const I=yield l.fetchItemData(s),Z=I?.layerType;if("ArcGISTiledImageServiceLayer"===Z)return{className:"ImageryTileLayer"};if("ArcGISImageServiceLayer"===Z)return{className:"ImageryLayer"};const W=yield l.fetchServiceMetadata(s.url,{customParameters:yield l.fetchCustomParameters(s)}),C=W.cacheType?.toLowerCase(),H=W.capabilities?.toLowerCase().includes("tilesonly");return"map"===C||H?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}})).apply(this,arguments)}function b(){return(b=(0,e.Z)(function*(s,l){const{tileInfo:d}=yield l.fetchServiceMetadata(s.url,{customParameters:yield l.fetchCustomParameters(s)});return d})).apply(this,arguments)}function q(s,l,d){return w.apply(this,arguments)}function w(){return(w=(0,e.Z)(function*(s,l,d){const{url:I,type:Z}=s,W="Feature Service"===Z;if(!I)return{};if(/\/\d+$/.test(I)){if(W){const G=yield l.fetchServiceMetadata(I,{customParameters:yield l.fetchCustomParameters(s,F=>(0,v.uE)(F)?.customParameters)});return{id:G.id,className:(0,r.W)(G.type),sourceJSON:G}}return{}}yield s.load();let C=yield l.fetchItemData(s);if(W){const G=yield(0,v.$O)(C,I,l),F=k(G);if("object"==typeof F){const lt=(0,v.hq)(G,F.id);F.className=(0,v.qT)(lt?.layerType)}return F}if("Scene Service"===Z&&(C=yield(0,v.CD)(s,C,l)),(0,v.Q4)(C)>0)return k(C);const H=yield l.fetchServiceMetadata(I);return d&&(H.tables=yield d()),k(H)})).apply(this,arguments)}function k(s){return 1===(0,v.Q4)(s)&&{id:(0,v.uE)(s)?.id}}},6661:(B,O,t)=>{t.d(O,{T:()=>n});var e=t(15861),T=t(66476);function n(m,h){return r.apply(this,arguments)}function r(){return(r=(0,e.Z)(function*(m,h){const{data:L}=yield(0,T.Z)(m,{responseType:"json",query:{f:"json",...h?.customParameters,token:h?.apiKey}});return L})).apply(this,arguments)}}}]);