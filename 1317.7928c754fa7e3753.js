"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[1317,8570],{43589:(lt,ot,E)=>{function nt(t,l,e){$(t.typedBuffer,l.typedBuffer,e,t.typedBufferStride,l.typedBufferStride)}function $(t,l,e,g=3,v=g){if(t.length/g!==Math.ceil(l.length/v))return t;const O=t.length/g,d=e[0],B=e[1],R=e[2],W=e[4],F=e[5],b=e[6],V=e[8],Z=e[9],w=e[10],G=e[12],z=e[13],Y=e[14];let h=0,S=0;for(let A=0;A<O;A++){const I=l[h],H=l[h+1],J=l[h+2];t[S]=d*I+W*H+V*J+G,t[S+1]=B*I+F*H+Z*J+z,t[S+2]=R*I+b*H+w*J+Y,h+=v,S+=g}return t}function X(t,l,e){L(t.typedBuffer,l.typedBuffer,e,t.typedBufferStride,l.typedBufferStride)}function L(t,l,e,g=3,v=g){if(t.length/g!==Math.ceil(l.length/v))return;const O=t.length/g,d=e[0],B=e[1],R=e[2],W=e[3],F=e[4],b=e[5],V=e[6],Z=e[7],w=e[8];let G=0,z=0;for(let Y=0;Y<O;Y++){const h=l[G],S=l[G+1],A=l[G+2];t[z]=d*h+W*S+V*A,t[z+1]=B*h+F*S+Z*A,t[z+2]=R*h+b*S+w*A,G+=v,z+=g}}function p(t,l,e){j(t.typedBuffer,l.typedBuffer,e,t.typedBufferStride,l.typedBufferStride)}function j(t,l,e,g=3,v=g){const O=Math.min(t.length/g,l.length/v);let d=0,B=0;for(let R=0;R<O;R++)t[B]=e*l[d],t[B+1]=e*l[d+1],t[B+2]=e*l[d+2],d+=v,B+=g;return t}function C(t,l,e,g=3,v=g){const O=t.length/g;if(O!==Math.ceil(l.length/v))return t;let d=0,B=0;for(let R=0;R<O;R++)t[B]=l[d]+e[0],t[B+1]=l[d+1]+e[1],t[B+2]=l[d+2]+e[2],d+=v,B+=g;return t}function U(t,l){N(t.typedBuffer,l.typedBuffer,t.typedBufferStride,l.typedBufferStride)}function N(t,l,e=3,g=e){const v=Math.min(t.length/e,l.length/g);let O=0,d=0;for(let B=0;B<v;B++){const R=l[O],W=l[O+1],F=l[O+2],b=R*R+W*W+F*F;if(b>0){const V=1/Math.sqrt(b);t[d]=V*R,t[d+1]=V*W,t[d+2]=V*F}O+=g,d+=e}}E.d(ot,{a:()=>$,b:()=>C,c:()=>X,d:()=>nt,e:()=>U,f:()=>p,n:()=>N,s:()=>j,t:()=>L}),E(14007),E(4703),Object.freeze(Object.defineProperty({__proto__:null,normalize:N,normalizeView:U,scale:j,scaleView:p,shiftRight:function P(t,l,e){const g=Math.min(t.count,l.count),v=t.typedBuffer,O=t.typedBufferStride,d=l.typedBuffer,B=l.typedBufferStride;let R=0,W=0;for(let F=0;F<g;F++)v[W]=d[R]>>e,v[W+1]=d[R+1]>>e,v[W+2]=d[R+2]>>e,R+=B,W+=O},transformMat3:L,transformMat3View:X,transformMat4:$,transformMat4View:nt,translate:C},Symbol.toStringTag,{value:"Module"}))},2599:(lt,ot,E)=>{E.d(ot,{a:()=>L,b:()=>C,n:()=>j,s:()=>U,t:()=>p}),E(14007);var k=E(4703);function L(P,T,t){p(P.typedBuffer,T.typedBuffer,t,P.typedBufferStride,T.typedBufferStride)}function p(P,T,t,l=4,e=l){if(P.length/l!=T.length/e)return;const g=P.length/l,v=t[0],O=t[1],d=t[2],B=t[3],R=t[4],W=t[5],F=t[6],b=t[7],V=t[8];let Z=0,w=0;for(let G=0;G<g;G++){const z=T[Z],Y=T[Z+1],h=T[Z+2],S=T[Z+3];P[w]=v*z+B*Y+F*h,P[w+1]=O*z+R*Y+b*h,P[w+2]=d*z+W*Y+V*h,P[w+3]=S,Z+=e,w+=l}}function j(P,T){const t=Math.min(P.count,T.count),l=P.typedBuffer,e=P.typedBufferStride,g=T.typedBuffer,v=T.typedBufferStride;for(let O=0;O<t;O++){const d=O*e,B=O*v,R=g[B],W=g[B+1],F=g[B+2],b=R*R+W*W+F*F;if(b>0){const V=1/Math.sqrt(b);l[d]=V*R,l[d+1]=V*W,l[d+2]=V*F}}}function C(P,T,t){U(P.typedBuffer,T,t,P.typedBufferStride)}function U(P,T,t,l=4){const e=Math.min(P.length/l,T.count),g=T.typedBuffer,v=T.typedBufferStride;let O=0,d=0;for(let B=0;B<e;B++)P[d]=t*g[O],P[d+1]=t*g[O+1],P[d+2]=t*g[O+2],P[d+3]=t*g[O+3],O+=v,d+=l}Object.freeze(Object.defineProperty({__proto__:null,normalize:j,scale:U,scaleView:C,transformMat3:p,transformMat3View:L,transformMat4:function X(P,T,t,l=4,e=l){if(P.length/l!=T.length/e)return void k.Z.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const g=P.length/l,v=t[0],O=t[1],d=t[2],B=t[3],R=t[4],W=t[5],F=t[6],b=t[7],V=t[8],Z=t[9],w=t[10],G=t[11],z=t[12],Y=t[13],h=t[14],S=t[15];let A=0,I=0;for(let H=0;H<g;H++){const J=T[A],q=T[A+1],x=T[A+2],r=T[A+3];P[I]=v*J+R*q+V*x+z*r,P[I+1]=O*J+W*q+Z*x+Y*r,P[I+2]=d*J+F*q+w*x+h*r,P[I+3]=B*J+b*q+G*x+S*r,A+=e,I+=l}},transformMat4View:function $(P,T,t){if(P.count!==T.count)return;const l=P.count,e=t[0],g=t[1],v=t[2],O=t[3],d=t[4],B=t[5],R=t[6],W=t[7],F=t[8],b=t[9],V=t[10],Z=t[11],w=t[12],G=t[13],z=t[14],Y=t[15],h=P.typedBuffer,S=P.typedBufferStride,A=T.typedBuffer,I=T.typedBufferStride;for(let H=0;H<l;H++){const J=H*S,q=H*I,x=A[q],r=A[q+1],a=A[q+2],s=A[q+3];h[J]=e*x+d*r+F*a+w*s,h[J+1]=g*x+B*r+b*a+G*s,h[J+2]=v*x+R*r+V*a+z*s,h[J+3]=O*x+W*r+Z*a+Y*s}}},Symbol.toStringTag,{value:"Module"}))},51955:(lt,ot,E)=>{E.d(ot,{K:()=>$});var tt=E(73145),k=E(83821),nt=E(83639);function $(j,C,U,N){if((0,k.canProjectWithoutEngine)(j.spatialReference,U))return p[0]=j.x,p[1]=j.y,p[2]=j.z??N??0,(0,nt.projectBuffer)(p,j.spatialReference,0,C,U,0,1);const P=(0,k.tryProjectWithZConversion)(j,U);return!!P&&(C[0]=P?.x,C[1]=P?.y,C[2]=P?.z??N??0,!0)}const p=(0,tt.Ue)()},93404:(lt,ot,E)=>{E.d(ot,{JK:()=>X,QZ:()=>nt,Rq:()=>$,bg:()=>k,mB:()=>L});var tt=E(40271);function k(p,j=!1){return p<=tt.c8?j?new Array(p).fill(0):new Array(p):new Float64Array(p)}function nt(p){return((0,tt.kJ)(p)?p.length:p.byteLength/8)<=tt.c8?Array.from(p):new Float64Array(p)}function $(p,j,C){return Array.isArray(p)?p.slice(j,j+C):p.subarray(j,j+C)}function X(p,j){for(let C=0;C<j.length;++C)p[C]=j[C];return p}function L(p){return Array.isArray(p)?new Float64Array(p):p}},38570:(lt,ot,E)=>{E.r(ot),E.d(ot,{VectorType:()=>h,loadProjectErrorMessage:()=>O,logProjectionError:()=>d,project:()=>H,projectFromPCPF:()=>F,projectNormalFromPCPF:()=>R,projectNormalToPCPF:()=>B,projectTangentFromPCPF:()=>Y,projectTangentToPCPF:()=>z,projectToPCPF:()=>W,transformNormal:()=>b,transformTangent:()=>V,transformVectorENUPlateCarree:()=>Z,transformVectorWMPlateCarree:()=>w});var tt=E(55117),k=E(92899),nt=E(38519),$=E(39061),X=E(41666),L=E(43548),p=E(73145),j=E(83821),C=E(66588),U=E(44381),N=E(83639),P=E(93404),T=E(82301),t=E(33721),l=E(48230),e=E(11716),g=E(43589),v=E(2599);const O="Projection may be possible after calling projection.load().";function d(n,i,c,u){n.error(`Failed to project from (wkid:${i.wkid}) to (wkid:${c.wkid}).${u?" ":""}${u}`)}function B(n,i,c,u,f){return I(S.TO_PCPF,e.ct.fromTypedArray(n),h.NORMAL,e.fP.fromTypedArray(i),e.fP.fromTypedArray(c),u,e.ct.fromTypedArray(f))?f:null}function R(n,i,c,u,f){return I(S.FROM_PCPF,e.ct.fromTypedArray(n),h.NORMAL,e.fP.fromTypedArray(i),e.fP.fromTypedArray(c),u,e.ct.fromTypedArray(f))?f:null}function W(n,i,c){return(0,N.projectBuffer)(n,i,0,c,(0,C.rS)(i),0,n.length/3)?c:null}function F(n,i,c){return(0,N.projectBuffer)(n,(0,C.rS)(c),0,i,c,0,n.length/3)?i:null}function b(n,i,c){return(0,k.XL)(_,c),(0,g.t)(i,n,_),(0,tt.oc)(_)&&(0,g.n)(i,i),i}function V(n,i,c){return(0,k.xO)(_,c),(0,v.t)(i,n,_),(0,tt.oc)(_)&&(0,g.n)(i,i,4),i}function Z(n,i,c,u){const f=i===h.NORMAL;return G(n,i,c,(y,M)=>{const m=Math.cos((0,tt.Vl)(y));M[0]=f?m:1/m,M[1]=1},u)}function w(n,i,c,u){const f=i===h.NORMAL;return G(n,i,c,(y,M)=>{const m=Math.cosh(-y/T.sv.radius);M[0]=1,M[1]=f?m:1/m},u)}function G(n,i,c,u,f){const y=i===h.NORMAL?3:4,M=[0,0];for(let m=0,Q=1;m<n.length;m+=y,Q+=3){u(c[Q],M);const K=n[m]*M[0],rt=n[m+1]*M[1],D=n[m+2],et=1/Math.sqrt(K*K+rt*rt+D*D);f[m]=K*et,f[m+1]=rt*et,f[m+2]=D*et,4===y&&(f[m+3]=n[m+3])}return f}function z(n,i,c,u,f){if(!I(S.TO_PCPF,e.ct.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT),h.TANGENT,e.fP.fromTypedArray(i),e.fP.fromTypedArray(c),u,e.ct.fromTypedArray(f,4*Float32Array.BYTES_PER_ELEMENT)))return null;for(let y=3;y<n.length;y+=4)f[y]=n[y];return f}function Y(n,i,c,u,f){if(!I(S.FROM_PCPF,e.ct.fromTypedArray(n,16),h.TANGENT,e.fP.fromTypedArray(i),e.fP.fromTypedArray(c),u,e.ct.fromTypedArray(f,16)))return null;for(let y=3;y<n.length;y+=4)f[y]=n[y];return f}var h,S,n;function A(n,i,c,u,f){switch((0,U.B)(u,c,s,u),n===S.FROM_PCPF&&(0,$.U_)(s,s),i){case h.NORMAL:return(0,k.XL)(f,s);case h.TANGENT:return(0,k.xO)(f,s)}}function I(n,i,c,u,f,y,M){if(!i)return;const m=u.count,Q=(0,C.rS)(y);if(function x(n){return n.isWGS84||(0,t.yW)(n)||(0,t.BZ)(n)||(0,t.V2)(n)}(y))for(let K=0;K<m;K++)f.getVec(K,r),i.getVec(K,a),(0,L.t)(a,a,A(n,c,r,Q,_)),M.setVec(K,a);else for(let K=0;K<m;K++){f.getVec(K,r),i.getVec(K,a);const rt=(0,l.mZ)(u.get(K,1));let D=Math.cos(rt);c===h.TANGENT!=(n===S.TO_PCPF)&&(D=1/D),A(n,c,r,Q,_),n===S.TO_PCPF?(_[0]*=D,_[1]*=D,_[2]*=D,_[3]*=D,_[4]*=D,_[5]*=D):(_[0]*=D,_[3]*=D,_[6]*=D,_[1]*=D,_[4]*=D,_[7]*=D),(0,L.t)(a,a,_),(0,L.n)(a,a),M.setVec(K,a)}return M}function H(n){return"local"===n.vertexSpace.type?function J({vertexSpace:n,transform:i,inSpatialReference:c,outSpatialReference:u,localMode:f,outPositions:y,positions:M}){const m=n.origin??p.AG,Q=null!=n.origin?i?.localMatrix??X.Wd:X.Wd,K=(0,C.rS)(c),rt=u.isWebMercator&&f||!(0,j.canProjectWithoutEngine)(c,K)?c:K;(0,U.B)(c,m,s,rt),(0,$.Jp)(s,s,Q);const D=y??(0,P.bg)(M.length);return(0,g.a)(D,M,s),(0,N.projectBuffer)(D,rt,0,D,u,0,D.length/3),D}(n):function q({vertexSpace:n,transform:i,outPositions:c,positions:u,inSpatialReference:f,outSpatialReference:y}){const M=null!=n.origin?i?.localMatrix??X.Wd:X.Wd,m=c??(0,P.bg)(u.length);(0,$.fS)(M,X.Wd)?(0,P.JK)(m,u):(0,g.a)(m,u,M);const Q=n.origin??p.AG;if(!(0,L.e)(Q,p.AG)){const[K,rt,D]=Q;for(let et=0;et<m.length;et+=3)m[et]+=K,m[et+1]+=rt,m[et+2]+=D}return(0,N.projectBuffer)(m,f,0,m,y,0,m.length/3)?m:null}(n)}(n=h||(h={}))[n.NORMAL=0]="NORMAL",n[n.TANGENT=1]="TANGENT",function(n){n[n.TO_PCPF=0]="TO_PCPF",n[n.FROM_PCPF=1]="FROM_PCPF"}(S||(S={}));const r=(0,p.Ue)(),a=(0,p.Ue)(),s=(0,X.Ue)(),_=(0,nt.Ue)()},51317:(lt,ot,E)=>{E.d(ot,{qk:()=>v,ur:()=>S,x1:()=>g});var tt=E(4703),k=E(55117),nt=E(49602),$=E(92899),X=E(38519),L=E(39061),p=E(41666),j=E(43548),C=E(73145),U=E(66588),N=E(44381),P=E(51955),T=E(52592),t=E(43589),l=E(38570);const e=()=>tt.Z.getLogger("esri.geometry.support.meshUtils.vertexSpaceConversion");function g(r,a,{vertexSpace:s,spatialReference:_}){if("georeferenced"===s.type){const y=r;if(!(0,P.K)(a,y,_))return!1;const{origin:M}=s;return(0,j.f)(r,y,M),!0}const n=(0,U.rS)(_),i=r;if(!(0,P.K)(a,i,n))return!1;const{origin:c}=s,u=q;if(!(0,N.B)(_,c,u,n))return!1;const f=(0,L.U_)(q,u);return null!=f&&((0,j.h)(r,i,f),!0)}function v(r,a,s){const{vertexSpace:_,transform:n,vertexAttributes:i}=r,c=G(r.spatialReference,s,x.SOURCE|x.TARGET);if((0,T.vI)(_,a)&&(!n||(0,L.I6)(n.localMatrix,p.Wd))&&(0,k.Po)(c,1)){const{position:u,normal:f,tangent:y}=i,M=s?.allowBufferReuse;return{position:M?u:u.slice(),normal:M?f:f?.slice(),tangent:M?y:y?.slice()}}switch(r.vertexSpace.type){case"local":return"local"===a.type?function W({vertexAttributes:r,spatialReference:a,transform:s},{origin:_},n,i){const c=(0,U.rS)(a);if(!(0,N.B)(a,_,A,c))return(0,l.logProjectionError)(e(),a,c),null;if(s&&(0,L.Jp)(A,A,s.localMatrix),!(0,N.B)(a,n,I,c))return(0,l.logProjectionError)(e(),c,a),null;(0,L.U_)(I,I);const u=(0,L.Jp)(A,I,A);return w(u,a,i,x.SOURCE|x.TARGET),F(r,u)}(r,r.vertexSpace,a.origin,s):function d({spatialReference:r,vertexAttributes:a,transform:s},{origin:_},n,i){const c=(0,U.rS)(r);if(!(0,N.B)(r,_,A,c))return(0,l.logProjectionError)(e(),r,c),null;s&&(0,L.Jp)(A,A,s.localMatrix),w(A,r,i,x.SOURCE);const u=new Float64Array(a.position.length),f=function b(r,a,s,_){(0,t.a)(_,r,a);const n=new Float64Array(r.length);return(0,l.projectFromPCPF)(_,n,s)?n:((0,l.logProjectionError)(e(),(0,U.rS)(s),s),null)}(a.position,A,r,u);if(!f)return null;const y=function V(r,a,s,_,n){if(null==s)return null;const i=new Float32Array(s.length);return(0,l.transformNormal)(s,i,_),(0,l.projectNormalFromPCPF)(i,r,a,n,i)?i:((0,l.logProjectionError)(e(),(0,U.rS)(n),n),null)}(f,u,a.normal,A,r);if(a.normal&&!y)return null;const M=function Z(r,a,s,_,n){if(null==s)return null;const i=new Float32Array(s.length);return(0,l.transformTangent)(s,i,_),(0,l.projectTangentFromPCPF)(i,r,a,n,i)?i:((0,l.logProjectionError)(e(),(0,U.rS)(n),n),null)}(f,u,a.tangent,A,r);if(a.tangent&&!M)return null;if(n){const m=(0,j.k)(J,n);(0,t.b)(f,f,m)}return{position:f,normal:y,tangent:M}}(r,r.vertexSpace,a.origin,s);case"georeferenced":return"local"===a.type?function B({vertexAttributes:r,spatialReference:a,transform:s},{origin:_},n,i){const c=(0,U.rS)(a);if(!(0,N.B)(a,n,A,c))return(0,l.logProjectionError)(e(),a,c),null;const u=1/G(a,i,x.TARGET);(0,L.bA)(A,A,[u,u,u]);const f=(0,L.U_)(I,A),{position:y,normal:M,tangent:m}=function R(r,a,s){if(!a)return r;if(!s){const{position:n,normal:i,tangent:c}=r;return{position:(0,t.b)(new Float64Array(n.length),n,a),tangent:c,normal:i}}const _=F(r,s.localMatrix);return(0,t.b)(_.position,_.position,a),_}(r,_,s),Q=new Float64Array(y.length),K=function z(r,a,s,_){const n=(0,l.projectToPCPF)(r,a,_);if(!n)return(0,l.logProjectionError)(e(),a,(0,U.rS)(a)),null;const i=new Float64Array(n.length);return(0,t.a)(i,n,s),i}(y,a,f,Q);if(!K)return null;const rt=(0,$.XL)(H,f),D=function Y(r,a,s,_,n,i){if(null==r)return null;const c=i??new Float32Array(r.length);return(0,l.projectNormalToPCPF)(r,a,s,_,c)?((0,t.t)(c,c,n),c):((0,l.logProjectionError)(e(),_,(0,U.rS)(_)),null)}(M,y,Q,a,rt,M!==r.normal?M:void 0);if(!D&&M)return null;const et=function h(r,a,s,_,n,i){if(null==r)return null;const c=i??new Float32Array(r.length);return(0,l.projectTangentToPCPF)(r,a,s,_,c)?((0,t.t)(c,c,n,4),c):((0,l.logProjectionError)(e(),_,(0,U.rS)(_)),null)}(m,y,Q,a,rt,m!==r.tangent?m:void 0);return!et&&m?null:{position:K,normal:D,tangent:et}}(r,r.vertexSpace,a.origin,s):function O({vertexAttributes:r,transform:a,spatialReference:s},{origin:_},n,i){const{position:c,normal:u,tangent:f}=a?F(r,a.localMatrix):r,y=new Float64Array(c.length);let M=c;if(_&&(M=(0,t.b)(y,M,_)),n){const Q=(0,j.k)(J,n);M=(0,t.b)(y,M,Q)}G(s,i,x.NONE);const m=i?.allowBufferReuse;return{position:M!==r.position||m?M:M.slice(),normal:u!==r.normal||m?u:u?.slice(),tangent:f!==r.tangent||m?f:f?.slice()}}(r,r.vertexSpace,a.origin,s)}}function F(r,a){const s=new Float64Array(r.position.length);(0,t.a)(s,r.position,a);const _=r.normal?new Float32Array(r.normal.length):null,n=r.tangent?new Float32Array(r.tangent.length):null;return _&&r.normal&&(0,l.transformNormal)(r.normal,_,a),n&&r.tangent&&(0,l.transformTangent)(r.tangent,n,a),{position:s,normal:_,tangent:n}}function w(r,a,s,_){const n=G(a,s,_);1!==n&&(0,L.bA)(r,r,[n,n,n])}function G(r,a,s){const _=!!(s&x.SOURCE),n=!!(s&x.TARGET),i=a?.sourceUnit,c=a?.targetUnit;if(!i&&!c)return 1;let u=S(i,r);!_&&i&&1!==u&&(e().warn("source unit conversion not supported"),u=1);let f=1/S(c,r);return!n&&c&&1!==f&&(e().warn("target unit conversion not supported"),f=1),u*f}function S(r,a){if(null==r)return 1;const s=(0,nt.r6)(a);return 1/(0,nt.En)(s,"meters",r)}const A=(0,p.Ue)(),I=(0,p.Ue)(),H=(0,X.Ue)(),J=(0,C.Ue)(),q=(0,p.Ue)();var x,r;(r=x||(x={}))[r.NONE=0]="NONE",r[r.SOURCE=1]="SOURCE",r[r.TARGET=2]="TARGET"}}]);