"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[7230],{70794:(G,S,p)=>{p.d(S,{EX:()=>F,Y3:()=>j,_Y:()=>P,jQ:()=>O,sJ:()=>K,xr:()=>y});var B=p(66599);function O(e){return"r"in e&&"g"in e&&"b"in e}function x(e){return"h"in e&&"s"in e&&"v"in e}function C(e){return"l"in e&&"a"in e&&"b"in e}function M(e){return"l"in e&&"c"in e&&"h"in e}p(5710),p(23515);const A=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],L=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function T(e,u){const h=[];let f,_;if(e[0].length!==u.length)throw new Error("dimensions do not match");const E=e.length,b=e[0].length;let U=0;for(f=0;f<E;f++){for(U=0,_=0;_<b;_++)U+=e[f][_]*u[_];h.push(U)}return h}function D(e){const u=[e.r/255,e.g/255,e.b/255].map(f=>f<=.04045?f/12.92:((f+.055)/1.055)**2.4),h=T(A,u);return{x:100*h[0],y:100*h[1],z:100*h[2]}}function R(e){const u=T(L,[e.x/100,e.y/100,e.z/100]).map(h=>Math.min(1,Math.max(h<=.0031308?12.92*h:1.055*h**.4166666666666667-.055,0)));return{r:Math.round(255*u[0]),g:Math.round(255*u[1]),b:Math.round(255*u[2])}}function w(e){const u=[e.x/95.047,e.y/100,e.z/108.883].map(h=>h>.008856451679035631?h**.3333333333333333:7.787037037037035*h+.13793103448275862);return{l:116*u[1]-16,a:500*(u[0]-u[1]),b:200*(u[1]-u[2])}}function d(e){const u=e.l,h=[(u+16)/116+e.a/500,(u+16)/116,(u+16)/116-e.b/200].map(f=>f>6/29?f**3:3*(6/29)**2*(f-4/29));return{x:95.047*h[0],y:100*h[1],z:108.883*h[2]}}function y(e){return O(e)?e:M(e)?function c(e){return R(d(function s(e){const h=e.c,f=e.h;return{l:e.l,a:h*Math.cos(f),b:h*Math.sin(f)}}(e)))}(e):C(e)?function o(e){return R(d(e))}(e):function I(e){return"x"in e&&"y"in e&&"z"in e}(e)?R(e):x(e)?function v(e){const u=(e.h+360)%360/60,f=e.v/100*255,_=f*(e.s/100),E=_*(1-Math.abs(u%2-1));let b;switch(Math.floor(u)){case 0:b={r:_,g:E,b:0};break;case 1:b={r:E,g:_,b:0};break;case 2:b={r:0,g:_,b:E};break;case 3:b={r:0,g:E,b:_};break;case 4:b={r:E,g:0,b:_};break;case 5:case 6:b={r:_,g:0,b:E};break;default:b={r:0,g:0,b:0}}return b.r=Math.round(b.r+f-_),b.g=Math.round(b.g+f-_),b.b=Math.round(b.b+f-_),b}(e):e}function P(e){return x(e)?e:function m(e){const u=e.r,h=e.g,f=e.b,_=Math.max(u,h,f),E=_-Math.min(u,h,f);let b=_,U=0===E?0:_===u?(h-f)/E%6:_===h?(f-u)/E+2:(u-h)/E+4,Z=0===E?0:E/b;return U<0&&(U+=6),U*=60,Z*=100,b*=100/255,{h:U,s:Z,v:b}}(y(e))}function j(e){return C(e)?e:function i(e){return w(D(e))}(y(e))}function K(e){return M(e)?e:function l(e){return function a(e){const u=e.l,h=e.a,f=e.b,_=Math.sqrt(h*h+f*f);let E=Math.atan2(f,h);return E=E>0?E:E+2*Math.PI,{l:u,c:_,h:E}}(w(D(e)))}(y(e))}function F(e,u){const{r:h,g:f,b:_}=u?.ignoreAlpha?e:function H(e){let{r:u,g:h,b:f,a:_}=e;return _<1&&(u=Math.round(_*u+255*(1-_)),h=Math.round(_*h+255*(1-_)),f=Math.round(_*f+255*(1-_))),new B.Z({r:u,g:h,b:f})}(e);return.2126*h+.7152*f+.0722*_}var N,e;(e=N||(N={}))[e.Low=160]="Low",e[e.High=225]="High"},69411:(G,S,p)=>{p.d(S,{E:()=>d});var B=p(15861),k=p(66599),g=p(70794),O=p(34222),x=p(4978),C=p(25896),M=p(57964),I=p(4703),A=p(66398);function L(a,s,i,o,l){if(null==a)return null;const c=a.referencesGeometry()&&l?function D(a,s,i){const{transform:o,hasZ:l,hasM:c}=i;T.has(s)||T.set(s,function R(a){const s={};switch(a){case"esriGeometryPoint":return(i,o,l,c)=>(0,A.U1)(o,s,i,l,c);case"esriGeometryPolygon":return(i,o,l,c)=>(0,A.Ie)(o,s,i,l,c);case"esriGeometryPolyline":return(i,o,l,c)=>(0,A.G6)(o,s,i,l,c);case"esriGeometryMultipoint":return(i,o,l,c)=>(0,A.J9)(o,s,i,l,c);default:return I.Z.getLogger("esri.views.2d.support.arcadeOnDemand").error(new M.Z("mapview-arcade",`Unable to handle geometryType: ${a}`)),i=>i}}(s));const m=T.get(s)(a.geometry,o,l,c);return{...a,geometry:m}}(s,o,l):s,m=a.repurposeFeature(c);try{return a.evaluate({...i,$feature:m},a.services)}catch(v){return I.Z.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",v),null}}const T=new Map,w=a=>{if(!a)return[0,0,0,0];const{r:s,g:i,b:o,a:l}=a;return[s,i,o,255*l]};class d{static findApplicableOverrides(s,i,o){if(s&&i){if(s.primitiveName){let l=!1;for(const c of o)if(c.primitiveName===s.primitiveName){l=!0;break}if(!l)for(const c of i)c.primitiveName===s.primitiveName&&o.push(c)}switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(s.effects)for(const l of s.effects)d.findApplicableOverrides(l,i,o);if(s.symbolLayers)for(const l of s.symbolLayers)d.findApplicableOverrides(l,i,o);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(s.effects)for(const l of s.effects)d.findApplicableOverrides(l,i,o);if(s.markerPlacement&&d.findApplicableOverrides(s.markerPlacement,i,o),"CIMVectorMarker"===s.type){if(s.markerGraphics)for(const l of s.markerGraphics)d.findApplicableOverrides(l,i,o),d.findApplicableOverrides(l.symbol,i,o)}else"CIMCharacterMarker"===s.type?d.findApplicableOverrides(s.symbol,i,o):"CIMHatchFill"===s.type?d.findApplicableOverrides(s.lineSymbol,i,o):"CIMPictureMarker"===s.type&&d.findApplicableOverrides(s.animatedSymbolProperties,i,o)}}}static findEffectOverrides(s,i){if(!s)return null;if("CIMGeometricEffectDashes"===s.type&&(0,C.T2)(s),!i||!s.primitiveName)return{type:"cim-effect-param",effect:s,overrides:[]};const o=(0,C.Ml)(s),l=s.primitiveName,c=[];for(const m of i)m.primitiveName===l&&c.push((0,C.Ml)(m));return{type:"cim-effect-param",effect:o,overrides:(0,C.Ul)(c)}}static resolveSymbolOverrides(s,i,o,l,c,m,v){return(0,B.Z)(function*(){if(!s?.symbol)return null;let{symbol:y,primitiveOverrides:P}=s;const j=!!P;if(!j&&!l)return y;y=(0,O.d9)(y),P=(0,O.d9)(P);let K=!0;if(i||(i={attributes:{}},K=!1),j){if(K||(P=P.filter(W=>!W.valueExpressionInfo?.expression.includes("$feature"))),v||(P=P.filter(W=>!W.valueExpressionInfo?.expression.includes("$view"))),P.length>0){const W={spatialReference:o,fields:(0,C.Qf)(i.attributes),geometryType:c};yield d.createRenderExpressions(P,W),d.evaluateOverrides(P,i,c??"esriGeometryPoint",m,v)}d.applyOverrides(y,P)}return l&&d.applyDictionaryTextOverrides(y,i,l,null),y})()}static createRenderExpressions(s,i){return(0,B.Z)(function*(){const o=[];for(const l of s){const c=l.valueExpressionInfo;if(!c||d._expressionToRenderExpression.has(c.expression))continue;const m=(0,x.Yi)(c.expression,i.spatialReference,i.fields);o.push(m),m.then(v=>d._expressionToRenderExpression.set(c.expression,v))}o.length>0&&(yield Promise.all(o))})()}static evaluateOverrides(s,i,o,l,c){const m={$view:{scale:c?.scale}};for(const v of s){v.value&&"object"==typeof v.value&&(0,g.jQ)(v.value)&&("Color"===v.propertyName||"StrokeColor"===v.propertyName)&&(v.value=w(v.value));const y=v.valueExpressionInfo;if(!y)continue;const P=d._expressionToRenderExpression.get(y.expression);P&&(v.value=L(P,i,m,o,l))}}static applyDictionaryTextOverrides(s,i,o,l,c="Normal"){if(s?.type)switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const m=s.symbolLayers;if(!m)return;for(const v of m)v&&"CIMVectorMarker"===v.type&&d.applyDictionaryTextOverrides(v,i,o,l,"CIMTextSymbol"===s.type?s.textCase:c)}break;case"CIMVectorMarker":{const m=s.markerGraphics;if(!m)return;for(const v of m)v&&d.applyDictionaryTextOverrides(v,i,o,l)}break;case"CIMMarkerGraphic":{const m=s.textString;if(m&&m.includes("[")){const v=(0,C.H1)(m,o);s.textString=(0,C.E_)(i,v,l,c)}}}}static applyOverrides(s,i,o,l){if(s.primitiveName)for(const c of i)if(c.primitiveName===s.primitiveName){const m=(0,C.Le)(c.propertyName);if(l&&l.push({cim:s,nocapPropertyName:m,value:s[m]}),o){let v=!1;for(const y of o)y.primitiveName===s.primitiveName&&(v=!0);v||o.push(c)}null!=c.value&&(s[m]=c.value)}switch(s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(s.effects)for(const c of s.effects)d.applyOverrides(c,i,o,l);if(s.symbolLayers)for(const c of s.symbolLayers)d.applyOverrides(c,i,o,l);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(s.effects)for(const c of s.effects)d.applyOverrides(c,i,o,l);if("CIMVectorMarker"===s.type&&s.markerGraphics)for(const c of s.markerGraphics)d.applyOverrides(c,i,o,l),d.applyOverrides(c.symbol,i,o,l)}}static restoreOverrides(s){for(const i of s)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(s){let i="";for(const o of s)void 0!==o.value&&(i+=`${o.primitiveName}${o.propertyName}${JSON.stringify(o.value)}`);return i}static toValue(s,i){if("DashTemplate"===s)return i.split(" ").map(o=>Number(o));if("Color"===s){const o=new k.Z(i).toRgba();return o[3]*=255,o}return i}}d._expressionToRenderExpression=new Map},6118:(G,S,p)=>{p.d(S,{JZ:()=>T,RL:()=>D,eY:()=>w});var B=p(15861),k=p(79412),g=p(92899),O=p(44406),x=p(93266),C=p(64456),M=p(98634),I=p(39237),A=p(17091),L=p(22784);function T(d){return d&&"render"in d}function D(d){const a=document.createElement("canvas");return a.width=d.width,a.height=d.height,d.render(a.getContext("2d")),a}class w extends C.s{constructor(a=null,s=!1){super(),this.blendFunction="standard",this._sourceWidth=0,this._sourceHeight=0,this._textureInvalidated=!1,this._texture=null,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.immutable=s,this.source=a,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null),null!=this._uploadStatus&&(this._uploadStatus.controller.abort(),this._uploadStatus=null)}get isSourceScaled(){return this.width!==this._sourceWidth||this.height!==this._sourceHeight}get height(){return void 0!==this._height?this._height:this._sourceHeight}set height(a){this._height=a}get source(){return this._source}set source(a){null==a&&null==this._source||(this._source=a,this.invalidateTexture(),this.requestRender())}get width(){return void 0!==this._width?this._width:this._sourceWidth}set width(a){this._width=a}beforeRender(a){super.beforeRender(a),this.updateTexture(a)}setSourceAsync(a,s){var i=this;return(0,B.Z)(function*(){null!=i._uploadStatus&&i._uploadStatus.controller.abort();const o=new AbortController,l=(0,k.hh)();return(0,k.$F)(s,()=>o.abort()),(0,k.$F)(o,c=>l.reject(c)),i._uploadStatus={controller:o,resolver:l},i.source=a,l.promise})()}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this._source instanceof HTMLImageElement?(this._sourceHeight=this._source.naturalHeight,this._sourceWidth=this._source.naturalWidth):this._source&&(this._sourceHeight=this._source.height,this._sourceWidth=this._source.width))}updateTransitionProperties(a,s){a>=64&&(this.fadeTransitionEnabled=!1,this.inFadeTransition=!1),super.updateTransitionProperties(a,s)}setTransform(a){const s=(0,g.yR)(this.transforms.displayViewScreenMat3),[i,o]=a.toScreenNoRotation([0,0],[this.x,this.y]),l=this.resolution/this.pixelRatio/a.resolution,c=l*this.width,m=l*this.height,v=Math.PI*this.rotation/180;(0,g.Iu)(s,s,(0,x.al)(i,o)),(0,g.Iu)(s,s,(0,x.al)(c/2,m/2)),(0,g.U1)(s,s,-v),(0,g.Iu)(s,s,(0,x.al)(-c/2,-m/2)),(0,g.ex)(s,s,(0,x.al)(c,m)),(0,g.Jp)(this.transforms.displayViewScreenMat3,a.displayViewMat3,s)}setSamplingProfile(a){this._texture&&(a.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(a.samplingMode))}bind(a,s){this._texture&&a.bindTexture(this._texture,s)}updateTexture({context:a,painter:s}){var i=this;return(0,B.Z)(function*(){if(!i._textureInvalidated)return;if(i._textureInvalidated=!1,i._texture||(i._texture=i._createTexture(a)),!i.source)return void i._texture.setData(null);i._texture.resize(i._sourceWidth,i._sourceHeight);const o=function R(d){return T(d)?d instanceof M.Z?d.getRenderedRasterPixels()?.renderedRasterPixels:D(d):d}(i.source);try{if(null!=i._uploadStatus){const{controller:l,resolver:c}=i._uploadStatus,m={signal:l.signal},{width:v,height:y}=i,P=i._texture;yield s.textureUploadManager.enqueueTextureUpdate({data:o,texture:P,width:v,height:y},m),c.resolve(),i._uploadStatus=null}else i._texture.setData(o);i.ready()}catch(l){(0,k.H9)(l)}})()}onDetach(){this.destroy()}_createTransforms(){return{displayViewScreenMat3:(0,O.Ue)()}}_createTexture(a){const s=this.immutable,i=new L.X;return i.internalFormat=s?I.lP.RGBA8:I.VI.RGBA,i.wrapMode=I.e8.CLAMP_TO_EDGE,i.isImmutable=s,i.width=this._sourceWidth,i.height=this._sourceHeight,new A.x(a,i)}}},98634:(G,S,p)=>{p.d(S,{Z:()=>B});class B{constructor(g,O,x){this.pixelBlock=g,this.extent=O,this.originalPixelBlock=x}get width(){return null!=this.pixelBlock?this.pixelBlock.width:0}get height(){return null!=this.pixelBlock?this.pixelBlock.height:0}render(g){const O=this.pixelBlock;if(null==O)return;const x=this.filter({extent:this.extent,pixelBlock:this.originalPixelBlock??O});if(null==x.pixelBlock)return;x.pixelBlock.maskIsAlpha&&(x.pixelBlock.premultiplyAlpha=!0);const C=x.pixelBlock.getAsRGBA(),M=g.createImageData(x.pixelBlock.width,x.pixelBlock.height);M.data.set(C),g.putImageData(M,0,0)}getRenderedRasterPixels(){const g=this.filter({extent:this.extent,pixelBlock:this.pixelBlock});return null==g.pixelBlock?null:(g.pixelBlock.maskIsAlpha&&(g.pixelBlock.premultiplyAlpha=!0),{width:g.pixelBlock.width,height:g.pixelBlock.height,renderedRasterPixels:new Uint8Array(g.pixelBlock.getAsRGBA().buffer)})}}},18209:(G,S,p)=>{p.d(S,{Z:()=>T});var B=p(50484),C=(p(4703),p(14007),p(65311),p(57964),p(10141)),M=p(43101),I=p(89791),A=p(31043);let L=class extends I.K{get hasHighlight(){return this.children.some(D=>D.hasData)}renderChildren(D){this.attributeView.update(),D.drawPhase===M.jx.HIGHLIGHT&&this.children.some(R=>R.hasData)&&(super.renderChildren(D),D.context.setColorMask(!0,!0,!0,!0),(0,A.P9)(D,!0,R=>{this._renderChildren(R,M.Xq.All)}))}};L=(0,B._)([(0,C.j)("esri.views.2d.layers.graphics.HighlightGraphicContainer")],L);const T=L},96696:(G,S,p)=>{p.d(S,{V5:()=>x,e7:()=>g});var B=p(15861),k=p(85295);function g(M){return O.apply(this,arguments)}function O(){return(O=(0,B.Z)(function*(M,I=M.popupTemplate){if(null==I)return[];const A=yield I.getRequiredFields(M.fieldsIndex),{lastEditInfoEnabled:L}=I,{objectIdField:T,typeIdField:D,globalIdField:R,relationships:w}=M;if(A.includes("*"))return["*"];const d=L?(0,k.CH)(M):[],a=(0,k.Q0)(M.fieldsIndex,[...A,...d]);return D&&a.push(D),a&&T&&M.fieldsIndex?.has(T)&&!a.includes(T)&&a.push(T),a&&R&&M.fieldsIndex?.has(R)&&!a.includes(R)&&a.push(R),w&&w.forEach(s=>{const{keyField:i}=s;a&&i&&M.fieldsIndex?.has(i)&&!a.includes(i)&&a.push(i)}),a})).apply(this,arguments)}function x(M,I){return M.popupTemplate?M.popupTemplate:null!=I&&I.defaultPopupTemplateEnabled&&null!=M.defaultPopupTemplate?M.defaultPopupTemplate:null}}}]);