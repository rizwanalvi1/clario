"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[3005],{83005:(Q,m,u)=>{u.r(m),u.d(m,{executeRelationshipQuery:()=>B,executeRelationshipQueryForCount:()=>N});var c=u(15861),R=u(15462),S=u(66476),v=u(33721),Z=u(90356);function I(n,e){const t=n.toJSON();return t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.orderByFields&&(t.orderByFields=t.orderByFields.join(",")),t.outFields&&!e?.returnCountOnly?t.outFields=t.outFields.includes("*")?"*":t.outFields.join(","):delete t.outFields,t.outSR&&(t.outSR=(0,v.B9)(t.outSR)),t.dynamicDataSource&&(t.layer=JSON.stringify({source:t.dynamicDataSource}),delete t.dynamicDataSource),t}function l(){return(l=(0,c.Z)(function*(n,e,t){const o=yield x(n,e,t),r=o.data,a=r.geometryType,s=r.spatialReference,i={};for(const d of r.relatedRecordGroups){const g={fields:void 0,objectIdFieldName:void 0,geometryType:a,spatialReference:s,hasZ:!!r.hasZ,hasM:!!r.hasM,features:d.relatedRecords};if(null!=d.objectId)i[d.objectId]=g;else for(const F of Object.keys(d))"relatedRecords"!==F&&(i[d[F]]=g)}return{...o,data:i}})).apply(this,arguments)}function f(){return(f=(0,c.Z)(function*(n,e,t){const o=yield x(n,e,t,{returnCountOnly:!0}),r=o.data,a={};for(const s of r.relatedRecordGroups)null!=s.objectId&&(a[s.objectId]=s.count);return{...o,data:a}})).apply(this,arguments)}function x(n,e){return y.apply(this,arguments)}function y(){return(y=(0,c.Z)(function*(n,e,t={},o){const r=(0,Z.A)({...n.query,f:"json",...o,...I(e,o)});return(0,S.Z)(n.path+"/queryRelatedRecords",{...t,query:{...t.query,...r}})})).apply(this,arguments)}var C=u(93792),j=u(46556);function B(n,e,t){return p.apply(this,arguments)}function p(){return p=(0,c.Z)(function*(n,e,t){return e=j.default.from(e),function O(n,e,t){return l.apply(this,arguments)}((0,R.en)(n),e,t).then(r=>{const a=r.data,s={};return Object.keys(a).forEach(i=>s[i]=C.Z.fromJSON(a[i])),s})}),p.apply(this,arguments)}function N(n,e,t){return h.apply(this,arguments)}function h(){return h=(0,c.Z)(function*(n,e,t){return e=j.default.from(e),function b(n,e,t){return f.apply(this,arguments)}((0,R.en)(n),e,{...t}).then(r=>r.data)}),h.apply(this,arguments)}}}]);