"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[3872,318],{95539:(be,ne,i)=>{i.d(ne,{Z:()=>q});var t=i(50484),U=i(25387),te=i(89317),Q=i(51431),V=i(80543),se=(i(14007),i(4703),i(65311),i(21070)),r=i(10141),I=i(81238);let N=class extends((0,U.J)(te.wq)){constructor(Y){super(Y),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,Q.rJ)(this.value,this.unit,"milliseconds")}};(0,t._)([(0,se.J)(I.v,{nonNullable:!0})],N.prototype,"unit",void 0),(0,t._)([(0,V.Cb)({type:Number,json:{write:!0},nonNullable:!0})],N.prototype,"value",void 0),N=(0,t._)([(0,r.j)("esri.TimeInterval")],N);const q=N},5710:(be,ne,i)=>{i.d(ne,{a:()=>P,b:()=>Y,c:()=>U,e:()=>j,f:()=>V,g:()=>E,i:()=>b,j:()=>p,l:()=>de,n:()=>v,s:()=>Q,t:()=>ce});var t=i(89612);function U(n,d){return n[0]=d[0],n[1]=d[1],n[2]=d[2],n[3]=d[3],n}function Q(n,d,g,A,z){return n[0]=d,n[1]=g,n[2]=A,n[3]=z,n}function V(n,d,g){return n[0]=d[0]+g[0],n[1]=d[1]+g[1],n[2]=d[2]+g[2],n[3]=d[3]+g[3],n}function B(n,d,g){return n[0]=d[0]-g[0],n[1]=d[1]-g[1],n[2]=d[2]-g[2],n[3]=d[3]-g[3],n}function R(n,d,g){return n[0]=d[0]*g[0],n[1]=d[1]*g[1],n[2]=d[2]*g[2],n[3]=d[3]*g[3],n}function ee(n,d,g){return n[0]=d[0]/g[0],n[1]=d[1]/g[1],n[2]=d[2]/g[2],n[3]=d[3]/g[3],n}function Y(n,d,g){return n[0]=d[0]*g,n[1]=d[1]*g,n[2]=d[2]*g,n[3]=d[3]*g,n}function w(n,d){const g=d[0]-n[0],A=d[1]-n[1],z=d[2]-n[2],k=d[3]-n[3];return Math.sqrt(g*g+A*A+z*z+k*k)}function u(n,d){const g=d[0]-n[0],A=d[1]-n[1],z=d[2]-n[2],k=d[3]-n[3];return g*g+A*A+z*z+k*k}function b(n){const d=n[0],g=n[1],A=n[2],z=n[3];return Math.sqrt(d*d+g*g+A*A+z*z)}function p(n){const d=n[0],g=n[1],A=n[2],z=n[3];return d*d+g*g+A*A+z*z}function v(n,d){const g=d[0],A=d[1],z=d[2],k=d[3];let F=g*g+A*A+z*z+k*k;return F>0&&(F=1/Math.sqrt(F),n[0]=g*F,n[1]=A*F,n[2]=z*F,n[3]=k*F),n}function E(n,d){return n[0]*d[0]+n[1]*d[1]+n[2]*d[2]+n[3]*d[3]}function de(n,d,g,A){const z=d[0],k=d[1],F=d[2],y=d[3];return n[0]=z+A*(g[0]-z),n[1]=k+A*(g[1]-k),n[2]=F+A*(g[2]-F),n[3]=y+A*(g[3]-y),n}function ce(n,d,g){const A=d[0],z=d[1],k=d[2],F=d[3];return n[0]=g[0]*A+g[4]*z+g[8]*k+g[12]*F,n[1]=g[1]*A+g[5]*z+g[9]*k+g[13]*F,n[2]=g[2]*A+g[6]*z+g[10]*k+g[14]*F,n[3]=g[3]*A+g[7]*z+g[11]*k+g[15]*F,n}function P(n,d){return n[0]===d[0]&&n[1]===d[1]&&n[2]===d[2]&&n[3]===d[3]}function j(n,d){const g=n[0],A=n[1],z=n[2],k=n[3],F=d[0],y=d[1],f=d[2],C=d[3],M=(0,t.bn)();return Math.abs(g-F)<=M*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(A-y)<=M*Math.max(1,Math.abs(A),Math.abs(y))&&Math.abs(z-f)<=M*Math.max(1,Math.abs(z),Math.abs(f))&&Math.abs(k-C)<=M*Math.max(1,Math.abs(k),Math.abs(C))}Object.freeze(Object.defineProperty({__proto__:null,add:V,ceil:function se(n,d){return n[0]=Math.ceil(d[0]),n[1]=Math.ceil(d[1]),n[2]=Math.ceil(d[2]),n[3]=Math.ceil(d[3]),n},copy:U,copyVec3:function te(n,d){return n[0]=d[0],n[1]=d[1],n[2]=d[2],n},dist:w,distance:w,div:ee,divide:ee,dot:E,equals:j,exactEquals:P,floor:function r(n,d){return n[0]=Math.floor(d[0]),n[1]=Math.floor(d[1]),n[2]=Math.floor(d[2]),n[3]=Math.floor(d[3]),n},inverse:function _(n,d){return n[0]=1/d[0],n[1]=1/d[1],n[2]=1/d[2],n[3]=1/d[3],n},len:b,length:b,lerp:de,max:function N(n,d,g){return n[0]=Math.max(d[0],g[0]),n[1]=Math.max(d[1],g[1]),n[2]=Math.max(d[2],g[2]),n[3]=Math.max(d[3],g[3]),n},min:function I(n,d,g){return n[0]=Math.min(d[0],g[0]),n[1]=Math.min(d[1],g[1]),n[2]=Math.min(d[2],g[2]),n[3]=Math.min(d[3],g[3]),n},mul:R,multiply:R,negate:function h(n,d){return n[0]=-d[0],n[1]=-d[1],n[2]=-d[2],n[3]=-d[3],n},normalize:v,random:function Ie(n,d){const g=t.FD;let A,z,k,F,y,f;d=d||1;do{A=2*g()-1,z=2*g()-1,y=A*A+z*z}while(y>=1);do{k=2*g()-1,F=2*g()-1,f=k*k+F*F}while(f>=1);const C=Math.sqrt((1-y)/f);return n[0]=d*A,n[1]=d*z,n[2]=d*k*C,n[3]=d*F*C,n},round:function q(n,d){return n[0]=Math.round(d[0]),n[1]=Math.round(d[1]),n[2]=Math.round(d[2]),n[3]=Math.round(d[3]),n},scale:Y,scaleAndAdd:function L(n,d,g,A){return n[0]=d[0]+g[0]*A,n[1]=d[1]+g[1]*A,n[2]=d[2]+g[2]*A,n[3]=d[3]+g[3]*A,n},set:Q,sqrDist:u,sqrLen:p,squaredDistance:u,squaredLength:p,str:function S(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},sub:B,subtract:B,transformMat4:ce,transformQuat:function K(n,d,g){const A=d[0],z=d[1],k=d[2],F=g[0],y=g[1],f=g[2],C=g[3],M=C*A+y*k-f*z,D=C*z+f*A-F*k,T=C*k+F*z-y*A,Z=-F*A-y*z-f*k;return n[0]=M*C+Z*-F+D*-f-T*-y,n[1]=D*C+Z*-y+T*-F-M*-f,n[2]=T*C+Z*-f+M*-y-D*-F,n[3]=d[3],n}},Symbol.toStringTag,{value:"Module"}))},19799:(be,ne,i)=>{i.d(ne,{F:()=>w,M:()=>t});const t={Base64:0,Hex:1,String:2,Raw:3},U=8,te=(1<<U)-1;function Q(u,b){const p=(65535&u)+(65535&b);return(u>>16)+(b>>16)+(p>>16)<<16|65535&p}function r(u,b,p,h,_,v){return Q(function se(u,b){return u<<b|u>>>32-b}(Q(Q(b,u),Q(h,v)),_),p)}function I(u,b,p,h,_,v,E){return r(b&p|~b&h,u,b,_,v,E)}function N(u,b,p,h,_,v,E){return r(b&h|p&~h,u,b,_,v,E)}function q(u,b,p,h,_,v,E){return r(b^p^h,u,b,_,v,E)}function Y(u,b,p,h,_,v,E){return r(p^(b|~h),u,b,_,v,E)}function w(u,b=t.Hex){const p=b||t.Base64,h=function L(u,b){u[b>>5]|=128<<b%32,u[14+(b+64>>>9<<4)]=b;let p=1732584193,h=-271733879,_=-1732584194,v=271733878;for(let E=0;E<u.length;E+=16){const de=p,Ie=h,ce=_,K=v;p=I(p,h,_,v,u[E],7,-680876936),v=I(v,p,h,_,u[E+1],12,-389564586),_=I(_,v,p,h,u[E+2],17,606105819),h=I(h,_,v,p,u[E+3],22,-1044525330),p=I(p,h,_,v,u[E+4],7,-176418897),v=I(v,p,h,_,u[E+5],12,1200080426),_=I(_,v,p,h,u[E+6],17,-1473231341),h=I(h,_,v,p,u[E+7],22,-45705983),p=I(p,h,_,v,u[E+8],7,1770035416),v=I(v,p,h,_,u[E+9],12,-1958414417),_=I(_,v,p,h,u[E+10],17,-42063),h=I(h,_,v,p,u[E+11],22,-1990404162),p=I(p,h,_,v,u[E+12],7,1804603682),v=I(v,p,h,_,u[E+13],12,-40341101),_=I(_,v,p,h,u[E+14],17,-1502002290),h=I(h,_,v,p,u[E+15],22,1236535329),p=N(p,h,_,v,u[E+1],5,-165796510),v=N(v,p,h,_,u[E+6],9,-1069501632),_=N(_,v,p,h,u[E+11],14,643717713),h=N(h,_,v,p,u[E],20,-373897302),p=N(p,h,_,v,u[E+5],5,-701558691),v=N(v,p,h,_,u[E+10],9,38016083),_=N(_,v,p,h,u[E+15],14,-660478335),h=N(h,_,v,p,u[E+4],20,-405537848),p=N(p,h,_,v,u[E+9],5,568446438),v=N(v,p,h,_,u[E+14],9,-1019803690),_=N(_,v,p,h,u[E+3],14,-187363961),h=N(h,_,v,p,u[E+8],20,1163531501),p=N(p,h,_,v,u[E+13],5,-1444681467),v=N(v,p,h,_,u[E+2],9,-51403784),_=N(_,v,p,h,u[E+7],14,1735328473),h=N(h,_,v,p,u[E+12],20,-1926607734),p=q(p,h,_,v,u[E+5],4,-378558),v=q(v,p,h,_,u[E+8],11,-2022574463),_=q(_,v,p,h,u[E+11],16,1839030562),h=q(h,_,v,p,u[E+14],23,-35309556),p=q(p,h,_,v,u[E+1],4,-1530992060),v=q(v,p,h,_,u[E+4],11,1272893353),_=q(_,v,p,h,u[E+7],16,-155497632),h=q(h,_,v,p,u[E+10],23,-1094730640),p=q(p,h,_,v,u[E+13],4,681279174),v=q(v,p,h,_,u[E],11,-358537222),_=q(_,v,p,h,u[E+3],16,-722521979),h=q(h,_,v,p,u[E+6],23,76029189),p=q(p,h,_,v,u[E+9],4,-640364487),v=q(v,p,h,_,u[E+12],11,-421815835),_=q(_,v,p,h,u[E+15],16,530742520),h=q(h,_,v,p,u[E+2],23,-995338651),p=Y(p,h,_,v,u[E],6,-198630844),v=Y(v,p,h,_,u[E+7],10,1126891415),_=Y(_,v,p,h,u[E+14],15,-1416354905),h=Y(h,_,v,p,u[E+5],21,-57434055),p=Y(p,h,_,v,u[E+12],6,1700485571),v=Y(v,p,h,_,u[E+3],10,-1894986606),_=Y(_,v,p,h,u[E+10],15,-1051523),h=Y(h,_,v,p,u[E+1],21,-2054922799),p=Y(p,h,_,v,u[E+8],6,1873313359),v=Y(v,p,h,_,u[E+15],10,-30611744),_=Y(_,v,p,h,u[E+6],15,-1560198380),h=Y(h,_,v,p,u[E+13],21,1309151649),p=Y(p,h,_,v,u[E+4],6,-145523070),v=Y(v,p,h,_,u[E+11],10,-1120210379),_=Y(_,v,p,h,u[E+2],15,718787259),h=Y(h,_,v,p,u[E+9],21,-343485551),p=Q(p,de),h=Q(h,Ie),_=Q(_,ce),v=Q(v,K)}return[p,h,_,v]}(function V(u){const b=[];for(let p=0,h=u.length*U;p<h;p+=U)b[p>>5]|=(u.charCodeAt(p/U)&te)<<p%32;return b}(u),u.length*U);switch(p){case t.Raw:return h;case t.Hex:return function R(u){const b="0123456789abcdef",p=[];for(let h=0,_=4*u.length;h<_;h++)p.push(b.charAt(u[h>>2]>>h%4*8+4&15)+b.charAt(u[h>>2]>>h%4*8&15));return p.join("")}(h);case t.String:return function B(u){const b=[];for(let p=0,h=32*u.length;p<h;p+=U)b.push(String.fromCharCode(u[p>>5]>>>p%32&te));return b.join("")}(h);case t.Base64:return function ee(u){const h=[];for(let _=0,v=4*u.length;_<v;_+=3){const E=(u[_>>2]>>_%4*8&255)<<16|(u[_+1>>2]>>(_+1)%4*8&255)<<8|u[_+2>>2]>>(_+2)%4*8&255;for(let de=0;de<4;de++)h.push(8*_+6*de>32*u.length?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(E>>6*(3-de)&63))}return h.join("")}(h)}}},38519:(be,ne,i)=>{function t(){return[1,0,0,0,1,0,0,0,1]}function te(R,ee,se,r,I,N,q,Y,L){return[R,ee,se,r,I,N,q,Y,L]}i.d(ne,{Ue:()=>t,Wd:()=>V,al:()=>te});const V=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:V,clone:function U(R){return[R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],R[8]]},create:t,createView:function Q(R,ee){return new Float64Array(R,ee,9)},fromValues:te},Symbol.toStringTag,{value:"Module"}))},686:(be,ne,i)=>{function t(){return[0,0,0,1]}function U(R){return[R[0],R[1],R[2],R[3]]}i.d(ne,{Ue:()=>t,Wd:()=>V,d9:()=>U});const V=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:V,clone:U,create:t,createView:function Q(R,ee){return new Float64Array(R,ee,4)},fromValues:function te(R,ee,se,r){return[R,ee,se,r]}},Symbol.toStringTag,{value:"Module"}))},36510:(be,ne,i)=>{i.d(ne,{Bh:()=>se,I6:()=>_e,Jp:()=>r,Kx:()=>b,Su:()=>h,t8:()=>E,yY:()=>ee});var t=i(38519),U=i(686),te=i(73145),Q=i(89612),V=i(43548),B=i(5710);function ee(y,f,C){C*=.5;const M=Math.sin(C);return y[0]=M*f[0],y[1]=M*f[1],y[2]=M*f[2],y[3]=Math.cos(C),y}function se(y,f){const C=2*Math.acos(f[3]),M=Math.sin(C/2);return M>(0,Q.bn)()?(y[0]=f[0]/M,y[1]=f[1]/M,y[2]=f[2]/M):(y[0]=1,y[1]=0,y[2]=0),C}function r(y,f,C){const M=f[0],D=f[1],T=f[2],Z=f[3],$=C[0],oe=C[1],le=C[2],fe=C[3];return y[0]=M*fe+Z*$+D*le-T*oe,y[1]=D*fe+Z*oe+T*$-M*le,y[2]=T*fe+Z*le+M*oe-D*$,y[3]=Z*fe-M*$-D*oe-T*le,y}function L(y,f,C,M){const D=f[0],T=f[1],Z=f[2],$=f[3];let oe,le,fe,me,Re,je=C[0],Pe=C[1],Se=C[2],Be=C[3];return le=D*je+T*Pe+Z*Se+$*Be,le<0&&(le=-le,je=-je,Pe=-Pe,Se=-Se,Be=-Be),1-le>(0,Q.bn)()?(oe=Math.acos(le),fe=Math.sin(oe),me=Math.sin((1-M)*oe)/fe,Re=Math.sin(M*oe)/fe):(me=1-M,Re=M),y[0]=me*D+Re*je,y[1]=me*T+Re*Pe,y[2]=me*Z+Re*Se,y[3]=me*$+Re*Be,y}function b(y,f){return y[0]=-f[0],y[1]=-f[1],y[2]=-f[2],y[3]=f[3],y}function p(y,f){const C=f[0]+f[4]+f[8];let M;if(C>0)M=Math.sqrt(C+1),y[3]=.5*M,M=.5/M,y[0]=(f[5]-f[7])*M,y[1]=(f[6]-f[2])*M,y[2]=(f[1]-f[3])*M;else{let D=0;f[4]>f[0]&&(D=1),f[8]>f[3*D+D]&&(D=2);const T=(D+1)%3,Z=(D+2)%3;M=Math.sqrt(f[3*D+D]-f[3*T+T]-f[3*Z+Z]+1),y[D]=.5*M,M=.5/M,y[3]=(f[3*T+Z]-f[3*Z+T])*M,y[T]=(f[3*T+D]+f[3*D+T])*M,y[Z]=(f[3*Z+D]+f[3*D+Z])*M}return y}function h(y,f,C,M){const D=.5*Math.PI/180;f*=D,C*=D,M*=D;const T=Math.sin(f),Z=Math.cos(f),$=Math.sin(C),oe=Math.cos(C),le=Math.sin(M),fe=Math.cos(M);return y[0]=T*oe*fe-Z*$*le,y[1]=Z*$*fe+T*oe*le,y[2]=Z*oe*le-T*$*fe,y[3]=Z*oe*fe+T*$*le,y}const v=B.c,E=B.s,de=B.f,Ie=r,ce=B.b,K=B.g,S=B.l,P=B.i,j=P,J=B.j,X=J,W=B.n,_e=B.a,ve=B.e,ae=(0,te.Ue)(),ye=(0,te.al)(1,0,0),n=(0,te.al)(0,1,0),g=(0,U.Ue)(),A=(0,U.Ue)(),k=(0,t.Ue)();Object.freeze(Object.defineProperty({__proto__:null,add:de,calculateW:function Y(y,f){const C=f[0],M=f[1],D=f[2];return y[0]=C,y[1]=M,y[2]=D,y[3]=Math.sqrt(Math.abs(1-C*C-M*M-D*D)),y},conjugate:b,copy:v,dot:K,equals:ve,exactEquals:_e,fromEuler:h,fromMat3:p,getAxisAngle:se,identity:function R(y){return y[0]=0,y[1]=0,y[2]=0,y[3]=1,y},invert:function u(y,f){const C=f[0],M=f[1],D=f[2],T=f[3],Z=C*C+M*M+D*D+T*T,$=Z?1/Z:0;return y[0]=-C*$,y[1]=-M*$,y[2]=-D*$,y[3]=T*$,y},len:j,length:P,lerp:S,mul:Ie,multiply:r,normalize:W,random:function w(y){const f=Q.FD,C=f(),M=f(),D=f(),T=Math.sqrt(1-C),Z=Math.sqrt(C);return y[0]=T*Math.sin(2*Math.PI*M),y[1]=T*Math.cos(2*Math.PI*M),y[2]=Z*Math.sin(2*Math.PI*D),y[3]=Z*Math.cos(2*Math.PI*D),y},rotateX:function I(y,f,C){C*=.5;const M=f[0],D=f[1],T=f[2],Z=f[3],$=Math.sin(C),oe=Math.cos(C);return y[0]=M*oe+Z*$,y[1]=D*oe+T*$,y[2]=T*oe-D*$,y[3]=Z*oe-M*$,y},rotateY:function N(y,f,C){C*=.5;const M=f[0],D=f[1],T=f[2],Z=f[3],$=Math.sin(C),oe=Math.cos(C);return y[0]=M*oe-T*$,y[1]=D*oe+Z*$,y[2]=T*oe+M*$,y[3]=Z*oe-D*$,y},rotateZ:function q(y,f,C){C*=.5;const M=f[0],D=f[1],T=f[2],Z=f[3],$=Math.sin(C),oe=Math.cos(C);return y[0]=M*oe+D*$,y[1]=D*oe-M*$,y[2]=T*oe+Z*$,y[3]=Z*oe-T*$,y},rotationTo:function Ee(y,f,C){const M=(0,V.m)(f,C);return M<-.999999?((0,V.b)(ae,ye,f),(0,V.H)(ae)<1e-6&&(0,V.b)(ae,n,f),(0,V.n)(ae,ae),ee(y,ae,Math.PI),y):M>.999999?(y[0]=0,y[1]=0,y[2]=0,y[3]=1,y):((0,V.b)(ae,f,C),y[0]=ae[0],y[1]=ae[1],y[2]=ae[2],y[3]=1+M,W(y,y))},scale:ce,set:E,setAxes:function z(y,f,C,M){const D=k;return D[0]=C[0],D[3]=C[1],D[6]=C[2],D[1]=M[0],D[4]=M[1],D[7]=M[2],D[2]=-f[0],D[5]=-f[1],D[8]=-f[2],W(y,p(y,D))},setAxisAngle:ee,slerp:L,sqlerp:function d(y,f,C,M,D,T){return L(g,f,D,T),L(A,C,M,T),L(y,g,A,2*T*(1-T)),y},sqrLen:X,squaredLength:J,str:function _(y){return"quat("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+")"}},Symbol.toStringTag,{value:"Module"}))},79232:(be,ne,i)=>{i.r(ne),i.d(ne,{default:()=>jt});var t=i(50484),U=i(62691),te=i(34411),Q=i(95539),V=i(83944),B=i(57964),R=i(4703),ee=i(3233),se=i(79412),r=i(80543),I=i(1535),Y=(i(65311),i(14007),i(62185)),L=i(10141),w=i(43548),u=i(73145),b=i(26894),p=i(95060),h=i(29674),_=i(4257),v=i(27426),E=i(80099),de=i(70509),Ie=i(29717),ce=i(38866),K=i(89713),S=i(56956),P=i(81247),j=i(97403),J=i(25387),X=i(32017),W=i(89317),_e=i(42214),ve=i(36510),Ee=i(686),ae=i(89612);const ye=(0,u.Ue)(),n=(0,Ee.Ue)(),d=(0,Ee.Ue)(),g=(0,Ee.Ue)(),A=(0,u.al)(0,0,1),z=(0,u.al)(0,1,0),k=(0,u.al)(1,0,0);function F(o){(0,w.c)(ye,o),(0,w.n)(ye,ye);const c=Math.atan2(ye[1],ye[0]),m=(0,ve.yY)((0,Ee.Ue)(),A,-c);(0,w.u)(ye,ye,m);const x=-1*Math.atan2(ye[2],ye[0]);return[(0,ae.Dc)(c)+270,(0,ae.Dc)(x)+90]}function y(o,c){return(0,ve.yY)(d,A,(0,ae.c$)(o-270)),(0,ve.yY)(g,z,(0,ae.c$)(c-90)),(0,ve.Jp)(n,d,g),(0,w.c)(ye,k),(0,w.u)(ye,ye,n),(0,w.n)(ye,ye),[ye[0],ye[1],ye[2]]}var f=i(73018);let C=class extends((0,J.J)(W.wq)){constructor(o){super(o),this.enabled=!0,this.label="",this.normal=null,this.point=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[o,c]=F(this.normal);return X.BV.normalize((0,I.q9)(o),0,!0)}set orientation(o){const c=y(o,this.tilt);this._set("normal",c),this._set("orientation",o)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[o,c]=F(this.normal);return X.BV.normalize((0,I.q9)(c),0,!0)}set tilt(o){const c=y(this.orientation,o);this._set("normal",c),this._set("tilt",o)}};(0,t._)([(0,r.Cb)({type:Boolean,json:{write:!0}})],C.prototype,"enabled",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:!0}})],C.prototype,"label",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,f.p)(o=>X.BV.normalize((0,I.q9)(o),0,!0))],C.prototype,"orientation",null),(0,t._)([(0,r.Cb)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,f.p)(o=>X.BV.normalize((0,I.q9)(o),0,!0))],C.prototype,"tilt",null),(0,t._)([(0,r.Cb)({type:[Number],json:{write:!0}})],C.prototype,"normal",void 0),(0,t._)([(0,r.Cb)({type:[Number],json:{write:!0}})],C.prototype,"point",void 0),C=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelSlice")],C);const M=C;var D=i(19677);let T=class extends((0,J.J)(W.wq)){constructor(){super(...arguments),this.enabled=!0,this.href=null,this.id=null,this.label="",this.normal=null,this.point=null,this.sizeInPixel=null,this.slices=null,this.timeId=0,this.variableId=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[o,c]=F(this.normal);return X.BV.normalize((0,I.q9)(o),0,!0)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[o,c]=F(this.normal);return X.BV.normalize((0,I.q9)(c),0,!0)}};(0,t._)([(0,r.Cb)({type:Boolean,json:{default:!0,write:!0}})],T.prototype,"enabled",void 0),(0,t._)([(0,r.Cb)({type:String,json:{origins:{service:{read:D.r}},write:{enabled:!0,isRequired:!0}}}),(0,_e.B)({origins:["web-scene"],type:"resource",prefix:"sections",compress:!0})],T.prototype,"href",void 0),(0,t._)([(0,r.Cb)({type:I.z8,json:{write:{enabled:!0,isRequired:!0}}})],T.prototype,"id",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:!0}})],T.prototype,"label",void 0),(0,t._)([(0,r.Cb)({type:Number,clonable:!1,readOnly:!0,range:{min:0,max:360}})],T.prototype,"orientation",null),(0,t._)([(0,r.Cb)({type:Number,clonable:!1,readOnly:!0,range:{min:0,max:360}})],T.prototype,"tilt",null),(0,t._)([(0,r.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],T.prototype,"normal",void 0),(0,t._)([(0,r.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],T.prototype,"point",void 0),(0,t._)([(0,r.Cb)({type:[I.z8],json:{write:{enabled:!0,isRequired:!0}}})],T.prototype,"sizeInPixel",void 0),(0,t._)([(0,r.Cb)({type:[M],json:{write:!0}})],T.prototype,"slices",void 0),(0,t._)([(0,r.Cb)({type:I.z8,json:{default:0,write:!0}})],T.prototype,"timeId",void 0),(0,t._)([(0,r.Cb)({type:I.z8,json:{write:{enabled:!0,isRequired:!0}}})],T.prototype,"variableId",void 0),T=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelSection")],T);const Z=T;let $=class extends W.wq{constructor(){super(...arguments),this.diffuseFactor=.5,this.specularFactor=.5}};(0,t._)([(0,r.Cb)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],$.prototype,"diffuseFactor",void 0),(0,t._)([(0,r.Cb)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],$.prototype,"specularFactor",void 0),$=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelSimpleShading")],$);const oe=$;let le=class extends W.wq{constructor(){super(...arguments),this.continuity=null,this.hasNoData=!1,this.noData=0,this.offset=0,this.scale=1,this.type=null}};(0,t._)([(0,r.Cb)({type:["discrete","continuous"],json:{write:!0}})],le.prototype,"continuity",void 0),(0,t._)([(0,r.Cb)({type:Boolean,json:{write:!0}})],le.prototype,"hasNoData",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{write:!0}})],le.prototype,"noData",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{write:!0}})],le.prototype,"offset",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{write:!0}})],le.prototype,"scale",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],le.prototype,"type",void 0),le=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelFormat")],le);const fe=le;let me=class extends W.wq{constructor(){super(...arguments),this.id=null,this.description="",this.name=null,this.originalFormat=null,this.renderingFormat=null,this.unit="",this.volumeId=0,this.type=null}};(0,t._)([(0,r.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],me.prototype,"id",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:!0}})],me.prototype,"description",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],me.prototype,"name",void 0),(0,t._)([(0,r.Cb)({type:fe,json:{write:!0}})],me.prototype,"originalFormat",void 0),(0,t._)([(0,r.Cb)({type:fe,json:{write:{enabled:!0,isRequired:!0}}})],me.prototype,"renderingFormat",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:!0}})],me.prototype,"unit",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{write:!0}})],me.prototype,"volumeId",void 0),(0,t._)([(0,r.Cb)({type:["stc-hot-spot-results","stc-cluster-outlier-results","stc-estimated-bin","generic-nearest-interpolated"],json:{write:!0}})],me.prototype,"type",void 0),me=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelVariable")],me);const Re=me;var je=i(34222),Pe=i(66599);let Se=class extends((0,J.J)(W.wq)){constructor(){super(...arguments),this.color=Pe.Z.fromArray([0,0,0,0]),this.value=0,this.enabled=!0,this.label="",this.colorLocked=!1}};(0,t._)([(0,r.Cb)({type:Pe.Z,json:{type:[I.z8],write:{enabled:!0,isRequired:!0}}})],Se.prototype,"color",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Se.prototype,"value",void 0),(0,t._)([(0,r.Cb)({type:Boolean,json:{default:!0,write:!0}})],Se.prototype,"enabled",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:!0}})],Se.prototype,"label",void 0),(0,t._)([(0,r.Cb)({type:Boolean,json:{default:!1,write:!0}})],Se.prototype,"colorLocked",void 0),Se=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelIsosurface")],Se);const Be=Se;var Xe=i(18626),Le=i(55117);let Fe=class extends((0,J.J)(W.wq)){constructor(){super(...arguments),this.color=null,this.position=0}};(0,t._)([(0,r.Cb)({type:Pe.Z,json:{type:[I.z8],write:{enabled:!0,isRequired:!0}}})],Fe.prototype,"color",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Fe.prototype,"position",void 0),Fe=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelColorStop")],Fe);const it=Fe;let $e=class extends((0,J.J)(W.wq)){constructor(){super(...arguments),this.opacity=1,this.position=0}};(0,t._)([(0,r.Cb)({type:Number,json:{name:"alpha",write:{enabled:!0,isRequired:!0}}})],$e.prototype,"opacity",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],$e.prototype,"position",void 0),$e=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelOpacityStop")],$e);const st=$e;let Je=class extends((0,J.J)(W.wq)){constructor(){super(...arguments),this.enabled=!1,this.range=null}};(0,t._)([(0,r.Cb)({type:Boolean,json:{default:!1,write:!0}})],Je.prototype,"enabled",void 0),(0,t._)([(0,r.Cb)({type:[Number],json:{write:!0}})],Je.prototype,"range",void 0),Je=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelRangeFilter")],Je);const bt=Je;var xe,o;(o=xe||(xe={}))[o.Color=1]="Color",o[o.Alpha=2]="Alpha",o[o.Both=3]="Both";let De=class extends((0,J.J)(W.wq)){constructor(o){super(o),this.interpolation=null,this.stretchRange=null,this.rangeFilter=null,this._colorMapSize=256,this.colorStops=new(V.Z.ofType(it)),this.opacityStops=new(V.Z.ofType(st))}set colorStops(o){this._set("colorStops",(0,Xe.Z)(o,this._get("colorStops"),V.Z.ofType(it)))}set opacityStops(o){this._set("opacityStops",(0,Xe.Z)(o,this._get("opacityStops"),V.Z.ofType(st)))}getPreviousNext(o,c,m){let x=o;for(;--x>0&&c[x].type!==m&&c[x].type!==xe.Both;);let O=o;const G=c.length;for(;++O<G&&c[O].type!==m&&c[O].type!==xe.Both;);return[x,O]}get rasterizedTransferFunction(){const o=[];if(this.colorStops.length<2)return o;const c=[],m=[];for(const re of this.colorStops){if(!re.color)return o;m.push({color:{r:re.color.r,g:re.color.g,b:re.color.b,a:Math.round(255*(1-re.color.a))},position:re.position,type:xe.Color})}if(0===this.opacityStops.length)for(const re of m)c.push({color:re.color,position:re.position});else{for(const ie of this.opacityStops){const ue=(0,Le.uZ)(ie.position,0,1),he=Math.round(255*(0,Le.uZ)(1-ie.opacity,0,1));let ge=!1;for(const pe of m)if(pe.type===xe.Color&&Math.abs(pe.position-ue)<1e-5){pe.color.a=he,pe.type=xe.Both,ge=!0;break}ge||m.push({color:{r:0,g:0,b:0,a:he},position:ie.position,type:xe.Alpha})}m.sort((ie,ue)=>ie.position<ue.position?-1:1);const re=m.length;for(let ie=0;ie<re;++ie){const ue=m[ie];if(ue.type!==xe.Both)if(ue.type===xe.Color){const[he,ge]=this.getPreviousNext(ie,m,xe.Alpha);ue.color.a=-1!==he&&ge!==re?Math.round((0,Le.t7)(m[he].color.a,m[ge].color.a,(ue.position-m[he].position)/(m[ge].position-m[he].position))):-1!==he?m[he].color.a:m[ge].color.a}else{const[he,ge]=this.getPreviousNext(ie,m,xe.Color);if(-1!==he&&ge!==re){const pe=(ue.position-m[he].position)/(m[ge].position-m[he].position),Ue=m[he].color,et=m[ge].color;qe.forEach(we=>{ue.color[we]=Math.round((0,Le.t7)(Ue[we],et[we],pe))})}else qe.forEach(-1!==he?pe=>{ue.color[pe]=m[he].color[pe]}:pe=>{ue.color[pe]=m[ge].color[pe]})}}for(const ie of m)c.push({color:ie.color,position:ie.position})}c[0].position=0,c[c.length-1].position=1;let O=0,G=1;for(let re=0;re<this._colorMapSize;++re){const ie=re/this._colorMapSize;for(;ie>c[G].position;)O=G++;const ue=(ie-c[O].position)/(c[G].position-c[O].position),he=c[O].color,ge=c[G].color,pe=new Pe.Z;qe.forEach(Ue=>{pe[Ue]=Math.round((0,Le.t7)(he[Ue],ge[Ue],ue))}),pe.a=(0,Le.uZ)(1-(0,Le.t7)(he.a,ge.a,ue)/255,0,1),o.push(pe)}return o}getColorForContinuousDataValue(o,c){const m=this.rasterizedTransferFunction;if(this.colorStops.length<2||!Array.isArray(this.stretchRange)||this.stretchRange.length<2||m.length<256)return null;let x=this.stretchRange[0],O=this.stretchRange[1];if(x>O){const re=x;x=O,O=re}o=(0,Le.uZ)(o,x,O);const G=m[Math.round((o-x)/(O-x)*(this._colorMapSize-1))].clone();return c||(G.a=1),G}};(0,t._)([(0,r.Cb)({type:["linear","nearest"],json:{write:!0}})],De.prototype,"interpolation",void 0),(0,t._)([(0,r.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],De.prototype,"stretchRange",void 0),(0,t._)([(0,r.Cb)({type:V.Z.ofType(it),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.colorStops&&this.colorStops.length>0}}}}})],De.prototype,"colorStops",null),(0,t._)([(0,r.Cb)({type:V.Z.ofType(st),json:{read:{source:"alphaStops"},write:{enabled:!0,target:"alphaStops",overridePolicy(){return{enabled:!!this.opacityStops&&this.opacityStops.length>0}}}}})],De.prototype,"opacityStops",null),(0,t._)([(0,r.Cb)({type:bt,json:{write:!0}})],De.prototype,"rangeFilter",void 0),(0,t._)([(0,r.Cb)({type:[Pe.Z],clonable:!1,json:{read:!1}})],De.prototype,"rasterizedTransferFunction",null),De=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelTransferFunctionStyle")],De);const Et=De,qe=["r","g","b"];let Ne=class extends((0,J.J)(W.wq)){constructor(){super(...arguments),this.color=Pe.Z.fromArray([0,0,0,0]),this.value=0,this.enabled=!0,this.label=""}};(0,t._)([(0,r.Cb)({type:Pe.Z,json:{type:[I.z8],write:{enabled:!0,isRequired:!0}}})],Ne.prototype,"color",void 0),(0,t._)([(0,r.Cb)({type:I.z8,json:{write:{enabled:!0,isRequired:!0}}})],Ne.prototype,"value",void 0),(0,t._)([(0,r.Cb)({type:Boolean,json:{default:!0,write:!0}})],Ne.prototype,"enabled",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:!0}})],Ne.prototype,"label",void 0),Ne=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelUniqueValue")],Ne);const yt=Ne;var nt;let Ae=nt=class extends W.wq{constructor(o){super(o),this.variableId=0,this.label="",this.transferFunction=null,this.uniqueValues=null,this.isosurfaces=null,this.uniqueValues=new(V.Z.ofType(yt)),this.isosurfaces=new(V.Z.ofType(Be))}clone(){return new nt({variableId:this.variableId,label:this.label,transferFunction:(0,je.d9)(this.transferFunction),uniqueValues:(0,je.d9)(this.uniqueValues),isosurfaces:(0,je.d9)(this.isosurfaces)})}};(0,t._)([(0,r.Cb)({type:I.z8,json:{write:{enabled:!0,isRequired:!0}}})],Ae.prototype,"variableId",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:!0}})],Ae.prototype,"label",void 0),(0,t._)([(0,r.Cb)({type:Et,json:{write:{enabled:!0,overridePolicy(){return{enabled:!this.uniqueValues||this.uniqueValues.length<1}}}}})],Ae.prototype,"transferFunction",void 0),(0,t._)([(0,r.Cb)({type:V.Z.ofType(yt),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.uniqueValues&&this.uniqueValues.length>0}}}}})],Ae.prototype,"uniqueValues",void 0),(0,t._)([(0,r.Cb)({type:V.Z.ofType(Be),json:{write:{enabled:!0,overridePolicy(){return{enabled:(!this.uniqueValues||this.uniqueValues.length<1)&&!!this.isosurfaces&&this.isosurfaces.length>0}}}}})],Ae.prototype,"isosurfaces",void 0),Ae=nt=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelVariableStyle")],Ae);const ht=Ae;var _t=i(51431),lt=i(44107),mt=i(43814),St=i(33721);function vt(o){const c=/^(days?|hours?|minutes?|seconds?|d|h|m|s) since (\d{1,4})-(\d{1,2})-(\d{1,2})[ |T](\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[\s|Z]?(([+|\-|\s?])(\d{1,2}):(\d{1,2}))?$/i.exec(o);if(null==c)return{didParse:!1};const[,m,x,O,G,re,ie,ue,he,ge,pe,Ue,et]=c;let we="seconds";const pt=m.charAt(0).toLowerCase();"d"===pt?we="days":"h"===pt?we="hours":"m"===pt&&(we="minutes");const Ge=parseInt(x,10);if(Number.isNaN(Ge))return{didParse:!1};const Ve=parseInt(O,10);if(Number.isNaN(Ve)||Ve<1||Ve>12)return{didParse:!1};const ze=parseInt(G,10);if(Number.isNaN(ze)||ze<1||ze>31)return{didParse:!1};if(2===Ve){const Qe=Ge%4==0&&(Ge%100!=0||Ge%400==0);if(Qe&&ze>29||!Qe&&ze>28)return{didParse:!1}}else if((4===Ve||6===Ve||9===Ve||11===Ve)&&ze>30)return{didParse:!1};const tt=parseInt(re,10);if(Number.isNaN(tt)||tt<0||tt>23)return{didParse:!1};const ot=parseInt(ie,10);if(Number.isNaN(ot)||ot<0||ot>59)return{didParse:!1};const rt=parseInt(ue,10);if(Number.isNaN(rt)||rt<0||rt>59)return{didParse:!1};let dt=1,Ke=0,We=0;if(pe&&(dt="-"===pe?-1:1),Ue){if(Ke=parseInt(Ue,10),Number.isNaN(Ke)||Ke<0)return{didParse:!1};if(0!==Ke){const Qe=dt*Ke;if(Qe<-12||Qe>14)return{didParse:!1}}}if(et&&(We=parseInt(et,10),Number.isNaN(We)||We<0||We>59))return{didParse:!1};const Dt=`${Ge}`.padStart(4,"0"),Ot=`${Ve}`.padStart(2,"0"),Tt=`${ze}`.padStart(2,"0"),Vt=`${tt}`.padStart(2,"0"),Rt=`${ot}`.padStart(2,"0"),Lt=`${rt}`.padStart(2,"0");let Ye="Z";return 0===Ke&&0===We||(Ye=dt>0?"+":"-",Ye+=`${Ke}`.padStart(2,"0"),Ye+=":",Ye+=`${We}`.padStart(2,"0")),{didParse:!0,unit:we,reference:new Date(`${Dt}-${Ot}-${Tt}T${Vt}:${Rt}:${Lt}.000${Ye}`)}}let ke=class extends W.wq{constructor(){super(...arguments),this.values=null}};(0,t._)([(0,r.Cb)({type:[Number],json:{write:!0}})],ke.prototype,"values",void 0),ke=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelIrregularSpacing")],ke);const Mt=ke;let He=class extends W.wq{constructor(){super(...arguments),this.scale=1,this.offset=0}};(0,t._)([(0,r.Cb)({type:Number,json:{write:!0}})],He.prototype,"scale",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{write:!0}})],He.prototype,"offset",void 0),He=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelRegularSpacing")],He);const Ct=He;let Me=class extends W.wq{constructor(){super(...arguments),this.irregularSpacing=null,this.isPositiveUp=!0,this.isWrappedDateLine=!1,this.label=null,this.name=null,this.quantity=null,this.regularSpacing=null,this.size=0,this.unit=null}get isRegular(){return(null==this.irregularSpacing||void 0===this.irregularSpacing)&&null!==this.regularSpacing}getRange(){return this.isRegular?[this.regularSpacing.offset,this.regularSpacing.offset+this.regularSpacing.scale*(this.size-1)]:Array.isArray(this.irregularSpacing?.values)&&this.irregularSpacing.values.length>1?[this.irregularSpacing.values[0],this.irregularSpacing.values[this.irregularSpacing.values.length-1]]:[0,0]}};(0,t._)([(0,r.Cb)({type:Mt,json:{write:!0}})],Me.prototype,"irregularSpacing",void 0),(0,t._)([(0,r.Cb)({type:Boolean,json:{write:!0}})],Me.prototype,"isPositiveUp",void 0),(0,t._)([(0,r.Cb)({type:Boolean,json:{write:!0}})],Me.prototype,"isWrappedDateLine",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:!0}})],Me.prototype,"label",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:!0}})],Me.prototype,"name",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:!0}})],Me.prototype,"quantity",void 0),(0,t._)([(0,r.Cb)({type:Ct,json:{write:!0}})],Me.prototype,"regularSpacing",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{write:!0}})],Me.prototype,"size",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:!0}})],Me.prototype,"unit",void 0),(0,t._)([(0,r.Cb)({type:Boolean,json:{read:!1}})],Me.prototype,"isRegular",null),Me=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelDimension")],Me);const Pt=Me;let Ce=class extends W.wq{constructor(o){super(o),this.id=0,this.dimensions=null,this.spatialReference=mt.Z.WGS84}get zDimension(){if(!this.dimensions||!Array.isArray(this.dimensions)||4!==this.dimensions.length)return-1;for(let o=2;o<4;++o)if(this.dimensions[o].size>0)return o;return-1}get isValid(){return!(!this.dimensions||!Array.isArray(this.dimensions)||4!==this.dimensions.length||this.dimensions[0].size<1||this.dimensions[1].size<1||-1===this.zDimension||this.dimensions[this.zDimension].size<1)}get originInLayerSpace3D(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const o=this.dimensions[0].getRange(),c=this.dimensions[1].getRange(),m=this.dimensions[2],x=m.isRegular?m.getRange():[0,m.size];return[o[0],c[0],x[0]]}get voxelSizeInLayerSpaceSigned(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const o=this.dimensions[0].getRange(),c=this.dimensions[1].getRange(),m=this.dimensions[2],x=m.isRegular?m.getRange():[0,m.size],O=[this.sizeInVoxels[0],this.sizeInVoxels[1],this.sizeInVoxels[2]];for(let G=0;G<3;++G)O[G]<2?O[G]=1:O[G]-=1;return m.isRegular&&!m.isPositiveUp&&(O[2]*=-1),[(o[1]-o[0])/O[0],(c[1]-c[0])/O[1],(x[1]-x[0])/O[2]]}get volumeType(){if(this.isValid){const o=this.dimensions[2].size>0;let c=this.dimensions[3].size>0;if(c){const m=this.dimensions[3];c="time"===m.quantity,c&&null!==m.unit&&(c=vt(m.unit).didParse)}if(!o&&c)return"xyt";if(o&&c)return"xyzt"}return"xyz"}get sizeInVoxels(){return this.isValid?[this.dimensions[0].size,this.dimensions[1].size,this.dimensions[this.zDimension].size]:[0,0,0]}get timeStops(){if("xyzt"!==this.volumeType)return[];const o=this.dimensions[3],c=[],m=vt(o.unit);if(m.didParse)if(o.isRegular){const x=o.regularSpacing?.offset??0,O=o.regularSpacing?.scale||1;for(let G=0;G<o.size;++G)c.push((0,_t.kO)(m.reference,x+O*G,m.unit))}else if(Array.isArray(o.irregularSpacing?.values)&&o.irregularSpacing.values.length>0)for(let x=0;x<o.irregularSpacing.values.length;++x)c.push((0,_t.kO)(m.reference,o.irregularSpacing.values[x],m.unit));return c}computeVoxelSpaceLocation(o){if(!this.isValid)return[0,0,0];if("xyt"===this.volumeType)return R.Z.getLogger(this).error("computeVoxelSpacePosition cannot be used with XYT volumes."),[0,0,0];if(!(0,St.fS)(this.spatialReference,o.spatialReference))return R.Z.getLogger(this).error("pos argument should have the same spatial reference as the VoxelLayer."),[0,0,0];const c=(0,u.al)(o.x,o.y,o.z??0);(0,w.f)(c,c,this.originInLayerSpace3D),(0,w.D)(c,c,this.voxelSizeInLayerSpaceSigned);const m=this.dimensions[this.zDimension];if(!m.isRegular&&Array.isArray(m.irregularSpacing?.values)&&m.irregularSpacing.values.length>1){const x=o.z??0,O=m.irregularSpacing.values,G=m.isPositiveUp?1:-1,re=O.reduce((ie,ue)=>Math.abs(G*ue-x)<Math.abs(G*ie-x)?ue:ie);for(let ie=0;ie<O.length;++ie)if(O[ie]===re){c[2]=ie;break}}return[c[0],c[1],c[2]]}computeLayerSpaceLocation(o){if(!this.isValid)return new lt.Z({x:0,y:0,spatialReference:this.spatialReference});const c=(0,u.nI)(o);if((0,w.B)(c,c,this.voxelSizeInLayerSpaceSigned),(0,w.g)(c,c,this.originInLayerSpace3D),"xyt"===this.volumeType)return new lt.Z({x:c[0],y:c[1],spatialReference:this.spatialReference});const m=this.dimensions[this.zDimension];return m.isRegular||Array.isArray(m.irregularSpacing?.values)&&(c[2]=o[2]<0?m.irregularSpacing.values[0]:o[2]<m.irregularSpacing.values.length?m.irregularSpacing.values[o[2]]:m.irregularSpacing.values[m.irregularSpacing.values.length-1],m.isPositiveUp||(c[2]*=-1)),new lt.Z({x:c[0],y:c[1],z:c[2],spatialReference:this.spatialReference})}};(0,t._)([(0,r.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Ce.prototype,"id",void 0),(0,t._)([(0,r.Cb)({type:[Pt],json:{write:{enabled:!0,isRequired:!0}}})],Ce.prototype,"dimensions",void 0),(0,t._)([(0,r.Cb)({type:mt.Z,json:{read:{enabled:!1}}})],Ce.prototype,"spatialReference",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{read:!1}})],Ce.prototype,"zDimension",null),(0,t._)([(0,r.Cb)({type:[Boolean],json:{read:!1}})],Ce.prototype,"isValid",null),(0,t._)([(0,r.Cb)({type:[Number],json:{read:!1}})],Ce.prototype,"originInLayerSpace3D",null),(0,t._)([(0,r.Cb)({type:[Number],json:{read:!1}})],Ce.prototype,"voxelSizeInLayerSpaceSigned",null),(0,t._)([(0,r.Cb)({type:["xyz","xyzt","xyt"],json:{read:{enabled:!1}}})],Ce.prototype,"volumeType",null),(0,t._)([(0,r.Cb)({type:[Number],json:{read:!1}})],Ce.prototype,"sizeInVoxels",null),(0,t._)([(0,r.Cb)({type:[Date],json:{read:!1,write:!1}})],Ce.prototype,"timeStops",null),Ce=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelVolume")],Ce);const ft=Ce;var at;let Ze=at=class extends W.wq{constructor(){super(...arguments),this.apronWidth=1,this.brickSize=[32,32,32],this.maxLodLevel=0,this.nodeSize=[4,4,4]}isValid(){const o=new at;return o.apronWidth===this.apronWidth&&o.maxLodLevel===this.maxLodLevel&&!!this.brickSize&&!!this.nodeSize&&!(!Array.isArray(this.brickSize)||!Array.isArray(this.nodeSize))&&3===this.brickSize.length&&3===this.nodeSize.length&&32===this.brickSize[0]&&32===this.brickSize[1]&&32===this.brickSize[2]&&4===this.nodeSize[0]&&4===this.nodeSize[1]&&4===this.nodeSize[2]}};(0,t._)([(0,r.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Ze.prototype,"apronWidth",void 0),(0,t._)([(0,r.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],Ze.prototype,"brickSize",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Ze.prototype,"maxLodLevel",void 0),(0,t._)([(0,r.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],Ze.prototype,"nodeSize",void 0),Ze=at=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelVolumeIndex")],Ze);const xt=Ze;let Oe=class extends((0,J.J)(W.wq)){constructor(o){super(o),this.enabled=!0,this.label="",this.normal=null,this.point=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[o,c]=F(this.normal);return X.BV.normalize((0,I.q9)(o),0,!0)}set orientation(o){const c=y(o,this.tilt);this._set("normal",c),this._set("orientation",o)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[o,c]=F(this.normal);return X.BV.normalize((0,I.q9)(c),0,!0)}set tilt(o){const c=y(this.orientation,o);this._set("normal",c),this._set("tilt",o)}};(0,t._)([(0,r.Cb)({type:Boolean,json:{default:!0,write:!0}})],Oe.prototype,"enabled",void 0),(0,t._)([(0,r.Cb)({type:String,json:{write:!0}})],Oe.prototype,"label",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,f.p)(o=>X.BV.normalize((0,I.q9)(o),0,!0))],Oe.prototype,"orientation",null),(0,t._)([(0,r.Cb)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,f.p)(o=>X.BV.normalize((0,I.q9)(o),0,!0))],Oe.prototype,"tilt",null),(0,t._)([(0,r.Cb)({type:[Number],json:{write:!0}})],Oe.prototype,"normal",void 0),(0,t._)([(0,r.Cb)({type:[Number],json:{write:!0}})],Oe.prototype,"point",void 0),Oe=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelDynamicSection")],Oe);const ut=Oe;var ct;let Te=ct=class extends W.wq{constructor(o){super(o),this.volumeId=0,this.verticalExaggeration=1,this.exaggerationMode="scale-height",this.verticalOffset=0,this.slices=new(V.Z.ofType(M)),this.dynamicSections=new(V.Z.ofType(ut))}set slices(o){this._set("slices",(0,Xe.Z)(o,this._get("slices"),V.Z.ofType(M)))}set dynamicSections(o){this._set("dynamicSections",(0,Xe.Z)(o,this._get("dynamicSections"),V.Z.ofType(ut)))}clone(){return new ct({volumeId:this.volumeId,verticalExaggeration:this.verticalExaggeration,exaggerationMode:this.exaggerationMode,verticalOffset:this.verticalOffset,slices:(0,je.d9)(this.slices),dynamicSections:(0,je.d9)(this.dynamicSections)})}};(0,t._)([(0,r.Cb)({type:I.z8,json:{write:{enabled:!0,isRequired:!0}}})],Te.prototype,"volumeId",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{default:1,write:!0}})],Te.prototype,"verticalExaggeration",void 0),(0,t._)([(0,r.Cb)({type:["scale-position","scale-height"],json:{default:"scale-height",write:!0}})],Te.prototype,"exaggerationMode",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{default:0,write:!0}})],Te.prototype,"verticalOffset",void 0),(0,t._)([(0,r.Cb)({type:V.Z.ofType(M),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.slices&&this.slices.length>0}}}}})],Te.prototype,"slices",null),(0,t._)([(0,r.Cb)({type:V.Z.ofType(ut),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.dynamicSections&&this.dynamicSections.length>0}}}}})],Te.prototype,"dynamicSections",null),Te=ct=(0,t._)([(0,L.j)("esri.layers.voxel.VoxelVolumeStyle")],Te);const gt=Te;var It=i(33331);let H=class extends((0,ce.Vt)((0,_.Y)((0,E.q)((0,de.I)((0,Ie.M)((0,ee.R)((0,v.N)((0,h.V)(p.Z))))))))){constructor(o){super(o),this.serviceRoot="",this.operationalLayerType="Voxel",this.legendEnabled=!0,this.title=null,this.sections=null,this.currentVariableId=0,this.volumeStyles=null,this.renderMode="volume",this.variableStyles=null,this.enableSlices=!0,this.enableSections=!0,this.enableDynamicSections=!0,this.enableIsosurfaces=!0,this.shading=new oe,this.opacity=1,this.variables=new V.Z,this.volumes=new V.Z,this.index=null,this.minScale=0,this.maxScale=0,this.type="voxel",this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.fullExtent=null,this.popupEnabled=!1,this.test=null,this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0,this.volumeStyles=new(V.Z.ofType(gt)),this.variableStyles=new(V.Z.ofType(ht)),this.sections=new(V.Z.ofType(Z))}normalizeCtorArgs(o){return o?.constantUpscaling&&(this.test={constantUpscaling:!0},delete o.constantUpscaling),o}set url(o){this._set("url",(0,K.Nm)(o,R.Z.getLogger(this)))}load(o){const c=null!=o?o.signal:null,m=this.loadFromPortal({supportedTypes:["Scene Service"]},o).catch(se.r9).then(()=>this._fetchService(c)).then(()=>this.serviceRoot=this.url);return this.addResolvingPromise(m),Promise.resolve(this)}read(o,c){super.read(o,c);for(const m of this.volumes)m.spatialReference=this.spatialReference}readVersion(o,c){return super.parseVersionString(o)}validateLayer(o){if(o.layerType&&o.layerType!==this.operationalLayerType)throw new B.Z("voxel-layer:layer-type-not-supported","VoxelLayer does not support this layer type",{layerType:o.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor)||this.version.major<3)throw new B.Z("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"3.x"});if(this.version.major>3)throw new B.Z("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"3.x"})}readFullExtent(o,c,m){if(null!=o&&"object"==typeof o){const x=b.Z.fromJSON(o,m);if(0===x.zmin&&0===x.zmax&&Array.isArray(c.volumes)){const O=ft.fromJSON(c.volumes[0]);if(O.isValid&&"xyt"!==O.volumeType){const G=O.dimensions[2];if(G.isRegular){let re=G.regularSpacing.offset,ie=G.regularSpacing.offset+G.regularSpacing.scale*(G.size-1);if(re>ie){const ue=re;re=ie,ie=ue}x.zmin=re,x.zmax=ie}}}return x}return null}get voxelFields(){const o=[new P.Z({name:"Voxel.ServiceValue",alias:"Value",domain:null,editable:!1,length:128,type:"string"}),new P.Z({name:"Voxel.ServiceVariableLabel",alias:"Variable",domain:null,editable:!1,length:128,type:"string"}),new P.Z({name:"Voxel.Position",alias:"Voxel Position",domain:null,editable:!1,length:128,type:"string"})],c=this.getVolume(null);if(null!=c){if("xyzt"===c.volumeType||"xyt"===c.volumeType){const m=new P.Z({name:"Voxel.ServiceLocalTime",alias:"Local Time",domain:null,editable:!1,length:128,type:"string"});o.push(m);const x=new P.Z({name:"Voxel.ServiceNativeTime",alias:"Native Time",domain:null,editable:!1,length:128,type:"string"});o.push(x)}if("xyt"!==c.volumeType){const m=new P.Z({name:"Voxel.ServiceDepth",alias:"Depth",domain:null,editable:!1,length:128,type:"string"});o.push(m)}}return o}get popupTemplate(){return this.loaded?this.createPopupTemplate():null}get defaultPopupTemplate(){return this.createPopupTemplate()}createPopupTemplate(o){return(0,It.eZ)({fields:this.voxelFields,title:this.title},o)}getConfiguration(){const o={layerType:this.operationalLayerType,version:this.version.versionString,name:this.title,spatialReference:this.spatialReference,fullExtent:this.fullExtent,volumes:this.volumes.toJSON(),variables:this.variables.toJSON(),index:this.index?.toJSON(),sections:this.getSections(),style:{volumeStyles:this.getVolumeStyles(),currentVariableId:this.currentVariableId,renderMode:this.renderMode,variableStyles:this.getVariableStyles(),enableSections:this.enableSections,enableDynamicSections:this.enableDynamicSections,enableIsosurfaces:this.enableIsosurfaces,enableSlices:this.enableSlices,shading:this.shading}};return o.index&&this.index?.isValid()?JSON.stringify(o):""}getVariableStyle(o){let c=-1;if(c=o??this.currentVariableId,!this.variableStyles||-1===c)return null;const m=this.variableStyles.findIndex(x=>x.variableId===c);return m<0?null:this.variableStyles.at(m)}getVariable(o){let c=-1;if(c=o??this.currentVariableId,!this.variables||-1===c)return null;const m=this.variables.findIndex(x=>x.id===c);return m<0?null:this.variables.at(m)}getVolume(o){const c=this.getVariable(o);return null!=c?this.volumes.find(({id:m})=>m===c.volumeId):null}get timeInfo(){const o=this.getVolume(null);if("xyzt"!==o?.volumeType)return null;const c=o.timeStops;if(!c?.length)return null;const m=new te.Z({start:c[0],end:c.at(-1)});return new j.Z({fullTimeExtent:m,stops:c})}getVolumeStyle(o){const c=this.getVariable(o);return null!=c?this.volumeStyles.find(({volumeId:m})=>m===c.volumeId):null}getColorForContinuousDataValue(o,c,m){const x=this.getVariable(o);if(null==x||"continuous"!==x.renderingFormat?.continuity||!this.variableStyles)return null;const O=this.variableStyles.findIndex(re=>re.variableId===o);if(O<0)return null;const G=this.variableStyles.at(O);return G?.transferFunction?G.transferFunction.getColorForContinuousDataValue(c,m):null}getSections(){const o=[];for(const c of this.sections)o.push(new Z({enabled:c.enabled,href:c.href,id:c.id,label:c.label,normal:c.normal,point:c.point,sizeInPixel:c.sizeInPixel,slices:c.slices,timeId:c.timeId,variableId:c.variableId}));return o}getVariableStyles(){const o=[];for(const c of this.variableStyles){const m=this._getVariable(c);if(null!=m){const x=c.clone();x.isosurfaces.length>4&&(x.isosurfaces=x.isosurfaces.slice(0,3),R.Z.getLogger(this).error("A maximum of 4 isosurfaces are supported for Voxel Layers."));for(const O of x.isosurfaces)if(!O.colorLocked){const G=this.getColorForContinuousDataValue(x.variableId,O.value,!1);null===G||G.equals(O.color)||(O.color=G)}if("continuous"===m.renderingFormat.continuity)(null===x.transferFunction||x.transferFunction.colorStops.length<2)&&R.Z.getLogger(this).error(`VoxelVariableStyle for variable ${m.id} is invalid. At least 2 color stops are required in the transferFunction for continuous Voxel Layer variables.`),null!==x.transferFunction&&(Array.isArray(x.transferFunction.stretchRange)&&2===x.transferFunction.stretchRange.length||(R.Z.getLogger(this).error(`VoxelVariableStyle for variable ${m.id} is invalid. The stretchRange of the transferFunction for continuous Voxel Layer variables must be of the form [minimumDataValue, maximumDataValue].`),x.transferFunction.stretchRange=[0,1],x.transferFunction.colorStops.removeAll()));else if("discrete"===m.renderingFormat.continuity)if(0===c.uniqueValues.length)R.Z.getLogger(this).error(`VoxelVariableStyle for variable ${m.id} is invalid. Unique values are required for discrete Voxel Layer variables.`);else for(const O of c.uniqueValues)null!=O.label||null==O.value||(O.label=O.value.toString());o.push(x)}else R.Z.getLogger(this).error(`VoxelVariable ID=${c.variableId} doesn't exist, VoxelVariableStyle for this VoxelVariable will be ignored.`)}return o}getVolumeStyles(){const o=[];for(const c of this.volumeStyles){const m=this._getVolumeFromVolumeId(c.volumeId);if(null!=m){const x=c.clone();for(const O of x.slices)this._isPlaneValid(O,[0,1,m.zDimension],m.dimensions)||(O.enabled=!1,O.label="invalid");for(const O of x.dynamicSections)this._isPlaneValid(O,[0,1,m.zDimension],m.dimensions)||(O.enabled=!1,O.label="invalid");o.push(x)}else R.Z.getLogger(this).error(`VoxelVolume ID=${c.volumeId} doesn't exist, VoxelVolumeStyle for this VoxelVolume will be ignored.`)}return o}_getVariable(o){const c=o.variableId;for(const m of this.variables)if(m.id===c)return m;return null}_getVolumeFromVolumeId(o){for(const c of this.volumes)if(c.id===o)return c;return null}_isPlaneValid(o,c,m){if(!(o.point&&Array.isArray(o.point)&&3===o.point.length&&o.normal&&Array.isArray(o.normal)&&3===o.normal.length))return!1;const x=(0,u.al)(o.normal[0],o.normal[1],o.normal[2]);return(0,w.n)(x,x),!(Math.abs(x[0])+Math.abs(x[1])+Math.abs(x[2])<1e-6||(o.normal[0]=x[0],o.normal[1]=x[1],o.normal[2]=x[2],0))}};(0,t._)([(0,r.Cb)({type:["Voxel"]})],H.prototype,"operationalLayerType",void 0),(0,t._)([(0,r.Cb)(S.rn)],H.prototype,"legendEnabled",void 0),(0,t._)([(0,r.Cb)({json:{write:!0}})],H.prototype,"title",void 0),(0,t._)([(0,r.Cb)(S.HQ)],H.prototype,"url",null),(0,t._)([(0,r.Cb)({type:V.Z.ofType(Z),json:{origins:{"web-scene":{name:"layerDefinition.sections",write:!0}}}})],H.prototype,"sections",void 0),(0,t._)([(0,r.Cb)({type:I.z8,json:{origins:{"web-scene":{name:"layerDefinition.style.currentVariableId",write:{enabled:!0,isRequired:!0,ignoreOrigin:!0}},service:{name:"style.currentVariableId"}}}})],H.prototype,"currentVariableId",void 0),(0,t._)([(0,r.Cb)({type:V.Z.ofType(gt),json:{origins:{"web-scene":{name:"layerDefinition.style.volumeStyles",write:!0},service:{name:"style.volumeStyles"}}}})],H.prototype,"volumeStyles",void 0),(0,t._)([(0,r.Cb)({type:["volume","surfaces"],json:{origins:{"web-scene":{name:"layerDefinition.style.renderMode",write:!0},service:{name:"style.renderMode"}}}})],H.prototype,"renderMode",void 0),(0,t._)([(0,r.Cb)({type:V.Z.ofType(ht),json:{origins:{"web-scene":{name:"layerDefinition.style.variableStyles",write:!0},service:{name:"style.variableStyles"}}}})],H.prototype,"variableStyles",void 0),(0,t._)([(0,r.Cb)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableSlices",write:!0},service:{name:"style.enableSlices"}}}})],H.prototype,"enableSlices",void 0),(0,t._)([(0,r.Cb)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableSections",write:!0},service:{name:"style.enableSections"}}}})],H.prototype,"enableSections",void 0),(0,t._)([(0,r.Cb)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableDynamicSections",write:!0},service:{name:"style.enableDynamicSections"}}}})],H.prototype,"enableDynamicSections",void 0),(0,t._)([(0,r.Cb)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableIsosurfaces",write:!0},service:{name:"style.enableIsosurfaces"}}}})],H.prototype,"enableIsosurfaces",void 0),(0,t._)([(0,r.Cb)({type:oe,json:{origins:{"web-scene":{name:"layerDefinition.style.shading",write:!0},service:{name:"style.shading"}}}})],H.prototype,"shading",void 0),(0,t._)([(0,r.Cb)({type:["show","hide"]})],H.prototype,"listMode",void 0),(0,t._)([(0,r.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{read:!1,write:!1,origins:{"web-scene":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],H.prototype,"opacity",void 0),(0,t._)([(0,r.Cb)({type:V.Z.ofType(Re)})],H.prototype,"variables",void 0),(0,t._)([(0,r.Cb)({type:V.Z.ofType(ft)})],H.prototype,"volumes",void 0),(0,t._)([(0,r.Cb)({type:xt})],H.prototype,"index",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],H.prototype,"minScale",void 0),(0,t._)([(0,r.Cb)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],H.prototype,"maxScale",void 0),(0,t._)([(0,r.Cb)({json:{read:!1},readOnly:!0})],H.prototype,"type",void 0),(0,t._)([(0,r.Cb)({readOnly:!0,json:{name:"serviceVersion"}})],H.prototype,"version",void 0),(0,t._)([(0,Y.r)("service","version")],H.prototype,"readVersion",null),(0,t._)([(0,r.Cb)({type:b.Z})],H.prototype,"fullExtent",void 0),(0,t._)([(0,Y.r)("service","fullExtent",["fullExtent"])],H.prototype,"readFullExtent",null),(0,t._)([(0,r.Cb)({readOnly:!0,clonable:!1,json:{read:!1}})],H.prototype,"voxelFields",null),(0,t._)([(0,r.Cb)({type:Boolean,json:{name:"disablePopup",read:{reader:(o,c)=>!c.disablePopup},write:{enabled:!0,ignoreOrigin:!0,writer(o,c,m){c[m]=!o}},origins:{"portal-item":{default:!0},"web-scene":{default:!0}}}})],H.prototype,"popupEnabled",void 0),(0,t._)([(0,r.Cb)({type:U.Z,json:{read:!1}})],H.prototype,"popupTemplate",null),(0,t._)([(0,r.Cb)({readOnly:!0})],H.prototype,"defaultPopupTemplate",null),(0,t._)([(0,r.Cb)({type:j.Z,readOnly:!0,json:{read:!1}})],H.prototype,"timeInfo",null),(0,t._)([(0,r.Cb)({type:te.Z,json:{read:!1}})],H.prototype,"timeExtent",void 0),(0,t._)([(0,r.Cb)({type:Q.Z,json:{read:!1}})],H.prototype,"timeOffset",void 0),(0,t._)([(0,r.Cb)({type:Boolean,nonNullable:!0,json:{origins:{"web-scene":{name:"timeAnimation",write:!0},service:{read:!1}}}})],H.prototype,"useViewTime",void 0),H=(0,t._)([(0,L.j)("esri.layers.VoxelLayer")],H);const jt=H},29674:(be,ne,i)=>{i.d(ne,{V:()=>ee});var t=i(50484),U=i(80543),B=(i(14007),i(4703),i(65311),i(10141));const ee=se=>{let r=class extends se{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):function R(se){return"portalItem"in se}(this)?this.portalItem?.apiKey:null}set apiKey(I){null!=I?this._override("apiKey",I):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,t._)([(0,U.Cb)({type:String})],r.prototype,"apiKey",null),r=(0,t._)([(0,B.j)("esri.layers.mixins.APIKeyMixin")],r),r}},4257:(be,ne,i)=>{i.d(ne,{Y:()=>ee});var t=i(50484),U=i(4703),te=i(80543),B=(i(14007),i(65311),i(10141)),R=i(89713);const ee=se=>{let r=class extends se{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const I=(0,R.Qc)(this.url);if(null!=I&&I.title)return I.title}return this._get("title")||""}set title(I){this._set("title",I)}set url(I){this._set("url",(0,R.Nm)(I,U.Z.getLogger(this)))}};return(0,t._)([(0,te.Cb)()],r.prototype,"title",null),(0,t._)([(0,te.Cb)({type:String})],r.prototype,"url",null),r=(0,t._)([(0,B.j)("esri.layers.mixins.ArcGISService")],r),r}},27426:(be,ne,i)=>{i.d(ne,{N:()=>R});var t=i(50484),U=i(80543),B=(i(14007),i(4703),i(65311),i(10141));const R=ee=>{let se=class extends ee{constructor(){super(...arguments),this.customParameters=null}};return(0,t._)([(0,U.Cb)({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],se.prototype,"customParameters",void 0),se=(0,t._)([(0,B.j)("esri.layers.mixins.CustomParametersMixin")],se),se}},70509:(be,ne,i)=>{i.d(ne,{I:()=>E});var t=i(15861),U=i(50484),te=i(11931),Q=i(26152),V=i(66476),B=i(37636),R=i(57964),ee=i(4703),se=i(51172),r=i(79412),I=i(6785),N=i(80543),L=(i(14007),i(65311),i(62185)),w=i(10141),u=i(7547),b=i(85971),p=i(61018),h=i(27835),_=i(57437),v=i(50318);const E=Ie=>{let ce=class extends Ie{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,se.SC)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(K){K!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",K))}readPortalItem(K,S,P){if(S.itemId)return new h.default({id:S.itemId,portal:P?.portal})}writePortalItem(K,S){K?.id&&(S.itemId=K.id)}loadFromPortal(K,S){var P=this;return(0,t.Z)(function*(){if(P.portalItem?.id)try{const{load:j}=yield Promise.all([i.e(2772),i.e(8592),i.e(6964)]).then(i.bind(i,36964));return(0,r.k_)(S),yield j({instance:P,supportedTypes:K.supportedTypes,validateItem:K.validateItem,supportsData:K.supportsData,layerModuleTypeMap:K.layerModuleTypeMap},S)}catch(j){throw(0,r.D_)(j)||ee.Z.getLogger(P).warn(`Failed to load layer (${P.title}, ${P.id}) portal item (${P.portalItem.id})\n  ${j}`),j}})()}finishLoadEditablePortalLayer(K){var S=this;return(0,t.Z)(function*(){S._set("userHasEditingPrivileges",yield S._fetchUserHasEditingPrivileges(K).catch(P=>((0,r.r9)(P),!0)))})()}setUserPrivileges(K,S){var P=this;return(0,t.Z)(function*(){if(!te.default.userPrivilegesApplied)return P.finishLoadEditablePortalLayer(S);if(P.url)try{const{features:{edit:j,fullEdit:J},content:{updateItem:X}}=yield P._fetchUserPrivileges(K,S);P._set("userHasEditingPrivileges",j),P._set("userHasFullEditingPrivileges",J),P._set("userHasUpdateItemPrivileges",X)}catch(j){(0,r.r9)(j)}})()}_fetchUserPrivileges(K,S){var P=this;return(0,t.Z)(function*(){let j=P.portalItem;if(!K||!j||!j.loaded||j.sourceUrl)return P._fetchFallbackUserPrivileges(S);const J=K===j.id;if(J&&j.portal.user)return(0,v.Ss)(j);let X,W;if(J)X=j.portal.url;else try{X=yield(0,b.oP)(P.url,S)}catch(ae){(0,r.r9)(ae)}if(!X||!(0,I.Zo)(X,j.portal.url))return P._fetchFallbackUserPrivileges(S);try{const ae=null!=S?S.signal:null;W=yield Q.id?.getCredential(`${X}/sharing`,{prompt:!1,signal:ae})}catch(ae){(0,r.r9)(ae)}if(!W)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(J?yield j.reload():(j=new h.default({id:K,portal:{url:X}}),yield j.load(S)),j.portal.user)return(0,v.Ss)(j)}catch(ae){(0,r.r9)(ae)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}})()}_fetchFallbackUserPrivileges(K){var S=this;return(0,t.Z)(function*(){let P=!0;try{P=yield S._fetchUserHasEditingPrivileges(K)}catch(j){(0,r.r9)(j)}return{features:{edit:P,fullEdit:!1},content:{updateItem:!1}}})()}_fetchUserHasEditingPrivileges(K){var S=this;return(0,t.Z)(function*(){const P=S.url?Q.id?.findCredential(S.url):null;if(!P)return!0;const j=de.credential===P?de.user:yield S._fetchEditingUser(K);return de.credential=P,de.user=j,null==j?.privileges||j.privileges.includes("features:user:edit")})()}_fetchEditingUser(K){var S=this;return(0,t.Z)(function*(){const P=S.portalItem?.portal?.user;if(P)return P;const j=Q.id?.findServerInfo(S.url??"");if(!j?.owningSystemUrl)return null;const J=`${j.owningSystemUrl}/sharing/rest`,X=p.Z.getDefault();if(X&&X.loaded&&(0,I.Fv)(X.restUrl)===(0,I.Fv)(J))return X.user;const W=`${J}/community/self`,_e=null!=K?K.signal:null,ve=yield(0,B.q6)((0,V.Z)(W,{authMode:"no-prompt",query:{f:"json"},signal:_e}));return ve.ok?_.Z.fromJSON(ve.value.data):null})()}read(K,S){S&&(S.layer=this),super.read(K,S)}write(K,S){const P=S?.portal,j=this.portalItem?.id&&(this.portalItem.portal||p.Z.getDefault());return P&&j&&!(0,I.tm)(j.restUrl,P.restUrl)?(S.messages&&S.messages.push(new R.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(K,{...S,layer:this})}};return(0,U._)([(0,N.Cb)({type:h.default})],ce.prototype,"portalItem",null),(0,U._)([(0,L.r)("web-document","portalItem",["itemId"])],ce.prototype,"readPortalItem",null),(0,U._)([(0,u.c)("web-document","portalItem",{itemId:{type:String}})],ce.prototype,"writePortalItem",null),(0,U._)([(0,N.Cb)({clonable:!1})],ce.prototype,"resourceReferences",void 0),(0,U._)([(0,N.Cb)({type:Boolean,readOnly:!0})],ce.prototype,"userHasEditingPrivileges",void 0),(0,U._)([(0,N.Cb)({type:Boolean,readOnly:!0})],ce.prototype,"userHasFullEditingPrivileges",void 0),(0,U._)([(0,N.Cb)({type:Boolean,readOnly:!0})],ce.prototype,"userHasUpdateItemPrivileges",void 0),ce=(0,U._)([(0,w.j)("esri.layers.mixins.PortalLayer")],ce),ce},de={credential:null,user:null}},97403:(be,ne,i)=>{i.d(ne,{Z:()=>w});var t=i(50484),U=i(34411),te=i(95539),Q=i(25387),V=i(89317),B=i(80543),r=(i(14007),i(4703),i(65311),i(62185)),I=i(10141),N=i(7547),q=i(764);function Y(u,b){return te.Z.fromJSON({value:u,unit:b})}let L=class extends((0,Q.J)(V.wq)){constructor(u){super(u),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(u,b){return b.timeExtent&&Array.isArray(b.timeExtent)&&2===b.timeExtent.length?U.Z.fromArray(b.timeExtent):null}writeFullTimeExtent(u,b){b.timeExtent=null!=u?.start&&null!=u.end?u.toArray():null}readInterval(u,b){return b.timeInterval&&b.timeIntervalUnits?Y(b.timeInterval,b.timeIntervalUnits):b.defaultTimeInterval&&b.defaultTimeIntervalUnits?Y(b.defaultTimeInterval,b.defaultTimeIntervalUnits):null}writeInterval(u,b){b.timeInterval=u?.toJSON().value??null,b.timeIntervalUnits=u?.toJSON().unit??null}};(0,t._)([(0,B.Cb)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],L.prototype,"cumulative",void 0),(0,t._)([(0,B.Cb)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],L.prototype,"endField",void 0),(0,t._)([(0,B.Cb)({type:U.Z,json:{write:{enabled:!0,allowNull:!0}}})],L.prototype,"fullTimeExtent",void 0),(0,t._)([(0,r.r)("fullTimeExtent",["timeExtent"])],L.prototype,"readFullTimeExtent",null),(0,t._)([(0,N.c)("fullTimeExtent")],L.prototype,"writeFullTimeExtent",null),(0,t._)([(0,B.Cb)({type:Boolean,json:{write:!0}})],L.prototype,"hasLiveData",void 0),(0,t._)([(0,B.Cb)({type:te.Z,json:{write:{enabled:!0,allowNull:!0}}})],L.prototype,"interval",void 0),(0,t._)([(0,r.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],L.prototype,"readInterval",null),(0,t._)([(0,N.c)("interval")],L.prototype,"writeInterval",null),(0,t._)([(0,B.Cb)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],L.prototype,"startField",void 0),(0,t._)([(0,B.Cb)((0,q.mi)("timeReference",!0))],L.prototype,"timeZone",void 0),(0,t._)([(0,B.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],L.prototype,"trackIdField",void 0),(0,t._)([(0,B.Cb)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],L.prototype,"useTime",void 0),(0,t._)([(0,B.Cb)({type:[Date],json:{read:!1}})],L.prototype,"stops",void 0),L=(0,t._)([(0,I.j)("esri.layers.support.TimeInfo")],L);const w=L},50318:(be,ne,i)=>{i.d(ne,{$o:()=>N,Fj:()=>se,IW:()=>I,Ss:()=>L,_$:()=>ee,ck:()=>r,hz:()=>Y,qj:()=>R});var t=i(15861),U=i(83821),te=i(43814),Q=i(48230);function B(){return(B=(0,t.Z)(function*(w){const u=w.spatialReference;if(u.isWGS84)return w.clone();if(u.isWebMercator)return(0,Q.Sx)(w);const b=te.Z.WGS84;return yield(0,U.initializeProjection)(u,b),(0,U.project)(w,b)})).apply(this,arguments)}function R(w,u){if(!ee(w,u)){const b=w.typeKeywords;b?b.push(u):w.typeKeywords=[u]}}function ee(w,u){return!!w.typeKeywords?.includes(u)}function se(w){return ee(w,Y.HOSTED_SERVICE)}function r(w,u){const b=w.typeKeywords;if(b){const p=b.indexOf(u);p>-1&&b.splice(p,1)}}function I(w,u,b){b?R(w,u):r(w,u)}function N(w){return q.apply(this,arguments)}function q(){return q=(0,t.Z)(function*(w){const u=w.clone().normalize();let b;if(u.length>1)for(const p of u)b?p.width>b.width&&(b=p):b=p;else b=u[0];return function V(w){return B.apply(this,arguments)}(b)}),q.apply(this,arguments)}const Y={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function L(w){const{portal:u,isOrgItem:b,itemControl:p}=w,h=u.user?.privileges;let _=!h||h.includes("features:user:edit"),v=!!b&&!!h?.includes("features:user:fullEdit");const E="update"===p||"admin"===p;return E?v=_=!0:v&&(_=!0),{features:{edit:_,fullEdit:v},content:{updateItem:E}}}},81238:(be,ne,i)=>{i.d(ne,{v:()=>U});const U=(0,i(84303).w)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},33331:(be,ne,i)=>{i.d(ne,{eZ:()=>q});var t=i(62691),U=i(85295),te=i(20004),R=(i(37462),i(52225),i(49497),i(90629)),I=(i(57229),i(98522),i(23002),i(42271)),N=i(17831);function q({displayField:S,editFieldsInfo:P,fields:j,objectIdField:J,title:X},W){if(!j)return null;const _e=function p(S,P){const j=P?.visibleFieldNames;return function w(S,P){const j=S;return P&&(S=S.filter(J=>!P.includes(J.type))),S===j&&(S=S.slice()),S.sort(u),S}(S.fields??[],P?.ignoreFieldTypes||K).map(J=>new I.Z({fieldName:J.name,isEditable:(0,U.Hp)(J,S),label:J.alias,format:v(J),visible:L(J,{...S,visibleFieldNames:j})}))}({editFieldsInfo:P,fields:j,objectIdField:J},W);if(!_e.length)return null;const ve=function Ie(S){const P=(0,U.O5)(S),{titleBase:j}=S;return P?`${j}: {${P.trim()}}`:j??""}({titleBase:X,fields:j,displayField:S}),Ee=function E(){return[new R.Z,new te.Z]}();return new t.Z({title:ve,content:Ee,fieldInfos:_e})}const L=(S,P)=>P.visibleFieldNames?P.visibleFieldNames.has(S.name):(0,U.Fv)(S,P);function u(S,P){return"oid"===S.type?-1:"oid"===P.type?1:ce(S)?-1:ce(P)?1:(S.alias||S.name).toLocaleLowerCase().localeCompare((P.alias||P.name).toLocaleLowerCase())}function v(S){switch(S.type){case"small-integer":case"integer":case"single":return new N.Z({digitSeparator:!0,places:0});case"double":return new N.Z({digitSeparator:!0,places:2});case"string":return(0,U.Ec)(S.name)?new N.Z({digitSeparator:!0,places:0}):void 0;default:return}}function ce(S){return"name"===(S.name&&S.name.toLowerCase())||"name"===S.alias?.toLowerCase()}const K=["geometry","blob","raster","guid","xml"]}}]);