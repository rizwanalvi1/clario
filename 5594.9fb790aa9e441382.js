"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[5594],{63167:(pe,K,l)=>{l.d(K,{Z:()=>qe});var U,r=l(15861),i=l(50484),O=l(89317),p=l(34222),e=l(79876),n=l(80543),j=l(73018),C=l(62185),y=l(10141),w=l(7547);l(14007),l(4703),l(65311);let I=U=class extends O.wq{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new U({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],I.prototype,"expression",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],I.prototype,"name",void 0),(0,i._)([(0,n.Cb)({type:["boolean","date","number","string"],json:{write:!0}})],I.prototype,"returnType",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],I.prototype,"title",void 0),I=U=(0,i._)([(0,y.j)("esri.form.ExpressionInfo")],I);const B=I;let f=class extends O.wq{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],f.prototype,"description",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],f.prototype,"label",void 0),(0,i._)([(0,n.Cb)()],f.prototype,"type",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],f.prototype,"visibilityExpression",void 0),f=(0,i._)([(0,y.j)("esri.form.elements.Element")],f);const S=f;var u,V=l(1535);let M=u=class extends O.wq{constructor(t){super(t),this.type=null}clone(){return new u({type:this.type})}};(0,i._)([(0,n.Cb)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],M.prototype,"type",void 0),M=u=(0,i._)([(0,y.j)("esri.form.elements.inputs.AttachmentInput")],M);const b=M;var v;let F=v=class extends S{constructor(t){super(t),this.attachmentKeyword=null,this.editableExpression=null,this.input=null,this.type="attachment"}clone(){return new v({attachmentKeyword:this.attachmentKeyword,description:this.description,editableExpression:this.editableExpression,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],F.prototype,"attachmentKeyword",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],F.prototype,"editableExpression",void 0),(0,i._)([(0,n.Cb)({type:b,json:{read:{source:"inputType"},write:{target:"inputType"}}})],F.prototype,"input",void 0),(0,i._)([(0,n.Cb)({type:["attachment"],json:{read:!1,write:!0}})],F.prototype,"type",void 0),F=v=(0,i._)([(0,y.j)("esri.form.elements.AttachmentElement")],F);const g=F;let P=class extends O.wq{constructor(t){super(t),this.type=null}};(0,i._)([(0,n.Cb)()],P.prototype,"type",void 0),P=(0,i._)([(0,y.j)("esri.form.elements.inputs.Input")],P);const D=P;let Z=class extends D{constructor(t){super(t),this.maxLength=null,this.minLength=0}};(0,i._)([(0,n.Cb)({type:Number,json:{write:!0}})],Z.prototype,"maxLength",void 0),(0,i._)([(0,n.Cb)({type:Number,json:{write:!0}})],Z.prototype,"minLength",void 0),Z=(0,i._)([(0,y.j)("esri.form.elements.inputs.TextInput")],Z);const Q=Z;var k;let T=k=class extends Q{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new k({maxLength:this.maxLength,minLength:this.minLength})}};(0,i._)([(0,n.Cb)({type:["barcode-scanner"],json:{read:!1,write:!0}})],T.prototype,"type",void 0),T=k=(0,i._)([(0,y.j)("esri.form.elements.inputs.BarcodeScannerInput")],T);const ne=T;var Y;let m=Y=class extends D{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new Y({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],m.prototype,"noValueOptionLabel",void 0),(0,i._)([(0,n.Cb)({type:Boolean,json:{write:!0}})],m.prototype,"showNoValueOption",void 0),(0,i._)([(0,n.Cb)({type:["combo-box"],json:{read:!1,write:!0}})],m.prototype,"type",void 0),m=Y=(0,i._)([(0,y.j)("esri.form.elements.inputs.ComboBoxInput")],m);const o=m;var d;function a(t){return t??null}function c(t){return t??null}let _=d=class extends D{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,s){return a(s.max)}writeMax(t,s){s.max=c(t)}readMin(t,s){return a(s.min)}writeMin(t,s){s.min=c(t)}clone(){return new d({max:this.max,min:this.min})}};(0,i._)([(0,n.Cb)({type:String,json:{type:String,write:!0}})],_.prototype,"max",void 0),(0,i._)([(0,C.r)("max")],_.prototype,"readMax",null),(0,i._)([(0,w.c)("max")],_.prototype,"writeMax",null),(0,i._)([(0,n.Cb)({type:String,json:{type:String,write:!0}})],_.prototype,"min",void 0),(0,i._)([(0,C.r)("min")],_.prototype,"readMin",null),(0,i._)([(0,w.c)("min")],_.prototype,"writeMin",null),(0,i._)([(0,n.Cb)({type:["date-picker"],json:{read:!1,write:!0}})],_.prototype,"type",void 0),_=d=(0,i._)([(0,y.j)("esri.form.elements.inputs.DatePickerInput")],_);const z=_;var ee;function N(t){return t??null}function ue(t){return t??null}let L=ee=class extends D{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,s){return N(s.max)}writeMax(t,s){s.max=ue(t)}readMin(t,s){return N(s.min)}writeMin(t,s){s.min=ue(t)}readTimeResolution(t,s){return N(s.timeResolution)}writeTimeResolution(t,s){s.timeResolution=ue(t)}clone(){return new ee({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};(0,i._)([(0,n.Cb)({type:Boolean,json:{write:!0}})],L.prototype,"includeTimeOffset",void 0),(0,i._)([(0,n.Cb)({type:String,json:{type:String,write:!0}})],L.prototype,"max",void 0),(0,i._)([(0,C.r)("max")],L.prototype,"readMax",null),(0,i._)([(0,w.c)("max")],L.prototype,"writeMax",null),(0,i._)([(0,n.Cb)({type:String,json:{type:String,write:!0}})],L.prototype,"min",void 0),(0,i._)([(0,C.r)("min")],L.prototype,"readMin",null),(0,i._)([(0,w.c)("min")],L.prototype,"writeMin",null),(0,i._)([(0,n.Cb)({type:String,json:{type:String,write:!0}})],L.prototype,"timeResolution",void 0),(0,i._)([(0,C.r)("timeResolution")],L.prototype,"readTimeResolution",null),(0,i._)([(0,w.c)("timeResolution")],L.prototype,"writeTimeResolution",null),(0,i._)([(0,n.Cb)({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],L.prototype,"type",void 0),L=ee=(0,i._)([(0,y.j)("esri.form.elements.inputs.DateTimeOffsetPickerInput")],L);const Ne=L;var ce;function Se(t){return null!=t?new Date(t):null}function Me(t){return t?t.getTime():null}let G=ce=class extends D{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,s){return Se(s.max)}writeMax(t,s){s.max=Me(t)}readMin(t,s){return Se(s.min)}writeMin(t,s){s.min=Me(t)}clone(){return new ce({includeTime:this.includeTime,max:this.max,min:this.min})}};(0,i._)([(0,n.Cb)({type:Boolean,json:{write:!0}})],G.prototype,"includeTime",void 0),(0,i._)([(0,n.Cb)({type:Date,json:{type:Number,write:!0}})],G.prototype,"max",void 0),(0,i._)([(0,C.r)("max")],G.prototype,"readMax",null),(0,i._)([(0,w.c)("max")],G.prototype,"writeMax",null),(0,i._)([(0,n.Cb)({type:Date,json:{type:Number,write:!0}})],G.prototype,"min",void 0),(0,i._)([(0,C.r)("min")],G.prototype,"readMin",null),(0,i._)([(0,w.c)("min")],G.prototype,"writeMin",null),(0,i._)([(0,n.Cb)({type:["datetime-picker"],json:{read:!1,write:!0}})],G.prototype,"type",void 0),G=ce=(0,i._)([(0,y.j)("esri.form.elements.inputs.DateTimePickerInput")],G);const We=G;var ye;let te=ye=class extends D{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new ye({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],te.prototype,"noValueOptionLabel",void 0),(0,i._)([(0,n.Cb)({type:Boolean,json:{write:!0}})],te.prototype,"showNoValueOption",void 0),(0,i._)([(0,n.Cb)({type:["radio-buttons"],json:{read:!1,write:!0}})],te.prototype,"type",void 0),te=ye=(0,i._)([(0,y.j)("esri.form.elements.inputs.RadioButtonsInput")],te);const Ze=te;var me;let ie=me=class extends D{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new me({offValue:this.offValue,onValue:this.onValue})}};(0,i._)([(0,n.Cb)({type:[String,Number],json:{write:!0}})],ie.prototype,"offValue",void 0),(0,i._)([(0,n.Cb)({type:[String,Number],json:{write:!0}})],ie.prototype,"onValue",void 0),(0,i._)([(0,n.Cb)({type:["switch"],json:{read:!1,write:!0}})],ie.prototype,"type",void 0),ie=me=(0,i._)([(0,y.j)("esri.form.elements.inputs.SwitchInput")],ie);const Ge=ie;var he;let ae=he=class extends Q{constructor(t){super(t),this.type="text-area"}clone(){return new he({maxLength:this.maxLength,minLength:this.minLength})}};(0,i._)([(0,n.Cb)({type:["text-area"],json:{read:!1,write:!0}})],ae.prototype,"type",void 0),ae=he=(0,i._)([(0,y.j)("esri.form.elements.inputs.TextAreaInput")],ae);const He=ae;var ve;let de=ve=class extends Q{constructor(t){super(t),this.type="text-box"}clone(){return new ve({maxLength:this.maxLength,minLength:this.minLength})}};(0,i._)([(0,n.Cb)({type:["text-box"],json:{read:!1,write:!0}})],de.prototype,"type",void 0),de=ve=(0,i._)([(0,y.j)("esri.form.elements.inputs.TextBoxInput")],de);const Je=de;var fe;function be(t){return t??null}function xe(t){return t??null}let A=fe=class extends D{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,s){return be(s.max)}writeMax(t,s){s.max=xe(t)}readMin(t,s){return be(s.min)}writeMin(t,s){s.min=xe(t)}readTimeResolution(t,s){return be(s.timeResolution)}writeTimeResolution(t,s){s.timeResolution=xe(t)}clone(){return new fe({max:this.max,min:this.min,timeResolution:this.timeResolution})}};(0,i._)([(0,n.Cb)({type:String,json:{type:String,write:!0}})],A.prototype,"max",void 0),(0,i._)([(0,C.r)("max")],A.prototype,"readMax",null),(0,i._)([(0,w.c)("max")],A.prototype,"writeMax",null),(0,i._)([(0,n.Cb)({type:String,json:{type:String,write:!0}})],A.prototype,"min",void 0),(0,i._)([(0,C.r)("min")],A.prototype,"readMin",null),(0,i._)([(0,w.c)("min")],A.prototype,"writeMin",null),(0,i._)([(0,n.Cb)({type:String,json:{type:String,write:!0}})],A.prototype,"timeResolution",void 0),(0,i._)([(0,C.r)("timeResolution")],A.prototype,"readTimeResolution",null),(0,i._)([(0,w.c)("timeResolution")],A.prototype,"writeTimeResolution",null),(0,i._)([(0,n.Cb)({type:["time-picker"],json:{read:!1,write:!0}})],A.prototype,"type",void 0),A=fe=(0,i._)([(0,y.j)("esri.form.elements.inputs.TimePickerInput")],A);const Ke={base:D,key:"type",typeMap:{"barcode-scanner":ne,"combo-box":o,"date-picker":z,"datetime-picker":We,"datetimeoffset-picker":Ne,"radio-buttons":Ze,switch:Ge,"text-area":He,"text-box":Je,"time-picker":A}};var ge,Te=l(59300);let W=ge=class extends S{constructor(t){super(t),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return this._get("editable")??!0}set editable(t){this._set("editable",t)}clone(){return new ge({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};(0,i._)([(0,n.Cb)({types:Te.V5,json:{read:{reader:Te.im},write:!0}})],W.prototype,"domain",void 0),(0,i._)([(0,n.Cb)({type:Boolean,json:{write:!0}})],W.prototype,"editable",null),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],W.prototype,"editableExpression",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],W.prototype,"fieldName",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],W.prototype,"hint",void 0),(0,i._)([(0,n.Cb)({types:Ke,json:{read:{source:"inputType"},write:{target:"inputType"}}})],W.prototype,"input",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],W.prototype,"requiredExpression",void 0),(0,i._)([(0,n.Cb)({type:String,json:{read:!1,write:!0}})],W.prototype,"type",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],W.prototype,"valueExpression",void 0),W=ge=(0,i._)([(0,y.j)("esri.form.elements.FieldElement")],W);const Oe=W;var Ce,Qe=l(78496);let $=Ce=class extends S{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Ce({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:(0,p.d9)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};(0,i._)([(0,n.Cb)({type:Number,json:{write:!0}})],$.prototype,"displayCount",void 0),(0,i._)([(0,n.Cb)({type:["list"],json:{write:!0}})],$.prototype,"displayType",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],$.prototype,"editableExpression",void 0),(0,i._)([(0,n.Cb)({type:[Qe.Z],json:{write:!0}})],$.prototype,"orderByFields",void 0),(0,i._)([(0,n.Cb)({type:Number,json:{write:!0}})],$.prototype,"relationshipId",void 0),(0,i._)([(0,n.Cb)({type:["relationship"],json:{read:!1,write:!0}})],$.prototype,"type",void 0),$=Ce=(0,i._)([(0,y.j)("esri.form.elements.RelationshipElement")],$);const De=$;var Ie;let re=Ie=class extends S{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new Ie({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],re.prototype,"text",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],re.prototype,"textFormat",void 0),(0,i._)([(0,n.Cb)({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],re.prototype,"type",void 0),re=Ie=(0,i._)([(0,y.j)("esri.form.elements.TextElement")],re);const Re=re;function Ue(t){return{typesWithGroup:{base:S,key:"type",typeMap:{attachment:g,field:Oe,group:t,relationship:De,text:Re}},typesWithoutGroup:{base:S,key:"type",typeMap:{attachment:g,field:Oe,relationship:De,text:Re}}}}function Be(t,s,h=!0){if(!t)return null;const x=h?s.typesWithGroup.typeMap:s.typesWithoutGroup.typeMap;return t.filter(E=>x[E.type]).map(E=>x[E.type].fromJSON(E))}function Pe(t,s,h=!0){if(!t)return null;const x=h?s.typesWithGroup.typeMap:s.typesWithoutGroup.typeMap;return t.filter(E=>x[E.type]).map(E=>E.toJSON())}function Le(t,s,h=!0){return t?t.map(x=>(0,V.N7)(h?s.typesWithGroup:s.typesWithoutGroup,x)):null}var _e;let J=_e=class extends S{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return Le(t,Ee,!1)}readElements(t,s){return Be(s.formElements,Ee,!1)}writeElements(t,s){s.formElements=Pe(t,Ee,!1)}clone(){return new _e({description:this.description,elements:(0,p.d9)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,i._)([(0,n.Cb)({json:{write:!0}})],J.prototype,"elements",void 0),(0,i._)([(0,j.p)("elements")],J.prototype,"castElements",null),(0,i._)([(0,C.r)("elements",["formElements"])],J.prototype,"readElements",null),(0,i._)([(0,w.c)("elements")],J.prototype,"writeElements",null),(0,i._)([(0,n.Cb)({type:["collapsed","expanded"],json:{write:!0}})],J.prototype,"initialState",void 0),(0,i._)([(0,n.Cb)({type:String,json:{read:!1,write:!0}})],J.prototype,"type",void 0),J=_e=(0,i._)([(0,y.j)("esri.form.elements.GroupElement")],J);const Ee=Ue(J),ke=J,ze=t=>"field"===t.type,$e=t=>"group"===t.type,Xe=t=>"text"===t.type;var je,oe=l(85295);const we=Ue(ke);let H=je=class extends O.wq{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return Le(t,we)}readElements(t,s){return Be(s.formElements,we)}writeElements(t,s){s.formElements=Pe(t,we)}clone(){return new je({description:this.description,expressionInfos:(0,p.d9)(this.expressionInfos),elements:(0,p.d9)(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}getFieldsUsed(t,s){var h=this;return(0,r.Z)(function*(){const x=new Set,{description:E,elements:le,expressionInfos:et,title:tt}=h;if(se(x,t,E),se(x,t,tt),!le)return[];const it=function Ye(t,s){if(!s||0===s.length)return[];const h=Ve(t),x=[];for(const E of s)h.has(E.name)&&x.push(E.expression);return x}(le,et).map(Fe=>(0,oe.io)(x,t,Fe));yield Promise.all(it);for(const Fe of le)Ae(x,{fieldsIndex:t,relationships:s},Fe);return Array.from(x).sort()})()}};function Ae(t,s,h){const{fieldsIndex:x}=s;if(!x||x.fields.length!==t.size)switch(se(t,x,h.label),se(t,x,h.description),h.type){case"field":(0,oe.AB)(t,x,h.fieldName);break;case"group":h.elements.forEach(E=>Ae(t,s,E));break;case"relationship":if(s.relationships){const E=s.relationships.find(le=>le.id===h.relationshipId);E&&(0,oe.AB)(t,x,E.keyField)}(0,oe.gd)(t,x,h.orderByFields?.map(E=>E.field));break;case"text":se(t,x,h.text)}}function Ve(t){const s=new Set;for(const h of t)if((0,e.cm)(s,h.visibilityExpression),!Xe(h))if($e(h))(0,e.w6)(s,Ve(h.elements));else if((0,e.cm)(s,h.editableExpression),ze(h)){const{requiredExpression:x,valueExpression:E}=h;(0,e.w6)(s,[x,E])}return s}function se(t,s,h){(0,oe.gd)(t,s,(0,oe.ld)(h))}(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],H.prototype,"description",void 0),(0,i._)([(0,n.Cb)({json:{write:!0}})],H.prototype,"elements",void 0),(0,i._)([(0,j.p)("elements")],H.prototype,"castElements",null),(0,i._)([(0,C.r)("elements",["formElements"])],H.prototype,"readElements",null),(0,i._)([(0,w.c)("elements")],H.prototype,"writeElements",null),(0,i._)([(0,n.Cb)({type:[B],json:{write:!0}})],H.prototype,"expressionInfos",void 0),(0,i._)([(0,n.Cb)({type:Boolean,json:{default:!1,write:!0}})],H.prototype,"preserveFieldValuesWhenHidden",void 0),(0,i._)([(0,n.Cb)({type:String,json:{write:!0}})],H.prototype,"title",void 0),H=je=(0,i._)([(0,y.j)("esri.form.FormTemplate")],H);const qe=H},92344:(pe,K,l)=>{l.d(K,{jF:()=>R,lQ:()=>B,o1:()=>V});var r=l(50484),i=l(88278),O=l(34222),p=l(79412),e=l(80543),C=(l(14007),l(4703),l(10141)),y=l(93604);const w=new i.Z.EventEmitter;function R(u,M,b=null,v=!1){const F=(0,p.hh)();return w.emit("apply-edits",{serviceUrl:u,layerId:M,gdbVersion:b,mayReceiveServiceEdits:v=null==M||v,result:F.promise}),F}const I=Symbol();function B(u){return null!=u&&"object"==typeof u&&I in u}function f(u){return null!=u&&"object"==typeof u&&"gdbVersion"in u}function S(u,M,b){const v=new URL(u).host,F=y.Jp.get(v),g=P=>!P||P===F;return g(M)&&g(b)||M===b}const V=u=>{var M;let b=class extends u{constructor(...v){super(...v),this[M]=!0,this._applyEditsHandler=F=>{const{serviceUrl:g,layerId:P,gdbVersion:D,mayReceiveServiceEdits:Z,result:Q}=F,k=g===this.url,T=null!=P&&null!=this.layerId&&P===this.layerId,ne=f(this),Y=f(this)&&S(g,D,this.gdbVersion);if(!k||ne&&!Y||!T&&!Z)return;const m=Q.then(o=>{if(this.lastEditsEventDate=new Date,T&&(o.addedFeatures.length||o.updatedFeatures.length||o.deletedFeatures.length||o.addedAttachments.length||o.updatedAttachments.length||o.deletedAttachments.length))return this.emit("edits",(0,O.d9)(o)),o;const d=o.editedFeatures?.find(({layerId:c})=>c===this.layerId);if(d){const{adds:c,updates:_,deletes:z}=d.editedFeatures,ee={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:c?c.map(({attributes:N})=>({objectId:this.objectIdField&&N[this.objectIdField],globalId:this.globalIdField&&N[this.globalIdField]})):[],deletedFeatures:z?z.map(({attributes:N})=>({objectId:this.objectIdField&&N[this.objectIdField],globalId:this.globalIdField&&N[this.globalIdField]})):[],updatedFeatures:_?_.map(({current:{attributes:N}})=>({objectId:this.objectIdField&&N[this.objectIdField],globalId:this.globalIdField&&N[this.globalIdField]})):[],editedFeatures:(0,O.d9)(o.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,O.d9)(o.historicMoment)};return this.emit("edits",ee),ee}const a={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:(0,O.d9)(o.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,O.d9)(o.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(g,D,a.historicMoment)&&this.emit("edits",a),a}).then(o=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(g,D,o.historicMoment)&&(this.historicMoment=o.historicMoment),o));this.emit("apply-edits",{result:m})},this._updateMomentHandler=F=>{const{serviceUrl:g,gdbVersion:P,moment:D}=F,Z=g===this.url,Q=f(this),k=f(this)&&S(g,P,this.gdbVersion),T=f(this)&&!S(g,this.gdbVersion,null);Z&&Q&&k&&T&&"historicMoment"in this&&this.historicMoment!==D&&(this.historicMoment=D)},this.when().then(()=>{this.addHandles(function X(u){return w.on("apply-edits",new WeakRef(u))}(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(function q(u){return w.on("update-moment",new WeakRef(u))}(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(v,F,g){return"historicMoment"in this&&this.historicMoment!==g&&(0,y.JV)(v,F)}};return M=I,(0,r._)([(0,e.Cb)()],b.prototype,"lastEditsEventDate",void 0),b=(0,r._)([(0,C.j)("esri.layers.mixins.EditBusLayer")],b),b}},87906:(pe,K,l)=>{l.d(K,{B:()=>Y});var r=l(50484),i=l(83944),O=l(34222),p=l(4703),e=l(80543),j=(l(14007),l(62185)),C=l(10141),y=l(7547),w=l(76215),X=l(26894),q=l(69063),R=l(43814),U=l(89713),I=l(56956),B=l(25387),f=l(89317),V=(l(65311),l(764));let u=class extends((0,B.J)(f.wq)){constructor(m){super(m),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};(0,r._)([(0,e.Cb)()],u.prototype,"creatorField",void 0),(0,r._)([(0,e.Cb)()],u.prototype,"creationDateField",void 0),(0,r._)([(0,e.Cb)()],u.prototype,"editorField",void 0),(0,r._)([(0,e.Cb)()],u.prototype,"editDateField",void 0),(0,r._)([(0,e.Cb)()],u.prototype,"realm",void 0),(0,r._)([(0,e.Cb)((0,V.mi)("dateFieldsTimeReference",!0))],u.prototype,"timeZone",void 0),u=(0,r._)([(0,C.j)("esri.layers.support.EditFieldsInfo")],u);const M=u;let b=class extends((0,B.J)(f.wq)){constructor(m){super(m)}};(0,r._)([(0,e.Cb)({constructOnly:!0,json:{write:!0}})],b.prototype,"name",void 0),(0,r._)([(0,e.Cb)({constructOnly:!0,json:{write:!0}})],b.prototype,"fields",void 0),(0,r._)([(0,e.Cb)({constructOnly:!0,json:{write:!0}})],b.prototype,"isAscending",void 0),(0,r._)([(0,e.Cb)({constructOnly:!0,json:{write:!0}})],b.prototype,"indexType",void 0),(0,r._)([(0,e.Cb)({constructOnly:!0,json:{write:!0}})],b.prototype,"isUnique",void 0),(0,r._)([(0,e.Cb)({constructOnly:!0,json:{write:!0}})],b.prototype,"description",void 0),b=(0,r._)([(0,C.j)("esri.layers.support.FeatureIndex")],b);var v=l(78818),F=l(49602);let g=class extends((0,B.J)(f.wq)){constructor(m){super(m),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};(0,r._)([(0,e.Cb)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],g.prototype,"shapeAreaField",void 0),(0,r._)([(0,e.Cb)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],g.prototype,"shapeLengthField",void 0),(0,r._)([(0,e.Cb)({type:String,json:{read:m=>F.gV.read(m)||F.Jo.read(m)}})],g.prototype,"units",void 0),g=(0,r._)([(0,C.j)("esri.layers.support.GeometryFieldsInfo")],g);const P=g;var D=l(39557),Z=l(58748),Q=l(37556),k=l(59300);let T=class extends((0,B.J)(f.wq)){constructor(m){super(m),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(m){if(!m)return null;const o={};for(const d of Object.keys(m))o[d]=(0,k.im)(m[d]);return o}writeDomains(m,o){if(!m)return;const d={};for(const a of Object.keys(m))m[a]&&(d[a]=m[a]?.toJSON());o.domains=d}};(0,r._)([(0,e.Cb)({type:Number,json:{write:!0}})],T.prototype,"code",void 0),(0,r._)([(0,e.Cb)({type:Object,json:{write:!0}})],T.prototype,"defaultValues",void 0),(0,r._)([(0,e.Cb)({json:{write:!0}})],T.prototype,"domains",void 0),(0,r._)([(0,j.r)("domains")],T.prototype,"readDomains",null),(0,r._)([(0,y.c)("domains")],T.prototype,"writeDomains",null),(0,r._)([(0,e.Cb)({type:String,json:{write:!0}})],T.prototype,"name",void 0),T=(0,r._)([(0,C.j)("esri.layers.support.Subtype")],T);const ne=T,Y=m=>{let o=class extends m{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(i.Z.ofType(b)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=R.Z.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:d}=this;if(d){const{query:c,operations:_,editing:z}=d;if(!c.supportsQueryByOthers||!c.supportsQueryByAnonymous||_.supportsEditing&&!(z.supportsUpdateByOthers&&z.supportsUpdateByAnonymous&&z.supportsDeleteByOthers&&z.supportsDeleteByAnonymous))return"load"}if(this.userHasUpdateItemPrivileges){if((0,v.uA)(this))return"load";if(this.hasUpdateItemRestrictions)return d.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const a=this.editFieldsInfo;return(a?.creatorField||a?.editorField)&&d?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(d,a){return(0,Q.h)(a,this.url)}readEditingInfo(d,a){const{editingInfo:c}=a;return c?{lastEditDate:null!=c.lastEditDate?new Date(c.lastEditDate):null}:null}get effectiveCapabilities(){const d=this.capabilities;if(!d)return null;const a=(0,O.d9)(d),{operations:c,editing:_}=a;return(0,v.$F)(this)?(this.userHasUpdateItemPrivileges&&(c.supportsQuery=!0),a):this.userHasUpdateItemPrivileges?(c.supportsAdd=c.supportsDelete=c.supportsEditing=c.supportsQuery=c.supportsUpdate=_.supportsDeleteByOthers=_.supportsGeometryUpdate=_.supportsUpdateByOthers=!0,a):(this.userHasFullEditingPrivileges&&c.supportsEditing&&(c.supportsAdd=c.supportsDelete=c.supportsUpdate=_.supportsGeometryUpdate=!0),a)}readGlobalIdFieldFromService(d,a){return(0,v.rk)(a)}get hasFullEditingRestrictions(){const d=this.capabilities;if(!d||(0,v.$F)(this))return!1;const{operations:a,editing:c}=d;return a.supportsEditing&&!(a.supportsAdd&&a.supportsDelete&&a.supportsUpdate&&c.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const d=this.capabilities;if(!d)return!1;const{operations:a,editing:c}=d;return(0,v.$F)(this)?!a.supportsQuery:!(a.supportsAdd&&a.supportsDelete&&a.supportsEditing&&a.supportsQuery&&a.supportsUpdate&&c.supportsDeleteByOthers&&c.supportsGeometryUpdate&&c.supportsUpdateByOthers)}readIsTableFromService(d,a){return"Table"===a.type}readMaxScale(d,a){return a.effectiveMaxScale||d||0}readMinScale(d,a){return a.effectiveMinScale||d||0}readObjectIdFieldFromService(d,a){return(0,v.kZ)(a)}readServiceDefinitionExpression(d,a){return a.definitionQuery||a.definitionExpression}set url(d){if(null==d)return void this._set("url",d);const a=(0,U.XG)({layer:this,url:d,nonStandardUrlAllowed:!0,logger:p.Z.getLogger(this)});this._set("url",a.url),null!=a.layerId&&this._set("layerId",a.layerId)}writeUrl(d,a,c,_){(0,U.wH)(this,d,null,a,_)}readVersion(d,a){return(0,v.JY)(a)}};return(0,r._)([(0,e.Cb)({readOnly:!0})],o.prototype,"authenticationTriggerEvent",null),(0,r._)([(0,e.Cb)({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],o.prototype,"copyright",void 0),(0,r._)([(0,e.Cb)({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],o.prototype,"capabilities",void 0),(0,r._)([(0,j.r)("service","capabilities")],o.prototype,"readCapabilitiesFromService",null),(0,r._)([(0,e.Cb)((0,V.mi)("dateFieldsTimeReference"))],o.prototype,"dateFieldsTimeZone",void 0),(0,r._)([(0,e.Cb)({type:Boolean})],o.prototype,"datesInUnknownTimezone",void 0),(0,r._)([(0,e.Cb)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],o.prototype,"definitionExpression",void 0),(0,r._)([(0,e.Cb)({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],o.prototype,"displayField",void 0),(0,r._)([(0,e.Cb)({readOnly:!0,type:M})],o.prototype,"editFieldsInfo",void 0),(0,r._)([(0,e.Cb)({readOnly:!0})],o.prototype,"editingInfo",void 0),(0,r._)([(0,j.r)("editingInfo")],o.prototype,"readEditingInfo",null),(0,r._)([(0,e.Cb)({readOnly:!0})],o.prototype,"effectiveCapabilities",null),(0,r._)([(0,e.Cb)((()=>{const d=(0,O.d9)(I.PV),a=d.json.origins;return a["web-map"]={read:!1,write:!1},a["portal-item"]={read:!1,write:!1},d})())],o.prototype,"elevationInfo",void 0),(0,r._)([(0,e.Cb)({type:D.Z,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:w.C}}}}})],o.prototype,"floorInfo",void 0),(0,r._)([(0,e.Cb)({type:X.Z,json:{origins:{service:{read:{source:"extent"}}}}})],o.prototype,"fullExtent",void 0),(0,r._)([(0,e.Cb)()],o.prototype,"gdbVersion",void 0),(0,r._)([(0,e.Cb)({readOnly:!0,type:P,json:{read:{source:"geometryProperties"}}})],o.prototype,"geometryFieldsInfo",void 0),(0,r._)([(0,e.Cb)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:v.Fr.read}}}})],o.prototype,"geometryType",void 0),(0,r._)([(0,e.Cb)({type:String})],o.prototype,"globalIdField",void 0),(0,r._)([(0,j.r)("service","globalIdField",["globalIdField","fields"])],o.prototype,"readGlobalIdFieldFromService",null),(0,r._)([(0,e.Cb)({readOnly:!0})],o.prototype,"hasFullEditingRestrictions",null),(0,r._)([(0,e.Cb)({type:Boolean,json:{origins:{service:{read:!0}}}})],o.prototype,"hasM",void 0),(0,r._)([(0,e.Cb)({readOnly:!0})],o.prototype,"hasUpdateItemRestrictions",null),(0,r._)([(0,e.Cb)({type:Boolean,json:{origins:{service:{read:!0}}}})],o.prototype,"hasZ",void 0),(0,r._)([(0,e.Cb)({readOnly:!0,type:q.Z})],o.prototype,"heightModelInfo",void 0),(0,r._)([(0,e.Cb)({type:Date})],o.prototype,"historicMoment",void 0),(0,r._)([(0,e.Cb)({type:i.Z.ofType(b),readOnly:!0})],o.prototype,"indexes",void 0),(0,r._)([(0,e.Cb)({readOnly:!0})],o.prototype,"isTable",void 0),(0,r._)([(0,j.r)("service","isTable",["type"])],o.prototype,"readIsTableFromService",null),(0,r._)([(0,e.Cb)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],o.prototype,"layerId",void 0),(0,r._)([(0,e.Cb)(I.u1)],o.prototype,"maxScale",void 0),(0,r._)([(0,j.r)("service","maxScale",["maxScale","effectiveMaxScale"])],o.prototype,"readMaxScale",null),(0,r._)([(0,e.Cb)(I.rO)],o.prototype,"minScale",void 0),(0,r._)([(0,j.r)("service","minScale",["minScale","effectiveMinScale"])],o.prototype,"readMinScale",null),(0,r._)([(0,e.Cb)({type:String})],o.prototype,"objectIdField",void 0),(0,r._)([(0,j.r)("service","objectIdField",["objectIdField","fields"])],o.prototype,"readObjectIdFieldFromService",null),(0,r._)([(0,e.Cb)((0,V.mi)("preferredTimeReference"))],o.prototype,"preferredTimeZone",void 0),(0,r._)([(0,e.Cb)({type:[Z.Z],readOnly:!0})],o.prototype,"relationships",void 0),(0,r._)([(0,e.Cb)({type:Boolean})],o.prototype,"returnM",void 0),(0,r._)([(0,e.Cb)({type:Boolean})],o.prototype,"returnZ",void 0),(0,r._)([(0,e.Cb)({readOnly:!0,json:{write:!1}})],o.prototype,"serverGens",void 0),(0,r._)([(0,e.Cb)({readOnly:!0})],o.prototype,"serviceDefinitionExpression",void 0),(0,r._)([(0,j.r)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],o.prototype,"readServiceDefinitionExpression",null),(0,r._)([(0,e.Cb)({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],o.prototype,"serviceItemId",void 0),(0,r._)([(0,e.Cb)()],o.prototype,"sourceJSON",void 0),(0,r._)([(0,e.Cb)({type:R.Z,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],o.prototype,"spatialReference",void 0),(0,r._)([(0,e.Cb)({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],o.prototype,"subtypeField",void 0),(0,r._)([(0,e.Cb)({type:[ne],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],o.prototype,"subtypes",void 0),(0,r._)([(0,e.Cb)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],o.prototype,"trackIdField",void 0),(0,r._)([(0,e.Cb)(I.HQ)],o.prototype,"url",null),(0,r._)([(0,y.c)("url")],o.prototype,"writeUrl",null),(0,r._)([(0,e.Cb)({json:{origins:{service:{read:!0}},read:!1}})],o.prototype,"version",void 0),(0,r._)([(0,j.r)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],o.prototype,"readVersion",null),o=(0,r._)([(0,C.j)("esri.layers.mixins.FeatureLayerBase")],o),o}},83739:(pe,K,l)=>{l.d(K,{D:()=>O});var r=l(89713);const i=[];function O(p,e){if((0,r.M8)(p.url??""))return!0;const{wkid:n}=e;for(const j of i){if((p.version??0)>=j[0])return!0;if("function"==typeof j[1]&&(j[1]=j[1]()),j[1].has(n))return!1}return!0}i.push([10.91,()=>{const p=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)p.add(e);for(let e=9748;e<=9749;e++)p.add(e);for(let e=20904;e<=20932;e++)p.add(e);for(let e=21004;e<=21032;e++)p.add(e);for(let e=21207;e<=21264;e++)p.add(e);for(let e=21307;e<=21364;e++)p.add(e);for(let e=23301;e<=23333;e++)p.add(e);for(let e=102759;e<=102760;e++)p.add(e);for(let e=102934;e<=102955;e++)p.add(e);return p}]),i.push([10.9,()=>{const p=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)p.add(e);for(let e=9404;e<=9407;e++)p.add(e);for(let e=9476;e<=9482;e++)p.add(e);for(let e=9487;e<=9494;e++)p.add(e);for(let e=9697;e<=9699;e++)p.add(e);return p}]),i.push([10.81,()=>{const p=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)p.add(e);for(let e=9271;e<=9273;e++)p.add(e);for(let e=9284;e<=9285;e++)p.add(e);for(let e=21453;e<=21463;e++)p.add(e);return p}]),i.push([10.8,()=>{const p=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)p.add(e);for(let e=8455;e<=8456;e++)p.add(e);for(let e=8518;e<=8529;e++)p.add(e);for(let e=8533;e<=8536;e++)p.add(e);for(let e=8538;e<=8540;e++)p.add(e);for(let e=8677;e<=8679;e++)p.add(e);for(let e=8902;e<=8903;e++)p.add(e);for(let e=8907;e<=8910;e++)p.add(e);for(let e=8949;e<=8951;e++)p.add(e);for(let e=8972;e<=8987;e++)p.add(e);for(let e=9039;e<=9040;e++)p.add(e);for(let e=9068;e<=9069;e++)p.add(e);for(let e=9140;e<=9141;e++)p.add(e);for(let e=9148;e<=9150;e++)p.add(e);for(let e=9153;e<=9159;e++)p.add(e);for(let e=9205;e<=9218;e++)p.add(e);for(let e=9221;e<=9222;e++)p.add(e);for(let e=54098;e<=54101;e++)p.add(e);return p}]),i.push([10.71,()=>{const p=new Set([6316]);for(let e=8351;e<=8353;e++)p.add(e);for(let e=9294;e<=9297;e++)p.add(e);for(let e=22619;e<=22621;e++)p.add(e);for(let e=103586;e<=103594;e++)p.add(e);return p}])},93604:(pe,K,l)=>{l.d(K,{JV:()=>q,Jp:()=>e,Px:()=>w,U8:()=>p,r9:()=>C});var r=l(15861),i=l(66476);const p=(0,l(19986).dG)(),e=new Map,n=new Map;function C(R,U,I){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)(function*(R,U,I){if(!R||!I)return!1;if(!U)return!0;const B=new URL(R).host;let f=e.get(B);if(!f){const S=R.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");f=(yield(0,i.Z)(S,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return f===U})).apply(this,arguments)}function w(R,U){return X.apply(this,arguments)}function X(){return(X=(0,r.Z)(function*(R,U,I=!1){if(!R||!U)return!0;const B=R.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),f=n.get(B)?.entries();if(f)for(const[S,V]of f)if(V.name===U){const u=!V.stack?.hasForwardEdits();if(!u&&I){const[{deleteForwardEdits:M},{default:b}]=yield Promise.all([l.e(1015).then(l.bind(l,51015)),l.e(560).then(l.bind(l,80560))]),v=yield M(B,S,new b({sessionId:p,moment:V.moment}));return v.success&&V.stack?.clearForwardEdits(),v.success}return u}return!0})).apply(this,arguments)}function q(R,U){if(!R)return!1;const I=R.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),B=n.get(I)?.entries();if(B)for(const[f,S]of B)if(S.name===U)return"edit"===S.lockType;return!1}}}]);