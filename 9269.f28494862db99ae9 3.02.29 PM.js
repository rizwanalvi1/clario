"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[9269],{52540:(W,z,t)=>{t.d(z,{z:()=>U});var a=t(39921);class U{constructor(M,g){this._storage=new a.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=M,this._storage.register(this),g&&this._storage.registerRemoveFunc("",g)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(M,g,v=1){this._storage.put(this,M,g,v,1)}pop(M){return this._storage.pop(this,M)}get(M){return this._storage.get(this,M)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(M){this._storage.maxSize=M}resetHitRate(){}}},39921:(W,z,t)=>{t.d(z,{WJ:()=>v,Xq:()=>g});var M,u,a=t(43029);(u=M||(M={}))[u.ALL=0]="ALL",u[u.SOME=1]="SOME";class g{constructor(s,e,i){this.name=s,this._storage=e,this.id=R+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(s){return this._storage.getSize(this,s)}resetHitRate(){this._hit=this._miss=0}put(s,e,i,c=0){this._storage.put(this,s,e,i,c)}pop(s){const e=this._storage.pop(this,s);return void 0===e?++this._miss:++this._hit,e}get(s){const e=this._storage.get(this,s);return void 0===e?++this._miss:++this._hit,e}peek(s){return this._storage.peek(this,s)}updateSize(s,e,i){this._storage.updateSize(this,s,e,i)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class v{get size(){return this._size}constructor(s=10485760){this._maxSize=s,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new a.Z,this._users=new a.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(s){this._users.push(s)}deregister(s){this._users.removeUnordered(s)}registerRemoveFunc(s,e){this._removeFuncs.push([s,e])}deregisterRemoveFunc(s){this._removeFuncs.filterInPlace(e=>e[0]!==s)}get maxSize(){return this._maxSize}set maxSize(s){this._maxSize=Math.max(s,-1),this._checkSize()}getSize(s,e){return this._db.get(s.id+e)?.size??0}put(s,e,i,c,p){const l=this._db.get(e=s.id+e);if(l&&(this._size-=l.size,s.size-=l.size,this._db.delete(e),l.entry!==i&&this._notifyRemove(e,l.entry,l.size,M.ALL)),c>this._maxSize)return void this._notifyRemove(e,i,c,M.ALL);if(void 0===i)return void console.warn("Refusing to cache undefined entry ");if(!c||c<0)return console.warn(`Refusing to cache entry with size ${c} for key ${e}`),void this._notifyRemove(e,i,0,M.ALL);const d=1+Math.max(p,-4)- -3;this._db.set(e,new D(i,c,d)),this._size+=c,s.size+=c,this._checkSize()}updateSize(s,e,i,c){const p=this._db.get(e=s.id+e);if(p&&p.entry===i){for(this._size-=p.size,s.size-=p.size;c>this._maxSize;){const l=this._notifyRemove(e,i,c,M.SOME);if(!(null!=l&&l>0))return void this._db.delete(e);c=l}p.size=c,this._size+=c,s.size+=c,this._checkSize()}}pop(s,e){const i=this._db.get(e=s.id+e);if(i)return this._size-=i.size,s.size-=i.size,this._db.delete(e),++this._hit,i.entry;++this._miss}get(s,e){const i=this._db.get(e=s.id+e);if(void 0!==i)return this._db.delete(e),i.lives=i.lifetime,this._db.set(e,i),++this._hit,i.entry;++this._miss}peek(s,e){const i=this._db.get(s.id+e);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){const s={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},i=new Array;this._db.forEach((l,d)=>{const S=l.lifetime;i[S]=(i[S]||0)+l.size,this._users.forAll(P=>{const{id:T,name:r}=P;d.startsWith(T)&&(e[r]=(e[r]||0)+l.size)})});const c={};this._users.forAll(l=>{const d=l.name;"hitRate"in l&&"number"==typeof l.hitRate&&!isNaN(l.hitRate)&&l.hitRate>0?(e[d]=e[d]||0,c[d]=Math.round(100*l.hitRate)+"%"):c[d]="0%"});const p=Object.keys(e);p.sort((l,d)=>e[d]-e[l]),p.forEach(l=>s[l]=Math.round(e[l]/2**20)+"MB / "+c[l]);for(let l=i.length-1;l>=0;--l){const d=i[l];d&&(s["Priority "+(l+-3-1)]=Math.round(d/this._size*100)+"%")}return s}resetStats(){this._hit=this._miss=0,this._users.forAll(s=>s.resetHitRate())}clear(s){const e=s.id;this._db.forEach((i,c)=>{c.startsWith(e)&&(this._size-=i.size,this._db.delete(c),this._notifyRemove(c,i.entry,i.size,M.ALL))}),s.size=0}clearAll(){this._db.forEach((s,e)=>this._notifyRemove(e,s.entry,s.size,M.ALL)),this._users.forAll(s=>s.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(s,e,i,c){let p;return this._removeFuncs.some(l=>{if(s.startsWith(l[0])){const d=l[1](e,c,i);return"number"==typeof d&&(p=d),!0}return!1}),p}_checkSize(){this._users.forAll(s=>this._checkSizeLimits(s)),this._checkSizeLimits()}_checkSizeLimits(s){const e=s??this;if(e.maxSize<0||e.size<=e.maxSize)return;const i=s?.id;let c=!0;for(;c;){c=!1;for(const[p,l]of this._db)if(0===l.lifetime&&(!i||p.startsWith(i))){if(this._purgeItem(p,l,s),e.size<=.9*e.maxSize)return;c||=this._db.has(p)}}for(const[p,l]of this._db)if((!i||p.startsWith(i))&&(this._purgeItem(p,l,s),e.size<=.9*e.maxSize))return}_purgeItem(s,e,i=this._users.find(c=>s.startsWith(c.id))){if(this._db.delete(s),e.lives<=1){this._size-=e.size,i&&(i.size-=e.size);const c=this._notifyRemove(s,e.entry,e.size,M.SOME);null!=c&&c>0&&(this._size+=c,i&&(i.size+=c),e.lives=e.lifetime,e.size=c,this._db.set(s,e))}else--e.lives,this._db.set(s,e)}}let R=0;class D{constructor(s,e,i){this.entry=s,this.size=e,this.lifetime=i,this.lives=i}}},96043:(W,z,t)=>{t.d(z,{AJ:()=>R,If:()=>s,k0:()=>v,uI:()=>u,ul:()=>g,wx:()=>e});var a=t(55117),U=t(55768),I=t(5710),M=t(23515);const g=2.4;function v(i){return(0,U.Wz)(i*g)}function R(i){return(0,U.F2)(i)/g}function D(i,c,p,l){let{color:d,ratio:S}=c,{color:P,ratio:T}=p;T===S&&(1===T?S-=1e-6:T+=1e-6);const r=(0,a.uZ)((l-S)/(T-S),0,1);(0,I.l)(i,d.toArray(),P.toArray(),r)}function u(i){const p=new Uint8ClampedArray(2048);if((i=i.filter(({ratio:T})=>T>=0&&T<=1).sort((T,r)=>T.ratio-r.ratio).map(({color:T,ratio:r})=>({color:T,ratio:Math.max(r,.001)}))).length<1)return p;let l=i[0],d=i[0],S=1;const P=(0,M.Ue)();for(let T=0;T<512;T++){const r=(T+.5)/512;for(;r>d.ratio&&S<i.length;)l=d,d=i[S++];D(P,l,d,r),p.set(P,4*T)}return p}function s(i,c,p){const l=Math.sqrt(i**2+c**2)/p;return l>1?0:3/(Math.PI*p**2)*(1-l**2)**2}function e(i){return"function"==typeof i?i:i?c=>+c[i]:()=>1}},93792:(W,z,t)=>{t.d(z,{Z:()=>T});var d,a=t(50484),U=t(2189),I=t(35458),M=t(84303),g=t(89317),v=t(34222),R=t(80543),s=(t(14007),t(4703),t(62185)),e=t(10141),i=t(7547),c=t(43814),p=t(40637),l=t(81247);const S=new M.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let P=d=class extends g.wq{constructor(r){super(r),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(r,f){const m=c.Z.fromJSON(f.spatialReference),n=[];for(let _=0;_<r.length;_++){const o=r[_],y=I.Z.fromJSON(o),E=o.geometry?.spatialReference;null==y.geometry||E||(y.geometry.spatialReference=m);const A=o.aggregateGeometries,h=y.aggregateGeometries;if(A&&null!=h)for(const L in h){const O=h[L],C=A[L],b=C?.spatialReference;null==O||b||(O.spatialReference=m)}n.push(y)}return n}writeGeometryType(r,f,m,n){if(r)return void S.write(r,f,m,n);const{features:_}=this;if(_)for(const o of _)if(null!=o?.geometry)return void S.write(o.geometry.type,f,m,n)}readQueryGeometry(r,f){if(!r)return null;const m=!!r.spatialReference,n=(0,p.im)(r);return n&&!m&&f.spatialReference&&(n.spatialReference=c.Z.fromJSON(f.spatialReference)),n}writeSpatialReference(r,f){if(r)return void(f.spatialReference=r.toJSON());const{features:m}=this;if(m)for(const n of m)if(n&&null!=n.geometry&&n.geometry.spatialReference)return void(f.spatialReference=n.geometry.spatialReference.toJSON())}clone(){return new d(this.cloneProperties())}cloneProperties(){return(0,v.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(r){const f=this.write();if(f.features&&Array.isArray(r)&&r.length>0)for(let m=0;m<f.features.length;m++){const n=f.features[m];if(n.geometry){const _=r?.[m];n.geometry=_?.toJSON()||n.geometry}}return f}quantize(r){const{scale:[f,m],translate:[n,_]}=r,E=this.features,A=this._getQuantizationFunction(this.geometryType,h=>Math.round((h-n)/f),h=>Math.round((_-h)/m));for(let h=0,L=E.length;h<L;h++)A?.(E[h].geometry)||(E.splice(h,1),h--,L--);return this.transform=r,this}unquantize(){const{geometryType:r,features:f,transform:m}=this;if(!m)return this;const{translate:[n,_],scale:[o,y]}=m;let h=null,L=null;if(this.hasZ&&null!=m?.scale?.[2]){const{translate:[,,C],scale:[,,b]}=m;h=j=>j*b+C}if(this.hasM&&null!=m?.scale?.[3]){const{translate:[,,,C],scale:[,,,b]}=m;L=j=>null==j?j:j*b+C}const O=this._getHydrationFunction(r,C=>C*o+n,C=>_-C*y,h,L);for(const{geometry:C}of f)null!=C&&O&&O(C);return this.transform=null,this}_quantizePoints(r,f,m){let n,_;const o=[];for(let y=0,E=r.length;y<E;y++){const A=r[y];if(y>0){const h=f(A[0]),L=m(A[1]);h===n&&L===_||(o.push([h-n,L-_]),n=h,_=L)}else n=f(A[0]),_=m(A[1]),o.push([n,_])}return o.length>0?o:null}_getQuantizationFunction(r,f,m){return"point"===r?n=>(n.x=f(n.x),n.y=m(n.y),n):"polyline"===r||"polygon"===r?n=>{const _=(0,p.oU)(n)?n.rings:n.paths,o=[];for(let y=0,E=_.length;y<E;y++){const h=this._quantizePoints(_[y],f,m);h&&o.push(h)}return o.length>0?((0,p.oU)(n)?n.rings=o:n.paths=o,n):null}:"multipoint"===r?n=>{const _=this._quantizePoints(n.points,f,m);return _&&_.length>0?(n.points=_,n):null}:"extent"===r?n=>n:null}_getHydrationFunction(r,f,m,n,_){return"point"===r?o=>{o.x=f(o.x),o.y=m(o.y),n&&(o.z=n(o.z))}:"polyline"===r||"polygon"===r?o=>{const y=(0,p.oU)(o)?o.rings:o.paths;let E,A;for(let h=0,L=y.length;h<L;h++){const O=y[h];for(let C=0,b=O.length;C<b;C++){const j=O[C];C>0?(E+=j[0],A+=j[1]):(E=j[0],A=j[1]),j[0]=f(E),j[1]=m(A)}}if(n&&_)for(let h=0,L=y.length;h<L;h++){const O=y[h];for(let C=0,b=O.length;C<b;C++){const j=O[C];j[2]=n(j[2]),j[3]=_(j[3])}}else if(n)for(let h=0,L=y.length;h<L;h++){const O=y[h];for(let C=0,b=O.length;C<b;C++){const j=O[C];j[2]=n(j[2])}}else if(_)for(let h=0,L=y.length;h<L;h++){const O=y[h];for(let C=0,b=O.length;C<b;C++){const j=O[C];j[2]=_(j[2])}}}:"extent"===r?o=>{o.xmin=f(o.xmin),o.ymin=m(o.ymin),o.xmax=f(o.xmax),o.ymax=m(o.ymax),n&&null!=o.zmax&&null!=o.zmin&&(o.zmax=n(o.zmax),o.zmin=n(o.zmin)),_&&null!=o.mmax&&null!=o.mmin&&(o.mmax=_(o.mmax),o.mmin=_(o.mmin))}:"multipoint"===r?o=>{const y=o.points;let E,A;for(let h=0,L=y.length;h<L;h++){const O=y[h];h>0?(E+=O[0],A+=O[1]):(E=O[0],A=O[1]),O[0]=f(E),O[1]=m(A)}if(n&&_)for(let h=0,L=y.length;h<L;h++){const O=y[h];O[2]=n(O[2]),O[3]=_(O[3])}else if(n)for(let h=0,L=y.length;h<L;h++){const O=y[h];O[2]=n(O[2])}else if(_)for(let h=0,L=y.length;h<L;h++){const O=y[h];O[2]=_(O[2])}}:null}};(0,a._)([(0,R.Cb)({type:String,json:{write:!0}})],P.prototype,"displayFieldName",void 0),(0,a._)([(0,R.Cb)({type:Boolean,json:{write:{overridePolicy:r=>({enabled:r})}}})],P.prototype,"exceededTransferLimit",void 0),(0,a._)([(0,R.Cb)({type:[I.Z],json:{write:!0}})],P.prototype,"features",void 0),(0,a._)([(0,s.r)("features")],P.prototype,"readFeatures",null),(0,a._)([(0,R.Cb)({type:[l.Z],json:{write:!0}})],P.prototype,"fields",void 0),(0,a._)([(0,R.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:S.read}}})],P.prototype,"geometryType",void 0),(0,a._)([(0,i.c)("geometryType")],P.prototype,"writeGeometryType",null),(0,a._)([(0,R.Cb)({type:Boolean,json:{write:{overridePolicy:r=>({enabled:r})}}})],P.prototype,"hasM",void 0),(0,a._)([(0,R.Cb)({type:Boolean,json:{write:{overridePolicy:r=>({enabled:r})}}})],P.prototype,"hasZ",void 0),(0,a._)([(0,R.Cb)({types:U.qM,json:{write:!0}})],P.prototype,"queryGeometry",void 0),(0,a._)([(0,s.r)("queryGeometry")],P.prototype,"readQueryGeometry",null),(0,a._)([(0,R.Cb)({type:c.Z,json:{write:!0}})],P.prototype,"spatialReference",void 0),(0,a._)([(0,i.c)("spatialReference")],P.prototype,"writeSpatialReference",null),(0,a._)([(0,R.Cb)({json:{write:!0}})],P.prototype,"transform",void 0),P=d=(0,a._)([(0,e.j)("esri.rest.support.FeatureSet")],P),P.prototype.toJSON.isDefaultToJSON=!0;const T=P},20494:(W,z,t)=>{t.r(z),t.d(z,{default:()=>T});var a=t(15861),U=t(50484),I=t(62691),M=t(83944),g=t(77675),s=(t(4703),t(14007),t(65311),t(57964),t(10141)),e=t(50923),i=t(91963),c=t(93792),p=t(83124),l=t(50800),d=t(37348),S=t(50145);let P=class extends((0,p.y)(S.Z)){constructor(){super(...arguments),this._graphicsViewMap={},this._popupTemplates=new Map,this.graphicsViews=[]}hitTest(r,f){var m=this;return(0,a.Z)(function*(){if(!m.graphicsViews.length)return null;const n=m.layer;return m.graphicsViews.reverse().flatMap(_=>{const o=m._popupTemplates.get(_),y=_.hitTest(r);for(const E of y)E.layer=n,E.sourceLayer=n,E.popupTemplate=o;return y}).map(_=>({type:"graphic",graphic:_,layer:n,mapPoint:r}))})()}update(r){if(this.graphicsViews)for(const f of this.graphicsViews)f.processUpdate(r)}attach(){this.addAttachHandles([(0,g.YP)(()=>this.layer?.featureCollections,r=>{this._clear();for(const{popupInfo:f,featureSet:m,layerDefinition:n}of r){const _=c.Z.fromJSON(m),o=new M.Z(_.features),y=n.drawingInfo,E=f?I.Z.fromJSON(f):null,A=(0,i.i)(y.renderer),h=new d.Z({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:o,renderer:A,container:new l.Z(this.view.featuresTilingScheme)});this._graphicsViewMap[_.geometryType]=h,this._popupTemplates.set(h,E),"polygon"!==_.geometryType||this.layer.polygonSymbol?"polyline"!==_.geometryType||this.layer.lineSymbol?"point"!==_.geometryType||this.layer.pointSymbol||(this.layer.pointSymbol=A.symbol):this.layer.lineSymbol=A.symbol:this.layer.polygonSymbol=A.symbol,this.graphicsViews.push(h),this.container.addChild(h.container)}},g.nn),(0,g.YP)(()=>this.layer?.polygonSymbol,r=>{this._graphicsViewMap.polygon.renderer=new e.Z({symbol:r})},g.nn),(0,g.YP)(()=>this.layer?.lineSymbol,r=>{this._graphicsViewMap.polyline.renderer=new e.Z({symbol:r})},g.nn),(0,g.YP)(()=>this.layer?.pointSymbol,r=>{this._graphicsViewMap.point.renderer=new e.Z({symbol:r})},g.nn)])}detach(){this._clear()}moveEnd(){}viewChange(){for(const r of this.graphicsViews)r.viewChange()}_clear(){this.container.removeAllChildren();for(const r of this.graphicsViews)r.destroy();this._graphicsViewMap={},this._popupTemplates.clear(),this.graphicsViews.length=0}};P=(0,U._)([(0,s.j)("esri.views.2d.layers.GeoRSSLayerView2D")],P);const T=P},83124:(W,z,t)=>{t.d(z,{y:()=>m});var p,a=t(50484),U=t(83944),I=t(18626),M=t(57964),g=t(77675),v=t(80543),s=(t(14007),t(4703),t(65311),t(10141)),e=t(85338),i=t(30640),c=t(38954);let l=p=class extends c.Z{constructor(n){super(n),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new p({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,a._)([(0,v.Cb)({type:[Number,String],json:{write:!0}})],l.prototype,"left",void 0),(0,a._)([(0,v.Cb)({type:[Number,String],json:{write:!0}})],l.prototype,"right",void 0),(0,a._)([(0,v.Cb)({type:[Number,String],json:{write:!0}})],l.prototype,"top",void 0),(0,a._)([(0,v.Cb)({type:[Number,String],json:{write:!0}})],l.prototype,"bottom",void 0),l=p=(0,a._)([(0,s.j)("esri.views.layers.support.ClipRect")],l);const d=l;var S=t(87265);let P=class extends c.Z{constructor(n){super(n),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,a._)([(0,v.Cb)({type:[[[Number]]],json:{write:!0}})],P.prototype,"path",void 0),P=(0,a._)([(0,s.j)("esri.views.layers.support.Path")],P);const T=P;var r=t(64579);const f=U.Z.ofType({key:"type",base:null,typeMap:{rect:d,path:T,geometry:S.Z}}),m=n=>{let _=class extends n{constructor(){super(...arguments),this.attached=!1,this.clips=new f,this.highlightOptions=null,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this._visibleAtCurrentScale=!0}initialize(){const o=this.view?.spatialReferenceLocked??!0;this.view?.spatialReference&&o&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new M.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new e.W),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,g.YP)(()=>this.suspended,E=>{this.container&&(this.container.visible=!E)},g.tX),(0,g.YP)(()=>this.updateSuspended,E=>{this.view&&!E&&this.updateRequested&&this.view.requestUpdate()},g.tX),(0,g.YP)(()=>this.layer?.opacity??1,E=>{this.container&&(this.container.opacity=E)},g.tX),(0,g.YP)(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",E=>{this.container&&(this.container.blendMode=E)},g.tX),(0,g.YP)(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,E=>{this.container&&(this.container.effect=E)},g.tX),(0,g.YP)(()=>this.highlightOptions,E=>this.container.highlightOptions=E,g.tX),(0,g.on)(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)},g.tX),(0,g.YP)(()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null}),({scale:E,scaleRange:A})=>{const h=(0,r.GB)(A,E);h!==this._visibleAtCurrentScale&&(this._visibleAtCurrentScale=h)},g.tX)],"constructor"),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then(E=>{E===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){const o=this.view?.spatialReference;return null==o||this.supportsSpatialReference(o)}get updating(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this._updatingHandles?.updating)}get visibleAtCurrentScale(){return this._visibleAtCurrentScale}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.updateSuspended||this.view.requestUpdate())}processUpdate(o){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",o),this.updateRequested&&!this.updateSuspended&&(this.updateRequested=!1,this.update(o))):this.updateRequested=!1}hitTest(o,y){return Promise.resolve(null)}supportsSpatialReference(o){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const o=super.getSuspendInfo(),y=!this.spatialReferenceSupported;return y&&(o.spatialReferenceNotSupported=y),o}addAttachHandles(o){this.addHandles(o,"attach")}};return(0,a._)([(0,v.Cb)()],_.prototype,"attached",void 0),(0,a._)([(0,v.Cb)({type:f,set(o){const y=(0,I.Z)(o,this._get("clips"),f);this._set("clips",y)}})],_.prototype,"clips",void 0),(0,a._)([(0,v.Cb)()],_.prototype,"container",void 0),(0,a._)([(0,v.Cb)({type:i.Z})],_.prototype,"highlightOptions",void 0),(0,a._)([(0,v.Cb)()],_.prototype,"moving",void 0),(0,a._)([(0,v.Cb)({readOnly:!0})],_.prototype,"spatialReferenceSupported",null),(0,a._)([(0,v.Cb)({readOnly:!0})],_.prototype,"updateParameters",void 0),(0,a._)([(0,v.Cb)()],_.prototype,"updateRequested",void 0),(0,a._)([(0,v.Cb)()],_.prototype,"updating",null),(0,a._)([(0,v.Cb)()],_.prototype,"view",void 0),(0,a._)([(0,v.Cb)()],_.prototype,"_visibleAtCurrentScale",void 0),(0,a._)([(0,v.Cb)({readOnly:!0})],_.prototype,"visibleAtCurrentScale",null),_=(0,a._)([(0,s.j)("esri.views.2d.layers.LayerView2D")],_),_}},50800:(W,z,t)=>{t.d(z,{Z:()=>M});var a=t(43101),U=t(89791),I=t(31043);class M extends U.K{renderChildren(v){for(const R of this.children)R.setTransform(v.state);if(super.renderChildren(v),this.attributeView.update(),this.children.some(R=>R.hasData)){switch(v.drawPhase){case a.jx.MAP:this._renderChildren(v,a.Xq.All);break;case a.jx.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(v)}this._boundsRenderer&&this._boundsRenderer.doRender(v)}}_renderHighlight(v){(0,I.P9)(v,!1,R=>{this._renderChildren(R,a.Xq.Highlight)})}}},50145:(W,z,t)=>{t.d(z,{Z:()=>l});var a=t(50484),U=t(73514),I=t(88278),M=t(84373),g=t(4703),v=t(51172),R=t(47868),D=t(80543),e=(t(14007),t(65311),t(10141)),i=t(90110),c=t(64579);let p=class extends((0,M.IG)((0,R.v)(I.Z.EventedMixin(U.Z)))){constructor(d){super(d),this._updatingHandles=new i.R,this.layer=null,this.parent=null}initialize(){this.when().catch(d=>{if("layerview:create-error"!==d.name){const S=this.layer&&this.layer.id||"no id",P=this.layer?.title||"no title";g.Z.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${P}', id: '${S}')`,d)}})}destroy(){this._updatingHandles=(0,v.SC)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(d){this._overrideIfSome("visible",d)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const d=this.view.timeExtent,S=this.layer?.visibilityTimeExtent;return!d||!S||!d.intersection(S).isEmpty}canResume(){const d=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready&&(0,c.Cy)(d)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const d=this.parent?.suspended?this.parent.suspendInfo:{};return this.view?.ready||(d.viewNotReady=!0),this.layer&&this.layer.loaded||(d.layerNotLoaded=!0),(0,c.Cy)(this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null)&&this.visibleAtCurrentScale||(d.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(d.outsideVisibilityTimeExtent=!0),this.visible||(d.layerInvisible=!0),d}isUpdating(){return!1}};(0,a._)([(0,D.Cb)()],p.prototype,"view",void 0),(0,a._)([(0,D.Cb)()],p.prototype,"fullOpacity",null),(0,a._)([(0,D.Cb)()],p.prototype,"layer",void 0),(0,a._)([(0,D.Cb)()],p.prototype,"parent",void 0),(0,a._)([(0,D.Cb)({readOnly:!0})],p.prototype,"suspended",null),(0,a._)([(0,D.Cb)({readOnly:!0})],p.prototype,"suspendInfo",null),(0,a._)([(0,D.Cb)({readOnly:!0})],p.prototype,"legendEnabled",null),(0,a._)([(0,D.Cb)({type:Boolean,readOnly:!0})],p.prototype,"updating",null),(0,a._)([(0,D.Cb)({readOnly:!0})],p.prototype,"updatingProgress",null),(0,a._)([(0,D.Cb)()],p.prototype,"updateSuspended",null),(0,a._)([(0,D.Cb)()],p.prototype,"visible",null),(0,a._)([(0,D.Cb)({readOnly:!0})],p.prototype,"visibleAtCurrentScale",null),(0,a._)([(0,D.Cb)({readOnly:!0})],p.prototype,"visibleAtCurrentTimeExtent",null),p=(0,a._)([(0,e.j)("esri.views.layers.LayerView")],p);const l=p},38954:(W,z,t)=>{t.d(z,{Z:()=>u});var a=t(50484),U=t(89317),I=t(80543),R=(t(14007),t(4703),t(65311),t(10141));let D=class extends U.wq{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,a._)([(0,I.Cb)({readOnly:!0})],D.prototype,"version",null),D=(0,a._)([(0,R.j)("esri.views.layers.support.ClipArea")],D);const u=D},87265:(W,z,t)=>{t.d(z,{Z:()=>d});var c,a=t(50484),I=(t(2189),t(80543)),R=(t(14007),t(4703),t(65311),t(10141)),D=t(32184),u=t(40637),s=t(38954),e=t(26894),i=t(5391);const p={base:D.Z,key:"type",typeMap:{extent:e.Z,polygon:i.Z}};let l=c=class extends s.Z{constructor(S){super(S),this.type="geometry",this.geometry=null}clone(){return new c({geometry:this.geometry?.clone()??null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,a._)([(0,I.Cb)({types:p,json:{read:u.im,write:!0}})],l.prototype,"geometry",void 0),l=c=(0,a._)([(0,R.j)("esri.views.layers.support.Geometry")],l);const d=l},64579:(W,z,t)=>{function a(u){return u&&"function"==typeof u.highlight}function M(u,s){if(s&&u){const{minScale:e,maxScale:i}=u;if(function g(u,s){return null!=u&&u>0||null!=s&&s>0}(e,i))return function I(u,s,e){return null==u||u>=e&&(0===s||u<=s)}(s,e,i)}return!0}function v(u){return!u?.minScale||!u.maxScale||u.minScale>=u.maxScale}t.d(z,{Cy:()=>v,GB:()=>M,tl:()=>a})}}]);