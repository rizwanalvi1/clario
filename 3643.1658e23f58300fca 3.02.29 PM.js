"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[3643],{6671:(Oe,ne,E)=>{E.d(ne,{a:()=>L,b:()=>pe,c:()=>Fe,g:()=>ie,j:()=>Pe,n:()=>et}),E(14007),E(4703);var X=E(55117),q=E(39061),O=E(43548),Z=E(73145),k=E(5710),re=E(23515),ee=E(89612),xe=E(48621),se=E(69349),De=E(4267),Ee=E(65119);const z=Fe();function Fe(){return(0,re.Ue)()}const N=k.e,H=k.e;function L(F,Y){return(0,k.c)(Y,F)}function pe(F){return F[3]}function ie(F){return F}function J(F,Y,V){if(null==Y||!Q(F,Y,K))return!1;let{t0:te,t1:ce}=K;if((te<0||ce<te&&ce>0)&&(te=ce),te<0)return!1;if(V){const{origin:fe,direction:Ie}=Y;V[0]=fe[0]+Ie[0]*te,V[1]=fe[1]+Ie[1]*te,V[2]=fe[2]+Ie[2]*te}return!0}const K={t0:0,t1:0};function Q(F,Y,V){const{origin:te,direction:ce}=Y,fe=Me;fe[0]=te[0]-F[0],fe[1]=te[1]-F[1],fe[2]=te[2]-F[2];const Ie=ce[0]*ce[0]+ce[1]*ce[1]+ce[2]*ce[2];if(0===Ie)return!1;const Le=2*(ce[0]*fe[0]+ce[1]*fe[1]+ce[2]*fe[2]),Be=Le*Le-4*Ie*(fe[0]*fe[0]+fe[1]*fe[1]+fe[2]*fe[2]-F[3]*F[3]);if(Be<0)return!1;const ze=Math.sqrt(Be);return V.t0=(-Le-ze)/(2*Ie),V.t1=(-Le+ze)/(2*Ie),!0}const Me=(0,Z.Ue)();function Pe(F,Y){return J(F,Y,null)}function Ue(F,Y,V){const te=Ee.WM.get(),ce=Ee.MP.get();(0,O.b)(te,Y.origin,Y.direction);const fe=pe(F);(0,O.b)(V,te,Y.origin),(0,O.j)(V,V,1/(0,O.l)(V)*fe);const Ie=Qe(F,Y.origin),Le=(0,De.EU)(Y.origin,V);return(0,q.Us)(ce,Le+Ie,te),(0,O.h)(V,V,ce),V}function Ne(F,Y,V){const te=(0,O.f)(Ee.WM.get(),Y,F),ce=(0,O.j)(Ee.WM.get(),te,F[3]/(0,O.l)(te));return(0,O.g)(V,ce,F)}function Qe(F,Y){const V=(0,O.f)(Ee.WM.get(),Y,F),te=(0,O.l)(V),ce=pe(F),fe=ce+Math.abs(ce-te);return(0,X.ZF)(ce/fe)}const Ze=(0,Z.Ue)();function Je(F,Y,V,te){const ce=(0,O.f)(Ze,Y,F);switch(V){case xe.R.X:{const fe=(0,X.jE)(ce,Ze)[2];return(0,O.s)(te,-Math.sin(fe),Math.cos(fe),0)}case xe.R.Y:{const fe=(0,X.jE)(ce,Ze),Ie=fe[1],Le=fe[2],Be=Math.sin(Ie);return(0,O.s)(te,-Be*Math.cos(Le),-Be*Math.sin(Le),Math.cos(Ie))}case xe.R.Z:return(0,O.n)(te,ce);default:return}}function qe(F,Y){const V=(0,O.f)(He,Y,F);return(0,O.l)(V)-F[3]}function et(F,Y){const V=(0,O.a)(F,Y),te=pe(F);return V<=te*te}const He=(0,Z.Ue)(),je=Fe();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:z,altitudeAt:qe,angleToSilhouette:Qe,axisAt:Je,clear:function j(F){F[0]=F[1]=F[2]=F[3]=0},closestPoint:function Se(F,Y,V){return J(F,Y,V)?V:((0,se.JI)(Y,F,V),Ne(F,V,V))},closestPointOnSilhouette:Ue,containsPoint:et,copy:L,create:Fe,distanceToSilhouette:function dt(F,Y){const V=(0,O.f)(Ee.WM.get(),Y,F),te=(0,O.q)(V);return Math.sqrt(Math.abs(te-F[3]*F[3]))},elevate:function D(F,Y,V){return F!==V&&(V[0]=F[0],V[1]=F[1],V[2]=F[2]),V[3]=F[3]+Y,V},equals:H,exactEquals:N,fromCenterAndRadius:function ae(F,Y){return(0,re.al)(F[0],F[1],F[2],Y)},fromRadius:function le(F,Y){return F[0]=F[1]=F[2]=0,F[3]=Y,F},fromValues:function ge(F,Y,V,te){return(0,re.al)(F,Y,V,te)},getCenter:ie,getRadius:pe,intersectLine:function $(F,Y,V){const te=(0,se.zk)(Y,V);if(!Q(F,te,K))return[];const{origin:ce,direction:fe}=te,{t0:Ie,t1:Le}=K,Be=ze=>{const Ge=(0,Z.Ue)();return(0,O.r)(Ge,ce,fe,ze),Ne(F,Ge,Ge)};return Math.abs(Ie-Le)<(0,ee.bn)()?[Be(Ie)]:[Be(Ie),Be(Le)]},intersectRay:J,intersectRayClosestSilhouette:function ye(F,Y,V){if(J(F,Y,V))return V;const te=Ue(F,Y,Ee.WM.get());return(0,O.g)(V,Y.origin,(0,O.j)(Ee.WM.get(),Y.direction,(0,O.p)(Y.origin,te)/(0,O.l)(Y.direction))),V},intersectsRay:Pe,projectPoint:Ne,setAltitudeAt:function ut(F,Y,V,te){const ce=qe(F,Y),fe=Je(F,Y,xe.R.Z,He),Ie=(0,O.j)(He,fe,V-ce);return(0,O.g)(te,Y,Ie)},setExtent:function U(F,Y,V){return F!==V&&L(F,V),V},tmpSphere:je,union:function ft(F,Y,V=(0,re.Ue)()){const te=(0,O.p)(F,Y),ce=F[3],fe=Y[3];return te+fe<ce?((0,k.c)(V,F),V):te+ce<fe?((0,k.c)(V,Y),V):((0,O.o)(V,F,Y,(te+fe-ce)/(2*te)),V[3]=(te+ce+fe)/2,V)},wrap:function oe(F){return F}},Symbol.toStringTag,{value:"Module"}))},16573:(Oe,ne,E)=>{E.d(ne,{x:()=>B});var A=E(38119);class B{constructor(O){this._allocator=O,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,A.Y)(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const O=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*X);this._items.length=Math.min(O,this._items.length),this._itemsPtr=0}_grow(){for(let O=0;O<Math.max(8,Math.min(this._items.length,X));O++)this._items.push(this._allocator())}}const X=1024},11462:(Oe,ne,E)=>{E.d(ne,{I:()=>B,v:()=>X});var A=E(55117);function B(re,ee,xe=0){const se=(0,A.uZ)(re,0,Z);for(let De=0;De<4;De++)ee[xe+De]=Math.floor(256*k(se*q[De]))}function X(re,ee=0){let xe=0;for(let se=0;se<4;se++)xe+=re[ee+se]*O[se];return xe}const q=[1,256,65536,16777216],O=[1/256,1/65536,1/16777216,1/4294967296],Z=X(new Uint8ClampedArray([255,255,255,255]));function k(re){return re-Math.floor(re)}},69349:(Oe,ne,E)=>{E.d(ne,{JI:()=>z,Ue:()=>Z,re:()=>ee,zk:()=>se}),E(57678);var B=E(16573),X=E(43548),q=E(73145);function Z(L){return L?k((0,q.d9)(L.origin),(0,q.d9)(L.direction)):k((0,q.Ue)(),(0,q.Ue)())}function k(L,ae){return{origin:L,direction:ae}}function ee(L,ae){const oe=N.get();return oe.origin=L,oe.direction=ae,oe}function se(L,ae,oe=Z()){return(0,X.c)(oe.origin,L),(0,X.f)(oe.direction,ae,L),oe}function z(L,ae,oe){const j=(0,X.m)(L.direction,(0,X.f)(oe,ae,L.origin));return(0,X.g)(oe,L.origin,(0,X.j)(oe,L.direction,j)),oe}E(65119);const N=new B.x(()=>Z());(0,q.Ue)()},67826:(Oe,ne,E)=>{E.d(ne,{I_:()=>se,W7:()=>N,qM:()=>j});var A=E(57964),B=E(34222),X=E(4703),q=E(42815),O=E(55362);const Z=()=>X.Z.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function k(D,U,J){let $="",K=0;for(;K<J;){const Q=D[U+K];if(Q<128)$+=String.fromCharCode(Q),K++;else if(Q>=192&&Q<224){if(K+1>=J)throw new A.Z("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");$+=String.fromCharCode((31&Q)<<6|63&D[U+K+1]),K+=2}else if(Q>=224&&Q<240){if(K+2>=J)throw new A.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");$+=String.fromCharCode((15&Q)<<12|(63&D[U+K+1])<<6|63&D[U+K+2]),K+=3}else{if(!(Q>=240&&Q<248))throw new A.Z("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(K+3>=J)throw new A.Z("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const Me=(7&Q)<<18|(63&D[U+K+1])<<12|(63&D[U+K+2])<<6|63&D[U+K+3];$+=Me>=65536?String.fromCharCode(55296+(Me-65536>>10),56320+(1023&Me)):String.fromCharCode(Me),K+=4}}}return $}function re(D,U){const J={byteOffset:0,byteCount:0,fields:Object.create(null)};let $=0;for(let K=0;K<U.length;K++){const Q=U[K],Me=Q.valueType||Q.type;J.fields[Q.property]=(0,pe[Me])(D,$),$+=le[Me].BYTES_PER_ELEMENT}return J.byteCount=$,J}function xe(D,U,J){const $=[];let K,Q,Me=0;for(Q=0;Q<D;Q+=1){if(K=U[Q],K>0){if($.push(k(J,Me,K-1)),0!==J[Me+K-1])throw new A.Z("string-array-error","Invalid string array: missing null termination.")}else $.push(null);Me+=K}return $}function se(D,U){return new le[U.valueType](D,U.byteOffset,U.count*U.valuesPerElement)}function z(D,U,J){if(U!==D&&Z().error(`Invalid ${J} buffer size\n expected: ${D}, actual: ${U})`),U<D)throw new A.Z("buffer-too-small","Binary buffer is too small",{expectedSize:D,actualSize:U})}function N(D,U){const J=re(D,U&&U.header);let $=J.byteCount;const K={isDraco:!1,header:J,byteOffset:J.byteCount,byteCount:0,vertexAttributes:{}},Q=J.fields,Me=null!=Q.vertexCount?Q.vertexCount:Q.count;for(const Ue of U.ordering){if(!U.vertexAttributes[Ue])continue;const Se={...U.vertexAttributes[Ue],byteOffset:$,count:Me};K.vertexAttributes[oe[Ue]||"_"+Ue]=Se,$+=ge(Se.valueType)*Se.valuesPerElement*Me}const Pe=Q.faceCount;if(U.faces&&Pe){K.faces={};for(const Ue of U.ordering){if(!U.faces[Ue])continue;const Se={...U.faces[Ue],byteOffset:$,count:Pe};K.faces[Ue]=Se,$+=ge(Se.valueType)*Se.valuesPerElement*Pe}}const ye=Q.featureCount;if(U.featureAttributes&&U.featureAttributeOrder&&ye){K.featureAttributes={};for(const Ue of U.featureAttributeOrder){if(!U.featureAttributes[Ue])continue;const Se={...U.featureAttributes[Ue],byteOffset:$,count:ye};K.featureAttributes[Ue]=Se,$+=("UInt64"===Se.valueType?8:ge(Se.valueType))*Se.valuesPerElement*ye}}return z($,D.byteLength,"geometry"),K.byteCount=$-K.byteOffset,K}const oe={position:O.T.POSITION,normal:O.T.NORMAL,color:O.T.COLOR,uv0:O.T.UV0,region:O.T.UVREGION};function j(D,U,J){if("lepcc-rgb"===D.encoding)return(0,q.IT)(U);if("lepcc-intensity"===D.encoding)return(0,q.ti)(U);if(null!=D.encoding&&""!==D.encoding)throw new A.Z("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");D["attributeByteCounts "]&&!D.attributeByteCounts&&(Z().warn("Warning: Trailing space in 'attributeByteCounts '."),D.attributeByteCounts=D["attributeByteCounts "]),"ObjectIds"===D.ordering[0]&&D.hasOwnProperty("objectIds")&&(Z().warn("Warning: Case error in objectIds"),D.ordering[0]="objectIds");const $=function Ee(D,U,J){const $=null!=U.header?re(D,U.header):{byteOffset:0,byteCount:0,fields:{count:J}},K={header:$,byteOffset:$.byteCount,byteCount:0,entries:Object.create(null)};let Q=$.byteCount;for(let Me=0;Me<U.ordering.length;Me++){const Pe=U.ordering[Me],ye=(0,B.d9)(U[Pe]);if(ye.count=$.fields.count??0,"String"===ye.valueType){if(ye.byteOffset=Q,ye.byteCount=$.fields[Pe+"ByteCount"],"UTF-8"!==ye.encoding)throw new A.Z("unsupported-encoding","Unsupported String encoding.",{encoding:ye.encoding});if(ye.timeEncoding&&"ECMA_ISO8601"!==ye.timeEncoding)throw new A.Z("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:ye.timeEncoding})}else{if(!ie(ye.valueType))throw new A.Z("unsupported-value-type","Unsupported binary valueType",{valueType:ye.valueType});{const Ue=ge(ye.valueType);Q+=Q%Ue!=0?Ue-Q%Ue:0,ye.byteOffset=Q,ye.byteCount=Ue*ye.valuesPerElement*ye.count}}Q+=ye.byteCount??0,K.entries[Pe]=ye}return K.byteCount=Q-K.byteOffset,K}(U,D,J);z($.byteOffset+$.byteCount,U.byteLength,"attribute");const K=$.entries.attributeValues||$.entries.objectIds;if(K){if("String"===K.valueType){const Q=$.entries.attributeByteCounts,Me=se(U,Q),Pe=function De(D,U){return new Uint8Array(D,U.byteOffset,U.byteCount)}(U,K);return K.timeEncoding?function ee(D,U,J){return xe(D,U,J).map($=>{const K=$?Date.parse($):null;return null==K||Number.isNaN(K)?null:K})}(Q.count,Me,Pe):xe(Q.count,Me,Pe)}return se(U,K)}throw new A.Z("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const le={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},pe={Float32:(D,U)=>new DataView(D,0).getFloat32(U,!0),Float64:(D,U)=>new DataView(D,0).getFloat64(U,!0),UInt8:(D,U)=>new DataView(D,0).getUint8(U),Int8:(D,U)=>new DataView(D,0).getInt8(U),UInt16:(D,U)=>new DataView(D,0).getUint16(U,!0),Int16:(D,U)=>new DataView(D,0).getInt16(U,!0),UInt32:(D,U)=>new DataView(D,0).getUint32(U,!0),Int32:(D,U)=>new DataView(D,0).getInt32(U,!0)};function ie(D){return le.hasOwnProperty(D)}function ge(D){return ie(D)?le[D].BYTES_PER_ELEMENT:0}},13643:(Oe,ne,E)=>{E.d(ne,{xe:()=>vt});var A=E(15861),X=(E(2189),E(66476)),k=(E(57678),E(57964),E(14007),E(40271)),ee=(E(39061),E(41666)),se=(E(43548),E(73145));E(83821),E(66588),E(43814);E(51955);var le=E(45425),ge=(E(6671),E(91866),E(67826));E(82921),E(44381),E(66599);var ye,h,je,Ve,mt,Pe=E(23515);(h=ye||(ye={}))[h.INVISIBLE=0]="INVISIBLE",h[h.TRANSPARENT=1]="TRANSPARENT",h[h.OPAQUE=2]="OPAQUE",E(480),E(11462),E(82658),E(42596),E(24542),E(47832),E(92426),E(53299),E(22166),E(55362),function(h){h[h.Uniform=0]="Uniform",h[h.Varying=1]="Varying",h[h.COUNT=2]="COUNT"}(je||(je={})),E(5660),E(59866),E(41841),E(85938),E(69446),E(1159),E(11405),E(73205),function(h){h[h.Solid=0]="Solid",h[h.Sketch=1]="Sketch",h[h.Mixed=2]="Mixed",h[h.COUNT=3]="COUNT"}(Ve||(Ve={})),function(h){h[h.REGULAR=0]="REGULAR",h[h.SILHOUETTE=1]="SILHOUETTE"}(mt||(mt={}));const Et={color:(0,Pe.al)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:ye.OPAQUE,hasSlicePlane:!1};(0,Pe.al)(0,0,0,.2),E(69676);var We,Tt=E(38475);function vt(h,_,T,P,W,G,de,ue){return rt.apply(this,arguments)}function rt(){return rt=(0,A.Z)(function*(h,_,T,P,W,G,de,ue){const he=[];for(const ve of _)ve&&W.includes(ve.name)&&he.push({url:`${h}/nodes/${T}/attributes/${ve.key}/0`,storageInfo:ve});const me=yield Promise.allSettled(he.map(ve=>(0,X.Z)(ve.url,{responseType:"array-buffer",query:{...de,token:G},signal:ue?.signal}).then(Te=>(0,ge.qM)(ve.storageInfo,Te.data)))),be=[];for(const ve of P){const Te={};for(let Ae=0;Ae<me.length;Ae++){const _e=me[Ae];"fulfilled"===_e.status&&(Te[he[Ae].storageInfo.name]=St(_e.value,ve))}be.push(Te)}return be}),rt.apply(this,arguments)}(0,le.Ue)(),function(h){h[h.OUTSIDE=0]="OUTSIDE",h[h.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",h[h.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",h[h.INSIDE=3]="INSIDE"}(We||(We={}));const Dt=-32768,At=-(2**31);function St(h,_){if(!h)return null;const T=h[_];return(0,k.z3)(h)?T===Dt?null:T:(0,k.Hx)(h)?T===At?null:T:T!=T?null:T}!function ht(h){return{...Et,...h,type:Ve.Solid}}({color:[0,0,0,0],opacity:0}),(0,se.Ue)(),(0,se.Ue)(),(0,se.Ue)(),(0,se.Ue)(),(0,se.Ue)(),(0,se.Ue)(),(0,se.Ue)(),(0,se.Ue)(),(0,le.Ue)(),(0,le.Ue)(),new Tt.Oo,(0,se.Ue)(),new Array(72),(0,ee.Ue)()},42815:(Oe,ne,E)=>{E.d(ne,{Gi:()=>k,IT:()=>De,ti:()=>Fe});var A=E(57964);const B=!0,X={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function q(N,H,L){return{identifier:String.fromCharCode.apply(null,new Uint8Array(N,L+X.identifierOffset,X.identifierLength)),version:H.getUint16(L+X.versionOffset,B),checksum:H.getUint32(L+X.checksumOffset,B)}}const O={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function k(N){const H=new DataView(N,0);let L=0;const{identifier:ae,version:oe}=q(N,H,L);if(L+=X.byteCount,"LEPCC     "!==ae)throw new A.Z("lepcc-decode-error","Bad identifier");if(oe>1)throw new A.Z("lepcc-decode-error","Unknown version");const j=function Z(N,H){return{sizeLo:N.getUint32(H+O.sizeLo,B),sizeHi:N.getUint32(H+O.sizeHi,B),minX:N.getFloat64(H+O.minX,B),minY:N.getFloat64(H+O.minY,B),minZ:N.getFloat64(H+O.minZ,B),maxX:N.getFloat64(H+O.maxX,B),maxY:N.getFloat64(H+O.maxY,B),maxZ:N.getFloat64(H+O.maxZ,B),errorX:N.getFloat64(H+O.errorX,B),errorY:N.getFloat64(H+O.errorY,B),errorZ:N.getFloat64(H+O.errorZ,B),count:N.getUint32(H+O.count,B),reserved:N.getUint32(H+O.reserved,B)}}(H,L);if(L+=O.byteCount,j.sizeHi*2**32+j.sizeLo!==N.byteLength)throw new A.Z("lepcc-decode-error","Bad size");const le=new Float64Array(3*j.count),pe=[],ie=[],ge=[],D=[];if(L=re(N,L,pe),L=re(N,L,ie),L=re(N,L,ge),L=re(N,L,D),L!==N.byteLength)throw new A.Z("lepcc-decode-error","Bad length");let U=0,J=0;for(let $=0;$<pe.length;$++){J+=pe[$];let K=0;for(let Q=0;Q<ie[$];Q++){K+=ge[U];const Me=D[U];le[3*U]=Math.min(j.maxX,j.minX+2*j.errorX*K),le[3*U+1]=Math.min(j.maxY,j.minY+2*j.errorY*J),le[3*U+2]=Math.min(j.maxZ,j.minZ+2*j.errorZ*Me),U++}}return{errorX:j.errorX,errorY:j.errorY,errorZ:j.errorZ,result:le}}function re(N,H,L){const ae=[];H=ee(N,H,ae);const oe=[];for(let j=0;j<ae.length;j++){oe.length=0,H=ee(N,H,oe);for(let le=0;le<oe.length;le++)L.push(oe[le]+ae[j])}return H}function ee(N,H,L){const ae=new DataView(N,H),oe=ae.getUint8(0),j=31&oe,le=!!(32&oe),pe=(192&oe)>>6;let ie=0;if(0===pe)ie=ae.getUint32(1,B),H+=5;else if(1===pe)ie=ae.getUint16(1,B),H+=3;else{if(2!==pe)throw new A.Z("lepcc-decode-error","Bad count type");ie=ae.getUint8(1),H+=2}if(le)throw new A.Z("lepcc-decode-error","LUT not implemented");const ge=Math.ceil(ie*j/8),D=new Uint8Array(N,H,ge);let U=0,J=0,$=0;const K=-1>>>32-j;for(let Q=0;Q<ie;Q++){for(;J<j;)U|=D[$]<<J,J+=8,$+=1;L[Q]=U&K,U>>>=j,J-=j,J+j>32&&(U|=D[$-1]>>8-J)}return H+$}const xe={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function De(N){const H=new DataView(N,0);let L=0;const{identifier:ae,version:oe}=q(N,H,L);if(L+=X.byteCount,"ClusterRGB"!==ae)throw new A.Z("lepcc-decode-error","Bad identifier");if(oe>1)throw new A.Z("lepcc-decode-error","Unknown version");const j=function se(N,H){return{sizeLo:N.getUint32(H+xe.sizeLo,B),sizeHi:N.getUint32(H+xe.sizeHi,B),count:N.getUint32(H+xe.count,B),colorMapCount:N.getUint16(H+xe.colorMapCount,B),lookupMethod:N.getUint8(H+xe.lookupMethod),compressionMethod:N.getUint8(H+xe.compressionMethod)}}(H,L);if(L+=xe.byteCount,j.sizeHi*2**32+j.sizeLo!==N.byteLength)throw new A.Z("lepcc-decode-error","Bad size");if((2===j.lookupMethod||1===j.lookupMethod)&&0===j.compressionMethod){if(3*j.colorMapCount+j.count+L!==N.byteLength||j.colorMapCount>256)throw new A.Z("lepcc-decode-error","Bad count");const le=new Uint8Array(N,L,3*j.colorMapCount),pe=new Uint8Array(N,L+3*j.colorMapCount,j.count),ie=new Uint8Array(3*j.count);for(let ge=0;ge<j.count;ge++){const D=pe[ge];ie[3*ge]=le[3*D],ie[3*ge+1]=le[3*D+1],ie[3*ge+2]=le[3*D+2]}return ie}if(0===j.lookupMethod&&0===j.compressionMethod){if(3*j.count+L!==N.byteLength||0!==j.colorMapCount)throw new A.Z("lepcc-decode-error","Bad count");return new Uint8Array(N,L).slice()}if(j.lookupMethod<=2&&1===j.compressionMethod){if(L+3!==N.byteLength||1!==j.colorMapCount)throw new A.Z("lepcc-decode-error","Bad count");const le=H.getUint8(L),pe=H.getUint8(L+1),ie=H.getUint8(L+2),ge=new Uint8Array(3*j.count);for(let D=0;D<j.count;D++)ge[3*D]=le,ge[3*D+1]=pe,ge[3*D+2]=ie;return ge}throw new A.Z("lepcc-decode-error","Bad method "+j.lookupMethod+","+j.compressionMethod)}const Ee={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function Fe(N){const H=new DataView(N,0);let L=0;const{identifier:ae,version:oe}=q(N,H,L);if(L+=X.byteCount,"Intensity "!==ae)throw new A.Z("lepcc-decode-error","Bad identifier");if(oe>1)throw new A.Z("lepcc-decode-error","Unknown version");const j=function z(N,H){return{sizeLo:N.getUint32(H+Ee.sizeLo,B),sizeHi:N.getUint32(H+Ee.sizeHi,B),count:N.getUint32(H+Ee.count,B),scaleFactor:N.getUint16(H+Ee.scaleFactor,B),bitsPerPoint:N.getUint8(H+Ee.bitsPerPoint),reserved:N.getUint8(H+Ee.reserved)}}(H,L);if(L+=Ee.byteCount,j.sizeHi*2**32+j.sizeLo!==N.byteLength)throw new A.Z("lepcc-decode-error","Bad size");const le=new Uint16Array(j.count);if(8===j.bitsPerPoint){if(j.count+L!==N.byteLength)throw new A.Z("lepcc-decode-error","Bad size");const pe=new Uint8Array(N,L,j.count);for(let ie=0;ie<j.count;ie++)le[ie]=pe[ie]*j.scaleFactor}else if(16===j.bitsPerPoint){if(2*j.count+L!==N.byteLength)throw new A.Z("lepcc-decode-error","Bad size");const pe=new Uint16Array(N,L,j.count);for(let ie=0;ie<j.count;ie++)le[ie]=pe[ie]*j.scaleFactor}else{const pe=[];if(ee(N,L,pe)!==N.byteLength)throw new A.Z("lepcc-decode-error","Bad size");for(let ie=0;ie<j.count;ie++)le[ie]=pe[ie]*j.scaleFactor}return le}},69676:(Oe,ne,E)=>{var B,ee;E.d(ne,{a9:()=>B}),E(55117),(ee=B||(B={}))[ee.Multiply=1]="Multiply",ee[ee.Ignore=2]="Ignore",ee[ee.Replace=3]="Replace",ee[ee.Tint=4]="Tint"},82658:(Oe,ne,E)=>{E.d(ne,{A:()=>X});var A=E(69676),B=E(53299);function X(q){q.vertex.code.add(B.H`
    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {
      float symbolAlpha = 0.0;

      const float maxTint = 85.0;
      const float maxReplace = 170.0;
      const float scaleAlpha = 3.0;

      if (symbolColor.a > maxReplace) {
        colorMixMode = ${B.H.int(A.a9.Multiply)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);
      } else if (symbolColor.a > maxTint) {
        colorMixMode = ${B.H.int(A.a9.Replace)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);
      } else if (symbolColor.a > 0.0) {
        colorMixMode = ${B.H.int(A.a9.Tint)};
        symbolAlpha = scaleAlpha * symbolColor.a;
      } else {
        colorMixMode = ${B.H.int(A.a9.Multiply)};
        symbolAlpha = 0.0;
      }

      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);
    }
  `)}},42596:(Oe,ne,E)=>{var A,z;function X(z){return z===A.Shadow||z===A.ShadowHighlight||z===A.ShadowExcludeHighlight||z===A.ViewshedShadow}function q(z){return function De(z){return function se(z){return function k(z){return z===A.Color}(z)||function O(z){return z===A.Highlight||z===A.ObjectAndLayerIdColor}(z)}(z)||function Ee(z){return z===A.Depth}(z)}(z)||z===A.Normal}E.d(ne,{H_:()=>A,Jb:()=>q,Kr:()=>X}),(z=A||(A={}))[z.Color=0]="Color",z[z.Depth=1]="Depth",z[z.Normal=2]="Normal",z[z.Shadow=3]="Shadow",z[z.ShadowHighlight=4]="ShadowHighlight",z[z.ShadowExcludeHighlight=5]="ShadowExcludeHighlight",z[z.ViewshedShadow=6]="ViewshedShadow",z[z.Highlight=7]="Highlight",z[z.ObjectAndLayerIdColor=8]="ObjectAndLayerIdColor",z[z.COUNT=9]="COUNT"},5660:(Oe,ne,E)=>{E.d(ne,{O:()=>q,r:()=>O});var O,Z,A=E(480),B=E(53299),X=E(55362);function q(Z,k){switch(k.normalType){case O.Compressed:Z.attributes.add(X.T.NORMALCOMPRESSED,"vec2"),Z.vertex.code.add(B.H`vec3 decompressNormal(vec2 normal) {
float z = 1.0 - abs(normal.x) - abs(normal.y);
return vec3(normal + sign(normal) * min(z, 0.0), z);
}
vec3 normalModel() {
return decompressNormal(normalCompressed);
}`);break;case O.Attribute:Z.attributes.add(X.T.NORMAL,"vec3"),Z.vertex.code.add(B.H`vec3 normalModel() {
return normal;
}`);break;case O.ScreenDerivative:Z.fragment.code.add(B.H`vec3 screenDerivativeNormal(vec3 positionView) {
return normalize(cross(dFdx(positionView), dFdy(positionView)));
}`);break;default:(0,A.Bg)(k.normalType);case O.COUNT:case O.Ground:}}(Z=O||(O={}))[Z.Attribute=0]="Attribute",Z[Z.Compressed=1]="Compressed",Z[Z.Ground=2]="Ground",Z[Z.ScreenDerivative=3]="ScreenDerivative",Z[Z.COUNT=4]="COUNT"},59866:(Oe,ne,E)=>{E.d(ne,{$:()=>B});var A=E(53299);function B({code:X},q){X.add(q.doublePrecisionRequiresObfuscation?A.H`vec3 dpPlusFrc(vec3 a, vec3 b) {
return mix(a, a + b, vec3(notEqual(b, vec3(0))));
}
vec3 dpMinusFrc(vec3 a, vec3 b) {
return mix(vec3(0), a - b, vec3(notEqual(a, b)));
}
vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = dpPlusFrc(hiA, hiB);
vec3 e = dpMinusFrc(t1, hiA);
vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;
return t1 + t2;
}`:A.H`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = hiA + hiB;
vec3 e = t1 - hiA;
vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;
return t1 + t2;
}`)}},24542:(Oe,ne,E)=>{E(53299)},41841:(Oe,ne,E)=>{E.d(ne,{B:()=>X});var A=E(47832),B=E(92426);class X extends A.x{constructor(O,Z){super(O,"vec3",B.P.Draw,(k,re,ee,xe)=>k.setUniform3fv(O,Z(re,ee,xe)))}}},85938:(Oe,ne,E)=>{E.d(ne,{J:()=>X});var A=E(47832),B=E(92426);class X extends A.x{constructor(O,Z){super(O,"vec3",B.P.Pass,(k,re,ee)=>k.setUniform3fv(O,Z(re,ee)))}}},69446:(Oe,ne,E)=>{E.d(ne,{p:()=>X});var A=E(47832),B=E(92426);class X extends A.x{constructor(O,Z){super(O,"float",B.P.Pass,(k,re,ee)=>k.setUniform1f(O,Z(re,ee)))}}},1159:(Oe,ne,E)=>{E.d(ne,{j:()=>X});var A=E(47832),B=E(92426);class X extends A.x{constructor(O,Z){super(O,"mat3",B.P.Draw,(k,re,ee)=>k.setUniformMatrix3fv(O,Z(re,ee)))}}},11405:(Oe,ne,E)=>{E.d(ne,{c:()=>X});var A=E(47832),B=E(92426);class X extends A.x{constructor(O,Z){super(O,"mat3",B.P.Pass,(k,re,ee)=>k.setUniformMatrix3fv(O,Z(re,ee)))}}},73205:(Oe,ne,E)=>{E.d(ne,{g:()=>X});var A=E(47832),B=E(92426);class X extends A.x{constructor(O,Z){super(O,"mat4",B.P.Pass,(k,re,ee)=>k.setUniformMatrix4fv(O,Z(re,ee)))}}},22166:(Oe,ne,E)=>{E.d(ne,{R:()=>X});var A=E(47832),B=E(92426);class X extends A.x{constructor(O,Z){super(O,"sampler2D",B.P.Draw,(k,re,ee)=>k.bindTexture(O,Z(re,ee)))}}},47832:(Oe,ne,E)=>{E.d(ne,{x:()=>B});var A=E(92426);class B{constructor(q,O,Z,k,re=null){if(this.name=q,this.type=O,this.arraySize=re,this.bind={[A.P.Pass]:null,[A.P.Draw]:null},k)switch(Z){case A.P.Pass:this.bind[A.P.Pass]=k;break;case A.P.Draw:this.bind[A.P.Draw]=k}}equals(q){return this.type===q.type&&this.name===q.name&&this.arraySize===q.arraySize}}},53299:(Oe,ne,E)=>{E.d(ne,{H:()=>X,K:()=>B});const B=class A{};function X(q,...O){let Z="";for(let k=0;k<O.length;k++)Z+=q[k]+O[k];return Z+=q[q.length-1],Z}var q;(q=X||(X={})).int=function O(k){return Math.round(k).toString()},q.float=function Z(k){return k.toPrecision(8)}},92426:(Oe,ne,E)=>{var A,B;E.d(ne,{P:()=>A}),(B=A||(A={}))[B.Pass=0]="Pass",B[B.Draw=1]="Draw"}}]);