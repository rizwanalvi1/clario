"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[6888],{5710:(k,Q,_)=>{_.d(Q,{a:()=>d,b:()=>f,c:()=>z,e:()=>r,f:()=>Y,g:()=>c,i:()=>N,j:()=>x,l:()=>m,n:()=>$,s:()=>A,t:()=>O});var D=_(89612);function z(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function A(e,t,o,E,T){return e[0]=t,e[1]=o,e[2]=E,e[3]=T,e}function Y(e,t,o){return e[0]=t[0]+o[0],e[1]=t[1]+o[1],e[2]=t[2]+o[2],e[3]=t[3]+o[3],e}function G(e,t,o){return e[0]=t[0]-o[0],e[1]=t[1]-o[1],e[2]=t[2]-o[2],e[3]=t[3]-o[3],e}function K(e,t,o){return e[0]=t[0]*o[0],e[1]=t[1]*o[1],e[2]=t[2]*o[2],e[3]=t[3]*o[3],e}function Z(e,t,o){return e[0]=t[0]/o[0],e[1]=t[1]/o[1],e[2]=t[2]/o[2],e[3]=t[3]/o[3],e}function f(e,t,o){return e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o,e}function P(e,t){const o=t[0]-e[0],E=t[1]-e[1],T=t[2]-e[2],C=t[3]-e[3];return Math.sqrt(o*o+E*E+T*T+C*C)}function U(e,t){const o=t[0]-e[0],E=t[1]-e[1],T=t[2]-e[2],C=t[3]-e[3];return o*o+E*E+T*T+C*C}function N(e){const t=e[0],o=e[1],E=e[2],T=e[3];return Math.sqrt(t*t+o*o+E*E+T*T)}function x(e){const t=e[0],o=e[1],E=e[2],T=e[3];return t*t+o*o+E*E+T*T}function $(e,t){const o=t[0],E=t[1],T=t[2],C=t[3];let j=o*o+E*E+T*T+C*C;return j>0&&(j=1/Math.sqrt(j),e[0]=o*j,e[1]=E*j,e[2]=T*j,e[3]=C*j),e}function c(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function m(e,t,o,E){const T=t[0],C=t[1],j=t[2],B=t[3];return e[0]=T+E*(o[0]-T),e[1]=C+E*(o[1]-C),e[2]=j+E*(o[2]-j),e[3]=B+E*(o[3]-B),e}function O(e,t,o){const E=t[0],T=t[1],C=t[2],j=t[3];return e[0]=o[0]*E+o[4]*T+o[8]*C+o[12]*j,e[1]=o[1]*E+o[5]*T+o[9]*C+o[13]*j,e[2]=o[2]*E+o[6]*T+o[10]*C+o[14]*j,e[3]=o[3]*E+o[7]*T+o[11]*C+o[15]*j,e}function d(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function r(e,t){const o=e[0],E=e[1],T=e[2],C=e[3],j=t[0],B=t[1],X=t[2],q=t[3],H=(0,D.bn)();return Math.abs(o-j)<=H*Math.max(1,Math.abs(o),Math.abs(j))&&Math.abs(E-B)<=H*Math.max(1,Math.abs(E),Math.abs(B))&&Math.abs(T-X)<=H*Math.max(1,Math.abs(T),Math.abs(X))&&Math.abs(C-q)<=H*Math.max(1,Math.abs(C),Math.abs(q))}Object.freeze(Object.defineProperty({__proto__:null,add:Y,ceil:function b(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},copy:z,copyVec3:function w(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},dist:P,distance:P,div:Z,divide:Z,dot:c,equals:r,exactEquals:d,floor:function p(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},inverse:function W(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},len:N,length:N,lerp:m,max:function I(e,t,o){return e[0]=Math.max(t[0],o[0]),e[1]=Math.max(t[1],o[1]),e[2]=Math.max(t[2],o[2]),e[3]=Math.max(t[3],o[3]),e},min:function M(e,t,o){return e[0]=Math.min(t[0],o[0]),e[1]=Math.min(t[1],o[1]),e[2]=Math.min(t[2],o[2]),e[3]=Math.min(t[3],o[3]),e},mul:K,multiply:K,negate:function v(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},normalize:$,random:function y(e,t){const o=D.FD;let E,T,C,j,B,X;t=t||1;do{E=2*o()-1,T=2*o()-1,B=E*E+T*T}while(B>=1);do{C=2*o()-1,j=2*o()-1,X=C*C+j*j}while(X>=1);const q=Math.sqrt((1-B)/X);return e[0]=t*E,e[1]=t*T,e[2]=t*C*q,e[3]=t*j*q,e},round:function F(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:f,scaleAndAdd:function h(e,t,o,E){return e[0]=t[0]+o[0]*E,e[1]=t[1]+o[1]*E,e[2]=t[2]+o[2]*E,e[3]=t[3]+o[3]*E,e},set:A,sqrDist:U,sqrLen:x,squaredDistance:U,squaredLength:x,str:function S(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:G,subtract:G,transformMat4:O,transformQuat:function R(e,t,o){const E=t[0],T=t[1],C=t[2],j=o[0],B=o[1],X=o[2],q=o[3],H=q*E+B*C-X*T,J=q*T+X*E-j*C,V=q*C+j*T-B*E,ee=-j*E-B*T-X*C;return e[0]=H*q+ee*-j+J*-X-V*-B,e[1]=J*q+ee*-B+V*-j-H*-X,e[2]=V*q+ee*-X+H*-B-J*-j,e[3]=t[3],e}},Symbol.toStringTag,{value:"Module"}))},51310:(k,Q,_)=>{function D(p){return null!=Y(p)||null!=A(p)}function z(p){return G.test(p)}function w(p){return Y(p)??A(p)}function A(p){const M=new Date(p);return function K(p,M){if(Number.isNaN(p.getTime()))return!1;let I=!0;if(b&&/\d+\W*$/.test(M)){const F=M.match(/[a-zA-Z]{2,}/);if(F){let f=!1,h=0;for(;!f&&h<=F.length;)f=!Z.test(F[h]),h++;I=!f}}return I}(M,p)?Number.isNaN(M.getTime())?null:M.getTime()-6e4*M.getTimezoneOffset():null}function Y(p){const M=G.exec(p);if(!M?.groups)return null;const I=M.groups,F=+I.year,f=+I.month-1,h=+I.day,P=+(I.hours??"0"),U=+(I.minutes??"0"),N=+(I.seconds??"0");if(P>23||U>59||N>59)return null;const x=I.ms??"0",v=x?+x.padEnd(3,"0").substring(0,3):0;let W;return W=I.isUTC||!I.offsetSign?Date.UTC(F,f,h,P,U,N,v):6e4*("+"===I.offsetSign?-1:1)*(60*+I.offsetHours+ +I.offsetMinutes)+Date.UTC(F,f,h,P,U,N,v),Number.isNaN(W)?null:W}_.d(Q,{mu:()=>z,of:()=>D,sG:()=>w});const G=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,Z=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,b=!Number.isNaN(new Date("technology 10").getTime())},23515:(k,Q,_)=>{function D(){return[0,0,0,0]}function w(x,v,W,$){return[x,v,W,$]}function K(){return w(1,1,1,1)}function Z(){return w(1,0,0,0)}function b(){return w(0,1,0,0)}function p(){return w(0,0,1,0)}function M(){return w(0,0,0,1)}_.d(Q,{Ue:()=>D,al:()=>w});const F=K(),f=Z(),h=b(),P=p(),U=M();Object.freeze(Object.defineProperty({__proto__:null,ONES:F,UNIT_W:U,UNIT_X:f,UNIT_Y:h,UNIT_Z:P,ZEROS:[0,0,0,0],clone:function z(x){return[x[0],x[1],x[2],x[3]]},create:D,createView:function Y(x,v){return new Float64Array(x,v,4)},fromArray:function A(x,v=[0,0,0,0]){const W=Math.min(4,x.length);for(let $=0;$<W;++$)v[$]=x[$];return v},fromValues:w,ones:K,unitW:M,unitX:Z,unitY:b,unitZ:p,zeros:function G(){return[0,0,0,0]}},Symbol.toStringTag,{value:"Module"}))},26540:(k,Q,_)=>{_.d(Q,{Q:()=>Y});var D=_(57678),w=(_(14007),_(43029)),A=_(4758);class Y{constructor(r=9,u){this._compareMinX=I,this._compareMinY=F,this._toBBox=a=>a,this._maxEntries=Math.max(4,r||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),u&&("function"==typeof u?this._toBBox=u:this._initFormat(u)),this.clear()}destroy(){this.clear(),W.prune(),$.prune(),c.prune(),m.prune()}all(r){K(this._data,r)}search(r,u){let a=this._data;const s=this._toBBox;if(x(r,a))for(W.clear();a;){for(let n=0,i=a.children.length;n<i;n++){const l=a.children[n],g=a.leaf?s(l):l;x(r,g)&&(a.leaf?u(l):N(r,g)?K(l,u):W.push(l))}a=W.pop()}}collides(r){let u=this._data;const a=this._toBBox;if(!x(r,u))return!1;for(W.clear();u;){for(let s=0,n=u.children.length;s<n;s++){const i=u.children[s],l=u.leaf?a(i):i;if(x(r,l)){if(u.leaf||N(r,l))return!0;W.push(i)}}u=W.pop()}return!1}load(r){if(!r.length)return this;if(r.length<this._minEntries){for(let a=0,s=r.length;a<s;a++)this.insert(r[a]);return this}let u=this._build(r.slice(0,r.length),0,r.length-1,0);if(this._data.children.length)if(this._data.height===u.height)this._splitRoot(this._data,u);else{if(this._data.height<u.height){const a=this._data;this._data=u,u=a}this._insert(u,this._data.height-u.height-1,!0)}else this._data=u;return this}insert(r){return r&&this._insert(r,this._data.height-1),this}clear(){return this._data=new R([]),this}remove(r){if(!r)return this;let u,a=this._data,s=null,n=0,i=!1;const l=this._toBBox(r);for(c.clear(),m.clear();a||c.length>0;){if(a||(a=c.pop(),s=c.data[c.length-1],n=m.pop()??0,i=!0),a.leaf&&(u=(0,D.cq)(a.children,r,a.children.length,a.indexHint),-1!==u))return a.children.splice(u,1),c.push(a),this._condense(c),this;i||a.leaf||!N(a,l)?s?(n++,a=s.children[n],i=!1):a=null:(c.push(a),m.push(n),n=0,s=a,a=a.children[0])}return this}toJSON(){return this._data}fromJSON(r){return this._data=r,this}_build(r,u,a,s){const n=a-u+1;let i=this._maxEntries;if(n<=i){const e=new R(r.slice(u,a+1));return b(e,this._toBBox),e}s||(s=Math.ceil(Math.log(n)/Math.log(i)),i=Math.ceil(n/i**(s-1)));const l=new S([]);l.height=s;const g=Math.ceil(n/i),L=g*Math.ceil(Math.sqrt(i));v(r,u,a,L,this._compareMinX);for(let e=u;e<=a;e+=L){const t=Math.min(e+L-1,a);v(r,e,t,g,this._compareMinY);for(let o=e;o<=t;o+=g){const E=Math.min(o+g-1,t);l.children.push(this._build(r,o,E,s-1))}}return b(l,this._toBBox),l}_insert(r,u,a){const n=a?r:(0,this._toBBox)(r);c.clear();const i=function G(d,r,u,a){for(;a.push(r),!0!==r.leaf&&a.length-1!==u;){let s,n=1/0,i=1/0;for(let l=0,g=r.children.length;l<g;l++){const L=r.children[l],e=f(L),t=P(d,L)-e;t<i?(i=t,n=e<n?e:n,s=L):t===i&&e<n&&(n=e,s=L)}r=s||r.children[0]}return r}(n,this._data,u,c);for(i.children.push(r),M(i,n);u>=0&&c.data[u].children.length>this._maxEntries;)this._split(c,u),u--;!function Z(d,r,u){for(let a=u;a>=0;a--)M(r.data[a],d)}(n,c,u)}_split(r,u){const a=r.data[u],s=a.children.length,n=this._minEntries;this._chooseSplitAxis(a,n,s);const i=this._chooseSplitIndex(a,n,s);if(!i)return;const l=a.children.splice(i,a.children.length-i),g=a.leaf?new R(l):new S(l);g.height=a.height,b(a,this._toBBox),b(g,this._toBBox),u?r.data[u-1].children.push(g):this._splitRoot(a,g)}_splitRoot(r,u){this._data=new S([r,u]),this._data.height=r.height+1,b(this._data,this._toBBox)}_chooseSplitIndex(r,u,a){let s,n,i;s=n=1/0;for(let l=u;l<=a-u;l++){const g=p(r,0,l,this._toBBox),L=p(r,l,a,this._toBBox),e=U(g,L),t=f(g)+f(L);e<s?(s=e,i=l,n=t<n?t:n):e===s&&t<n&&(n=t,i=l)}return i}_chooseSplitAxis(r,u,a){const s=r.leaf?this._compareMinX:I,n=r.leaf?this._compareMinY:F;this._allDistMargin(r,u,a,s)<this._allDistMargin(r,u,a,n)&&r.children.sort(s)}_allDistMargin(r,u,a,s){r.children.sort(s);const n=this._toBBox,i=p(r,0,u,n),l=p(r,a-u,a,n);let g=h(i)+h(l);for(let L=u;L<a-u;L++){const e=r.children[L];M(i,r.leaf?n(e):e),g+=h(i)}for(let L=a-u-1;L>=u;L--){const e=r.children[L];M(l,r.leaf?n(e):e),g+=h(l)}return g}_condense(r){for(let u=r.length-1;u>=0;u--){const a=r.data[u];if(0===a.children.length)if(u>0){const s=r.data[u-1],n=s.children;n.splice((0,D.cq)(n,a,n.length,s.indexHint),1)}else this.clear();else b(a,this._toBBox)}}_initFormat(r){const u=["return a"," - b",";"];this._compareMinX=new Function("a","b",u.join(r[0])),this._compareMinY=new Function("a","b",u.join(r[1])),this._toBBox=new Function("a","return {minX: a"+r[0]+", minY: a"+r[1]+", maxX: a"+r[2]+", maxY: a"+r[3]+"};")}}function K(d,r){let u=d;for($.clear();u;){if(!0===u.leaf)for(const a of u.children)r(a);else $.pushArray(u.children);u=$.pop()??null}}function b(d,r){p(d,0,d.children.length,r,d)}function p(d,r,u,a,s){s||(s=new R([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let n,i=r;i<u;i++)n=d.children[i],M(s,d.leaf?a(n):n);return s}function M(d,r){d.minX=Math.min(d.minX,r.minX),d.minY=Math.min(d.minY,r.minY),d.maxX=Math.max(d.maxX,r.maxX),d.maxY=Math.max(d.maxY,r.maxY)}function I(d,r){return d.minX-r.minX}function F(d,r){return d.minY-r.minY}function f(d){return(d.maxX-d.minX)*(d.maxY-d.minY)}function h(d){return d.maxX-d.minX+(d.maxY-d.minY)}function P(d,r){return(Math.max(r.maxX,d.maxX)-Math.min(r.minX,d.minX))*(Math.max(r.maxY,d.maxY)-Math.min(r.minY,d.minY))}function U(d,r){const u=Math.max(d.minX,r.minX),a=Math.max(d.minY,r.minY),s=Math.min(d.maxX,r.maxX),n=Math.min(d.maxY,r.maxY);return Math.max(0,s-u)*Math.max(0,n-a)}function N(d,r){return d.minX<=r.minX&&d.minY<=r.minY&&r.maxX<=d.maxX&&r.maxY<=d.maxY}function x(d,r){return r.minX<=d.maxX&&r.minY<=d.maxY&&r.maxX>=d.minX&&r.maxY>=d.minY}function v(d,r,u,a,s){const n=[r,u];for(;n.length;){const i=n.pop(),l=n.pop();if(i-l<=a)continue;const g=l+Math.ceil((i-l)/a/2)*a;(0,A.q)(d,g,l,i,s),n.push(l,g,g,i)}}const W=new w.Z,$=new w.Z,c=new w.Z,m=new w.Z({deallocator:void 0});class y{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class O extends y{constructor(){super(...arguments),this.height=1,this.indexHint=new D.SO}}class R extends O{constructor(r){super(),this.children=r,this.leaf=!0}}class S extends O{constructor(r){super(),this.children=r,this.leaf=!1}}},46872:(k,Q,_)=>{_.d(Q,{H:()=>Z});var D=_(14007),z=_(26540),w=_(45425);const Y={minX:0,minY:0,maxX:0,maxY:0};class Z{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new z.Q(9,(0,D.Z)("esri-csp-restrictions")?p=>({minX:p[0],minY:p[1],maxX:p[2],maxY:p[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const p=new Array(this._idByBounds.size);let M=0;this._idByBounds.forEach((I,F)=>{p[M++]=F}),this._indexInvalid=!1,this._index.clear(),this._index.load(p)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(p=>this._idByBounds.has(p))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const p=(0,w.cS)();for(const M of this._boundsById.values())M&&(p[0]=Math.min(M[0],p[0]),p[1]=Math.min(M[1],p[1]),p[2]=Math.max(M[2],p[2]),p[3]=Math.max(M[3],p[3]));return p}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(p){const M=this._boundsById.get(p);this._boundsById.delete(p),M&&(this._idByBounds.delete(M),this._indexInvalid||this._index.remove(M))}forEachInBounds(p,M){this._loadIndex(),function K(b,p,M){(function G(b){Y.minX=b[0],Y.minY=b[1],Y.maxX=b[2],Y.maxY=b[3]})(p),b.search(Y,M)}(this._index,p,I=>M(this._idByBounds.get(I)))}get(p){return this._boundsById.get(p)}has(p){return this._boundsById.has(p)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(p,M){if(!this._indexInvalid){const I=this._boundsById.get(p);I&&(this._index.remove(I),this._idByBounds.delete(I))}this._boundsById.set(p,M),M&&(this._idByBounds.set(M,p),this._indexInvalid||(this._boundsToLoad.push(M),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},84726:(k,Q,_)=>{_.d(Q,{Z:()=>I});var D=_(57678),z=_(57964),w=_(88278),A=_(4703),Y=_(27048),G=_(45425),K=_(10842),Z=_(46872),b=_(29085),p=_(14309);const M=(0,Y.Ue)();class I{constructor(f){this.geometryInfo=f,this._boundsStore=new Z.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new w.Z,this.featureAdapter=p.n}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let f=0;return this._featuresById.forEach(h=>{null!=h.geometry&&h.geometry.coords&&(f+=h.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:f/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(f){if(null==this.fullBounds)return null;const[h,P,U,N]=this.fullBounds;return{xmin:h,ymin:P,xmax:U,ymax:N,spatialReference:(0,b.S2)(f)}}add(f){this._add(f),this._emitChanged()}addMany(f){for(const h of f)this._add(h);this._emitChanged()}upsertMany(f){const h=f.map(P=>this._upsert(P));return this._emitChanged(),h.filter(D.pC)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(f){const h=this._featuresById.get(f);return h?(this._remove(h),this._emitChanged(),h):null}removeManyById(f){this._boundsStore.invalidateIndex();for(const h of f){const P=this._featuresById.get(h);P&&this._remove(P)}this._emitChanged()}forEachBounds(f,h){for(const P of f){const U=this._boundsStore.get(P.objectId);U&&h((0,Y.JR)(M,U))}}getFeature(f){return this._featuresById.get(f)}has(f){return this._featuresById.has(f)}forEach(f){this._featuresById.forEach(h=>f(h))}forEachInBounds(f,h){this._boundsStore.forEachInBounds(f,P=>{h(this._featuresById.get(P))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let f=!1;this._featuresById.forEach((h,P)=>{this._markedIds.has(P)||(f=!0,this._remove(h))}),this._markedIds.clear(),f&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(f){if(!f)return;const h=f.objectId;if(null==h)return void A.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new z.Z("featurestore:invalid-feature","feature id is missing",{feature:f}));const P=this._featuresById.get(h);let U;if(this._markedIds.add(h),P?(f.displayId=P.displayId,U=this._boundsStore.get(h),this._boundsStore.delete(h)):null!=this.onFeatureAdd&&this.onFeatureAdd(f),!f.geometry?.coords?.length)return this._boundsStore.set(h,null),void this._featuresById.set(h,f);U=(0,K.$)(U??(0,G.Ue)(),f.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=U&&this._boundsStore.set(h,U),this._featuresById.set(h,f)}_upsert(f){const h=f?.objectId;if(null==h)return A.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new z.Z("featurestore:invalid-feature","feature id is missing",{feature:f})),null;const P=this._featuresById.get(h);if(!P)return this._add(f),f;this._markedIds.add(h);const{geometry:U,attributes:N}=f;for(const x in N)P.attributes[x]=N[x];return U&&(P.geometry=U,this._boundsStore.set(h,(0,K.$)((0,G.Ue)(),U,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),P}_remove(f){null!=this.onFeatureRemove&&this.onFeatureRemove(f);const h=f.objectId;return this._markedIds.delete(h),this._boundsStore.delete(h),this._featuresById.delete(h),f}}},56040:(k,Q,_)=>{_.r(Q),_.d(Q,{default:()=>W});var D=_(15861),z=_(66476),w=_(37636),A=_(57964),Y=_(4703),G=_(79412),K=_(40637),Z=_(33721),b=_(10842),p=_(84726),M=_(58829),I=_(48238),F=_(78642),f=_(60324),h=_(42726),P=_(40100),U=_(51217),N=_(85295),x=_(764);const v={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class W{constructor(){var c=this;this._queryEngine=null,this._snapshotFeatures=function(){var m=(0,D.Z)(function*(y){const O=yield c._fetch(y);return c._createFeatures(O)});return function(y){return m.apply(this,arguments)}}()}destroy(){this._queryEngine?.destroy(),this._queryEngine=this._createDefaultAttributes=null}load(c,m={}){var y=this;return(0,D.Z)(function*(){y._loadOptions={url:c.url,customParameters:c.customParameters};const O=[],[R]=yield Promise.all([c.url?y._fetch(m?.signal):null,y._checkProjection(c.spatialReference)]),S=(0,F.my)(R,{geometryType:c.geometryType}),d=c.fields||S.fields||[],r=null!=c.hasZ?c.hasZ:S.hasZ,u=S.geometryType;let a=c.objectIdField||S.objectIdFieldName||"__OBJECTID";const s=c.spatialReference||Z.YU;let n=c.timeInfo;d===S.fields&&S.unknownFields.length>0&&O.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:S.unknownFields}});const i=new P.Z(d);let l=i.get(a);l?("esriFieldTypeString"!==l.type&&(l.type="esriFieldTypeOID"),l.editable=!1,l.nullable=!1,a=l.name):(l={alias:a,name:a,type:"string"===S.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},d.unshift(l));const g={};for(const B of d){if(null==B.name&&(B.name=B.alias),null==B.alias&&(B.alias=B.name),!B.name)throw new A.Z("geojson-layer:invalid-field-name","field name is missing",{field:B});if(!U.v.jsonValues.includes(B.type))throw new A.Z("geojson-layer:invalid-field-type",`invalid type for field "${B.name}"`,{field:B});if(B.name!==l.name){const X=(0,N.os)(B);void 0!==X&&(g[B.name]=X)}null==B.length&&(B.length=(0,N.ZR)(B))}if(n){if(n.startTimeField){const B=i.get(n.startTimeField);B?(n.startTimeField=B.name,B.type="esriFieldTypeDate"):n.startTimeField=null}if(n.endTimeField){const B=i.get(n.endTimeField);B?(n.endTimeField=B.name,B.type="esriFieldTypeDate"):n.endTimeField=null}if(n.trackIdField){const B=i.get(n.trackIdField);B?n.trackIdField=B.name:(n.trackIdField=null,O.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:n}}))}n.startTimeField||n.endTimeField||(O.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:n}}),n=null)}const L=u?(0,f.bU)(u):void 0,e=i.dateFields.length?{timeZoneIANA:x.pt}:null,t={warnings:O,featureErrors:[],layerDefinition:{...v,drawingInfo:L??void 0,templates:(0,f.Hq)(g),extent:void 0,geometryType:u,objectIdField:a,fields:d,hasZ:!!r,timeInfo:n,dateFieldsTimeReference:e}};y._queryEngine=new I.q({fieldsIndex:P.Z.fromLayerJSON({fields:d,timeInfo:n,dateFieldsTimeReference:e}),geometryType:u,hasM:!1,hasZ:r,objectIdField:a,spatialReference:s,timeInfo:n,featureStore:new p.Z({geometryType:u,hasM:!1,hasZ:r}),cacheSpatialQueries:!0});const o=y._queryEngine.fieldsIndex.requiredFields.indexOf(l);o>-1&&y._queryEngine.fieldsIndex.requiredFields.splice(o,1),y._createDefaultAttributes=(0,f.Dm)(g,a);const E=yield y._createFeatures(R);y._objectIdGenerator=y._createObjectIdGenerator(y._queryEngine,E);const T=y._normalizeFeatures(E,t.featureErrors);y._queryEngine.featureStore.addMany(T);const{fullExtent:C,timeExtent:j}=yield y._queryEngine.fetchRecomputedExtents();if(t.layerDefinition.extent=C,j){const{start:B,end:X}=j;t.layerDefinition.timeInfo.timeExtent=[B,X]}return t})()}applyEdits(c){var m=this;return(0,D.Z)(function*(){const{spatialReference:y,geometryType:O}=m._queryEngine;return yield Promise.all([(0,h.b)(y,O),(0,M._W)(c.adds,y),(0,M._W)(c.updates,y)]),yield m._waitSnapshotComplete(),m._applyEdits(c)})()}queryFeatures(c={},m={}){var y=this;return(0,D.Z)(function*(){return yield y._waitSnapshotComplete(),y._queryEngine.executeQuery(c,m.signal)})()}queryFeatureCount(c={},m={}){var y=this;return(0,D.Z)(function*(){return yield y._waitSnapshotComplete(),y._queryEngine.executeQueryForCount(c,m.signal)})()}queryObjectIds(c={},m={}){var y=this;return(0,D.Z)(function*(){return yield y._waitSnapshotComplete(),y._queryEngine.executeQueryForIds(c,m.signal)})()}queryExtent(c={},m={}){var y=this;return(0,D.Z)(function*(){return yield y._waitSnapshotComplete(),y._queryEngine.executeQueryForExtent(c,m.signal)})()}querySnapping(c,m={}){var y=this;return(0,D.Z)(function*(){return yield y._waitSnapshotComplete(),y._queryEngine.executeQueryForSnapping(c,m.signal)})()}refresh(c){var m=this;return(0,D.Z)(function*(){m._loadOptions.customParameters=c,m._snapshotTask?.abort(),m._snapshotTask=(0,w.vr)(m._snapshotFeatures),m._snapshotTask.promise.then(R=>{m._queryEngine.featureStore.clear(),m._objectIdGenerator=m._createObjectIdGenerator(m._queryEngine,R);const S=m._normalizeFeatures(R);S&&m._queryEngine.featureStore.addMany(S)},R=>{m._queryEngine.featureStore.clear(),(0,G.D_)(R)||Y.Z.getLogger("esri.layers.GeoJSONLayer").error(new A.Z("geojson-layer:refresh","An error occurred during refresh",{error:R}))}),yield m._waitSnapshotComplete();const{fullExtent:y,timeExtent:O}=yield m._queryEngine.fetchRecomputedExtents();return{extent:y,timeExtent:O}})()}_createFeatures(c){var m=this;return(0,D.Z)(function*(){if(null==c)return[];const{geometryType:y,hasZ:O,objectIdField:R}=m._queryEngine,S=(0,F.lG)(c,{geometryType:y,hasZ:O,objectIdField:R});if(!(0,Z.fS)(m._queryEngine.spatialReference,Z.YU))for(const d of S)null!=d.geometry&&(d.geometry=(0,b.GH)((0,M.iV)((0,b.di)(d.geometry,m._queryEngine.geometryType,m._queryEngine.hasZ,!1),Z.YU,m._queryEngine.spatialReference)));return S})()}_waitSnapshotComplete(){var c=this;return(0,D.Z)(function*(){if(c._snapshotTask&&!c._snapshotTask.finished){try{yield c._snapshotTask.promise}catch{}return c._waitSnapshotComplete()}})()}_fetch(c){var m=this;return(0,D.Z)(function*(){const{url:y,customParameters:O}=m._loadOptions,R=(yield(0,z.Z)(y??"",{responseType:"json",query:{...O},signal:c})).data;return(0,F.O3)(R),R})()}_normalizeFeatures(c,m){const{objectIdField:y,fieldsIndex:O}=this._queryEngine,R=[];for(const S of c){const d=this._createDefaultAttributes(),r=(0,h.O0)(O,d,S.attributes,!0);r?m?.push(r):(this._assignObjectId(d,S.attributes,!0),S.attributes=d,S.objectId=d[y],R.push(S))}return R}_applyEdits(c){var m=this;return(0,D.Z)(function*(){const{adds:y,updates:O,deletes:R}=c,S={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(y?.length&&m._applyAddEdits(S,y),O?.length&&m._applyUpdateEdits(S,O),R?.length){for(const u of R)S.deleteResults.push((0,h.d1)(u));m._queryEngine.featureStore.removeManyById(R)}const{fullExtent:d,timeExtent:r}=yield m._queryEngine.fetchRecomputedExtents();return{extent:d,timeExtent:r,featureEditResults:S}})()}_applyAddEdits(c,m){const{addResults:y}=c,{geometryType:O,hasM:R,hasZ:S,objectIdField:d,spatialReference:r,featureStore:u,fieldsIndex:a}=this._queryEngine,s=[];for(const n of m){if(n.geometry&&O!==(0,K.Ji)(n.geometry)){y.push((0,h.av)("Incorrect geometry type."));continue}const i=this._createDefaultAttributes(),l=(0,h.O0)(a,i,n.attributes);if(l)y.push(l);else{if(this._assignObjectId(i,n.attributes),n.attributes=i,null!=n.uid&&(c.uidToObjectId[n.uid]=n.attributes[d]),null!=n.geometry){const g=n.geometry.spatialReference??r;n.geometry=(0,M.iV)((0,h.og)(n.geometry,g),g,r)}s.push(n),y.push((0,h.d1)(n.attributes[d]))}}u.addMany((0,b.Yn)([],s,O,S,R,d))}_applyUpdateEdits({updateResults:c},m){const{geometryType:y,hasM:O,hasZ:R,objectIdField:S,spatialReference:d,featureStore:r,fieldsIndex:u}=this._queryEngine;for(const a of m){const{attributes:s,geometry:n}=a,i=s?.[S];if(null==i){c.push((0,h.av)(`Identifier field ${S} missing`));continue}if(!r.has(i)){c.push((0,h.av)(`Feature with object id ${i} missing`));continue}const l=(0,b.EI)(r.getFeature(i),y,R,O);if(null!=n){if(y!==(0,K.Ji)(n)){c.push((0,h.av)("Incorrect geometry type."));continue}const g=n.spatialReference??d;l.geometry=(0,M.iV)((0,h.og)(n,g),g,d)}if(s){const g=(0,h.O0)(u,l.attributes,s);if(g){c.push(g);continue}}r.add((0,b.XA)(l,y,R,O,S)),c.push((0,h.d1)(i))}}_createObjectIdGenerator(c,m){const y=c.fieldsIndex.get(c.objectIdField);if("esriFieldTypeString"===y.type)return()=>y.name+"-"+Date.now().toString(16);let O=Number.NEGATIVE_INFINITY;for(const R of m)R.objectId&&(O=Math.max(O,R.objectId));return O=Math.max(0,O)+1,()=>O++}_assignObjectId(c,m,y=!1){const O=this._queryEngine.objectIdField;c[O]=y&&O in m?m[O]:this._objectIdGenerator()}_checkProjection(c){return(0,D.Z)(function*(){try{yield(0,M._W)(Z.YU,c)}catch{throw new A.Z("geojson-layer","Projection not supported")}})()}}},78642:(k,Q,_)=>{_.d(Q,{O3:()=>r,lG:()=>a,my:()=>u,q9:()=>Z});var D=_(51310),z=_(57964),w=_(33721),A=_(83502),Y=_(62209),G=_(85295);const K={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function Z(s){return K[s]}function*b(s){switch(s.type){case"Feature":yield s;break;case"FeatureCollection":for(const n of s.features)n&&(yield n)}}function*p(s){if(s)switch(s.type){case"Point":yield s.coordinates;break;case"LineString":case"MultiPoint":yield*s.coordinates;break;case"MultiLineString":case"Polygon":for(const n of s.coordinates)yield*n;break;case"MultiPolygon":for(const n of s.coordinates)for(const i of n)yield*i}}function I(s){for(const n of s)if(n.length>2)return!0;return!1}function h(s){let n=0;for(let i=0;i<s.length;i++){const l=s[i],g=s[(i+1)%s.length];n+=l[0]*g[1]-g[0]*l[1]}return n<=0}function P(s){const n=s[0],i=s[s.length-1];return n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]||s.push(n),s}function U(s,n,i){switch(n.type){case"LineString":return function N(s,n,i){return O(s,n.coordinates,i),s}(s,n,i);case"MultiLineString":return function x(s,n,i){for(const l of n.coordinates)O(s,l,i);return s}(s,n,i);case"MultiPoint":return function v(s,n,i){return O(s,n.coordinates,i),s}(s,n,i);case"MultiPolygon":return function W(s,n,i){for(const l of n.coordinates){m(s,l[0],i);for(let g=1;g<l.length;g++)y(s,l[g],i)}return s}(s,n,i);case"Point":return function $(s,n,i){return S(s,n.coordinates,i),s}(s,n,i);case"Polygon":return function c(s,n,i){const l=n.coordinates;m(s,l[0],i);for(let g=1;g<l.length;g++)y(s,l[g],i);return s}(s,n,i)}}function m(s,n,i){const l=P(n);!function F(s){return!h(s)}(l)?O(s,l,i):R(s,l,i)}function y(s,n,i){const l=P(n);!function f(s){return h(s)}(l)?O(s,l,i):R(s,l,i)}function O(s,n,i){for(const l of n)S(s,l,i);s.lengths.push(n.length)}function R(s,n,i){for(let l=n.length-1;l>=0;l--)S(s,n[l],i);s.lengths.push(n.length)}function S(s,n,i){const[l,g,L]=n;s.coords.push(l,g),i.hasZ&&s.coords.push(L||0)}function d(s){switch(typeof s){case"string":return(0,D.mu)(s)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function r(s,n=4326){if(!s)throw new z.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==s.type&&"FeatureCollection"!==s.type)throw new z.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:s});const{crs:i}=s;if(!i)return;const l="string"==typeof i?i:"name"===i.type?i.properties.name:"EPSG"===i.type?i.properties.code:null,g=(0,w.oR)({wkid:n})?new RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${n})$`,"i");if(!l||!g.test(l))throw new z.Z("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:i})}function u(s,n={}){const i=[],l=new Set,g=new Set;let L,e=!1,t=null,o=!1,{geometryType:E=null}=n,T=!1;for(const j of b(s)){const{geometry:B,properties:X,id:q}=j;if((!B||(E||(E=Z(B.type)),Z(B.type)===E))&&(e||(e=I(p(B))),o||(o=null!=q,o&&(L=typeof q,X&&(t=Object.keys(X).filter(H=>X[H]===q)))),X&&t&&o&&null!=q&&(t.length>1?t=t.filter(H=>X[H]===q):1===t.length&&(t=X[t[0]]===q?t:[])),!T&&X)){let H=!0;for(const J in X){if(l.has(J))continue;const V=X[J];if(null==V){H=!1,g.add(J);continue}const ee=d(V);if("unknown"===ee){g.add(J);continue}g.delete(J),l.add(J);const te=(0,G.q6)(J);te&&i.push({name:te,alias:J,type:ee})}T=H}}const C=(0,G.q6)(1===t?.length&&t[0]||null)??void 0;if(C)for(const j of i)if(j.name===C&&(0,G.H7)(j)){j.type="esriFieldTypeOID";break}return{fields:i,geometryType:E,hasZ:e,objectIdFieldName:C,objectIdFieldType:L,unknownFields:Array.from(g)}}function a(s,n){return Array.from(function*M(s,n={}){const{geometryType:i,objectIdField:l}=n;for(const g of s){const{geometry:L,properties:e,id:t}=g;if(L&&Z(L.type)!==i)continue;const o=e||{};let E;l&&(E=o[l],null==t||E||(o[l]=E=t)),yield new A.u_(L?U(new Y.Z,L,n):null,o,null,E??void 0)}}(b(s),n))}},60324:(k,Q,_)=>{_.d(Q,{Dm:()=>Z,Hq:()=>p,MS:()=>M,bU:()=>Y});var D=_(14007),z=_(34222),w=_(85559),A=_(19579);function Y(I){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===I||"esriGeometryMultipoint"===I?A.I4:"esriGeometryPolyline"===I?A.ET:A.lF}}}const G=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let K=1;function Z(I,F){if((0,D.Z)("esri-csp-restrictions"))return()=>({[F]:null,...I});try{let f=`this${b(F)} = null;`;for(const P in I)f+=`this${b(P)} = ${JSON.stringify(I[P])};`;const h=new Function(`\n      return class AttributesClass$${K++} {\n        constructor() {\n          ${f};\n        }\n      }\n    `)();return()=>new h}catch{return()=>({[F]:null,...I})}}function b(I){return G.test(I)?`.${I}`:`["${I}"]`}function p(I={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,z.d9)(I)}}]}function M(I,F){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:I},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:F,supportsDelete:F,supportsEditing:F,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:F,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:w.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:F,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},42726:(k,Q,_)=>{_.d(Q,{O0:()=>M,av:()=>K,b:()=>U,d1:()=>b,og:()=>f});var D=_(15861),z=_(51310),w=_(33721),A=_(85295);class Y{constructor(){this.code=null,this.description=null}}class G{constructor(v){this.error=new Y,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=v}}function K(x){return new G(x)}class Z{constructor(v){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=v}}function b(x){return new Z(x)}const p=new Set;function M(x,v,W,$=!1){p.clear();for(const c in W){const m=x.get(c);if(!m)continue;const y=I(m,W[c]);if(p.add(m.name),m&&($||m.editable)){const O=(0,A.Qc)(m,y);if(O)return K((0,A.vP)(O,m,y));v[m.name]=y}}for(const c of x?.requiredFields??[])if(!p.has(c.name))return K(`missing required field "${c.name}"`);return null}function I(x,v){let W=v;return(0,A.H7)(x)&&"string"==typeof v?W=parseFloat(v):(0,A.qN)(x)&&null!=v&&"string"!=typeof v?W=String(v):(0,A.y2)(x)&&"string"==typeof v&&(W=(0,z.sG)(v)),(0,A.Pz)(W)}let F;function f(x,v){if(!x||!(0,w.JY)(v))return x;if("rings"in x||"paths"in x){if(null==F)throw new TypeError("geometry engine not loaded");return F.simplify(v,x)}return x}function P(){return(P=(0,D.Z)(function*(){return null==F&&(F=yield Promise.all([_.e(9465),_.e(8592),_.e(7545)]).then(_.bind(_,49574))),F})).apply(this,arguments)}function U(x,v){return N.apply(this,arguments)}function N(){return N=(0,D.Z)(function*(x,v){!(0,w.JY)(x)||"esriGeometryPolygon"!==v&&"esriGeometryPolyline"!==v||(yield function h(){return P.apply(this,arguments)}())}),N.apply(this,arguments)}},19579:(k,Q,_)=>{_.d(Q,{ET:()=>A,I4:()=>w,SQ:()=>D,X1:()=>z,eG:()=>K,lF:()=>Y,lj:()=>b,qP:()=>G,wW:()=>Z});const D=[252,146,31,255],z=[153,153,153,255],w={type:"esriSMS",style:"esriSMSCircle",size:6,color:D,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},A={type:"esriSLS",style:"esriSLSSolid",width:.75,color:D},Y={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},G={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},K={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Z={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},b={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);