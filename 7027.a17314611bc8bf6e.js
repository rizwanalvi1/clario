"use strict";(self.webpackChunkclario_frontend=self.webpackChunkclario_frontend||[]).push([[7027,5398],{31816:(Be,pe,_)=>{_.d(pe,{P:()=>k});class k{constructor(p){this.source=p}}},66224:(Be,pe,_)=>{_.d(pe,{s:()=>k});class k{constructor(p,H){this._moduleSingletons=p,this._syntaxModules=H}loadLibrary(p){if(null==this._syntaxModules)return null;const H=this._syntaxModules[p.toLowerCase()];return H?{syntax:H.script,uri:H.uri}:null}}},97478:(Be,pe,_)=>{_.d(pe,{Z:()=>L});var k=_(70430);class L extends k.Z{constructor(H){super(),this.declaredClass="esri.arcade.Portal",this.immutable=!1,this.setField("url",H),this.immutable=!0}}},97973:(Be,pe,_)=>{_.d(pe,{Z:()=>L});var k=_(70430);class L extends k.Z{constructor(H,g,E,o,R,w,l){super(),this.attachmentUrl=R,this.declaredClass="esri.arcade.Attachment",this.immutable=!1,this.setField("id",H),this.setField("name",g),this.setField("contenttype",E),this.setField("size",o),this.setField("exifinfo",w),this.setField("keywords",l),this.immutable=!0}deepClone(){return new L(this.field("id"),this.field("name"),this.field("contenttype"),this.field("size"),this.attachmentUrl,this.field("exifinfo")?.deepClone()??null,this.field("keywords"))}}},70430:(Be,pe,_)=>{_.d(pe,{Z:()=>w});var k=_(15861),L=_(93630),p=_(5137),H=_(53570),g=_(29066),E=_(89018),o=_(32184);function R(l,z,T=!1,$=!1){if(null==l)return null;if((0,E.b)(l))return(0,E.g)(l);if((0,E.a)(l))return(0,E.h)(l);if((0,E.c)(l))return(0,E.j)(l);if((0,E.k)(l))return(0,E.l)(l,z);if((0,E.m)(l)||(0,E.n)(l))return l;if((0,E.o)(l)){const K=[];for(const J of l)K.push(R(J,z,T,$));return K}if($&&(0,E.p)(l))return l;const ee=new w;ee.immutable=!1;for(const K of Object.keys(l)){const J=l[K];void 0!==J&&ee.setField(K,R(J,z,T,$))}return ee.immutable=T,ee}class w{constructor(z){this.declaredClass="esri.arcade.Dictionary",this.attributes=null,this.plain=!1,this.immutable=!0,this.attributes=z instanceof w?z.attributes:z??{}}field(z){const T=z.toLowerCase(),$=this.attributes[z];if(void 0!==$)return $;for(const ee in this.attributes)if(ee.toLowerCase()===T)return this.attributes[ee];throw new H.aV(null,H.rH.FieldNotFound,null,{key:z})}setField(z,T){if(this.immutable)throw new H.aV(null,H.rH.Immutable,null);if((0,E.i)(T))throw new H.aV(null,H.rH.NoFunctionInDictionary,null);const $=z.toLowerCase();if(T instanceof Date&&(T=L.iG.dateJSToArcadeDate(T)),void 0===this.attributes[z]){for(const ee in this.attributes)if(ee.toLowerCase()===$)return void(this.attributes[ee]=T);this.attributes[z]=T}else this.attributes[z]=T}hasField(z){const T=z.toLowerCase();if(void 0!==this.attributes[z])return!0;for(const $ in this.attributes)if($.toLowerCase()===T)return!0;return!1}keys(){let z=[];for(const T in this.attributes)z.push(T);return z=z.sort(),z}castToText(z=!1){let T="";for(const $ in this.attributes){""!==T&&(T+=",");const ee=this.attributes[$];null==ee?T+=JSON.stringify($)+":null":(0,E.a)(ee)||(0,E.b)(ee)||(0,E.c)(ee)?T+=JSON.stringify($)+":"+JSON.stringify(ee):ee instanceof o.Z?T+=JSON.stringify($)+":"+(0,E.t)(ee):ee instanceof g.Z||Array.isArray(ee)?T+=JSON.stringify($)+":"+(0,E.t)(ee,null,z):ee instanceof L.iG?T+=z?JSON.stringify($)+":"+JSON.stringify(ee.getTime()):JSON.stringify($)+":"+ee.stringify():null!==ee&&"object"==typeof ee&&void 0!==ee.castToText&&(T+=JSON.stringify($)+":"+ee.castToText(z))}return"{"+T+"}"}static convertObjectToArcadeDictionary(z,T,$=!0,ee=!1){const K=new w;K.immutable=!1;for(const J in z){const D=z[J];void 0!==D&&K.setField(J.toString(),R(D,T,$,ee))}return K.immutable=$,K}static convertJsonToArcade(z,T,$=!1,ee=!1){return R(z,T,$,ee)}castAsJson(z=null){const T={};for(let $ in this.attributes){const ee=this.attributes[$];void 0!==ee&&(z?.keyTranslate&&($=z.keyTranslate($)),T[$]=(0,E.d)(ee,z))}return T}castDictionaryValueAsJsonAsync(z,T,$,ee=null,K){return(0,k.Z)(function*(){const J=yield(0,E.e)($,ee,K);return z[T]=J,J})()}castAsJsonAsync(z=null,T=null){var $=this;return(0,k.Z)(function*(){const ee={},K=[];for(let J in $.attributes){const D=$.attributes[J];T?.keyTranslate&&(J=T.keyTranslate(J)),void 0!==D&&((0,E.f)(D)||D instanceof o.Z||D instanceof L.iG?ee[J]=(0,E.d)(D,T):K.push($.castDictionaryValueAsJsonAsync(ee,J,D,z,T)))}return K.length>0&&(yield Promise.all(K)),ee})()}deepClone(){const z=new w;z.immutable=!1;for(const T of this.keys())z.setField(T,(0,p.I)(this.field(T)));return z}}},860:(Be,pe,_)=>{_.d(pe,{Z:()=>K});var k=_(15861),L=_(93630),p=_(5137),H=_(70430),g=_(53570),E=_(29066),o=_(89018),R=_(88781),w=_(81429),l=_(32184),z=_(44107),T=_(40637),$=_(10842),ee=_(40100);class K{constructor(){this.arcadeDeclaredClass="esri.arcade.Feature",this._optimizedGeomDefinition=null,this._geometry=null,this.attributes=null,this._layer=null,this._fieldTypesFixed=!0,this.fieldsIndex=null,this.contextTimeZone=null,this.immutable=!0,this._fieldsToFixDataTypes=null,this.immutable=!0}static createFromGraphic(D,h){const a=new K;return a.contextTimeZone=h??null,a._geometry=null!=D.geometry?D.geometry:null,a.attributes=null==D.attributes?{}:D.attributes,D._sourceLayer?(a._layer=D._sourceLayer,a._fieldTypesFixed=!1):D._layer?(a._layer=D._layer,a._fieldTypesFixed=!1):D.layer&&"fields"in D.layer?(a._layer=D.layer,a._fieldTypesFixed=!1):D.sourceLayer&&"fields"in D.sourceLayer&&(a._layer=D.sourceLayer,a._fieldTypesFixed=!1),a._layer&&!a._fieldTypesFixed&&(a.fieldsIndex=this.hydrateFieldsIndex(a._layer)),a}static createFromArcadeFeature(D){if(D instanceof K){const a=new K;return a._fieldTypesFixed=D._fieldTypesFixed,a.attributes=D.attributes,a._geometry=D._geometry,a._optimizedGeomDefinition=D._optimizedGeomDefinition,D._layer&&(a._layer=D._layer),a.fieldsIndex=D.fieldsIndex,a.contextTimeZone=D.contextTimeZone,a}const h={};for(const a of D.keys())h[a]=D.field(a);return K.createFromGraphicLikeObject(D.geometry(),h,D.fullSchema(),D.contextTimeZone)}static createFromOptimisedFeature(D,h,a){const m=new K;return m._geometry=D.geometry?{geometry:D.geometry}:null,m._optimizedGeomDefinition=a,m.attributes=D.attributes||{},m._layer=h,m._fieldTypesFixed=!1,m}static createFromArcadeDictionary(D,h){const a=new K;return a.attributes=D.field("attributes"),null!==a.attributes&&a.attributes instanceof H.Z?(a.attributes=a.attributes.attributes,null===a.attributes&&(a.attributes={})):a.attributes={},a._geometry=D.field("geometry"),null!==a._geometry&&(a._geometry instanceof H.Z?a._geometry=K.parseGeometryFromDictionary(a._geometry,h):a._geometry instanceof l.Z||(a._geometry=null)),a}static createFromGraphicLikeObject(D,h,a=null,m){const y=new K;return y.contextTimeZone=m??null,null===h&&(h={}),y.attributes=h,y._geometry=D??null,y._layer=a,y._layer&&(y._fieldTypesFixed=!1,y.fieldsIndex=this.hydrateFieldsIndex(y._layer)),y}static hydrateFieldsIndex(D){return null===D?null:(0,o.u)(D)?D.getFieldsIndex():D.fieldsIndex?D.fieldsIndex:ee.Z.fromLayerJSON({datesInUnknownTimezone:D.datesInUnknownTimezone,fields:D.fields,timeInfo:D.timeInfo,editFieldsInfo:D.editFieldsInfo,dateFieldsTimeReference:D.dateFieldsTimeReference??{timeZone:"UTC",respectsDaylightSaving:!1}})}repurposeFromGraphicLikeObject(D,h,a=null){null===h&&(h={}),this.attributes=h,this._geometry=D??null,this._layer=a,this._fieldTypesFixed=!this._layer}castToText(D=!1){let h="";!1===this._fieldTypesFixed&&this._fixFieldTypes();for(const a in this.attributes){""!==h&&(h+=",");const m=this.attributes[a];null==m?h+=JSON.stringify(a)+":null":(0,o.a)(m)||(0,o.b)(m)||(0,o.c)(m)?h+=JSON.stringify(a)+":"+JSON.stringify(m):m instanceof l.Z?h+=JSON.stringify(a)+":"+(0,o.t)(m):m instanceof w.n||m instanceof R.u?h+=`${JSON.stringify(a)}:${JSON.stringify(m.toString())}`:m instanceof E.Z||Array.isArray(m)?h+=JSON.stringify(a)+":"+(0,o.t)(m,null,D):m instanceof L.iG?h+=D?JSON.stringify(a)+":"+JSON.stringify(m.getTime()):JSON.stringify(a)+":"+m.stringify():null!==m&&"object"==typeof m&&void 0!==m.castToText&&(h+=JSON.stringify(a)+":"+m.castToText(D))}return'{"geometry":'+(null===this.geometry()?"null":(0,o.t)(this.geometry()))+',"attributes":{'+h+"}}"}_fixFieldTypes(){if(this._fieldsToFixDataTypes&&this._fieldsToFixDataTypes?.length>0)return this._fixAllFields(this._fieldsToFixDataTypes),void(this._fieldTypesFixed=!0);const D=[],h=this._layer.fields;for(let a=0;a<h.length;a++){const m=h[a],{name:y,type:s}=m;switch(s){case"date":case"esriFieldTypeDate":D.push({field:y,dataType:"date"});break;case"date-only":case"esriFieldTypeDateOnly":D.push({field:y,dataType:"date-only"});break;case"time-only":case"esriFieldTypeTimeOnly":D.push({field:y,dataType:"time-only"});break;case"timestamp-offset":case"esriFieldTypeTimestampOffset":D.push({field:y,dataType:"timestamp-offset"})}}this._fieldsToFixDataTypes=D,D.length>0&&this._fixAllFields(D),this._fieldTypesFixed=!0}isUnknownDateTimeField(D){return"unknown"===this.fieldsIndex?.getTimeZone(D)}_fixAllFields(D){this.attributes={...this.attributes};const h=this.contextTimeZone??"system";for(let a=0;a<D.length;a++){const m=D[a].field,y=D[a].dataType;let s=this.attributes[m];if(void 0===s){for(const f in this.attributes)if(f.toLowerCase()===m.toLowerCase()){if(s=this.attributes[f],null!==s){if("time-only"===y){(0,o.n)(s)||(this.attributes[f]=w.n.fromReader(s.toString()));break}if("date-only"===y){(0,o.m)(s)||(this.attributes[f]=R.u.fromReader(s.toString()));break}if("timestamp-offset"===y){(0,o.k)(s)||(this.attributes[f]=L.iG.fromReaderAsTimeStampOffset(s.toString()));break}const I=this.isUnknownDateTimeField(f);s instanceof Date?this.attributes[f]=I?L.iG.unknownDateJSToArcadeDate(s):L.iG.dateJSAndZoneToArcadeDate(s,h):(0,o.k)(s)||(this.attributes[f]=I?L.iG.unknownEpochToArcadeDate(s):L.iG.epochToArcadeDate(s,h))}break}}else if(null!==s){if("time-only"===y){this.attributes[m]=(0,o.n)(s)?s:w.n.fromReader(s.toString());continue}if("date-only"===y){this.attributes[m]=(0,o.m)(s)?s:R.u.fromReader(s.toString());continue}if("timestamp-offset"===y){this.attributes[m]=(0,o.k)(s)?s:L.iG.fromReaderAsTimeStampOffset(s.toString());continue}const f=this.isUnknownDateTimeField(m);this.attributes[m]=(0,o.k)(s)?s:s instanceof Date?f?L.iG.unknownDateJSToArcadeDate(s):L.iG.dateJSAndZoneToArcadeDate(s,h):f?L.iG.unknownEpochToArcadeDate(s):L.iG.epochToArcadeDate(s,h)}}}geometry(){return null===this._geometry||this._geometry instanceof l.Z||(this._optimizedGeomDefinition?(this._geometry=(0,T.im)((0,$.di)(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM)),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=(0,T.im)(this._geometry)),this._geometry}field(D){this._fieldTypesFixed||this._fixFieldTypes();const h=this.attributes[D];if(void 0!==h)return h;const a=D.toLowerCase();for(const m in this.attributes)if(m.toLowerCase()===a)return this.attributes[m];if(this._hasFieldDefinition(a))return null;throw new g.aV(null,g.rH.FieldNotFound,null,{key:D})}_hasFieldDefinition(D){if(null===this._layer)return!1;for(let h=0;h<this._layer.fields.length;h++)if(this._layer.fields[h].name.toLowerCase()===D)return!0;return!1}setField(D,h){if(this.immutable)throw new g.aV(null,g.rH.Immutable,null);if(h instanceof Date&&(h=this.isUnknownDateTimeField(D)?L.iG.unknownDateJSToArcadeDate(h):L.iG.dateJSToArcadeDate(h)),!1===(0,o.f)(h))throw new g.aV(null,g.rH.TypeNotAllowedInFeature,null);const a=D.toLowerCase();if(void 0===this.attributes[D]){for(const m in this.attributes)if(m.toLowerCase()===a)return void(this.attributes[m]=h);this.attributes[D]=h}else this.attributes[D]=h}hasField(D){const h=D.toLowerCase();if(void 0!==this.attributes[D])return!0;for(const a in this.attributes)if(a.toLowerCase()===h)return!0;return!!this._hasFieldDefinition(h)}keys(){let D=[];const h={};for(const a in this.attributes)D.push(a),h[a.toLowerCase()]=1;if(null!==this._layer)for(let a=0;a<this._layer.fields.length;a++){const m=this._layer.fields[a];1!==h[m.name.toLowerCase()]&&D.push(m.name)}return D=D.sort(),D}static parseGeometryFromDictionary(D,h){const a=K._convertDictionaryToJson(D,!0);return void 0!==a.hasm&&(a.hasM=a.hasm,delete a.hasm),void 0!==a.hasz&&(a.hasZ=a.hasz,delete a.hasz),void 0!==a.spatialreference&&(a.spatialReference=a.spatialreference,delete a.spatialreference),a.spatialReference||(a.spatialReference=h),void 0!==a.rings&&(a.rings=this._fixPathArrays(a.rings,!0===a.hasZ,!0===a.hasZ)),void 0!==a.paths&&(a.paths=this._fixPathArrays(a.paths,!0===a.hasZ,!0===a.hasM)),void 0!==a.points&&(a.points=this._fixPointArrays(a.points,!0===a.hasZ,!0===a.hasM)),(0,T.im)(a)}static _fixPathArrays(D,h,a){const m=[];if(Array.isArray(D))for(let y=0;y<D.length;y++)m.push(this._fixPointArrays(D[y],h,a));else if(D instanceof E.Z)for(let y=0;y<D.length();y++)m.push(this._fixPointArrays(D.get(y),h,a));return m}static _fixPointArrays(D,h,a){const m=[];if(Array.isArray(D))for(let y=0;y<D.length;y++){const s=D[y];m.push(s instanceof z.Z?h&&a?[s.x,s.y,s.z,s.m]:h?[s.x,s.y,s.z]:a?[s.x,s.y,s.m]:[s.x,s.y]:s instanceof E.Z?s.toArray():s)}else if(D instanceof E.Z)for(let y=0;y<D.length();y++){const s=D.get(y);m.push(s instanceof z.Z?h&&a?[s.x,s.y,s.z,s.m]:h?[s.x,s.y,s.z]:a?[s.x,s.y,s.m]:[s.x,s.y]:s instanceof E.Z?s.toArray():s)}return m}static _convertDictionaryToJson(D,h=!1){const a={};for(const m in D.attributes){let y=D.attributes[m];y instanceof H.Z&&(y=K._convertDictionaryToJson(y)),h?a[m.toLowerCase()]=y:a[m]=y}return a}static parseAttributesFromDictionary(D){const h={};for(const a in D.attributes){const m=D.attributes[a];if(!(0,o.f)(m))throw new g.aV(null,g.rH.InvalidParameter,null);h[a]=m}return h}static fromJson(D,h){let a=null;null!=D.geometry&&(a=(0,T.im)(D.geometry));const m={};if(null!=D.attributes)for(const y in D.attributes){const s=D.attributes[y];if(null===s)m[y]=s;else{if(!((0,o.c)(s)||(0,o.b)(s)||(0,o.a)(s)||(0,o.k)(s)||(0,o.n)(s)||(0,o.m)(s)))throw new g.aV(null,g.rH.InvalidParameter,null);m[y]=s}}return K.createFromGraphicLikeObject(a,m,null,h??null)}fullSchema(){return this._layer}gdbVersion(){if(null===this._layer)return"";const D=this._layer.gdbVersion;return void 0===D?"":""===D&&this._layer.capabilities?.isVersioned?"SDE.DEFAULT":D}castAsJson(D){const h={attributes:{},geometry:!0===D?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null};for(const a in this.attributes){const m=this.attributes[a];void 0!==m&&(h.attributes[a]=(0,o.d)(m,D))}return h}castAsJsonAsync(D=null,h){var a=this;return(0,k.Z)(function*(){return a.castAsJson(h)})()}}(0,p.T)(K)},59243:(Be,pe,_)=>{_.d(pe,{Bx:()=>H,Rm:()=>L,Vg:()=>g,aq:()=>p});var k=_(79412);class L{constructor(){}}function p(E,o,R){if(E instanceof L&&!(E instanceof g)){const w=new g;return w.fn=E,w.parameterEvaluator=R,w.context=o,w}return E}class H extends L{constructor(o){super(),this.fn=o}createFunction(o){return(...R)=>this.fn(o,{preparsed:!0,arguments:R})}call(o,R){return this.fn(o,R)}marshalledCall(o,R,w,l){return l(o,R,(z,T,$)=>{$=$.map(K=>K instanceof L&&!(K instanceof g)?p(K,o,l):K);const ee=this.call(w,{args:$});return(0,k.y8)(ee)?ee.then(K=>p(K,w,l)):ee})}}class g extends L{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(o){return this.fn.createFunction(this.context)}call(o,R){return this.fn.marshalledCall(o,R,this.context,this.parameterEvaluator)}marshalledCall(o,R,w){return this.fn.marshalledCall(o,R,this.context,this.parameterEvaluator)}}},69103:(Be,pe,_)=>{_.d(pe,{Z:()=>p});var k=_(29066),L=_(85833);class p extends k.Z{constructor(g,E,o,R,w){super(g),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=o,this._hasM=R,this._spRef=E,this._cacheId=w}get(g){if(void 0===this._lazyPath[g]){const E=this._elements[g];if(void 0===E)return;this._lazyPath[g]=new L.Z(E,this._spRef,this._hasZ,this._hasM,this._cacheId,g)}return this._lazyPath[g]}equalityTest(g){return g===this||null!==g&&g instanceof p&&g.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}},85833:(Be,pe,_)=>{_.d(pe,{Z:()=>p});var k=_(29066),L=_(44107);class p extends k.Z{constructor(g,E,o,R,w,l){super(g),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=E,this._hasZ=o,this._hasM=R,this._cacheId=w,this._partId=l}get(g){if(void 0===this._lazyPt[g]){const E=this._elements[g];if(void 0===E)return;const o=this._hasZ,R=this._hasM;let w;w=o&&!R?new L.Z(E[0],E[1],E[2],void 0,this._spRef):R&&!o?new L.Z(E[0],E[1],void 0,E[2],this._spRef):o&&R?new L.Z(E[0],E[1],E[2],E[3],this._spRef):new L.Z(E[0],E[1],this._spRef),w.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+g.toString(),this._lazyPt[g]=w}return this._lazyPt[g]}equalityTest(g){return g===this||null!==g&&g instanceof p&&g.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}},33692:(Be,pe,_)=>{_.d(pe,{Z:()=>o,u:()=>R});var k=_(70430),L=_(53570),p=_(69103),H=_(85833),g=_(89018);let E=0;function o(w,l,z,T,$=1){let ee;switch(l=l.toLowerCase()){case"hasz":{const K=w.hasZ;return void 0!==K&&K}case"hasm":{const K=w.hasM;return void 0!==K&&K}case"spatialreference":{let K=w.spatialReference._arcadeCacheId;if(void 0===K){let D=!0;Object.freeze&&Object.isFrozen(w.spatialReference)&&(D=!1),D&&(E++,w.spatialReference._arcadeCacheId=E,K=E)}const J=new k.Z({wkt:w.spatialReference.wkt,wkid:w.spatialReference.wkid});return void 0!==K&&(J._arcadeCacheId="SPREF"+K.toString()),J}}switch(w.type){case"extent":switch(l){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{const K=w[l];return void 0!==K?K:null}case"type":return"Extent"}break;case"polygon":switch(l){case"rings":return ee=w.cache._arcadeCacheId,void 0===ee&&(E++,ee=E,w.cache._arcadeCacheId=ee),new p.Z(w.rings,w.spatialReference,!0===w.hasZ,!0===w.hasM,ee);case"type":return"Polygon"}break;case"point":switch(l){case"x":case"y":case"z":case"m":return w[l]??null;case"type":return"Point"}break;case"polyline":switch(l){case"paths":return ee=w.cache._arcadeCacheId,void 0===ee&&(E++,ee=E,w.cache._arcadeCacheId=ee),new p.Z(w.paths,w.spatialReference,!0===w.hasZ,!0===w.hasM,ee);case"type":return"Polyline"}break;case"multipoint":switch(l){case"points":return ee=w.cache._arcadeCacheId,void 0===ee&&(E++,ee=E,w.cache._arcadeCacheId=ee),new H.Z(w.points,w.spatialReference,!0===w.hasZ,!0===w.hasM,ee,1);case"type":return"Multipoint"}}if(1===$)throw new L.aV(z,L.rH.InvalidIdentifier,T);return 2===$?{keystate:"notfound"}:null}function R(w,l){let z,T=w;if(null==T)return null;if((0,g.o)(l))z=l;else if((0,g.q)(l))z=l.toArray();else{if(null==l)return null;z=[l]}for(const $ of z){if((0,g.r)(T)){if(!1===(0,g.c)($)||!T.hasField($))return null;T=T.field($)}else if((0,g.v)(T)){if(!1===(0,g.c)($)||!T.hasField($))return null;T=T.field($)}else if((0,g.p)(T)){if(!1===(0,g.c)($))return null;T=o(T,$,null,null,0)}else if((0,g.o)(T)){if(!1===(0,g.b)($))return null;T=$>=0?T[$]:T[T.length+$]}else{if(!(0,g.q)(T)||!1===(0,g.b)($))return null;T=T.get($>=0?$:T.length()+$)}if(null==T)return null}return T}},5137:(Be,pe,_)=>{_.d(pe,{I:()=>g,T:()=>p});var k=_(31816),L=_(89018);function p(E){H=E}let H;function g(E){return null===E?null:(0,L.k)(E)?E.clone():(0,L.f)(E)?E:(0,L.p)(E)?E.clone():(0,L.q)(E)?E.toArray().map(o=>g(o)):(0,L.o)(E)?E.map(o=>g(o)):(0,L.r)(E)?H.createFromArcadeFeature(E):(0,L.s)(E)||(0,L.u)(E)?E:(0,L.v)(E)||"esri.arcade.Attachment"===E?.declaredClass?E.deepClone():("esri.arcade.Portal"===E?.declaredClass||(0,L.w)(E)||E instanceof k.P||(0,L.i)(E),E)}},53570:(Be,pe,_)=>{_.d(pe,{OF:()=>R,TD:()=>z,Tu:()=>$,VO:()=>l,aV:()=>E,kq:()=>w,rH:()=>L});var L,K,k=_(72578);(K=L||(L={})).AsyncNotEnabled="AsyncNotEnabled",K.ModulesNotSupported="ModulesNotSupported",K.CircularModules="CircularModules",K.CannotCompareDateAndTime="CannotCompareDateAndTime",K.NeverReach="NeverReach",K.UnsupportedHashType="UnsupportedHashType",K.InvalidParameter="InvalidParameter",K.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",K.UnexpectedToken="UnexpectedToken",K.Unrecognized="Unrecognized",K.UnrecognizedType="UnrecognizedType",K.MaximumCallDepth="MaximumCallDepth",K.BooleanConditionRequired="BooleanConditionRequired",K.TypeNotAllowedInFeature="TypeNotAllowedInFeature",K.KeyMustBeString="KeyMustBeString",K.WrongNumberOfParameters="WrongNumberOfParameters",K.CallNonFunction="CallNonFunction",K.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",K.NoFunctionInDictionary="NoFunctionInDictionary",K.NoFunctionInArray="NoFunctionInArray",K.AssignModuleFunction="AssignModuleFunction",K.LogicExpressionOrAnd="LogicExpressionOrAnd",K.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",K.FunctionNotFound="FunctionNotFound",K.InvalidMemberAccessKey="InvalidMemberAccessKey",K.UnsupportedUnaryOperator="UnsupportUnaryOperator",K.InvalidIdentifier="InvalidIdentifier",K.MemberOfNull="MemberOfNull",K.UnsupportedOperator="UnsupportedOperator",K.Cancelled="Cancelled",K.ModuleAccessorMustBeString="ModuleAccessorMustBeString",K.ModuleExportNotFound="ModuleExportNotFound",K.Immutable="Immutable",K.OutOfBounds="OutOfBounds",K.IllegalResult="IllegalResult",K.FieldNotFound="FieldNotFound",K.PortalRequired="PortalRequired",K.LogicError="LogicError",K.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",K.KeyAccessorMustBeString="KeyAccessorMustBeString",K.WrongSpatialReference="WrongSpatialReference",K.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",K.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly";const p={[L.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[L.LogicError]:"Logic error - {reason}",[L.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[L.NeverReach]:"Encountered unreachable logic",[L.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[L.ModuleAccessorMustBeString]:"Module accessor must be a string",[L.ModuleExportNotFound]:"Module has no export with provided identifier",[L.ModulesNotSupported]:"Current profile does not support modules",[L.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[L.FunctionNotFound]:"Function not found",[L.FieldNotFound]:"Key not found - {key}",[L.CircularModules]:"Circular module dependencies are not allowed",[L.Cancelled]:"Execution cancelled",[L.UnsupportedHashType]:"Type not supported in hash function",[L.IllegalResult]:"Value is not a supported return type",[L.PortalRequired]:"Portal is required",[L.InvalidParameter]:"Invalid parameter",[L.WrongNumberOfParameters]:"Call with wrong number of parameters",[L.Unrecognized]:"Unrecognized code structure",[L.UnrecognizedType]:"Unrecognized type",[L.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[L.BooleanConditionRequired]:"Conditions must use booleans",[L.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[L.NoFunctionInArray]:"Arrays cannot contain functions.",[L.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[L.KeyAccessorMustBeString]:"Accessor must be a string",[L.KeyMustBeString]:"Object keys must be a string",[L.Immutable]:"Object is immutable",[L.UnexpectedToken]:"Unexpected token",[L.MemberOfNull]:"Cannot access property of null object",[L.MaximumCallDepth]:"Exceeded maximum function depth",[L.OutOfBounds]:"Out of bounds",[L.InvalidIdentifier]:"Identifier not recognized",[L.CallNonFunction]:"Expression is not a function",[L.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[L.AssignModuleFunction]:"Cannot assign function to module variable",[L.UnsupportedUnaryOperator]:"Unsupported unary operator",[L.UnsupportedOperator]:"Unsupported operator",[L.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[L.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[L.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[L.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[L.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};class H extends Error{constructor(...J){super(...J)}}class g extends H{constructor(J,D){super(o(D)+J.message,{cause:J}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,g),D?.loc&&(this.loc=D.loc)}}class E extends Error{constructor(J,D,h,a){super("Execution error - "+o(h)+(0,k.gx)(p[D],a)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,E),h?.loc&&(this.loc=h.loc)}}function o(K){return K&&K.loc?`Line : ${K.loc.start?.line}, ${K.loc.start?.column}: `:""}class R extends Error{constructor(J,D,h,a){super("Compilation error - "+o(h)+(0,k.gx)(p[D],a)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,R),h?.loc&&(this.loc=h.loc)}}class w extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,w)}}function l(K,J,D){return"esri.arcade.arcadeexecutionerror"===D.declaredRootClass||"esri.arcade.arcadecompilationerror"===D.declaredRootClass?null===D.loc&&J?.loc?new g(D,{cause:D}):D:J?.loc?new g(D,{cause:D}):D}var z;!function(K){K.UnrecognizedUri="UnrecognizedUri",K.UnsupportedUriProtocol="UnsupportedUriProtocol"}(z||(z={}));const T={[z.UnrecognizedUri]:"Unrecognized uri - {uri}",[z.UnsupportedUriProtocol]:"Unrecognized uri protocol"};class $ extends Error{constructor(J,D){super((0,k.gx)(T[J],D)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,$)}}},76961:(Be,pe,_)=>{_.d(pe,{$A:()=>h,Bj:()=>o,EI:()=>s,FJ:()=>X,HD:()=>z,JW:()=>w,J_:()=>K,Lz:()=>I,NP:()=>D,Qk:()=>ce,SV:()=>f,Sh:()=>l,T4:()=>J,US:()=>W,_U:()=>a,dj:()=>R,hd:()=>Y,hj:()=>$,q2:()=>de,tI:()=>U,tt:()=>m,yE:()=>Fe,yJ:()=>V});var o,R,P,k=_(93630),L=_(88781),p=_(81429),H=_(26894),g=_(81247),E=_(25037);function w(P){return g.Z.fromJSON(P.toJSON())}function l(P){return P.toJSON?P.toJSON():P}function z(P){return"string"==typeof P||P instanceof String}function $(P){return"number"==typeof P}function K(P){return P instanceof Date}function J(P){return P instanceof E.ou}function D(P){return P instanceof k.iG}function h(P){return P instanceof L.u}function a(P){return P instanceof p.n}function m(P,oe){return P===oe||!(!K(P)&&!D(P)||!K(oe)&&!D(oe))&&P.getTime()===oe.getTime()}function s(P){if(null==P)return null;if("number"==typeof P)return P;switch(P.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109439;case"kilometers":case"kilometer":case"km":return 109414}return null}function f(P){if(null==P)return null;switch(P.type){case"polygon":case"multipoint":case"polyline":return P.extent;case"point":return new H.Z({xmin:P.x,ymin:P.y,xmax:P.x,ymax:P.y,spatialReference:P.spatialReference});case"extent":return P}return null}function I(P){if(null==P)return null;if("number"==typeof P||"number"==typeof P)return P;switch(P.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9093;case"kilometers":case"kilometer":case"km":return 9036}return null}(P=o||(o={}))[P.Standardised=0]="Standardised",P[P.StandardisedNoInterval=1]="StandardisedNoInterval",P[P.SqlServer=2]="SqlServer",P[P.Oracle=3]="Oracle",P[P.Postgres=4]="Postgres",P[P.PGDB=5]="PGDB",P[P.FILEGDB=6]="FILEGDB",P[P.NotEvaluated=7]="NotEvaluated",function(P){P[P.InFeatureSet=0]="InFeatureSet",P[P.NotInFeatureSet=1]="NotInFeatureSet",P[P.Unknown=2]="Unknown"}(R||(R={}));const U=1e3,ce={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},de={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},Fe={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function W(P){return void 0===P?"":P=(P=(P=P.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function Y(P,oe){oe||(oe={}),"function"==typeof oe&&(oe={cmp:oe});const se="boolean"==typeof oe.cycles&&oe.cycles,Q=oe.cmp&&(Ce=oe.cmp,function(Ge){return function(De,Ze){return Ce({key:De,value:Ge[De]},{key:Ze,value:Ge[Ze]})}});var Ce;const be=[];return function Ge(De){if(De?.toJSON&&"function"==typeof De.toJSON&&(De=De.toJSON()),void 0===De)return;if("number"==typeof De)return isFinite(De)?""+De:"null";if("object"!=typeof De)return JSON.stringify(De);let Ze,ve;if(Array.isArray(De)){for(ve="[",Ze=0;Ze<De.length;Ze++)Ze&&(ve+=","),ve+=Ge(De[Ze])||"null";return ve+"]"}if(null===De)return"null";if(be.includes(De)){if(se)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const st=be.push(De)-1,ke=Object.keys(De).sort(Q?.(De));for(ve="",Ze=0;Ze<ke.length;Ze++){const $e=ke[Ze],Ve=Ge(De[$e]);Ve&&(ve&&(ve+=","),ve+=JSON.stringify($e)+":"+Ve)}return be.splice(st,1),"{"+ve+"}"}(P)}function X(P){switch(P.type){case"catalog":case"feature":case"oriented-imagery":case"subtype-group":return!0;default:return!1}}function V(P){switch(P.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return X(P)}}},29673:(Be,pe,_)=>{_.d(pe,{AW:()=>H,Ay:()=>J,B9:()=>s,ER:()=>Re,Es:()=>M,O7:()=>g,RI:()=>y,ZL:()=>Fe,_R:()=>R,jh:()=>$,nB:()=>G,pl:()=>T,s9:()=>K,ws:()=>I});var k=_(55117),L=_(44107),p=_(26230);function H(W,Y,X){return Math.sqrt((W[0]-Y[0])**2+(W[1]-Y[1])**2+(void 0!==W[2]&&void 0!==Y[2]?(W[2]*X-Y[2]*X)**2:0))}function g(W,Y,X){return(W[0]-Y[0])**2+(W[1]-Y[1])**2+(void 0!==W[2]&&void 0!==Y[2]?(W[2]*X-Y[2]*X)**2:0)}const E=[];for(const W of[[9002,56146130,6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const Y=W[0];for(let X=1;X<W.length;X++)E[W[X]]=Y}const o=[];function R(W){return W.vcsWkid&&void 0!==E[W.vcsWkid]?o[E[W.vcsWkid]]:W.latestVcsWkid&&void 0!==E[W.latestVcsWkid]?o[E[W.latestVcsWkid]]:1}function w(W,Y,X){const V={x:0,y:0};Y&&(V.z=0),X&&(V.m=0);let P=0,oe=W[0];for(let se=0;se<W.length;se++){const Q=W[se];if(!1===ee(Q,oe)){const Ce=T(oe,Q,Y),be=l(oe,Q,Y,X);be.x*=Ce,be.y*=Ce,V.x+=be.x,V.y+=be.y,Y&&(be.z*=Ce,V.z+=be.z),X&&(be.m*=Ce,V.m+=be.m),P+=Ce,oe=Q}}return P>0?(V.x/=P,V.y/=P,Y&&(V.z/=P),X&&(V.m/=P)):(V.x=W[0][0],V.y=W[0][1],Y&&(V.z=W[0][2]),X&&Y?V.m=W[0][3]:X&&(V.m=W[0][2])),V}function l(W,Y,X,V){const P={x:(W[0]+Y[0])/2,y:(W[1]+Y[1])/2};return X&&(P.z=(W[2]+Y[2])/2),X&&V?P.m=(W[3]+Y[3])/2:V&&(P.m=(W[2]+Y[2])/2),P}function z(W,Y){if(W.length<=1)return 0;let X=0;for(let V=1;V<W.length;V++)X+=T(W[V-1],W[V],Y);return X}function T(W,Y,X){const V=Y[0]-W[0],P=Y[1]-W[1];if(X){const oe=Y[2]-Y[2];return Math.sqrt(V*V+P*P+oe*oe)}return Math.sqrt(V*V+P*P)}function $(W,Y,X){const V=Y[0]-W[0],P=Y[1]-W[1];if(X){const oe=Y[2]-Y[2];return V*V+P*P+oe*oe}return V*V+P*P}function ee(W,Y){if(W.length!==Y.length)return!1;for(let X=0;X<W.length;X++)if(W[X]!==Y[X])return!1;return!0}function K(W){const Y={x:0,y:0,spatialReference:W.spatialReference.toJSON()},X={x:0,y:0,spatialReference:W.spatialReference.toJSON()};let V=0,P=0;for(let oe=0;oe<W.paths.length;oe++){if(0===W.paths[oe].length)continue;const se=z(W.paths[oe],!0===W.hasZ);if(0===se){const Q=w(W.paths[oe],!0===W.hasZ,!0===W.hasM);Y.x+=Q.x,Y.y+=Q.y,!0===W.hasZ&&(Y.z+=Q.z),!0===W.hasM&&(Y.m+=Q.m),++V}else{const Q=w(W.paths[oe],!0===W.hasZ,!0===W.hasM);X.x+=Q.x*se,X.y+=Q.y*se,!0===W.hasZ&&(X.z+=Q.z*se),!0===W.hasM&&(X.m+=Q.m*se),P+=se}}return P>0?(X.x/=P,X.y/=P,!0===W.hasZ&&(X.z/=P),!0===W.hasM&&(X.m/=P),new L.Z(X)):V>0?(Y.x/=V,Y.y/=V,!0===W.hasZ&&(X.z/=V),!0===W.hasM&&(Y.m/=V),new L.Z(Y)):null}function J(W){if(0===W.points.length)return null;let Y=0,X=0,V=0,P=0;for(let se=0;se<W.points.length;se++){const Q=W.getPoint(se);!0===Q.hasZ&&(V+=Q.z),!0===Q.hasM&&(P+=Q.m),Y+=Q.x,X+=Q.y,P+=Q.m}const oe={x:Y/W.points.length,y:X/W.points.length,spatialReference:null};return oe.spatialReference=W.spatialReference.toJSON(),!0===W.hasZ&&(oe.z=V/W.points.length),!0===W.hasM&&(oe.m=P/W.points.length),new L.Z(oe)}function a(W,Y,X=0){for(;W<X;)W+=Y;const V=X+Y;for(;W>=V;)W-=Y;return W}function m(W,Y){return Math.atan2(Y.y-W.y,Y.x-W.x)}function y(W,Y){return a(m(W,Y),2*Math.PI)*(180/Math.PI)}function s(W,Y){return a(Math.PI/2-m(W,Y),2*Math.PI)*(180/Math.PI)}function f(W,Y,X){const V={x:W.x-Y.x,y:W.y-Y.y},P={x:X.x-Y.x,y:X.y-Y.y};return Math.atan2(function h(W,Y){return W.x*Y.y-Y.x*W.y}(V,P),function D(W,Y){return W.x*Y.x+W.y*Y.y}(V,P))}function I(W,Y,X){return(0,k.BV)(a(f(W,Y,X),2*Math.PI))}function M(W,Y,X){return(0,k.BV)(a(-1*f(W,Y,X),2*Math.PI))}o[9002]=.3048,o[9003]=.3048006096012192,o[9095]=.3048007491;const U=[0,0];function G(W){for(let Y=0;Y<W.length;Y++){const X=W[Y];for(let P=0;P<X.length-1;P++){const oe=X[P],se=X[P+1];for(let Q=Y+1;Q<W.length;Q++)for(let Ce=0;Ce<W[Q].length-1;Ce++){const be=W[Q][Ce],Ge=W[Q][Ce+1];if((0,p.UT)(oe,se,be,Ge,U)&&!(U[0]===oe[0]&&U[1]===oe[1]||U[0]===be[0]&&U[1]===be[1]||U[0]===se[0]&&U[1]===se[1]||U[0]===Ge[0]&&U[1]===Ge[1]))return!0}}const V=X.length;if(!(V<3))for(let P=0;P<=V-2;P++){const oe=X[P],se=X[P+1];for(let Q=P+2;Q<=V-2;Q++){const Ce=X[Q],be=X[Q+1];if((0,p.UT)(oe,se,Ce,be,U)&&!(U[0]===oe[0]&&U[1]===oe[1]||U[0]===Ce[0]&&U[1]===Ce[1]||U[0]===se[0]&&U[1]===se[1]||U[0]===be[0]&&U[1]===be[1]))return!0}}}return!1}function Fe(W,Y,X){const V=[X[0]-Y[0],X[1]-Y[1],X[2]-Y[2]],P=function te(W,Y,X){return Math.max(Y,Math.min(X,W))}(function ce(W,Y){return W[0]*Y[0]+W[1]*Y[1]+W[2]*Y[2]}(V,[W[0]-Y[0],W[1]-Y[1],W[2]-Y[2]])/function de(W){return W[0]*W[0]+W[1]*W[1]+W[2]*W[2]}(V),0,1);return[Y[0]+(X[0]-Y[0])*P,Y[1]+(X[1]-Y[1])*P,Y[2]+(X[2]-Y[2])*P]}function Re(W,Y,X){let V=0;const P=X[0]-Y[0],oe=X[1]-Y[1],se=P*P+oe*oe;return 0===se?V=.5:(V=((W[0]-Y[0])*P+(W[1]-Y[1])*oe)/se,V<0?V=0:V>1&&(V=1)),V<=.5?[Y[0]+(X[0]-Y[0])*V,Y[1]+(X[1]-Y[1])*V]:[X[0]-(X[0]-Y[0])*(1-V),X[1]-(X[1]-Y[1])*(1-V)]}},26484:(Be,pe,_)=>{_.d(pe,{r:()=>K});var k=_(93630),L=_(53570),p=_(89018),H=_(88781),g=_(81429),E=_(55829),o=_(25037);const l=[0,31,59,90,120,151,181,212,243,273,304,334],z=[0,31,60,91,121,152,182,213,244,274,305,335];function T(J){return null===J?J:!1===J.isValid?null:J}function $(J,D){return""===J||"default"===J.toLowerCase().trim()?(0,p.N)(D):"z"===J||"Z"===J?"UTC":J}function ee(J,D){return(0,p.m)(J)?J.toArcadeDate():(0,p.l)(J,(0,p.N)(D))}function K(J,D){J.today=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,0,0,h,a);const f=new Date;return f.setHours(0,0,0,0),k.iG.dateJSAndZoneToArcadeDate(f,(0,p.N)(h))})},J.time=function(h,a){return D(h,a,(m,y,s)=>{switch((0,p.H)(s,0,4,h,a),s.length){case 0:{const f=k.iG.nowToArcadeDate((0,p.N)(h));return new g.n(f.hour,f.minute,f.second,f.millisecond)}case 1:{if((0,p.n)(s[0]))return s[0].clone();if((0,p.k)(s[0]))return new g.n(s[0].hour,s[0].minute,s[0].second,s[0].millisecond);if((0,p.m)(s[0]))return new g.n(0,0,0,0);if((0,p.c)(s[0]))return g.n.fromString(s[0]);const f=(0,p.g)(s[0]);return!1===isNaN(f)?g.n.fromMilliseconds(f):null}case 2:return(0,p.c)(s[0])&&(0,p.c)(s[1])?g.n.fromString(s[0],s[1]):g.n.fromParts((0,p.g)(s[0]),(0,p.g)(s[1]),0,0);case 3:return g.n.fromParts((0,p.g)(s[0]),(0,p.g)(s[1]),(0,p.g)(s[2]),0);case 4:return g.n.fromParts((0,p.g)(s[0]),(0,p.g)(s[1]),(0,p.g)(s[2]),(0,p.g)(s[3]))}throw new L.aV(h,L.rH.InvalidParameter,a)})},J.dateonly=function(h,a){return D(h,a,(m,y,s)=>{if((0,p.H)(s,0,3,h,a),3===s.length)return H.u.fromParts((0,p.g)(s[0]),(0,p.g)(s[1])+1,(0,p.g)(s[2]));if(2===s.length){const f=(0,p.j)(s[1]);return""===f?null:"X"===f?H.u.fromSeconds((0,p.g)(s[0])):"x"===f?H.u.fromMilliseconds((0,p.g)(s[0])):H.u.fromString((0,p.j)(s[0]),f)}if(1===s.length){if((0,p.c)(s[0])){if(""===s[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(s[0]))return H.u.fromString(s[0]+"-01-01")}if((0,p.m)(s[0]))return s[0].clone();if((0,p.k)(s[0]))return H.u.fromParts(s[0].year,s[0].monthJS+1,s[0].day);const f=(0,p.g)(s[0]);return!1===isNaN(f)?H.u.fromMilliseconds(f):(0,p.c)(s[0])?H.u.fromString(s[0]):null}if(0===s.length){const f=k.iG.nowToArcadeDate((0,p.N)(h));return!1===f.isValid?null:H.u.fromParts(f.year,f.monthJS+1,f.day)}return null})},J.changetimezone=function(h,a){return D(h,a,(m,y,s)=>{if((0,p.H)(s,2,2,h,a),null===s[0])return null;if((0,p.m)(s[0]))throw new L.aV(h,L.rH.CannotChangeTimeZoneDateOnly,a);if((0,p.m)(s[0]))throw new L.aV(h,L.rH.CannotChangeTimeZoneTime,a);const f=(0,p.l)(s[0],(0,p.N)(h));if(null===f)throw new L.aV(h,L.rH.InvalidParameter,a);const I=(0,k.Qn)($((0,p.j)(s[1]),h),!1);if(null===I)return null;const M=k.iG.arcadeDateAndZoneToArcadeDate(f,I);return!1===M.isValid?null:M})},J.timezone=function(h,a){return D(h,a,(m,y,s)=>{if((0,p.H)(s,1,2,h,a),(0,p.n)(s[0])||(0,p.m)(s[0]))return"Unknown";const f=(0,p.l)(s[0],(0,p.N)(h));if(null===f)return null;const I=f.timeZone;return"system"===I?k.iG.systemTimeZoneCanonicalName:"utc"===I.toLowerCase()?"UTC":"unknown"===I.toLowerCase()?"Unknown":I})},J.timezoneoffset=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,1,1,h,a);const f=(0,p.l)(s[0],(0,p.N)(h));return null===f?null:60*f.timeZoneOffset*1e3})},J.now=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,0,0,h,a);const f=k.iG.nowToArcadeDate((0,p.N)(h));return!1===f.isValid?null:f})},J.timestamp=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,0,0,h,a);const f=k.iG.nowUTCToArcadeDate();return!1===f.isValid?null:f})},J.toutc=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,1,1,h,a);const f=(0,p.l)(s[0],(0,p.N)(h));return null===f?null:f.toUTC()})},J.tolocal=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,1,1,h,a);const f=(0,p.l)(s[0],(0,p.N)(h));return null===f?null:f.toLocal()})},J.day=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,1,1,h,a);const f=ee(s[0],(0,p.N)(h));return null===f?NaN:f.day})},J.month=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,1,1,h,a);const f=ee(s[0],(0,p.N)(h));return null===f?NaN:f.monthJS})},J.year=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,1,1,h,a);const f=ee(s[0],(0,p.N)(h));return null===f?NaN:f.year})},J.hour=function(h,a){return D(h,a,(m,y,s)=>{if((0,p.H)(s,1,1,h,a),(0,p.n)(s[0]))return s[0].hour;const f=(0,p.l)(s[0],(0,p.N)(h));return null===f?NaN:f.hour})},J.second=function(h,a){return D(h,a,(m,y,s)=>{if((0,p.H)(s,1,1,h,a),(0,p.n)(s[0]))return s[0].second;const f=(0,p.l)(s[0],(0,p.N)(h));return null===f?NaN:f.second})},J.millisecond=function(h,a){return D(h,a,(m,y,s)=>{if((0,p.H)(s,1,1,h,a),(0,p.n)(s[0]))return s[0].millisecond;const f=(0,p.l)(s[0],(0,p.N)(h));return null===f?NaN:f.millisecond})},J.minute=function(h,a){return D(h,a,(m,y,s)=>{if((0,p.H)(s,1,1,h,a),(0,p.n)(s[0]))return s[0].minute;const f=(0,p.l)(s[0],(0,p.N)(h));return null===f?NaN:f.minute})},J.week=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,1,2,h,a);const f=ee(s[0],(0,p.N)(h));if(null===f)return NaN;const I=(0,p.g)((0,p.K)(s[1],0));if(I<0||I>6)throw new L.aV(h,L.rH.InvalidParameter,a);const te=f.dayOfWeekJS,ce=function R(J,D,h){return J+(function w(J){return J%4==0&&(J%100!=0||J%400==0)}(h)?z:l)[D]}(f.day,f.monthJS,f.year)-1,de=Math.floor(ce/7);return te-I+(te-I<0?7:0)<ce-7*de?de+1:de})},J.weekday=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,1,1,h,a);const f=ee(s[0],(0,p.N)(h));return null===f?NaN:f.dayOfWeekJS})},J.isoweekday=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,1,1,h,a);const f=ee(s[0],(0,p.N)(h));return null===f?NaN:f.dayOfWeekISO})},J.isomonth=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,1,1,h,a);const f=ee(s[0],(0,p.N)(h));return null===f?NaN:f.monthISO})},J.isoweek=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,1,1,h,a);const f=ee(s[0],(0,p.N)(h));return null===f?NaN:f.weekISO})},J.isoyear=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,1,1,h,a);const f=ee(s[0],(0,p.N)(h));return null===f?NaN:f.yearISO})},J.date=function(h,a){return D(h,a,(m,y,s)=>{if((0,p.H)(s,0,8,h,a),3===s.length){if((0,p.m)(s[0])&&(0,p.n)(s[1])&&(0,p.c)(s[2])){const f=(0,k.Qn)($((0,p.j)(s[2])??"unknown",h),!1);return null===f?null:T(k.iG.fromParts(s[0].year,s[0].month,s[0].day,s[1].hour,s[1].minute,s[1].second,s[1].millisecond,f))}return T(k.iG.fromParts((0,p.g)(s[0]),(0,p.g)(s[1])+1,(0,p.g)(s[2]),0,0,0,0,(0,p.N)(h)))}if(4===s.length)return T(k.iG.fromParts((0,p.g)(s[0]),(0,p.g)(s[1])+1,(0,p.g)(s[2]),(0,p.g)(s[3]),0,0,0,(0,p.N)(h)));if(5===s.length)return T(k.iG.fromParts((0,p.g)(s[0]),(0,p.g)(s[1])+1,(0,p.g)(s[2]),(0,p.g)(s[3]),(0,p.g)(s[4]),0,0,(0,p.N)(h)));if(6===s.length)return T(k.iG.fromParts((0,p.g)(s[0]),(0,p.g)(s[1])+1,(0,p.g)(s[2]),(0,p.g)(s[3]),(0,p.g)(s[4]),(0,p.g)(s[5]),0,(0,p.N)(h)));if(7===s.length)return T(k.iG.fromParts((0,p.g)(s[0]),(0,p.g)(s[1])+1,(0,p.g)(s[2]),(0,p.g)(s[3]),(0,p.g)(s[4]),(0,p.g)(s[5]),(0,p.g)(s[6]),(0,p.N)(h)));if(8===s.length){const f=(0,k.Qn)($((0,p.j)(s[7])??"unknown",h),!1);return null===f?null:T(k.iG.fromParts((0,p.g)(s[0]),(0,p.g)(s[1])+1,(0,p.g)(s[2]),(0,p.g)(s[3]),(0,p.g)(s[4]),(0,p.g)(s[5]),(0,p.g)(s[6]),f))}if(2===s.length){if((0,p.m)(s[0])&&(0,p.c)(s[1])){const M=(0,k.Qn)($((0,p.j)(s[1])??"unknown",h),!1);return null===M?null:T(k.iG.fromParts(s[0].year,s[0].month,s[0].day,0,0,0,0,M))}if((0,p.m)(s[0])&&(0,p.n)(s[1]))return T(k.iG.fromParts(s[0].year,s[0].month,s[0].day,s[1].hour,s[1].minute,s[1].second,s[1].millisecond,"unknown"));let f,I=(0,p.j)(s[1]);return""===I?null:(I=(0,p.Q)(I,!0),f="X"===I?o.ou.fromSeconds((0,p.g)(s[0])):"x"===I?o.ou.fromMillis((0,p.g)(s[0])):o.ou.fromFormat((0,p.j)(s[0]),I,{locale:(0,E.Kd)(),numberingSystem:"latn"}),f.isValid?k.iG.dateTimeToArcadeDate(f):null)}if(1===s.length){if((0,p.m)(s[0]))return T(k.iG.fromParts(s[0].year,s[0].month,s[0].day,0,0,0,0,"unknown"));if((0,p.c)(s[0])){if(""===s[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(s[0]))return(0,p.l)(s[0]+"-01-01",(0,p.N)(h))}const f=(0,p.g)(s[0]);if(!1===isNaN(f)){const I=o.ou.fromMillis(f);return I.isValid?k.iG.dateTimeAndZoneToArcadeDate(I,(0,p.N)(h)):null}return(0,p.l)(s[0],(0,p.N)(h))}return 0===s.length?k.iG.nowToArcadeDate((0,p.N)(h)):null})},J.datediff=function(h,a){return D(h,a,(m,y,s)=>{if((0,p.H)(s,2,4,h,a),(0,p.n)(s[0]))return(0,p.n)(s[1])?s[0].difference(s[1],(0,p.j)(s[2])):NaN;if((0,p.n)(s[1]))return NaN;if((0,p.m)(s[0]))return(0,p.m)(s[1])?s[0].difference(s[1],(0,p.j)(s[2])):NaN;if((0,p.m)(s[1]))return NaN;let f=(0,p.l)(s[0],(0,p.N)(h)),I=(0,p.l)(s[1],(0,p.N)(h));if(null===f||null===I)return NaN;let M=(0,p.K)(s[3],"");switch(""!==M&&null!==M?(M=$((0,p.j)(M),h),f=k.iG.arcadeDateAndZoneToArcadeDate(f,M),I=k.iG.arcadeDateAndZoneToArcadeDate(I,M)):f.timeZone!==I.timeZone&&(f.isUnknownTimeZone?f=k.iG.arcadeDateAndZoneToArcadeDate(f,I.timeZone):I=k.iG.arcadeDateAndZoneToArcadeDate(I,f.timeZone)),(0,p.j)(s[2]).toLowerCase()){case"days":case"day":case"d":return f.diff(I,"days");case"months":case"month":return f.diff(I,"months");case"minutes":case"minute":case"m":return f.diff(I,"M"===s[2]?"months":"minutes");case"seconds":case"second":case"s":return f.diff(I,"seconds");case"milliseconds":case"millisecond":case"ms":default:return f.diff(I);case"hours":case"hour":case"h":return f.diff(I,"hours");case"years":case"year":case"y":return f.diff(I,"years")}})},J.dateadd=function(h,a){return D(h,a,(m,y,s)=>{(0,p.H)(s,2,3,h,a);let f=(0,p.g)(s[1]);if(isNaN(f)||f===1/0||f===-1/0)return(0,p.n)(s[0])||(0,p.m)(s[0])?s[0].clone():(0,p.l)(s[0],(0,p.N)(h));let I="milliseconds";switch((0,p.j)(s[2]).toLowerCase()){case"days":case"day":case"d":I="days",f=(0,p.m)(s[0])?f:(0,p.R)(f);break;case"months":case"month":I="months",f=(0,p.m)(s[0])?f:(0,p.R)(f);break;case"minutes":case"minute":case"m":I="M"===s[2]?"months":"minutes";break;case"seconds":case"second":case"s":I="seconds";break;case"milliseconds":case"millisecond":case"ms":I="milliseconds";break;case"hours":case"hour":case"h":I="hours";break;case"years":case"year":case"y":I="years"}if((0,p.n)(s[0])||(0,p.m)(s[0]))return s[0].plus(I,f);const M=(0,p.l)(s[0],(0,p.N)(h));return null===M?null:M.plus({[I]:f})})}}},10115:(Be,pe,_)=>{_.d(pe,{t:()=>o});var k=_(89018);function L(R){let w=0;for(let l=0;l<R.length;l++)w+=R[l];return w/R.length}function p(R){const w=L(R);let l=0;for(let z=0;z<R.length;z++)l+=(w-R[z])**2;return l/R.length}function o(R,w,l=1e3){switch(R.toLowerCase()){case"distinct":return function g(R,w){const l=[],z={},T=[];for(let $=0;$<R.length;$++){if(null!=R[$]&&R[$]!==k.B){const ee=R[$];if((0,k.b)(ee)||(0,k.c)(ee))void 0===z[ee]&&(l.push(ee),z[ee]=1);else{let K=!1;for(let J=0;J<T.length;J++)!0===(0,k.F)(T[J],ee)&&(K=!0);!1===K&&(T.push(ee),l.push(ee))}}if(l.length>=w&&-1!==w)return l}return l}(w,l);case"avg":case"mean":return L((0,k._)(w));case"min":return Math.min.apply(Math,(0,k._)(w));case"sum":return function H(R){let w=0;for(let l=0;l<R.length;l++)w+=R[l];return w}((0,k._)(w));case"max":return Math.max.apply(Math,(0,k._)(w));case"stdev":case"stddev":return Math.sqrt(p((0,k._)(w)));case"var":case"variance":return p((0,k._)(w));case"count":return w.length}return 0}},96479:(Be,pe,_)=>{_.d(pe,{r:()=>J});var k=_(33692),L=_(70430),p=_(53570),H=_(860),g=_(85833),E=_(89018),o=_(29673),R=_(26894),w=_(32184),l=_(12628),z=_(44107),T=_(5391),$=_(64222),ee=_(54746),K=_(40637);function J(D,h){D.ringisclockwise=function(a,m){return h(a,m,(y,s,f)=>{(0,E.H)(f,1,1,a,m);let I=[];if(null===f[0])return!1;if((0,E.o)(f[0]))for(const M of f[0]){if(!(M instanceof z.Z))throw new p.aV(a,p.rH.InvalidParameter,m);I.push(M.hasZ?M.hasM?[M.x,M.y,M.z,M.m]:[M.x,M.y,M.z]:[M.x,M.y])}else if(f[0]instanceof g.Z)I=f[0]._elements;else{if(!(0,E.q)(f[0]))throw new p.aV(a,p.rH.InvalidParameter,m);for(const M of f[0].toArray()){if(!(M instanceof z.Z))throw new p.aV(a,p.rH.InvalidParameter,m);I.push(M.hasZ?M.hasM?[M.x,M.y,M.z,M.m]:[M.x,M.y,M.z]:[M.x,M.y])}}return!(I.length<3)&&(0,ee.bu)(I)})},D.polygon=function(a,m){return h(a,m,(y,s,f)=>{let I;if((0,E.H)(f,1,1,a,m),f[0]instanceof L.Z){const M=(0,E.x)(H.Z.parseGeometryFromDictionary(f[0],a.spatialReference),a.spatialReference);if(!(M instanceof T.Z))throw new p.aV(a,p.rH.InvalidParameter,m);I=M}else if(f[0]instanceof T.Z)I=(0,K.im)(f[0].toJSON());else{const M=JSON.parse(f[0]);M&&!M.spatialReference&&(M.spatialReference=a.spatialReference),I=(0,E.x)(new T.Z(M),a.spatialReference)}if(null!==I&&!1===I.spatialReference.equals(a.spatialReference))throw new p.aV(a,p.rH.WrongSpatialReference,m);return(0,E.S)(I)})},D.polyline=function(a,m){return h(a,m,(y,s,f)=>{let I;if((0,E.H)(f,1,1,a,m),f[0]instanceof L.Z){const M=(0,E.x)(H.Z.parseGeometryFromDictionary(f[0],a.spatialReference),a.spatialReference);if(!(M instanceof $.Z))throw new p.aV(a,p.rH.InvalidParameter,m);I=M}else if(f[0]instanceof $.Z)I=(0,K.im)(f[0].toJSON());else{const M=JSON.parse(f[0]);M&&!M.spatialReference&&(M.spatialReference=a.spatialReference),I=(0,E.x)(new $.Z(M),a.spatialReference)}if(null!==I&&!1===I.spatialReference.equals(a.spatialReference))throw new p.aV(a,p.rH.WrongSpatialReference,m);return(0,E.S)(I)})},D.point=function(a,m){return h(a,m,(y,s,f)=>{let I;if((0,E.H)(f,1,1,a,m),f[0]instanceof L.Z){const M=(0,E.x)(H.Z.parseGeometryFromDictionary(f[0],a.spatialReference),a.spatialReference);if(!(M instanceof z.Z))throw new p.aV(a,p.rH.InvalidParameter,m);I=M}else if(f[0]instanceof z.Z)I=(0,K.im)(f[0].toJSON());else{const M=JSON.parse(f[0]);M&&!M.spatialReference&&(M.spatialReference=a.spatialReference),I=(0,E.x)(new z.Z(M),a.spatialReference)}if(null!==I&&!1===I.spatialReference.equals(a.spatialReference))throw new p.aV(a,p.rH.WrongSpatialReference,m);return(0,E.S)(I)})},D.multipoint=function(a,m){return h(a,m,(y,s,f)=>{let I;if((0,E.H)(f,1,1,a,m),f[0]instanceof L.Z){const M=(0,E.x)(H.Z.parseGeometryFromDictionary(f[0],a.spatialReference),a.spatialReference);if(!(M instanceof l.Z))throw new p.aV(a,p.rH.InvalidParameter,m);I=M}else if(f[0]instanceof l.Z)I=(0,K.im)(f[0].toJSON());else{const M=JSON.parse(f[0]);M&&!M.spatialReference&&(M.spatialReference=a.spatialReference),I=(0,E.x)(new l.Z(M),a.spatialReference)}if(null!==I&&!1===I.spatialReference.equals(a.spatialReference))throw new p.aV(a,p.rH.WrongSpatialReference,m);return(0,E.S)(I)})},D.extent=function(a,m){return h(a,m,(y,s,f)=>{f=(0,E.I)(f),(0,E.H)(f,1,1,a,m);let I=null;if(f[0]instanceof L.Z)I=(0,E.x)(H.Z.parseGeometryFromDictionary(f[0],a.spatialReference),a.spatialReference);else if(f[0]instanceof z.Z){const M={xmin:f[0].x,ymin:f[0].y,xmax:f[0].x,ymax:f[0].y,spatialReference:f[0].spatialReference.toJSON()},U=f[0];U.hasZ?(M.zmin=U.z,M.zmax=U.z):U.hasM&&(M.mmin=U.m,M.mmax=U.m),I=(0,K.im)(M)}else if(f[0]instanceof T.Z)I=(0,K.im)(f[0].extent?.toJSON());else if(f[0]instanceof $.Z)I=(0,K.im)(f[0].extent?.toJSON());else if(f[0]instanceof l.Z)I=(0,K.im)(f[0].extent?.toJSON());else if(f[0]instanceof R.Z)I=(0,K.im)(f[0].toJSON());else{const M=JSON.parse(f[0]);M&&!M.spatialReference&&(M.spatialReference=a.spatialReference),I=(0,E.x)(new R.Z(M),a.spatialReference)}if(null!==I&&!1===I.spatialReference.equals(a.spatialReference))throw new p.aV(a,p.rH.WrongSpatialReference,m);return(0,E.S)(I)})},D.geometry=function(a,m){return h(a,m,(y,s,f)=>{(0,E.H)(f,1,1,a,m);let I=null;if(null===f[0])return null;if((0,E.r)(f[0]))I=(0,E.x)(f[0].geometry(),a.spatialReference);else if(f[0]instanceof L.Z)I=(0,E.x)(H.Z.parseGeometryFromDictionary(f[0],a.spatialReference),a.spatialReference);else{const M=JSON.parse(f[0]);M&&!M.spatialReference&&(M.spatialReference=a.spatialReference),I=(0,E.x)((0,K.im)(M),a.spatialReference)}if(null!==I&&!1===I.spatialReference.equals(a.spatialReference))throw new p.aV(a,p.rH.WrongSpatialReference,m);return(0,E.S)(I)})},D.setgeometry=function(a,m){return h(a,m,(y,s,f)=>{if((0,E.H)(f,2,2,a,m),!(0,E.r)(f[0]))throw new p.aV(a,p.rH.InvalidParameter,m);if(!0===f[0].immutable)throw new p.aV(a,p.rH.Immutable,m);if(!(f[1]instanceof w.Z||null===f[1]))throw new p.aV(a,p.rH.InvalidParameter,m);return f[0]._geometry=f[1],E.B})},D.feature=function(a,m){return h(a,m,(y,s,f)=>{if(0===f.length)throw new p.aV(a,p.rH.WrongNumberOfParameters,m);let I;if(1===f.length)if((0,E.c)(f[0]))I=H.Z.fromJson(JSON.parse(f[0]),a.timeZone);else if((0,E.r)(f[0]))I=H.Z.createFromArcadeFeature(f[0]);else if(f[0]instanceof w.Z)I=H.Z.createFromGraphicLikeObject(f[0],null,null,a.timeZone);else{if(!(f[0]instanceof L.Z))throw new p.aV(a,p.rH.InvalidParameter,m);{let M=f[0].hasField("geometry")?f[0].field("geometry"):null,U=f[0].hasField("attributes")?f[0].field("attributes"):null;null!==M&&M instanceof L.Z&&(M=H.Z.parseGeometryFromDictionary(M,a.spatialReference)),null!==U&&(U=H.Z.parseAttributesFromDictionary(U)),I=H.Z.createFromGraphicLikeObject(M,U,null,a.timeZone)}}else if(2===f.length){let M=null,U=null;if(null!==f[0])if(f[0]instanceof w.Z)M=f[0];else{if(!(M instanceof L.Z))throw new p.aV(a,p.rH.InvalidParameter,m);M=H.Z.parseGeometryFromDictionary(f[0],a.spatialReference)}if(null!==f[1]){if(!(f[1]instanceof L.Z))throw new p.aV(a,p.rH.InvalidParameter,m);U=H.Z.parseAttributesFromDictionary(f[1])}I=H.Z.createFromGraphicLikeObject(M,U,null,a.timeZone)}else{let M=null;const U={};if(null!==f[0])if(f[0]instanceof w.Z)M=f[0];else{if(!(M instanceof L.Z))throw new p.aV(a,p.rH.InvalidParameter,m);M=H.Z.parseGeometryFromDictionary(f[0],a.spatialReference)}for(let G=1;G<f.length;G+=2){const te=(0,E.j)(f[G]),ce=f[G+1];if(!(null==ce||(0,E.c)(ce)||isNaN(ce)||(0,E.k)(ce)||(0,E.b)(ce)||(0,E.n)(ce)||(0,E.m)(ce)||(0,E.a)(ce)))throw new p.aV(a,p.rH.InvalidParameter,m);if((0,E.i)(ce)||!1===(0,E.f)(ce))throw new p.aV(a,p.rH.InvalidParameter,m);U[te]=ce===E.B?null:ce}I=H.Z.createFromGraphicLikeObject(M,U,null,a.timeZone)}return I._geometry=(0,E.x)(I.geometry(),a.spatialReference),I.immutable=!1,I})},D.dictionary=function(a,m){return h(a,m,(y,s,f)=>{if(0===f.length||1===f.length&&null===f[0]){const U=new L.Z;return U.immutable=!1,U}if(1===f.length&&(0,E.c)(f[0]))try{const U=JSON.parse(f[0]),G=L.Z.convertObjectToArcadeDictionary(U,(0,E.N)(a),!1);return G.immutable=!1,G}catch{throw new p.aV(a,p.rH.InvalidParameter,m)}if(1===f.length&&f[0]instanceof w.Z)try{const U=f[0].toJSON();U.hasZ=!0===f[0].hasZ,U.hasM=!0===f[0].hasM;const G=L.Z.convertObjectToArcadeDictionary(U,(0,E.N)(a),!1);return G.immutable=!1,G}catch{throw new p.aV(a,p.rH.InvalidParameter,m)}if(1===f.length&&(0,E.r)(f[0]))try{const U=new L.Z;U.immutable=!1,U.setField("geometry",f[0].geometry());const G=new L.Z;G.immutable=!1,U.setField("attributes",G);for(const te of f[0].keys())G.setField(te,f[0].field(te));return U}catch{throw new p.aV(a,p.rH.InvalidParameter,m)}if(1===f.length&&f[0]instanceof L.Z)try{const U=new L.Z;U.immutable=!1;for(const G of f[0].keys())U.setField(G,f[0].field(G));return U}catch{throw new p.aV(a,p.rH.InvalidParameter,m)}if(2===f.length&&f[0]instanceof L.Z&&(0,E.a)(f[1]))try{if(!0!==f[1]){const U=new L.Z;U.immutable=!1;for(const G of f[0].keys())U.setField(G,f[0].field(G));return U}return f[0].deepClone()}catch{throw new p.aV(a,p.rH.InvalidParameter,m)}if(f.length%2!=0)throw new p.aV(a,p.rH.WrongNumberOfParameters,m);const I={};for(let U=0;U<f.length;U+=2){const G=(0,E.j)(f[U]),te=f[U+1];if(!(null==te||(0,E.c)(te)||isNaN(te)||(0,E.k)(te)||(0,E.b)(te)||(0,E.a)(te)||(0,E.m)(te)||(0,E.n)(te)||(0,E.o)(te)||(0,E.q)(te)))throw new p.aV(a,p.rH.InvalidParameter,m);if((0,E.i)(te))throw new p.aV(a,p.rH.InvalidParameter,m);I[G]=te===E.B?null:te}const M=new L.Z(I);return M.immutable=!1,M})},D.haskey=function(a,m){return h(a,m,(y,s,f)=>{(0,E.H)(f,2,2,a,m);const I=(0,E.j)(f[1]);if((0,E.r)(f[0])||f[0]instanceof L.Z)return f[0].hasField(I);if(f[0]instanceof w.Z){const M=(0,k.Z)(f[0],I,null,null,2);return!M||"notfound"!==M.keystate}throw new p.aV(a,p.rH.InvalidParameter,m)})},D.hasvalue=function(a,m){return h(a,m,(y,s,f)=>((0,E.H)(f,2,2,a,m),null!=(0,k.u)(f[0],f[1])))},D.indexof=function(a,m){return h(a,m,(y,s,f)=>{(0,E.H)(f,2,2,a,m);const I=f[1];if((0,E.o)(f[0])){for(let M=0;M<f[0].length;M++)if((0,E.F)(I,f[0][M]))return M;return-1}if((0,E.q)(f[0])){const M=f[0].length();for(let U=0;U<M;U++)if((0,E.F)(I,f[0].get(U)))return U;return-1}throw new p.aV(a,p.rH.InvalidParameter,m)})},D.angle=function(a,m){return h(a,m,(y,s,f)=>{if(f=(0,E.I)(f),(0,E.H)(f,2,3,a,m),!(f[0]instanceof z.Z))throw new p.aV(a,p.rH.InvalidParameter,m);if(!(f[1]instanceof z.Z))throw new p.aV(a,p.rH.InvalidParameter,m);if(f.length>2&&!(f[2]instanceof z.Z))throw new p.aV(a,p.rH.InvalidParameter,m);return 2===f.length?(0,o.RI)(f[0],f[1]):(0,o.ws)(f[0],f[1],f[2])})},D.bearing=function(a,m){return h(a,m,(y,s,f)=>{if(f=(0,E.I)(f),(0,E.H)(f,2,3,a,m),!(f[0]instanceof z.Z))throw new p.aV(a,p.rH.InvalidParameter,m);if(!(f[1]instanceof z.Z))throw new p.aV(a,p.rH.InvalidParameter,m);if(f.length>2&&!(f[2]instanceof z.Z))throw new p.aV(a,p.rH.InvalidParameter,m);return 2===f.length?(0,o.B9)(f[0],f[1]):(0,o.Es)(f[0],f[1],f[2])})},D.isselfintersecting=function(a,m){return h(a,m,(y,s,f)=>{f=(0,E.I)(f),(0,E.H)(f,1,1,a,m);let I=f[0];if(I instanceof T.Z)return I.isSelfIntersecting;if(I instanceof $.Z)return(0,o.nB)(I.paths);if(I instanceof l.Z){const M=I.points;for(let U=0;U<M.length;U++)for(let G=0;G<M.length;G++)if(G!==U){let te=!0;for(let ce=0;ce<M[U].length;ce++)if(M[U][ce]!==M[G][ce]){te=!1;break}if(!0===te)return!0}}if((0,E.o)(I)||(0,E.q)(I)){const M=(0,E.L)(I,a.spatialReference);return null!==M&&(I=M.paths),(0,o.nB)(I)}return!1})}}},89325:(Be,pe,_)=>{_.d(pe,{r:()=>H});var k=_(89018),L=_(51937);function p(g,E,o){if(void 0===o||0==+o)return Math[g](E);if(E=+E,o=+o,isNaN(E)||"number"!=typeof o||o%1!=0)return NaN;let R=E.toString().split("e");return R=(E=Math[g](+(R[0]+"e"+(R[1]?+R[1]-o:-o)))).toString().split("e"),+(R[0]+"e"+(R[1]?+R[1]+o:o))}function H(g,E){function o(R,w,l){const z=(0,k.g)(R);return isNaN(z)?z:isNaN(w)||isNaN(l)||w>l?NaN:z<w?w:z>l?l:z}g.number=function(R,w){return E(R,w,(l,z,T)=>{(0,k.H)(T,1,2,R,w);const $=T[0];if((0,k.b)($))return $;if(null===$)return 0;if((0,k.k)($)||(0,k.n)($)||(0,k.m)($))return $.toNumber();if((0,k.a)($))return Number($);if((0,k.o)($))return NaN;if(""===$||void 0===$)return Number($);if((0,k.c)($)){if(void 0!==T[1]){let ee=(0,k.T)(T[1],"\u2030","");return ee=(0,k.T)(ee,"\xa4",""),(0,L.Qc)($,{pattern:ee})}return Number($.trim())}return Number($)})},g.abs=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),Math.abs((0,k.g)(T[0]))))},g.acos=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),Math.acos((0,k.g)(T[0]))))},g.asin=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),Math.asin((0,k.g)(T[0]))))},g.atan=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),Math.atan((0,k.g)(T[0]))))},g.atan2=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,2,2,R,w),Math.atan2((0,k.g)(T[0]),(0,k.g)(T[1]))))},g.ceil=function(R,w){return E(R,w,(l,z,T)=>{if((0,k.H)(T,1,2,R,w),2===T.length){let $=(0,k.g)(T[1]);return isNaN($)&&($=0),p("ceil",(0,k.g)(T[0]),-1*$)}return Math.ceil((0,k.g)(T[0]))})},g.round=function(R,w){return E(R,w,(l,z,T)=>{if((0,k.H)(T,1,2,R,w),2===T.length){let $=(0,k.g)(T[1]);return isNaN($)&&($=0),p("round",(0,k.g)(T[0]),-1*$)}return Math.round((0,k.g)(T[0]))})},g.floor=function(R,w){return E(R,w,(l,z,T)=>{if((0,k.H)(T,1,2,R,w),2===T.length){let $=(0,k.g)(T[1]);return isNaN($)&&($=0),p("floor",(0,k.g)(T[0]),-1*$)}return Math.floor((0,k.g)(T[0]))})},g.cos=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),Math.cos((0,k.g)(T[0]))))},g.isnan=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),"number"==typeof T[0]&&isNaN(T[0])))},g.exp=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),Math.exp((0,k.g)(T[0]))))},g.log=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),Math.log((0,k.g)(T[0]))))},g.pow=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,2,2,R,w),(0,k.g)(T[0])**(0,k.g)(T[1])))},g.random=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,0,0,R,w),Math.random()))},g.sin=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),Math.sin((0,k.g)(T[0]))))},g.sqrt=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),Math.sqrt((0,k.g)(T[0]))))},g.tan=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),Math.tan((0,k.g)(T[0]))))},g.isempty=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),null===T[0]||""===T[0]||void 0===T[0]||T[0]===k.B))},g.boolean=function(R,w){return E(R,w,(l,z,T)=>((0,k.H)(T,1,1,R,w),(0,k.h)(T[0])))},g.constrain=function(R,w){return E(R,w,(l,z,T)=>{(0,k.H)(T,3,3,R,w);const $=(0,k.g)(T[1]),ee=(0,k.g)(T[2]);if((0,k.o)(T[0])){const K=[];for(const J of T[0])K.push(o(J,$,ee));return K}if((0,k.q)(T[0])){const K=[];for(let J=0;J<T[0].length();J++)K.push(o(T[0].get(J),$,ee));return K}return o(T[0],$,ee)})}}},93530:(Be,pe,_)=>{_.d(pe,{Tv:()=>z,qt:()=>T,zq:()=>J});var k=_(29673),L=_(49602),p=_(44107),H=_(5391);function g(D,h,a){const m=h[0]-D[0],y=h[1]-D[1];return Math.sqrt(m*m+y*y)}function R(D,h,a,m){const y=function o(D){const h=function E(D){return Math.sqrt(D[0]*D[0]+D[1]*D[1]+D[2]*D[2])}(D);return[D[0]/h,D[1]/h,D[2]/h]}([h[0]-D[0],h[1]-D[1],h[2]*m-D[2]*m]);return[D[0]+y[0]*a,D[1]+y[1]*a,D[2]+y[2]*a]}function w(D,h,a,m){return D+(h-D)/a*m}function l(D,h,a){let m=h[0]-D[0],y=h[1]-D[1];const s=Math.sqrt(m*m+y*y);return m/=s,y/=s,m*=a,y*=a,[D[0]+m,D[1]+y]}function z(D,h){if(!D)return null;switch(D.type){case"extent":case"multipoint":case"mesh":case"point":return null}const a="polygon"===D.type?D.rings:D.paths;let m=1;if((D.spatialReference.vcsWkid||D.spatialReference.latestVcsWkid)&&(m=(0,k._R)(D.spatialReference)/(0,L.c9)(D.spatialReference)),0===a.length||0===a[0].length||!1===D.hasM)return null;let y=-1,s=0;const f=D.hasZ?k.AW:g,I=D.hasZ?3:2;for(const U of a){if(y++,U.length>0&&U[0][I]===h)return{partId:y,distanceAlong:s,coordinate:new p.Z({hasZ:D.hasZ,hasM:D.hasM,spatialReference:D.spatialReference,x:U[0][0],y:U[0][1],...D.hasZ?{z:U[0][2]}:{},...D.hasM?{m:U[0][I]}:{}}),segmentId:0};let G=-1;for(let te=1;te<U.length;te++){const ce=f(U[te-1],U[te],m);G++;const de=U[te][I]-U[te-1][I],Fe=U[te][I];if(Fe===h)return{partId:y,distanceAlong:ce+s,coordinate:new p.Z({hasZ:D.hasZ,hasM:D.hasM,spatialReference:D.spatialReference,x:U[te][0],y:U[te][1],...D.hasZ?{z:U[te][2]}:{},...D.hasM?{m:U[te][I]}:{}}),segmentId:G};if(Fe>h&&h>U[te-1][I]){const Re=(h-U[te-1][I])/de*ce;let W=D.hasZ?R(U[te-1],U[te],Re,m):l(U[te-1],U[te],Re);W=[...W,h];const Y=new p.Z({hasZ:D.hasZ,hasM:D.hasM,spatialReference:D.spatialReference,x:W[0],y:W[1],...D.hasZ?{z:W[2]}:{},...D.hasM?{m:W[I]}:{}});return{partId:y,distanceAlong:s+f(U[te-1],[Y.x,Y.y,...Y.hasZ?[Y.z]:[],...Y.hasM?[Y.m]:[]],m),coordinate:Y,segmentId:G}}s+=ce}}return null}function T(D,h){if(!D)return null;switch(D.type){case"extent":case"multipoint":case"mesh":case"point":return null}const a="polygon"===D.type?D.rings:D.paths;if(h<0)return null;let m=1;(D.spatialReference.vcsWkid||D.spatialReference.latestVcsWkid)&&(m=(0,k._R)(D.spatialReference)/(0,L.c9)(D.spatialReference));let y=0;const s=D.hasZ?3:2,I=D.hasZ?k.AW:g;let M=-1;if(0===h)return 0===a.length||0===a[0].length?null:{partId:0,coordinate:new p.Z({hasZ:D.hasZ,hasM:D.hasM,spatialReference:D.spatialReference,x:a[0][0][0],y:a[0][0][1],...D.hasZ?{z:a[0][0][2]}:{},...D.hasM?{m:a[0][0][s]}:{}}),segmentId:0};for(const U of a){M++;let G=-1;for(let te=1;te<U.length;te++){G++;const ce=I(U[te-1],U[te],m),de=y+ce;if(de===h)return{partId:M,coordinate:new p.Z({hasZ:D.hasZ,hasM:D.hasM,spatialReference:D.spatialReference,x:U[te][0],y:U[te][1],...D.hasZ?{z:U[te][2]}:{},...D.hasM?{m:U[te][s]}:{}}),segmentId:G};if(de>h){let Fe=D.hasZ?R(U[te-1],U[te],h-y,m):l(U[te-1],U[te],h-y);return Fe=[...Fe,w(U[te-1][s],U[te][s],ce,h-y)],{partId:M,coordinate:new p.Z({hasZ:D.hasZ,hasM:D.hasM,spatialReference:D.spatialReference,x:Fe[0],y:Fe[1],...D.hasZ?{z:Fe[2]}:{},...D.hasM?{m:Fe[s]}:{}}),segmentId:G}}y=de}}return null}function J(D,h){if(!D||!h)return null;switch("extent"===D.type&&(D=new H.Z({spatialReference:D.spatialReference,rings:[[[D.xmin,D.ymin],[D.xmin,D.ymax],[D.xmax,D.ymax],[D.xmax,D.ymin],[D.xmin,D.ymin]]]})),D.type){case"point":return function $(D,h){if(!D||!h)return null;let a=1;(h.spatialReference.vcsWkid||h.spatialReference.latestVcsWkid)&&(a=(0,k._R)(h.spatialReference)/(0,L.c9)(h.spatialReference));let m=null,y=0;return m=D,y=D.hasZ&&h.hasZ?(0,k.AW)([h.x,h.y,h.z],[D.x,D.y,D.z],a):(0,k.pl)([h.x,h.y],[D.x,D.y],!1),{coordinate:m,distance:y}}(D,h)??null;case"multipoint":return function ee(D,h){if(!D||!h)return null;let a=1;(h.spatialReference.vcsWkid||h.spatialReference.latestVcsWkid)&&(a=(0,k._R)(h.spatialReference)/(0,L.c9)(h.spatialReference));let m=null,y=0,s=Number.MAX_VALUE,f=-1,I=-1;for(const M of D.points||[]){I++;const U=D.hasZ&&h.hasZ?(0,k.O7)([M[0],M[1],M[2]],[h.x,h.y,h.z],a):(0,k.jh)([M[0],M[1]],[h.x,h.y],!1);U<s&&(s=U,f=I)}return f<0?null:(y=s,m=D.getPoint(f),{coordinate:m,distance:Math.sqrt(y)})}(D,h)??null;case"polygon":case"polyline":return function K(D,h){if(!D||!h)return null;const a="polygon"===D.type?D.rings:D.paths;let m=1;(h.spatialReference.vcsWkid||h.spatialReference.latestVcsWkid)&&(m=(0,k._R)(h.spatialReference)/(0,L.c9)(h.spatialReference));let y=Number.MAX_VALUE,s=-1,f=-1,I=-1;const M=D.hasZ&&h.hasZ;let U=null;const G=M?[h.x,h.y,h.z]:[h.x,h.y];for(const V of a){f++;for(let P=1;P<V.length;P++){const oe=M?(0,k.ZL)(G,V[P-1],V[P]):(0,k.ER)(G,V[P-1],V[P]),se=M?(0,k.O7)(oe,G,m):(0,k.jh)(oe,G,!1);se<y&&(y=se,U=oe,I=f,s=P-1)}}if(s<0)return null;const te=D.hasM&&D.hasZ?3:2,de=a[I][s],Fe=a[I][s+1];let Re=null,W=null,Y=M?U[2]:null;D.hasM&&(W=w(de[te],Fe[te],M?(0,k.AW)(de,Fe,m):(0,k.pl)(de,Fe,!1),M?(0,k.AW)(de,U,m):(0,k.pl)(de,U,!1))),D.hasZ&&!1===h.hasZ&&(Y=w(de[2],Fe[2],M?(0,k.AW)(de,Fe,m):(0,k.pl)(de,Fe,!1),M?(0,k.AW)(de,U,m):(0,k.pl)(de,U,!1))),Re=new p.Z({hasZ:M,hasM:D.hasM,spatialReference:h.spatialReference,x:U[0],y:U[1],...D.hasZ?{z:Y}:{},...D.hasM?{m:W}:{}});let X=0;for(let V=0;V<=I;V++){const P=a[V],oe=V===I?s:P.length-1;for(let se=1;se<=oe;se++)X+=D.hasZ?(0,k.AW)(P[se-1],P[se],m):(0,k.pl)([P[se-1][0],P[se-1][1]],[P[se][0],P[se][1]],!1)}return X+=D.hasZ?(0,k.AW)(de,[Re.x,Re.y,Re.z],m):(0,k.pl)(de,[Re.x,Re.y],!1),{partId:I,segmentId:s,coordinate:Re,distance:Math.sqrt(y),distanceAlong:X}}(D,h)??null;default:return null}}},18780:(Be,pe,_)=>{_.d(pe,{r:()=>g});var k=_(53570),L=_(89018),p=_(10115);function H(E,o){if(1===o.length){if((0,L.o)(o[0]))return(0,p.t)(E,o[0],-1);if((0,L.q)(o[0]))return(0,p.t)(E,o[0].toArray(),-1)}return(0,p.t)(E,o,-1)}function g(E,o){E.stdev=function(R,w){return o(R,w,(l,z,T)=>H("stdev",T))},E.variance=function(R,w){return o(R,w,(l,z,T)=>H("variance",T))},E.average=function(R,w){return o(R,w,(l,z,T)=>H("mean",T))},E.mean=function(R,w){return o(R,w,(l,z,T)=>H("mean",T))},E.sum=function(R,w){return o(R,w,(l,z,T)=>H("sum",T))},E.min=function(R,w){return o(R,w,(l,z,T)=>H("min",T))},E.max=function(R,w){return o(R,w,(l,z,T)=>H("max",T))},E.distinct=function(R,w){return o(R,w,(l,z,T)=>H("distinct",T))},E.count=function(R,w){return o(R,w,(l,z,T)=>{if((0,L.H)(T,1,1,R,w),(0,L.o)(T[0])||(0,L.c)(T[0]))return T[0].length;if((0,L.q)(T[0]))return T[0].length();throw new k.aV(R,k.rH.InvalidParameter,w)})}}},40801:(Be,pe,_)=>{_.d(pe,{r:()=>At});var k=_(97478),L=_(97973),p=_(70430),H=_(53570),g=_(89018),E=_(76961),o=_(51172);const R=v=>(x,F,S)=>(S=S||14,+v(x,F).toFixed(S)),w=(v,x)=>v+x,z=(v,x)=>v*x,T=(v,x)=>v/x,$=(v,x,F)=>R(w)(v,x,F),K=(v,x,F)=>R(z)(v,x,F),J=(v,x,F)=>R(T)(v,x,F),D=360,h=400,a=2*Math.PI,m=3600,s=60,f=60,I=180*m/Math.PI,M=D*s*f,U=90*m,G=180*m,ce=String.fromCharCode(7501),de="\xb0";function Fe(v){if(!1===(0,g.c)(v))throw new H.aV(null,H.rH.InvalidParameter,null);return v}function Re(v,x){const F=10**x;return Math.round(v*F)/F}function Y(v){const x=parseFloat(v.toString().replace(Math.trunc(v).toString(),"0"))*Math.sign(v);return v<0?{fraction:x,integer:Math.ceil(v)}:{fraction:x,integer:Math.floor(v)}}var X,V,P,oe,v;function se(v,x){switch(v){case X.north:return"SHORT"===x?"N":"North";case X.east:return"SHORT"===x?"E":"East";case X.south:return"SHORT"===x?"S":"South";case X.west:return"SHORT"===x?"W":"West"}}function Q(v,x){return v-Math.floor(v/x)*x}function Ce(v){switch(v){case V.truncated_degrees:case V.decimal_degrees:return D;case V.radians:return a;case V.gradians:return h;case V.seconds:return M;case V.fractional_degree_minutes:return s;case V.fractional_minute_seconds:return f;default:throw new H.aV(null,H.rH.LogicError,null,{reason:"unsupported evaluations"})}}function be(v){switch(v.toUpperCase().trim()){case"NORTH":case"NORTHAZIMUTH":case"NORTH AZIMUTH":return P.north_azimuth;case"POLAR":return P.polar;case"QUADRANT":return P.quadrant;case"SOUTH":case"SOUTHAZIMUTH":case"SOUTH AZIMUTH":return P.south_azimuth}throw new H.aV(null,H.rH.LogicError,null,{reason:"unsupported directionType"})}function Ge(v){switch(v.toUpperCase().trim()){case"D":case"DD":case"DECIMALDEGREE":case"DECIMAL DEGREE":case"DEGREE":case"DECIMALDEGREES":case"DECIMAL DEGREES":case"DEGREES":return V.decimal_degrees;case"DMS":case"DEGREESMINUTESSECONDS":case"DEGREES MINUTES SECONDS":return V.degrees_minutes_seconds;case"R":case"RAD":case"RADS":case"RADIAN":case"RADIANS":return V.radians;case"G":case"GON":case"GONS":case"GRAD":case"GRADS":case"GRADIAN":case"GRADIANS":return V.gradians}throw new H.aV(null,H.rH.LogicError,null,{reason:"unsupported units"})}(v=X||(X={}))[v.north=0]="north",v[v.east=1]="east",v[v.south=2]="south",v[v.west=3]="west",function(v){v[v.decimal_degrees=1]="decimal_degrees",v[v.seconds=2]="seconds",v[v.degrees_minutes_seconds=3]="degrees_minutes_seconds",v[v.radians=4]="radians",v[v.gradians=5]="gradians",v[v.truncated_degrees=6]="truncated_degrees",v[v.fractional_degree_minutes=7]="fractional_degree_minutes",v[v.fractional_minute_seconds=8]="fractional_minute_seconds"}(V||(V={})),function(v){v[v.north_azimuth=1]="north_azimuth",v[v.polar=2]="polar",v[v.quadrant=3]="quadrant",v[v.south_azimuth=4]="south_azimuth"}(P||(P={})),function(v){v[v.meridian=0]="meridian",v[v.direction=1]="direction"}(oe||(oe={}));class De{constructor(x,F,S){this.m_degrees=x,this.m_minutes=F,this.m_seconds=S}getField(x){switch(x){case V.decimal_degrees:case V.truncated_degrees:return this.m_degrees;case V.fractional_degree_minutes:return this.m_minutes;case V.seconds:case V.fractional_minute_seconds:return this.m_seconds;default:throw new H.aV(null,H.rH.LogicError,null,{reason:"unexpected evaluation"})}}static secondsToDMS(x){const F=Y(x).fraction;let S=Y(x).integer;const j=Math.floor(S/m);S-=j*m;const q=Math.floor(S/f);return S-=q*f,new De(j,q,S+F)}static numberToDms(x){const F=Y(x).fraction,S=Y(x).integer,j=K(Y(100*F).fraction,100),q=Y(100*F).integer;return new De(S,q,j)}format(x,F){let S=Re(this.m_seconds,F),j=this.m_minutes,q=this.m_degrees;if(x===V.seconds||x===V.fractional_minute_seconds)f<=S&&(S-=f,++j),s<=j&&(j=0,++q),D<=q&&(q=0);else if(x===V.fractional_degree_minutes)S=0,j=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,q=this.m_degrees,s<=j&&(j=0,++q),D<=q&&(q=0);else if(x===V.decimal_degrees||x===V.truncated_degrees){const b=J(this.m_seconds,m),B=J(this.m_minutes,s);q=Math.round(this.m_degrees+B+b),j=0,S=0}return new De(q,j,S)}static dmsToSeconds(x,F,S){return x*m+F*f+S}}class Ze{constructor(x,F,S){this.meridian=x,this.angle=F,this.direction=S}fetchAzimuth(x){return x===oe.meridian?this.meridian:this.direction}}class ve{constructor(x){this._angle=x}static createFromAngleAndDirection(x,F){return new ve(new ke(ve._convertDirectionFormat(x.extractAngularUnits(V.seconds),F,P.north_azimuth)))}getAngle(x){const F=this._angle.extractAngularUnits(V.seconds);switch(x){case P.north_azimuth:case P.south_azimuth:case P.polar:return new ke(ve._convertDirectionFormat(F,P.north_azimuth,x));case P.quadrant:{const S=ve.secondsNorthAzimuthToQuadrant(F);return new ke(S.angle)}}}getMeridian(x){const F=this._angle.extractAngularUnits(V.seconds);switch(x){case P.north_azimuth:return X.north;case P.south_azimuth:return X.south;case P.polar:return X.east;case P.quadrant:return ve.secondsNorthAzimuthToQuadrant(F).meridian}}getDirection(x){const F=this._angle.extractAngularUnits(V.seconds);switch(x){case P.north_azimuth:return X.east;case P.south_azimuth:return X.west;case P.polar:return X.north;case P.quadrant:return ve.secondsNorthAzimuthToQuadrant(F).direction}}static secondsNorthAzimuthToQuadrant(x){const F=x<=U||x>=972e3?X.north:X.south,S=F===X.north?Math.min(M-x,x):Math.abs(x-G);return new Ze(F,S,x>G?X.west:X.east)}static createFromAngleMeridianAndDirection(x,F,S){return new ve(new ke(ve.secondsQuadrantToNorthAzimuth(x.extractAngularUnits(V.seconds),F,S)))}static secondsQuadrantToNorthAzimuth(x,F,S){return F===X.north?S===X.east?x:M-x:S===X.east?G-x:G+x}static _convertDirectionFormat(x,F,S){let j=0;switch(F){case P.north_azimuth:j=x;break;case P.polar:j=U-x;break;case P.quadrant:throw new H.aV(null,H.rH.LogicError,null,{reason:"unexpected evaluation"});case P.south_azimuth:j=x+G}let q=0;switch(S){case P.north_azimuth:q=j;break;case P.polar:q=U-j;break;case P.quadrant:throw new H.aV(null,H.rH.LogicError,null,{reason:"unexpected evaluation"});case P.south_azimuth:q=j-G}return q=function W(v,x){return v%x}(q,M),q<0?M+q:q}}function st(v,x,F){let S=null;switch(x){case V.decimal_degrees:S=K(v,m);break;case V.seconds:S=v;break;case V.gradians:S=K(v,3240);break;case V.radians:S=K(v,I);break;default:throw new H.aV(null,H.rH.LogicError,null,{reason:"unexpected evaluation"})}switch(F){case V.decimal_degrees:return J(S,m);case V.seconds:return S;case V.gradians:return J(S,3240);case V.radians:return S/I;default:throw new H.aV(null,H.rH.LogicError,null,{reason:"unexpected evaluation"})}}class ke{constructor(x){this._seconds=x}static createFromAngleAndUnits(x,F){return new ke(st(x,F,V.seconds))}extractAngularUnits(x){return st(this._seconds,V.seconds,$e(x))}static createFromDegreesMinutesSeconds(x,F,S){return new ke($($(K(x,m),K(F,f)),S))}}function $e(v){switch((0,o.O3)(v),v){case V.decimal_degrees:case V.truncated_degrees:case V.degrees_minutes_seconds:return V.decimal_degrees;case V.gradians:return V.gradians;case V.fractional_degree_minutes:return V.fractional_degree_minutes;case V.radians:return V.radians;case V.seconds:case V.fractional_minute_seconds:return V.seconds}}class Ve{constructor(x,F,S,j){this.view=x,this.angle=F,this.merdian=S,this.direction=j,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(x,F,S){return new Ve(x,F.getAngle(S),F.getMeridian(S),F.getDirection(S))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return null===this._dms&&this._calculateDms(),this._dms}fetchFormattedDms(){return null===this._formattedDms&&this._calculateDms(),this._formattedDms}_calculateDms(){let x=null,F=V.truncated_degrees,S=0;for(let j=0;j<this.view.length;j++){const q=this.view[j];switch(q){case"m":x=Ft(this.view,j,q),F=F===V.truncated_degrees?V.fractional_degree_minutes:F,j=x.newpos;continue;case"s":x=Ft(this.view,j,q),F=V.fractional_minute_seconds,S=S<x.rounding?x.rounding:S,j=x.newpos;continue;default:continue}}this._dms=De.secondsToDMS(this.angle.extractAngularUnits(V.seconds)),this._formattedDms=De.secondsToDMS(this.angle.extractAngularUnits(V.seconds)).format(F,S)}}function _e(v,x,F,S,j){let q=null;switch(x){case V.decimal_degrees:case V.radians:case V.gradians:return q=Q(Re(v.extractAngularUnits(x),S),Ce(x)),q.toFixed(S).padStart(F+S+(S>0?1:0),"0");case V.truncated_degrees:case V.fractional_degree_minutes:return q=Q(j.fetchFormattedDms().getField(x),Ce(x)),q.toFixed(S).padStart(F+S+(S>0?1:0),"0");case V.fractional_minute_seconds:return q=Q(Re(j.fetchDms().getField(x),S),Ce(x)),q.toFixed(S).padStart(F+S+(S>0?1:0),"0");default:throw new H.aV(null,H.rH.LogicError,null,{reason:"unexpected evaluation"})}}function Dt(v){switch(v.toUpperCase().trim()){case"N":case"NORTH":return X.north;case"E":case"EAST":return X.east;case"S":case"SOUTH":return X.south;case"W":case"WEST":return X.west}return null}function Te(v){const x=parseFloat(v);if((0,g.b)(x)){if(isNaN(x))throw new H.aV(null,H.rH.LogicError,null,{reason:"invalid conversion"});return x}throw new H.aV(null,H.rH.LogicError,null,{reason:"invalid conversion"})}function yt(v,x,F){const S=F===P.quadrant;let j=null,q=null,b=0,B=0,re=0;if(S){if(v.length<2)throw new H.aV(null,H.rH.LogicError,null,{reason:"conversion error"});re=1;const he=function He(v){switch((0,g.g)(v)){case 1:return{first:X.north,second:X.east};case 2:return{first:X.south,second:X.east};case 3:return{first:X.south,second:X.west};case 4:return{first:X.north,second:X.west}}return null}((0,g.j)(v[v.length-1]));if(he?(j=he.first,q=he.second):(b=1,j=Dt((0,g.j)(v[0])),q=Dt((0,g.j)(v[v.length-1]))),null===j||null===q)throw new H.aV(null,H.rH.LogicError,null,{reason:"invalid conversion"})}switch(x){case V.decimal_degrees:case V.radians:case V.gradians:if(0===v.length)throw new H.aV(null,H.rH.LogicError,null,{reason:"invalid conversion"});return S?ve.createFromAngleMeridianAndDirection(ke.createFromAngleAndUnits(Te(v[b]),$e(x)),j,q):ve.createFromAngleAndDirection(ke.createFromAngleAndUnits(Te(v[b]),$e(x)),F);case V.degrees_minutes_seconds:if(B=v.length-re-b,3===B){const he=ke.createFromDegreesMinutesSeconds(Te(v[b]),Te(v[b+1]),Te(v[b+2]));return S?ve.createFromAngleMeridianAndDirection(he,j,q):ve.createFromAngleAndDirection(he,F)}if(1===B){const he=Te(v[b]),Me=De.numberToDms(he),Ie=ke.createFromDegreesMinutesSeconds(Me.m_degrees,Me.m_minutes,Me.m_seconds);return S?ve.createFromAngleMeridianAndDirection(Ie,j,q):ve.createFromAngleAndDirection(Ie,F)}}throw new H.aV(null,H.rH.LogicError,null,{reason:"invalid conversion"})}function Ft(v,x,F){const S={padding:0,rounding:0,newpos:x};let j=!1;for(;x<v.length;){const q=v[x];if(q===F)j?S.rounding++:S.padding++,x++;else{if("."!==q)break;j=!0,x++}}return S.newpos=x-1,S}function _t(v,x,F){const S={escaped:"",newpos:x};for(x++;x<v.length;){const j=v[x];if(x++,"]"===j)break;S.escaped+=j}return S.newpos=x-1,S}function Ot(v,x,F){if(!(x instanceof p.Z))throw new H.aV(null,H.rH.InvalidParameter,null);if(!1===x.hasField("directionType"))throw new H.aV(null,H.rH.LogicError,null,{reason:"missing directionType"});if(!1===x.hasField("angleType"))throw new H.aV(null,H.rH.LogicError,null,{reason:"missing angleType"});const S=be(Fe(x.field("directiontype"))),j=function vt(v,x,F){if((0,g.b)(v))return function Ne(v,x,F){if(F===P.quadrant)throw new H.aV(null,H.rH.LogicError,null,{reason:"conversion error"});if(x===V.degrees_minutes_seconds){const S=De.numberToDms(v);return ve.createFromAngleAndDirection(ke.createFromDegreesMinutesSeconds(S.m_degrees,S.m_minutes,S.m_seconds),F)}return ve.createFromAngleAndDirection(ke.createFromAngleAndUnits(v,$e(x)),F)}((0,g.g)(v),x,F);if((0,g.c)(v))return yt(function Tt(v){const x=new Set([" ","-","/","'",'"',"\\","^",de,ce,"\t","\r","\n","*"]);let F="";for(let S=0;S<v.length;S++){const j=v.charAt(S);x.has(j)?F+="RRSPLITRRSPLITRR":F+=j}return F.split("RRSPLITRRSPLITRR").filter(S=>""!==S)}(v),x,F);if((0,g.o)(v))return yt(v,x,F);if((0,g.q)(v))return yt(v.toArray(),x,F);throw new H.aV(null,H.rH.LogicError,null,{reason:"conversion error"})}(v,Ge(Fe(x.field("angletype"))),S);if(!(F instanceof p.Z))throw new H.aV(null,H.rH.InvalidParameter,null);if(!1===F.hasField("directionType"))throw new H.aV(null,H.rH.LogicError,null,{reason:"missing directionType"});if(!1===F.hasField("outputType"))throw new H.aV(null,H.rH.LogicError,null,{reason:"missing angleType"});const q=be(Fe(F.field("directiontype"))),b=F.hasField("angleType")?Ge(Fe(F.field("angletype"))):null,B=Fe(F.field("outputType")).toUpperCase().trim();if(!q||!B)throw new H.aV(null,H.rH.LogicError,null,{reason:"conversion error"});if(!(b||"TEXT"===B&&F.hasField("format")))throw new H.aV(null,H.rH.LogicError,null,{reason:"invalid unit"});switch(B){case"VALUE":return q===P.quadrant||b===V.degrees_minutes_seconds?function St(v,x,F){const S=v.getAngle(x);if(x===P.quadrant&&F===V.degrees_minutes_seconds){const j=De.secondsToDMS(S.extractAngularUnits(V.seconds));return[se(v.getMeridian(x),"SHORT"),j.m_degrees,j.m_minutes,j.m_seconds,se(v.getDirection(x),"SHORT")]}if(F===V.degrees_minutes_seconds){const j=De.secondsToDMS(S.extractAngularUnits(V.seconds));return[j.m_degrees,j.m_minutes,j.m_seconds]}return x===P.quadrant?[se(v.getMeridian(x),"SHORT"),S.extractAngularUnits(F),se(v.getDirection(x),"SHORT")]:[S.extractAngularUnits(F)]}(j,q,b):function xt(v,x,F){const S=$e(F);if(S&&F!==V.degrees_minutes_seconds)return v.getAngle(x).extractAngularUnits(S);throw new H.aV(null,H.rH.LogicError,null,{reason:"conversion error"})}(j,q,b);case"TEXT":{let re="";return F.hasField("format")&&(re=(0,g.j)(F.field("format"))),null!==re&&""!==re||(re=function me(v,x){let F="";switch(v){case V.decimal_degrees:F=x===P.quadrant?"DD.DD"+de:"DDD.DD"+de;break;case V.degrees_minutes_seconds:F=x===P.quadrant?"dd"+de+" mm' ss\"":"ddd"+de+" mm' ss.ss\"";break;case V.radians:F="R.RR";break;case V.gradians:F="GGG.GG"+ce;break;default:throw new H.aV(null,H.rH.LogicError,null,{reason:"conversion error"})}return x===P.quadrant&&(F="p "+F+" b"),F}(b,q)),function et(v,x,F){let S="",j=null,q=null;const b=Ve.createFromStringAndBearing(x,v,F),B={D:V.decimal_degrees,d:V.truncated_degrees,m:V.fractional_degree_minutes,s:V.fractional_minute_seconds,R:V.radians,G:V.gradians};for(let re=0;re<x.length;re++){const he=x[re];switch(he){case"[":j=_t(x,re),S+=j.escaped,re=j.newpos;continue;case"D":case"d":case"m":case"s":case"R":case"G":j=Ft(x,re,he),q=v.getAngle(F),S+=_e(q,B[he],j.padding,j.rounding,b),re=j.newpos;continue;case"P":case"p":S+=se(b.fetchMeridian(),"p"===he?"SHORT":"LONG");continue;case"B":case"b":S+=se(b.fetchDirection(),"b"===he?"SHORT":"LONG");continue;default:S+=he}}return S}(j,re,q)}default:throw new H.aV(null,H.rH.InvalidParameter,null)}}const tt=2654435761,rt=2246822519,we=3266489917,bt=668265263,Pt=374761393;function Oe(v){const x=[];for(let F=0,S=v.length;F<S;F++){let j=v.charCodeAt(F);j<128?x.push(j):j<2048?x.push(192|j>>6,128|63&j):j<55296||j>=57344?x.push(224|j>>12,128|j>>6&63,128|63&j):(F++,j=65536+((1023&j)<<10|1023&v.charCodeAt(F)),x.push(240|j>>18,128|j>>12&63,128|j>>6&63,128|63&j))}return new Uint8Array(x)}class Ye{constructor(x){this._seed=x,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(x){const F=[];for(const S of x)isNaN(S)?F.push("NaN"):F.push(S===1/0?"Infinity":S===-1/0?"-Infinity":0===S?"0":S.toString(16));this.update(Oe(F.join("")))}updateIntArray(x){const F=Int32Array.from(x);this.update(new Uint8Array(F.buffer))}updateUint8Array(x){this.update(Uint8Array.from(x))}updateWithString(x){return this.update(Oe(x))}update(x){return this._bufs.push(x),this._totallen+=x.length,this}digest(){const x=new Uint8Array(this._totallen);let F=0;for(const S of this._bufs)x.set(S,F),F+=S.length;return this.init(),this._xxHash32(x,this._seed)}_xxHash32(x,F=0){const S=x;let j=F+Pt&4294967295,q=0;if(S.length>=16){const B=[F+tt+rt&4294967295,F+rt&4294967295,F+0&4294967295,F-tt&4294967295],re=x,he=re.length-16;let Me=0;for(q=0;(4294967280&q)<=he;q+=4){let ct=B[Me]+((re[q]+(re[q+1]<<8))*rt+((re[q+2]+(re[q+3]<<8))*rt<<16))&4294967295;ct=ct<<13|ct>>>19,B[Me]=(65535&ct)*tt+((ct>>>16)*tt<<16)&4294967295,Me=Me+1&3}j=(B[0]<<1|B[0]>>>31)+(B[1]<<7|B[1]>>>25)+(B[2]<<12|B[2]>>>20)+(B[3]<<18|B[3]>>>14)&4294967295}j=j+x.length&4294967295;const b=x.length-4;for(;q<=b;q+=4)j=j+((S[q]+(S[q+1]<<8))*we+((S[q+2]+(S[q+3]<<8))*we<<16))&4294967295,j=j<<17|j>>>15,j=(65535&j)*bt+((j>>>16)*bt<<16)&4294967295;for(;q<S.length;++q)j+=S[q]*Pt,j=j<<11|j>>>21,j=(65535&j)*tt+((j>>>16)*tt<<16)&4294967295;return j^=j>>>15,j=((65535&j)*rt&4294967295)+((j>>>16)*rt<<16),j^=j>>>13,j=((65535&j)*we&4294967295)+((j>>>16)*we<<16),j^=j>>>16,j<0?j+4294967296:j}}var ze=_(6785),Qe=_(19986),ft=_(26894),mt=_(12628),ut=_(44107),It=_(5391),Nt=_(64222),at=_(43814),pt=_(61018);function Et(v,x){if(!v||!x)return v===x;if(v.x===x.x&&v.y===x.y){if(v.hasZ){if(v.z!==x.z)return!1}else if(x.hasZ)return!1;if(v.hasM){if(v.m!==x.m)return!1}else if(x.hasM)return!1;return!0}return!1}function Le(v,x,F){if(null!==v)if((0,g.o)(v)){if(x.updateUint8Array([61]),F.map.has(v)){const S=F.map.get(v);x.updateIntArray([61237541^S])}else{F.map.set(v,F.currentLength++);for(const S of v)Le(S,x,F);F.map.delete(v),F.currentLength--}x.updateUint8Array([199])}else if((0,g.q)(v)){if(x.updateUint8Array([61]),F.map.has(v)){const S=F.map.get(v);x.updateIntArray([61237541^S])}else{F.map.set(v,F.currentLength++);for(const S of v.toArray())Le(S,x,F);F.map.delete(v),F.currentLength--}x.updateUint8Array([199])}else{if((0,g.k)(v))return x.updateIntArray([v.toNumber()]),void x.updateUint8Array([241]);if((0,g.m)(v))return x.updateIntArray([v.toNumber()]),void x.updateIntArray([257]);if((0,g.n)(v))return x.updateIntArray([v.toNumber()]),void x.updateIntArray([263]);if((0,g.c)(v))return x.updateIntArray([v.length]),x.updateWithString(v),void x.updateUint8Array([41]);if((0,g.a)(v))x.updateUint8Array([!0===v?1:0,113]);else{if((0,g.b)(v))return x.updateFloatArray([v]),void x.updateUint8Array([173]);if(v instanceof L.Z)throw new H.aV(F.context,H.rH.UnsupportedHashType,F.node);if(v instanceof k.Z)throw new H.aV(F.context,H.rH.UnsupportedHashType,F.node);if(!(v instanceof p.Z)){if((0,g.r)(v))throw new H.aV(F.context,H.rH.UnsupportedHashType,F.node);if(v instanceof ut.Z)return x.updateIntArray([3833836621]),x.updateIntArray([0]),x.updateFloatArray([v.x]),x.updateIntArray([1]),x.updateFloatArray([v.y]),v.hasZ&&(x.updateIntArray([2]),x.updateFloatArray([v.z])),v.hasM&&(x.updateIntArray([3]),x.updateFloatArray([v.m])),x.updateIntArray([3765347959]),void Le(v.spatialReference.wkid,x,F);if(v instanceof It.Z){x.updateIntArray([1266616829]);for(let S=0;S<v.rings.length;S++){const j=v.rings[S],q=[];let b=null,B=null;for(let re=0;re<j.length;re++){const he=v.getPoint(S,re);if(0===re)b=he;else if(Et(B,he))continue;B=he,re===j.length-1&&Et(b,he)||q.push(he)}x.updateIntArray([1397116793,q.length]);for(let re=0;re<q.length;re++){const he=q[re];x.updateIntArray([3962308117,re]),Le(he,x,F),x.updateIntArray([2716288009])}x.updateIntArray([2278822459])}return x.updateIntArray([3878477243]),void Le(v.spatialReference.wkid,x,F)}if(v instanceof Nt.Z){x.updateIntArray([4106883559]);for(let S=0;S<v.paths.length;S++){const j=v.paths[S];x.updateIntArray([1397116793,j.length]);for(let q=0;q<j.length;q++)x.updateIntArray([3962308117,q]),Le(v.getPoint(S,q),x,F),x.updateIntArray([2716288009]);x.updateIntArray([2278822459])}return x.updateIntArray([2568784753]),void Le(v.spatialReference.wkid,x,F)}if(v instanceof mt.Z){x.updateIntArray([588535921,v.points.length]);for(let S=0;S<v.points.length;S++){const j=v.getPoint(S);x.updateIntArray([S]),Le(j,x,F)}return x.updateIntArray([1700171621]),void Le(v.spatialReference.wkid,x,F)}if(v instanceof ft.Z)return x.updateIntArray([3483648373]),x.updateIntArray([0]),x.updateFloatArray([v.xmax]),x.updateIntArray([1]),x.updateFloatArray([v.xmin]),x.updateIntArray([2]),x.updateFloatArray([v.ymax]),x.updateIntArray([3]),x.updateFloatArray([v.ymin]),v.hasZ&&(x.updateIntArray([4]),x.updateFloatArray([v.zmax]),x.updateIntArray([5]),x.updateFloatArray([v.zmin])),v.hasM&&(x.updateIntArray([6]),x.updateFloatArray([v.mmax]),x.updateIntArray([7]),x.updateFloatArray([v.mmin])),x.updateIntArray([3622027469]),void Le(v.spatialReference.wkid,x,F);if(v instanceof at.Z)return x.updateIntArray([14]),null!=v.wkid&&x.updateIntArray([v.wkid]),v.wkt&&x.updateWithString(v.wkt),void(v.wkt2&&x.updateWithString(v.wkt2));throw(0,g.i)(v)||(0,g.u)(v)||(0,g.s)(v),new H.aV(F.context,H.rH.UnsupportedHashType,F.node)}if(x.updateUint8Array([223]),F.map.has(v)){const S=F.map.get(v);x.updateIntArray([61237541^S])}else{F.map.set(v,F.currentLength++);for(const S of v.keys())x.updateIntArray([S.length]),x.updateWithString(S),x.updateUint8Array([251]),Le(v.field(S),x,F),x.updateUint8Array([239]);F.map.delete(v),F.currentLength--}x.updateUint8Array([73])}}else x.updateUint8Array([0,139])}function At(v,x){v.portal=function(F,S){return x(F,S,(j,q,b)=>((0,g.H)(b,1,1,F,S),new k.Z((0,g.j)(b[0]))))},v.typeof=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,1,1,F,S);const B=(0,g.P)(b[0]);if("Unrecognized Type"===B)throw new H.aV(F,H.rH.UnrecognizedType,S);return B})},v.trim=function(F,S){return x(F,S,(j,q,b)=>((0,g.H)(b,1,1,F,S),(0,g.j)(b[0]).trim()))},v.tohex=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,1,1,F,S);const B=(0,g.g)(b[0]);return isNaN(B)?B:B.toString(16)})},v.upper=function(F,S){return x(F,S,(j,q,b)=>((0,g.H)(b,1,1,F,S),(0,g.j)(b[0]).toUpperCase()))},v.proper=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,1,2,F,S);let B=1;2===b.length&&"firstword"===(0,g.j)(b[1]).toLowerCase()&&(B=2);const re=/\s/,he=(0,g.j)(b[0]);let Me="",Ie=!0;for(let lt=0;lt<he.length;lt++){let We=he[lt];re.test(We)?1===B&&(Ie=!0):We.toUpperCase()!==We.toLowerCase()&&(Ie?(We=We.toUpperCase(),Ie=!1):We=We.toLowerCase()),Me+=We}return Me})},v.lower=function(F,S){return x(F,S,(j,q,b)=>((0,g.H)(b,1,1,F,S),(0,g.j)(b[0]).toLowerCase()))},v.guid=function(F,S){return x(F,S,(j,q,b)=>{if((0,g.H)(b,0,1,F,S),b.length>0)switch((0,g.j)(b[0]).toLowerCase()){case"digits":return(0,Qe.DO)().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return(0,Qe.DO)();case"digits-hyphen-braces":return"{"+(0,Qe.DO)()+"}";case"digits-hyphen-parentheses":return"("+(0,Qe.DO)()+")"}return"{"+(0,Qe.DO)()+"}"})},v.standardizeguid=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,2,2,F,S);let B=(0,g.j)(b[0]);if(""===B||null===B)return"";const re=/^(\{|\()?(?<partA>[0-9a-z]{8})(-?)(?<partB>[0-9a-z]{4})(-?)(?<partC>[0-9a-z]{4})(-?)(?<partD>[0-9a-z]{4})(-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(B);if(!re)return"";const he=re.groups;switch(B=he.partA+"-"+he.partB+"-"+he.partC+"-"+he.partD+"-"+he.partE,(0,g.j)(b[1]).toLowerCase()){case"digits":return B.replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return B;case"digits-hyphen-braces":return"{"+B+"}";case"digits-hyphen-parentheses":return"("+B+")"}return"{"+B+"}"})},v.console=function(F,S){return x(F,S,(j,q,b)=>(0===b.length||F.console((0,g.j)(1===b.length?b[0]:b)),g.B))},v.mid=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,2,3,F,S);let B=(0,g.g)(b[1]);if(isNaN(B))return"";if(B<0&&(B=0),2===b.length)return(0,g.j)(b[0]).substr(B);let re=(0,g.g)(b[2]);return isNaN(re)?"":(re<0&&(re=0),(0,g.j)(b[0]).substr(B,re))})},v.find=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,2,3,F,S);let B=0;if(b.length>2){if(B=(0,g.g)((0,g.K)(b[2],0)),isNaN(B))return-1;B<0&&(B=0)}return(0,g.j)(b[1]).indexOf((0,g.j)(b[0]),B)})},v.left=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,2,2,F,S);let B=(0,g.g)(b[1]);return isNaN(B)?"":(B<0&&(B=0),(0,g.j)(b[0]).substr(0,B))})},v.right=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,2,2,F,S);let B=(0,g.g)(b[1]);return isNaN(B)?"":(B<0&&(B=0),(0,g.j)(b[0]).substr(-1*B,B))})},v.split=function(F,S){return x(F,S,(j,q,b)=>{let B;(0,g.H)(b,2,4,F,S);let re=(0,g.g)((0,g.K)(b[2],-1));const he=(0,g.h)((0,g.K)(b[3],!1));if(-1===re||null===re||!0===he?B=(0,g.j)(b[0]).split((0,g.j)(b[1])):(isNaN(re)&&(re=-1),re<-1&&(re=-1),B=(0,g.j)(b[0]).split((0,g.j)(b[1]),re)),!1===he)return B;const Me=[];for(let Ie=0;Ie<B.length&&!(-1!==re&&Me.length>=re);Ie++)""!==B[Ie]&&void 0!==B[Ie]&&Me.push(B[Ie]);return Me})},v.text=function(F,S){return x(F,S,(j,q,b)=>((0,g.H)(b,1,2,F,S),(0,g.t)(b[0],b[1])))},v.concatenate=function(F,S){return x(F,S,(j,q,b)=>{const B=[];if(b.length<1)return"";if((0,g.o)(b[0])){const re=(0,g.K)(b[2],"");for(let he=0;he<b[0].length;he++)B[he]=(0,g.t)(b[0][he],re);return B.join(b.length>1?b[1]:"")}if((0,g.q)(b[0])){const re=(0,g.K)(b[2],"");for(let he=0;he<b[0].length();he++)B[he]=(0,g.t)(b[0].get(he),re);return B.join(b.length>1?b[1]:"")}for(let re=0;re<b.length;re++)B[re]=(0,g.t)(b[re]);return B.join("")})},v.reverse=function(F,S){return x(F,S,(j,q,b)=>{if((0,g.H)(b,1,1,F,S),(0,g.o)(b[0])){const B=b[0].slice(0);return B.reverse(),B}if((0,g.q)(b[0])){const B=b[0].toArray().slice(0);return B.reverse(),B}throw new H.aV(F,H.rH.InvalidParameter,S)})},v.replace=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,3,4,F,S);const B=(0,g.j)(b[0]),re=(0,g.j)(b[1]),he=(0,g.j)(b[2]);return 4!==b.length||(0,g.h)(b[3])?(0,g.T)(B,re,he):B.replace(re,he)})},v.schema=function(F,S){return x(F,S,(j,q,b)=>{if((0,g.r)(b[0])){const B=(0,g.U)(b[0]);return B?p.Z.convertObjectToArcadeDictionary(B,(0,g.N)(F)):null}throw new H.aV(F,H.rH.InvalidParameter,S)})},v.subtypes=function(F,S){return x(F,S,(j,q,b)=>{if((0,g.H)(b,1,1,F,S),(0,g.r)(b[0])){const B=(0,g.V)(b[0]);return B?p.Z.convertObjectToArcadeDictionary(B,(0,g.N)(F)):null}throw new H.aV(F,H.rH.InvalidParameter,S)})},v.subtypecode=function(F,S){return x(F,S,(j,q,b)=>{if((0,g.H)(b,1,1,F,S),(0,g.r)(b[0])){const B=(0,g.V)(b[0]);if(!B)return null;if(B.subtypeField&&b[0].hasField(B.subtypeField)){const re=b[0].field(B.subtypeField);for(const he of B.subtypes)if(he.code===re)return he.code;return null}return null}throw new H.aV(F,H.rH.InvalidParameter,S)})},v.subtypename=function(F,S){return x(F,S,(j,q,b)=>{if((0,g.H)(b,1,1,F,S),(0,g.r)(b[0])){const B=(0,g.V)(b[0]);if(!B)return"";if(B.subtypeField&&b[0].hasField(B.subtypeField)){const re=b[0].field(B.subtypeField);for(const he of B.subtypes)if(he.code===re)return he.name;return""}return""}throw new H.aV(F,H.rH.InvalidParameter,S)})},v.gdbversion=function(F,S){return x(F,S,(j,q,b)=>{if((0,g.H)(b,1,1,F,S),(0,g.r)(b[0]))return b[0].gdbVersion();throw new H.aV(F,H.rH.InvalidParameter,S)})},v.domain=function(F,S){return x(F,S,(j,q,b)=>{if((0,g.H)(b,2,3,F,S),(0,g.r)(b[0])){const B=(0,g.W)(b[0],(0,g.j)(b[1]),void 0===b[2]?void 0:b[2]);return B&&B.domain?p.Z.convertObjectToArcadeDictionary("coded-value"===B.domain.type||"codedValue"===B.domain.type?{type:"codedValue",name:B.domain.name,dataType:E.yE[B.field.type],codedValues:B.domain.codedValues.map(re=>({name:re.name,code:re.code}))}:{type:"range",name:B.domain.name,dataType:E.yE[B.field.type],min:B.domain.minValue,max:B.domain.maxValue},(0,g.N)(F)):null}throw new H.aV(F,H.rH.InvalidParameter,S)})},v.domainname=function(F,S){return x(F,S,(j,q,b)=>{if((0,g.H)(b,2,4,F,S),(0,g.r)(b[0]))return(0,g.X)(b[0],(0,g.j)(b[1]),b[2],void 0===b[3]?void 0:b[3]);throw new H.aV(F,H.rH.InvalidParameter,S)})},v.domaincode=function(F,S){return x(F,S,(j,q,b)=>{if((0,g.H)(b,2,4,F,S),(0,g.r)(b[0]))return(0,g.Y)(b[0],(0,g.j)(b[1]),b[2],void 0===b[3]?void 0:b[3]);throw new H.aV(F,H.rH.InvalidParameter,S)})},v.urlencode=function(F,S){return x(F,S,(j,q,b)=>{if((0,g.H)(b,1,1,F,S),null===b[0])return"";if(b[0]instanceof p.Z){let B="";for(const re of b[0].keys()){const he=b[0].field(re);""!==B&&(B+="&"),B+=null===he?encodeURIComponent(re)+"=":encodeURIComponent(re)+"="+encodeURIComponent(he)}return B}return encodeURIComponent((0,g.j)(b[0]))})},v.hash=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,1,1,F,S);const B=new Ye(0);return Le(b[0],B,{context:F,node:S,map:new Map,currentLength:0}),B.digest()})},v.convertdirection=function(F,S){return x(F,S,(j,q,b)=>((0,g.H)(b,3,3,F,S),Ot(b[0],b[1],b[2])))},v.fromjson=function(F,S){return x(F,S,(j,q,b)=>{if((0,g.H)(b,1,1,F,S),!1===(0,g.c)(b[0]))throw new H.aV(F,H.rH.InvalidParameter,S);return p.Z.convertJsonToArcade(JSON.parse((0,g.j)(b[0])),(0,g.N)(F))})},v.expects=function(F,S){return x(F,S,(j,q,b)=>{if(b.length<1)throw new H.aV(F,H.rH.WrongNumberOfParameters,S);return g.B})},v.tocharcode=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,1,2,F,S);const B=(0,g.g)((0,g.K)(b[1],0)),re=(0,g.j)(b[0]);if(0===re.length&&1===b.length)return null;if(re.length<=B||B<0)throw new H.aV(F,H.rH.OutOfBounds,S);return re.charCodeAt(B)})},v.tocodepoint=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,1,2,F,S);const B=(0,g.g)((0,g.K)(b[1],0)),re=(0,g.j)(b[0]);if(0===re.length&&1===b.length)return null;if(re.length<=B||B<0)throw new H.aV(F,H.rH.OutOfBounds,S);return re.codePointAt(B)})},v.fromcharcode=function(F,S){return x(F,S,(j,q,b)=>{if(b.length<1)throw new H.aV(F,H.rH.WrongNumberOfParameters,S);const B=b.map(re=>Math.trunc((0,g.g)(re))).filter(re=>re>=0&&re<=65535);return 0===B.length?null:String.fromCharCode.apply(null,B)})},v.fromcodepoint=function(F,S){return x(F,S,(j,q,b)=>{if(b.length<1)throw new H.aV(F,H.rH.WrongNumberOfParameters,S);let B;try{B=b.map(re=>Math.trunc((0,g.g)(re))).filter(re=>re<=1114111&&re>>>0===re)}catch{return null}return 0===B.length?null:String.fromCodePoint.apply(null,B)})},v.getuser=function(F,S){return x(F,S,(j,q,b)=>{(0,g.H)(b,0,2,F,S);let B=(0,g.K)(b[1],"");if(B=!0===B||!1===B?"":(0,g.j)(B),null!==B&&""!==B)return null;if(0===b.length||b[0]instanceof k.Z){let re=null;if(re=F.services?.portal?F.services.portal:pt.Z.getDefault(),b.length>0&&!function Ct(v,x){return!!v&&(0,ze.tm)(v,x?.restUrl||"")}(b[0].field("url"),re)||!re)return null;if(""===B){const he=function Ht(v){return"loaded"===v.loadStatus&&v.user?.sourceJSON?v.user.sourceJSON:null}(re);if(he){const Me=JSON.parse(JSON.stringify(he));for(const Ie of["lastLogin","created","modified"])null!=Me[Ie]&&(Me[Ie]=new Date(Me[Ie]));return p.Z.convertObjectToArcadeDictionary(Me,(0,g.N)(F))}}return null}throw new H.aV(F,H.rH.InvalidParameter,S)})},v.getenvironment=function(F,S){return x(F,S,(j,q,b)=>((0,g.H)(b,0,0,F,S),p.Z.convertObjectToArcadeDictionary((0,g.Z)((0,g.N)(F),F.spatialReference),(0,g.N)(F),!0)))}}},42442:(Be,pe,_)=>{_.d(pe,{Kq:()=>ee,Vf:()=>J,bV:()=>l,dN:()=>D,gW:()=>o,mb:()=>$,w8:()=>T,x5:()=>z});const k={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},L={functionDefinitions:new Map,constantDefinitions:new Map},p={functionDefinitions:new Map,constantDefinitions:new Map};for(const a of["pi","infinity"])p.constantDefinitions.set(a,{type:"constant"}),L.constantDefinitions.set(a,{type:"constant"});p.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]}),L.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const a in k){const m=k[a];p.functionDefinitions.set(a,{overloads:[{type:"function",parametersInfo:{min:m.min,max:m.max}}]}),L.functionDefinitions.set(a,{overloads:[{type:"function",parametersInfo:{min:m.min,max:m.max}}]})}const H=new Set(["featureset","featuresetbyid","featuresetbyname","featuresetbyassociation","featuresetbyrelationshipname","featuresetbyurl","getfeatureset","getuser","attachments","featuresetbyportalitem","getfeaturesetinfo","filterbysubtypecode","knowledgegraphbyportalitem","querygraph"]),g=new Set(["disjoint","intersects","touches","crosses","within","contains","overlaps","equals","relate","intersection","nearestvertex","nearestcoordinate","union","difference","symmetricdifference","clip","cut","area","areageodetic","length","length3d","lengthgeodetic","distance","distancegeodetic","densify","densifygeodetic","generalize","buffer","buffergeodetic","offset","rotate","issimple","convexhull","simplify","multiparttosinglepart","pointtocoordinate","distancetocoordinate","measuretocoordinate"]);function E(a){return"string"==typeof a||a instanceof String}function o(a,m){const y="sync"===m?L:p;y.functionDefinitions.has(a.name.toLowerCase())?y.functionDefinitions.get(a.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:a.min,max:a.max}}):y.functionDefinitions.set(a.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:a.min,max:a.max}}]})}function R(a,m){if(a)for(const y of a)w(y,m)}function w(a,m){if(a&&!1!==m(a))switch(a.type){case"ImportDeclaration":R(a.specifiers,m),w(a.source,m);break;case"ExportNamedDeclaration":w(a.declaration,m);break;case"ArrayExpression":R(a.elements,m);break;case"AssignmentExpression":case"BinaryExpression":case"LogicalExpression":w(a.left,m),w(a.right,m);break;case"BlockStatement":case"Program":R(a.body,m);break;case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"Identifier":case"Literal":break;case"CallExpression":w(a.callee,m),R(a.arguments,m);break;case"ExpressionStatement":w(a.expression,m);break;case"ForInStatement":w(a.left,m),w(a.right,m),w(a.body,m);break;case"ForStatement":w(a.init,m),w(a.test,m),w(a.update,m),w(a.body,m);break;case"WhileStatement":w(a.test,m),w(a.body,m);break;case"FunctionDeclaration":w(a.id,m),R(a.params,m),w(a.body,m);break;case"IfStatement":w(a.test,m),w(a.consequent,m),w(a.alternate,m);break;case"MemberExpression":w(a.object,m),w(a.property,m);break;case"ObjectExpression":R(a.properties,m);break;case"Property":w(a.key,m),w(a.value,m);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":w(a.argument,m);break;case"VariableDeclaration":R(a.declarations,m);break;case"VariableDeclarator":w(a.id,m),w(a.init,m);break;case"TemplateLiteral":R(a.expressions,m),R(a.quasis,m)}}function l(a,m){let y=!1;const s=m.toLowerCase();return w(a,f=>!y&&("Identifier"===f.type&&f.name&&f.name.toLowerCase()===s&&(y=!0),!0)),y}function z(a){const m=[];return w(a,y=>("ImportDeclaration"===y.type&&y.source&&y.source.value&&m.push({libname:y.specifiers[0].local.name.toLowerCase(),source:y.source.value}),!0)),m}function T(a,m){let y=!1;const s=m.toLowerCase();return w(a,f=>!(y||"CallExpression"===f.type&&"Identifier"===f.callee.type&&f.callee.name&&f.callee.name.toLowerCase()===s&&(y=!0,1))),y}function $(a){const m=[];return w(a,y=>"MemberExpression"!==y.type||"Identifier"!==y.object.type||(!1===y.computed&&y.object&&y.object.name&&y.property&&"Identifier"===y.property.type&&y.property.name?m.push(y.object.name.toLowerCase()+"."+y.property.name.toLowerCase()):y.object&&y.object.name&&y.property&&"Literal"===y.property.type&&"string"==typeof y.property.value&&m.push(y.object.name.toLowerCase()+"."+y.property.value?.toString().toLowerCase()),!1)),m}function ee(a){const m=[];return w(a,y=>{if("CallExpression"===y.type){if("Identifier"===y.callee.type&&"expects"===y.callee.name.toLowerCase()){let s="";for(let f=0;f<(y.arguments||[]).length;f++)0===f?"Identifier"===y.arguments[f].type&&(s=y.arguments[f].name.toLowerCase()):s&&"Literal"===y.arguments[f].type&&E(y.arguments[f].value)&&m.push(s+"."+y.arguments[f].value.toLowerCase());return!1}if("Identifier"===y.callee.type&&["domainname","domaincode","domain","haskey"].includes(y.callee.name.toLowerCase())&&y.arguments.length>=2){let s="";return"Identifier"===y.arguments[0].type&&(s=y.arguments[0].name.toLowerCase()),s&&"Literal"===y.arguments[1].type&&E(y.arguments[1].value)&&m.push(s+"."+y.arguments[1].value.toLowerCase()),!1}}return"MemberExpression"!==y.type||"Identifier"!==y.object.type||(!1===y.computed&&y.object&&y.object.name&&y.property&&"Identifier"===y.property.type&&y.property.name?m.push(y.object.name.toLowerCase()+"."+y.property.name.toLowerCase()):y.object&&y.object.name&&y.property&&"Literal"===y.property.type&&"string"==typeof y.property.value&&m.push(y.object.name.toLowerCase()+"."+y.property.value?.toString().toLowerCase()),!1)}),m}function J(a){const m=[];return w(a,y=>("CallExpression"===y.type&&"Identifier"===y.callee.type&&m.push(y.callee.name.toLowerCase()),!0)),m}function D(a,m=[]){let y=null;if(void 0===a.usesFeatureSet){null===y&&(y=J(a)),a.usesFeatureSet=!1;for(let s=0;s<y.length;s++)H.has(y[s])&&(a.usesFeatureSet=!0,a.isAsync=!0);if(!1===a.usesFeatureSet&&m&&m.length>0)for(const s of m)if(l(a,s)){a.usesFeatureSet=!0,a.isAsync=!0;break}}if(void 0===a.usesModules&&(a.usesModules=!1,z(a).length>0&&(a.usesModules=!0)),void 0===a.usesGeometry){a.usesGeometry=!1,null===y&&(y=J(a));for(let s=0;s<y.length;s++)g.has(y[s])&&(a.usesGeometry=!0)}}},16049:(Be,pe,_)=>{_.d(pe,{A:()=>R});var k=_(15861),L=_(5137),p=_(53570),H=_(29066),g=_(89018),E=_(79412);const R=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:function o(w){function l(h,a,m){if(h instanceof H.Z)return h.toArray();if((0,g.o)(h))return h;throw new p.aV(a,p.rH.InvalidParameter,m)}function z(h,a){const m=h.length,y=Math.floor(m/2);return 0===m?[]:1===m?[h[0]]:function T(h,a,m){const y=[];for(;h.length>0||a.length>0;)if(h.length>0&&a.length>0){let s=m(h[0],a[0]);isNaN(s)&&(s=0),s<=0?(y.push(h[0]),h=h.slice(1)):(y.push(a[0]),a=a.slice(1))}else h.length>0?(y.push(h[0]),h=h.slice(1)):a.length>0&&(y.push(a[0]),a=a.slice(1));return y}(z(h.slice(0,y),a),z(h.slice(y,m),a),a)}function $(h,a){return ee.apply(this,arguments)}function ee(){return(ee=(0,k.Z)(function*(h,a){const m=h.length,y=Math.floor(m/2);if(0===m)return[];if(1===m)return[h[0]];const s=[yield $(h.slice(0,y),a),yield $(h.slice(y,m),a)];return K(s[0],s[1],a,[])})).apply(this,arguments)}function K(h,a,m,y){return J.apply(this,arguments)}function J(){return(J=(0,k.Z)(function*(h,a,m,y){const s=y;if(h.length>0||a.length>0){if(h.length>0&&a.length>0){let f=yield m(h[0],a[0]);return isNaN(f)&&(f=1),f<=0?(s.push(h[0]),h=h.slice(1)):(s.push(a[0]),a=a.slice(1)),K(h,a,m,y)}return h.length>0?(s.push(h[0]),K(h=h.slice(1),a,m,y)):(s.push(a[0]),K(h,a=a.slice(1),m,y))}return y})).apply(this,arguments)}function D(h,a,m,y){(0,g.H)(m,1,2,h,a);let s=m[0];if((0,g.q)(s)&&(s=s.toArray()),!1===(0,g.o)(s))throw new p.aV(h,p.rH.InvalidParameter,a);if(m.length>1){if(!1===(0,g.i)(m[1]))throw new p.aV(h,p.rH.InvalidParameter,a);let G=s;const te=m[1].createFunction(h);return y?$(G,te):(G=z(G,(ce,de)=>te(ce,de)),G)}let f=s;if(0===f.length)return[];const I={};for(let G=0;G<f.length;G++){const te=(0,g.P)(f[G]);""!==te&&(I[te]=!0)}if(!0===I.Array||!0===I.Dictionary||!0===I.Feature||!0===I.Point||!0===I.Polygon||!0===I.Polyline||!0===I.Multipoint||!0===I.Extent||!0===I.Function)return f.slice(0);let M=0,U="";for(const G in I)M++,U=G;return f=M>1||"String"===U?z(f,(G,te)=>{if(null==G||G===g.B)return null==te||te===g.B?0:1;if(null==te||te===g.B)return-1;const ce=(0,g.j)(G),de=(0,g.j)(te);return ce<de?-1:ce===de?0:1}):"Number"===U?z(f,(G,te)=>G-te):"Boolean"===U?z(f,(G,te)=>G===te?0:te?-1:1):"Date"===U?z(f,(G,te)=>te-G):f.slice(0),f}w.functions.array=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{if((0,g.H)(s,0,2,h,a),0===s.length)return[];if(1===s.length&&null===s[0])return[];if((0,g.o)(s[0])){if(2===s.length&&!1===(0,g.a)(s[1]))throw new p.aV(h,p.rH.InvalidParameter,a);return!0===(0,g.K)(s[1],!1)?(0,L.I)(s[0]):s[0].slice(0)}if((0,g.q)(s[0])){if(2===s.length&&!1===(0,g.a)(s[1]))throw new p.aV(h,p.rH.InvalidParameter,a);return!0===(0,g.K)(s[1],!1)?(0,L.I)(s[0]):s[0].toArray().slice(0)}const f=(0,g.g)(s[0]);if(isNaN(f)||!1===(0,g.O)(f))throw new p.aV(h,p.rH.InvalidParameter,a);const I=(0,g.K)(s[1],null),M=new Array(f);return M.fill(I),M})},w.functions.front=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{if((0,g.H)(s,1,1,h,a),(0,g.q)(s[0])){if(s[0].length()<=0)throw new p.aV(h,p.rH.OutOfBounds,a);return s[0].get(0)}if((0,g.o)(s[0])){if(s[0].length<=0)throw new p.aV(h,p.rH.OutOfBounds,a);return s[0][0]}throw new p.aV(h,p.rH.InvalidParameter,a)})},w.functions.back=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{if((0,g.H)(s,1,1,h,a),(0,g.q)(s[0])){if(s[0].length()<=0)throw new p.aV(h,p.rH.OutOfBounds,a);return s[0].get(s[0].length()-1)}if((0,g.o)(s[0])){if(s[0].length<=0)throw new p.aV(h,p.rH.OutOfBounds,a);return s[0][s[0].length-1]}throw new p.aV(h,p.rH.InvalidParameter,a)})},w.functions.push=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{if((0,g.H)(s,1,2,h,a),(0,g.o)(s[0]))return s[0][s[0].length]=s[1],s[0].length;throw new p.aV(h,p.rH.InvalidParameter,a)})},w.functions.pop=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{if((0,g.H)(s,1,1,h,a),(0,g.o)(s[0])){if(s[0].length<=0)throw new p.aV(h,p.rH.OutOfBounds,a);const f=s[0][s[0].length-1];return s[0].length=s[0].length-1,f}throw new p.aV(h,p.rH.InvalidParameter,a)})},w.functions.erase=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{if((0,g.H)(s,2,2,h,a),(0,g.o)(s[0])){let f=(0,g.g)(s[1]);if(isNaN(f)||!1===(0,g.O)(f))throw new p.aV(h,p.rH.InvalidParameter,a);const I=s[0];if(I.length<=0)throw new p.aV(h,p.rH.OutOfBounds,a);if(f<0&&(f=I.length+f),f<0)throw new p.aV(h,p.rH.OutOfBounds,a);if(f>=I.length)throw new p.aV(h,p.rH.OutOfBounds,a);return I.splice(f,1),g.B}throw new p.aV(h,p.rH.InvalidParameter,a)})},w.functions.insert=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{if((0,g.H)(s,3,3,h,a),(0,g.o)(s[0])){const f=(0,g.g)(s[1]);if(isNaN(f)||!1===(0,g.O)(f))throw new p.aV(h,p.rH.InvalidParameter,a);const I=s[2],M=s[0];if(f>M.length)throw new p.aV(h,p.rH.OutOfBounds,a);if(f<0&&f<-1*M.length)throw new p.aV(h,p.rH.OutOfBounds,a);return f===M.length?(M[f]=I,g.B):(M.splice(f,0,I),g.B)}throw new p.aV(h,p.rH.InvalidParameter,a)})},w.functions.resize=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{if((0,g.H)(s,2,3,h,a),(0,g.o)(s[0])){const f=(0,g.g)(s[1]);if(isNaN(f)||!1===(0,g.O)(f))throw new p.aV(h,p.rH.InvalidParameter,a);if(f<0)throw new p.aV(h,p.rH.InvalidParameter,a);const I=(0,g.K)(s[2],null),M=s[0];if(M.length>=f)return M.length=f,g.B;const U=M.length;M.length=f;for(let G=U;G<M.length;G++)M[G]=I;return g.B}throw new p.aV(h,p.rH.InvalidParameter,a)})},w.functions.includes=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{if((0,g.H)(s,2,2,h,a),(0,g.o)(s[0])){const f=s[1];return s[0].findIndex(I=>(0,g.F)(I,f))>-1}if((0,g.q)(s[0])){const f=s[1];return s[0].toArray().findIndex(I=>(0,g.F)(I,f))>-1}throw new p.aV(h,p.rH.InvalidParameter,a)})},w.functions.slice=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{if((0,g.H)(s,1,3,h,a),(0,g.o)(s[0])){const f=(0,g.g)((0,g.K)(s[1],0)),I=(0,g.g)((0,g.K)(s[2],s[0].length));if(isNaN(f)||!1===(0,g.O)(f))throw new p.aV(h,p.rH.InvalidParameter,a);if(isNaN(I)||!1===(0,g.O)(I))throw new p.aV(h,p.rH.InvalidParameter,a);return s[0].slice(f,I)}if((0,g.q)(s[0])){const f=s[0],I=(0,g.g)((0,g.K)(s[1],0)),M=(0,g.g)((0,g.K)(s[2],f.length()));if(isNaN(I)||!1===(0,g.O)(I))throw new p.aV(h,p.rH.InvalidParameter,a);if(isNaN(M)||!1===(0,g.O)(M))throw new p.aV(h,p.rH.InvalidParameter,a);return f.toArray().slice(I,M)}throw new p.aV(h,p.rH.InvalidParameter,a)})},w.functions.splice=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{const f=[];for(let I=0;I<s.length;I++)(0,g.o)(s[I])?f.push(...s[I]):(0,g.q)(s[I])?f.push(...s[I].toArray()):f.push(s[I]);return f})},w.functions.top=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{if((0,g.H)(s,2,2,h,a),(0,g.o)(s[0]))return(0,g.g)(s[1])>=s[0].length?s[0].slice(0):s[0].slice(0,(0,g.g)(s[1]));if((0,g.q)(s[0]))return(0,g.g)(s[1])>=s[0].length()?s[0].slice(0):s[0].slice(0,(0,g.g)(s[1]));throw new p.aV(h,p.rH.InvalidParameter,a)})},w.functions.first=function(h,a){return w.standardFunction(h,a,(m,y,s)=>((0,g.H)(s,1,1,h,a),(0,g.o)(s[0])?0===s[0].length?null:s[0][0]:(0,g.q)(s[0])?0===s[0].length()?null:s[0].get(0):null))},"sync"===w.mode&&(w.functions.sort=function(h,a){return w.standardFunction(h,a,(m,y,s)=>D(h,y,s,!1))},w.functions.any=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{(0,g.H)(s,2,2,h,y);const f=s[1].createFunction(h),I=l(s[0],h,y);for(const M of I){const U=f(M);if((0,g.a)(U)&&!0===U)return!0}return!1})},w.functions.all=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{(0,g.H)(s,2,2,h,y);const f=s[1].createFunction(h),I=l(s[0],h,y);for(const M of I)if(!0!==f(M))return!1;return!0})},w.functions.none=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{(0,g.H)(s,2,2,h,y);const f=s[1].createFunction(h),I=l(s[0],h,y);for(const M of I)if(!0===f(M))return!1;return!0})},w.functions.reduce=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{(0,g.H)(s,2,3,h,y);const f=s[1].createFunction(h),I=l(s[0],h,y);return 2===s.length?0===I.length?null:I.reduce((M,U)=>{const G=f(M,U);return void 0!==G&&G!==g.B?G:null}):I.reduce((M,U)=>{const G=f(M,U);return void 0!==G&&G!==g.B?G:null},s[2])})},w.functions.map=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{(0,g.H)(s,2,2,h,y);const f=s[1].createFunction(h),I=l(s[0],h,y),M=[];for(const U of I){const G=f(U);M.push(void 0!==G&&G!==g.B?G:null)}return M})},w.functions.filter=function(h,a){return w.standardFunction(h,a,(m,y,s)=>{(0,g.H)(s,2,2,h,y);const f=s[1].createFunction(h),I=l(s[0],h,y),M=[];for(const U of I)!0===f(U)&&M.push(U);return M})}),"async"===w.mode&&(w.functions.sort=function(h,a){return w.standardFunctionAsync(h,a,function(){var m=(0,k.Z)(function*(y,s,f){return D(h,s,f,!0)});return function(y,s,f){return m.apply(this,arguments)}}())},w.functions.any=function(h,a){return w.standardFunctionAsync(h,a,function(){var m=(0,k.Z)(function*(y,s,f){(0,g.H)(f,2,2,h,s);const I=f[1].createFunction(h),M=l(f[0],h,s);for(const U of M){const G=yield I(U);let te=null;if(te=(0,E.y8)(te)?yield G:G,(0,g.a)(te)&&!0===te)return!0}return!1});return function(y,s,f){return m.apply(this,arguments)}}())},w.functions.all=function(h,a){return w.standardFunctionAsync(h,a,function(){var m=(0,k.Z)(function*(y,s,f){(0,g.H)(f,2,2,h,s);const I=f[1].createFunction(h),M=l(f[0],h,s);for(const U of M){const G=yield I(U);let te=null;if(te=(0,E.y8)(te)?yield G:G,!0!==te)return!1}return!0});return function(y,s,f){return m.apply(this,arguments)}}())},w.functions.none=function(h,a){return w.standardFunctionAsync(h,a,function(){var m=(0,k.Z)(function*(y,s,f){(0,g.H)(f,2,2,h,s);const I=f[1].createFunction(h),M=l(f[0],h,s);for(const U of M){const G=yield I(U);let te=null;if(te=(0,E.y8)(te)?yield G:G,!0===te)return!1}return!0});return function(y,s,f){return m.apply(this,arguments)}}())},w.functions.filter=function(h,a){return w.standardFunctionAsync(h,a,function(){var m=(0,k.Z)(function*(y,s,f){(0,g.H)(f,2,2,h,s);const I=f[1].createFunction(h),M=l(f[0],h,s),U=[];for(const G of M){const te=yield I(G);let ce=null;ce=(0,E.y8)(ce)?yield te:te,!0===ce&&U.push(G)}return U});return function(y,s,f){return m.apply(this,arguments)}}())},w.functions.reduce=function(h,a){return w.standardFunctionAsync(h,a,function(){var m=(0,k.Z)(function*(y,s,f){(0,g.H)(f,2,3,h,s);const I=f[1].createFunction(h),M=l(f[0],h,s);let U;if(f.length>2){const G=(0,g.K)(f[2],null);U=M.reduce(function(){var te=(0,k.Z)(function*(ce,de){let Fe=yield ce;return void 0!==Fe&&Fe!==g.B||(Fe=null),I(Fe,de)});return function(ce,de){return te.apply(this,arguments)}}(),Promise.resolve(G))}else{if(0===M.length)return null;U=M.reduce(function(){var G=(0,k.Z)(function*(te,ce,de){if(de<=1)return I(te,ce);let Fe=yield te;return void 0!==Fe&&Fe!==g.B||(Fe=null),I(Fe,ce)});return function(te,ce,de){return G.apply(this,arguments)}}())}return U.then(G=>void 0!==G&&G!==g.B?G:null)});return function(y,s,f){return m.apply(this,arguments)}}())},w.functions.map=function(h,a){return w.standardFunctionAsync(h,a,function(){var m=(0,k.Z)(function*(y,s,f){(0,g.H)(f,2,2,h,s);const I=f[1].createFunction(h),M=l(f[0],h,s),U=[];for(const G of M){const te=yield I(G);let ce=null;ce=(0,E.y8)(ce)?yield te:te,U.push(void 0!==ce&&ce!==g.B?ce:null)}return U});return function(y,s,f){return m.apply(this,arguments)}}())})}},Symbol.toStringTag,{value:"Module"}))},89018:(Be,pe,_)=>{_.d(pe,{$:()=>re,A:()=>te,B:()=>de,C:()=>Fe,D:()=>Re,E:()=>Ft,F:()=>_t,G:()=>x,H:()=>yt,I:()=>at,J:()=>Ht,K:()=>P,L:()=>Ct,M:()=>Et,N:()=>le,O:()=>be,P:()=>oe,Q:()=>St,R:()=>Tt,S:()=>Qe,T:()=>W,U:()=>ct,V:()=>Ie,W:()=>Me,X:()=>lt,Y:()=>We,Z:()=>ue,_:()=>Ot,a:()=>Q,a0:()=>v,a1:()=>Le,a2:()=>ut,a3:()=>ft,a4:()=>mt,a5:()=>Te,b:()=>Ce,c:()=>se,d:()=>F,e:()=>q,f:()=>V,g:()=>we,h:()=>Oe,i:()=>Y,j:()=>et,k:()=>_e,l:()=>bt,m:()=>Ne,n:()=>He,o:()=>De,p:()=>Ge,q:()=>Ve,r:()=>Ze,s:()=>ke,t:()=>tt,u:()=>ve,v:()=>st,w:()=>$e,x:()=>ze,y:()=>Mt,z:()=>ce});var k=_(15861),L=_(11931),p=_(26152),H=_(93630),g=_(31816),E=_(53570),o=_(59243),R=_(29066),w=_(69103),l=_(85833),z=_(76961),T=_(51937),$=_(88781),ee=_(81429),K=_(26894),J=_(32184),D=_(12628),h=_(44107),a=_(5391),m=_(64222),y=_(43814),s=_(54746),f=_(40637),I=_(55829),M=_(25037);class U{constructor(C){this.value=C}}class G{constructor(C){this.value=C}}const te=G,ce=U,de={type:"VOID"},Fe={type:"BREAK"},Re={type:"CONTINUE"};function W(c,C,N){return""===C||null==C||C===N||C===N?c:c=c.split(C).join(N)}function Y(c){return c instanceof o.Rm}function X(c){return c instanceof g.P}function V(c){return!!(se(c)||Ce(c)||_e(c)||Ne(c)||He(c)||Q(c)||null===c||c===de||"number"==typeof c)}function P(c,C){return void 0===c?C:c}function oe(c){return null==c?"":De(c)||Ve(c)?"Array":_e(c)?"Date":He(c)?"Time":Ne(c)?"DateOnly":se(c)?"String":Q(c)?"Boolean":Ce(c)?"Number":"esri.arcade.Attachment"===c?.declaredClass?"Attachment":"esri.arcade.Portal"===c?.declaredClass?"Portal":"esri.arcade.Dictionary"===c?.declaredClass?"Dictionary":$e(c)?"KnowledgeGraph":c instanceof g.P?"Module":Ze(c)?"Feature":c instanceof h.Z?"Point":c instanceof a.Z?"Polygon":c instanceof m.Z?"Polyline":c instanceof D.Z?"Multipoint":c instanceof K.Z?"Extent":Y(c)?"Function":ve(c)?"FeatureSet":ke(c)?"FeatureSetCollection":c===de?"":"number"==typeof c&&isNaN(c)?"Number":"Unrecognized Type"}function se(c){return"string"==typeof c||c instanceof String}function Q(c){return"boolean"==typeof c}function Ce(c){return"number"==typeof c}function be(c){return"number"==typeof c&&isFinite(c)&&Math.floor(c)===c}function Ge(c){return c instanceof J.Z}function De(c){return Array.isArray(c)}function Ze(c){return"esri.arcade.Feature"===c?.arcadeDeclaredClass}function ve(c){return"esri.arcade.featureset.support.FeatureSet"===c?.declaredRootClass}function st(c){return"esri.arcade.Dictionary"===c?.declaredClass}function ke(c){return"esri.arcade.featureSetCollection"===c?.declaredRootClass}function $e(c){return"esri.rest.knowledgeGraph.KnowledgeGraph"===c?.declaredClass}function Ve(c){return c instanceof R.Z}function _e(c){return c instanceof H.iG}function Ne(c){return c instanceof $.u}function He(c){return c instanceof ee.n}function Dt(c){return null!=c&&"object"==typeof c}function Te(c){return c instanceof Date}function yt(c,C,N,ae,ie){if(c.length<C||c.length>N)throw new E.aV(ae,E.rH.WrongNumberOfParameters,ie)}function Tt(c){return c<0?-Math.round(-c):Math.round(c)}function vt(c,C){return isNaN(c)||null==C||""===C?c.toString():(C=W(C,"\u2030",""),C=W(C,"\xa4",""),(0,T.WU)(c,{pattern:C}))}function xt(c,C){return null==C||""===C?c.toISOString(!0):c.toFormat(St(C),{locale:(0,I.Kd)(),numberingSystem:"latn"})}function St(c,C=!1){c=c.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let N="";const ae=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const ie of c.match(ae)||[])switch(ie){case"D":N+="d";break;case"DD":N+="dd";break;case"DDD":N+="o";break;case"d":N+="c";break;case"ddd":N+="ccc";break;case"dddd":N+="cccc";break;case"M":N+="L";break;case"MM":N+="LL";break;case"MMM":N+="LLL";break;case"MMMM":N+="LLLL";break;case"YY":N+="yy";break;case"Y":case"YYYY":N+="yyyy";break;case"Q":N+="q";break;case"Z":N+="Z";break;case"ZZ":N+="ZZ";break;case"ZZZ":N+="ZZZ";break;case"ZZZZ":N+=C?"[ZZZZ]":"ZZZZ";break;case"ZZZZZ":N+=C?"[ZZZZZ]":"ZZZZZ";break;case"S":N+="'S'";break;case"SS":N+="'SS'";break;case"SSS":N+="u";break;case"A":case"a":N+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":N+=ie;break;default:ie.length>=2&&"["===ie.slice(0,1)&&"]"===ie.slice(-1)?N+=`'${ie.slice(1,-1)}'`:N+=`'${ie}'`}return N}function me(c,C,N){switch(N){case">":return c>C;case"<":return c<C;case">=":return c>=C;case"<=":return c<=C}return!1}function Ft(c,C,N){if(null===c){if(null===C||C===de)return me(null,null,N);if(Ce(C))return me(0,C,N);if(se(C)||Q(C))return me(0,we(C),N);if(_e(C))return me(0,C.toNumber(),N);if(He(C)||Ne(C))return me(c,C.toNumber(),N)}if(c===de){if(null===C||C===de)return me(null,null,N);if(Ce(C))return me(0,C,N);if(se(C)||Q(C))return me(0,we(C),N);if(_e(C))return me(0,C.toNumber(),N);if(He(C)||Ne(C))return me(c,C.toNumber(),N)}else if(Ce(c)){if(Ce(C))return me(c,C,N);if(Q(C))return me(c,we(C),N);if(null===C||C===de)return me(c,0,N);if(se(C))return me(c,we(C),N);if(_e(C)||He(C)||Ne(C))return me(c,C.toNumber(),N)}else if(se(c)){if(se(C))return me(et(c),et(C),N);if(_e(C)||He(C)||Ne(C))return me(we(c),C.toNumber(),N);if(Ce(C))return me(we(c),C,N);if(null===C||C===de)return me(we(c),0,N);if(Q(C))return me(we(c),we(C),N)}else if(_e(c)){if(_e(C))return c.timeZone!==C.timeZone&&(c.isUnknownTimeZone?c=H.iG.arcadeDateAndZoneToArcadeDate(c,C.timeZone):C.isUnknownTimeZone&&(C=H.iG.arcadeDateAndZoneToArcadeDate(C,c.timeZone))),me(c.toNumber(),C.toNumber(),N);if(null===C||C===de)return me(c.toNumber(),0,N);if(Ce(C))return me(c.toNumber(),C,N);if(Q(C)||se(C))return me(c.toNumber(),we(C),N);if(He(C))throw new E.aV(null,E.rH.CannotCompareDateAndTime,null);if(Ne(C))return me(c.toNumber(),C.toNumber(),N)}else if(Q(c)){if(Q(C))return me(c,C,N);if(Ce(C))return me(we(c),we(C),N);if(_e(C)||He(C)||Ne(C))return me(we(c),C.toNumber(),N);if(null===C||C===de)return me(we(c),0,N);if(se(C))return me(we(c),we(C),N)}else if(Ne(c)){if(_e(C))return me(c.toNumber(),C.toNumber(),N);if(null===C||C===de)return me(c.toNumber(),0,N);if(Ce(C))return me(c.toNumber(),C,N);if(Q(C)||se(C))return me(c.toNumber(),we(C),N);if(He(C))throw new E.aV(null,E.rH.CannotCompareDateAndTime,null);if(Ne(C))return me(c.toNumber(),C.toNumber(),N)}else if(He(c)){if(_e(C))throw new E.aV(null,E.rH.CannotCompareDateAndTime,null);if(null===C||C===de)return me(c.toNumber(),0,N);if(Ce(C))return me(c.toNumber(),C,N);if(Q(C)||se(C))return me(c.toNumber(),we(C),N);if(He(C))return me(c.toNumber(),C.toNumber(),N);if(Ne(C))throw new E.aV(null,E.rH.CannotCompareDateAndTime,null)}return!!_t(c,C)&&("<="===N||">="===N)}function _t(c,C){if(c===C||null===c&&C===de||null===C&&c===de)return!0;if(_e(c)&&_e(C)||He(c)&&He(C)||Ne(c)&&Ne(C))return c.equals(C);if(c instanceof w.Z||c instanceof l.Z)return c.equalityTest(C);if(c instanceof h.Z&&C instanceof h.Z){const N=c.cache._arcadeCacheId;if(null!=N)return N===C.cache._arcadeCacheId}return!!(Dt(c)&&Dt(C)&&(c._arcadeCacheId===C._arcadeCacheId&&null!=c._arcadeCacheId||c._underlyingGraphic===C._underlyingGraphic&&null!=c._underlyingGraphic))}function et(c,C){if(se(c))return c;if(null===c)return"";if(Ce(c))return vt(c,C);if(Q(c))return c.toString();if(_e(c))return xt(c,C);if(He(c)||Ne(c))return c.toFormat(C);if(c instanceof J.Z)return JSON.stringify(c.toJSON());if(De(c)){const N=[];for(let ae=0;ae<c.length;ae++)N[ae]=rt(c[ae]);return"["+N.join(",")+"]"}if(c instanceof R.Z){const N=[];for(let ae=0;ae<c.length();ae++)N[ae]=rt(c.get(ae));return"["+N.join(",")+"]"}return null!==c&&"object"==typeof c&&void 0!==c.castToText?c.castToText():Y(c)?"object, Function":c===de?"":X(c)?"object, Module":""}function Ot(c){const C=[];if(!De(c))return null;if(c instanceof R.Z){for(let N=0;N<c.length();N++)C[N]=we(c.get(N));return C}for(let N=0;N<c.length;N++)C[N]=we(c[N]);return C}function tt(c,C,N=!1){if(se(c))return c;if(null===c)return"";if(Ce(c))return vt(c,C);if(Q(c))return c.toString();if(_e(c))return xt(c,C);if(He(c)||Ne(c))return c.toFormat(C);if(c instanceof J.Z)return c instanceof K.Z?'{"xmin":'+c.xmin.toString()+',"ymin":'+c.ymin.toString()+","+(c.hasZ?'"zmin":'+c.zmin.toString()+",":"")+(c.hasM?'"mmin":'+c.mmin.toString()+",":"")+'"xmax":'+c.xmax.toString()+',"ymax":'+c.ymax.toString()+","+(c.hasZ?'"zmax":'+c.zmax.toString()+",":"")+(c.hasM?'"mmax":'+c.mmax.toString()+",":"")+'"spatialReference":'+Nt(c.spatialReference)+"}":Nt(c.toJSON(),(ae,ie)=>ae.key===ie.key?0:"spatialReference"===ae.key?1:"spatialReference"===ie.key||ae.key<ie.key?-1:ae.key>ie.key?1:0);if(De(c)){const ae=[];for(let ie=0;ie<c.length;ie++)ae[ie]=rt(c[ie],N);return"["+ae.join(",")+"]"}if(c instanceof R.Z){const ae=[];for(let ie=0;ie<c.length();ie++)ae[ie]=rt(c.get(ie),N);return"["+ae.join(",")+"]"}return null!==c&&"object"==typeof c&&void 0!==c.castToText?c.castToText(N):Y(c)?"object, Function":c===de?"":X(c)?"object, Module":""}function rt(c,C=!1){if(null===c)return"null";if(Q(c)||Ce(c)||se(c))return JSON.stringify(c);if(c instanceof J.Z||c instanceof R.Z||Array.isArray(c))return tt(c,null,C);if(_e(c))return JSON.stringify(C?c.getTime():xt(c,""));if(He(c)||Ne(c))return JSON.stringify(c.toString());if(null!==c&&"object"==typeof c){if(void 0!==c.castToText)return c.castToText(C)}else if(c===de)return"null";return"null"}function we(c,C){return Ce(c)?c:null===c||""===c?0:_e(c)||Ne(c)||He(c)?NaN:Q(c)?c?1:0:De(c)||""===c||void 0===c?NaN:void 0!==C&&se(c)?(C=W(C,"\u2030",""),C=W(C,"\xa4",""),(0,T.Qc)(c,{pattern:C})):c===de?0:Number(c)}function bt(c,C){if(_e(c))return c;if(se(c)){const N=function Pt(c,C){const N=/ (\d\d)/,ae=(0,H.Qn)(C);let ie=M.ou.fromISO(c,{zone:ae});return ie.isValid||N.test(c)&&(c=c.replace(N,"T$1"),ie=M.ou.fromISO(c,{zone:C}),ie.isValid)?ie:null}(c,C);if(N)return H.iG.dateTimeToArcadeDate(N)}return null}function Oe(c){return Q(c)?c:se(c)?"true"===(c=c.toLowerCase()):!!Ce(c)&&0!==c&&!isNaN(c)}function ze(c,C){return null==c?null:(null!=c.spatialReference||(c.spatialReference=C),c)}function Qe(c){if(null===c)return null;if(c instanceof h.Z)return"NaN"===c.x||null===c.x||isNaN(c.x)?null:c;if(c instanceof a.Z){if(0===c.rings.length)return null;for(const C of c.rings)if(C.length>0)return c;return null}if(c instanceof m.Z){if(0===c.paths.length)return null;for(const C of c.paths)if(C.length>0)return c;return null}return c instanceof D.Z?0===c.points.length?null:c:c instanceof K.Z?"NaN"===c.xmin||null===c.xmin||isNaN(c.xmin)?null:c:null}function ft(c,C){if(!c||!c.domain)return C;let N=null,ae=null;if(_e(C))N=C.toNumber();else if(Ne(C))N=C.toString();else if(He(C))N=C.toStorageString();else if("string"===c.field.type||"esriFieldTypeString"===c.field.type)N=et(C);else{if(null==C)return null;if(""===C)return C;N=we(C)}for(let ie=0;ie<c.domain.codedValues.length;ie++){const Ae=c.domain.codedValues[ie];Ae.code===N&&(ae=Ae)}return null===ae?et(C):ae.name}function mt(c,C){if(!c||!c.domain)return C;let N=null;const ae=et(C);for(let ie=0;ie<c.domain.codedValues.length;ie++){const Ae=c.domain.codedValues[ie];Ae.name===ae&&(N=Ae)}return null===N?C:N.code}function ut(c,C,N=null,ae=null){if(!C||!C.fields)return null;let ie,Ae,Pe=null;for(let Ke=0;Ke<C.fields.length;Ke++){const nt=C.fields[Ke];nt.name.toLowerCase()===c.toString().toLowerCase()&&(Pe=nt)}if(null===Pe)throw new E.aV(null,E.rH.FieldNotFound,null,{key:c});let Se=C.typeIdField,Ue="id",je=C.types;if(C.subtypeField&&(Se=C.subtypeField,Ue="code",je=C.subtypes??[]),null===ae&&N&&Se)ae=N.hasField(Se)?N.field(Se):null;else if(Se&&null!==ae){let Ke=!1;for(const nt of je||[])if(ae===nt[Ue]){Ke=!0;break}if(!Ke)for(const nt of je||[])if(ae===nt.name){ae=nt[Ue],Ke=!0;break}Ke||(ae=null,N&&Se&&(ae=N.hasField(Se)?N.field(Se):null))}return null!=ae&&je.some(Ke=>Ke[Ue]===ae&&(ie=Ke.domains?.[Pe.name],ie&&"inherited"===ie.type&&(ie=It(Pe.name,C),Ae=!0),!0)),Ae||ie||(ie=It(c,C)),{field:Pe,domain:ie}}function It(c,C){let N;return C.fields.some(ae=>(ae.name.toLowerCase()===c.toLowerCase()&&(N=ae.domain),!!N)),N}function Nt(c,C){C||(C={}),"function"==typeof C&&(C={cmp:C});const N="boolean"==typeof C.cycles&&C.cycles,ae=C.cmp&&(ie=C.cmp,function(Pe){return function(Se,Ue){return ie({key:Se,value:Pe[Se]},{key:Ue,value:Pe[Ue]})}});var ie;const Ae=[];return function Pe(Se){if(Se?.toJSON&&"function"==typeof Se.toJSON&&(Se=Se.toJSON()),void 0===Se)return;if("number"==typeof Se)return isFinite(Se)?""+Se:"null";if("object"!=typeof Se)return JSON.stringify(Se);let Ue,je;if(Array.isArray(Se)){for(je="[",Ue=0;Ue<Se.length;Ue++)Ue&&(je+=","),je+=Pe(Se[Ue])||"null";return je+"]"}if(null===Se)return"null";if(Ae.includes(Se)){if(N)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const Ke=Ae.push(Se)-1,nt=Object.keys(Se).sort(ae?.(Se));for(je="",Ue=0;Ue<nt.length;Ue++){const Vt=nt[Ue],Zt=Pe(Se[Vt]);Zt&&(je&&(je+=","),je+=JSON.stringify(Vt)+":"+Zt)}return Ae.splice(Ke,1),"{"+je+"}"}(c)}function at(c){if(null===c)return null;const C=[];for(const N of c)C.push(N?.arcadeDeclaredClass&&"esri.arcade.Feature"===N.arcadeDeclaredClass?N.geometry():N);return C}function pt(c,C){if(!(C instanceof h.Z))throw new E.aV(null,E.rH.InvalidParameter,null);c.push(C.hasZ?C.hasM?[C.x,C.y,C.z,C.m]:[C.x,C.y,C.z]:[C.x,C.y])}function Ht(c,C){if(De(c)||Ve(c)){let N=!1,ae=!1,ie=[],Ae=C;if(De(c)){for(const Pe of c)pt(ie,Pe);ie.length>0&&(Ae=c[0].spatialReference,N=c[0].hasZ,ae=c[0].hasM)}else if(c instanceof l.Z)ie=c._elements,ie.length>0&&(N=c._hasZ,ae=c._hasM,Ae=c.get(0).spatialReference);else{if(!Ve(c))throw new E.aV(null,E.rH.InvalidParameter,null);for(const Pe of c.toArray())pt(ie,Pe);ie.length>0&&(Ae=c.get(0).spatialReference,N=!0===c.get(0).hasZ,ae=!0===c.get(0).hasM)}return 0===ie.length?null:((0,s.bu)(ie)||(ie=ie.slice(0).reverse()),new a.Z({rings:[ie],spatialReference:Ae,hasZ:N,hasM:ae}))}return c}function Ct(c,C){if(De(c)||Ve(c)){let N=!1,ae=!1,ie=[],Ae=C;if(De(c)){for(const Pe of c)pt(ie,Pe);ie.length>0&&(Ae=c[0].spatialReference,N=!0===c[0].hasZ,ae=!0===c[0].hasM)}else if(c instanceof l.Z)ie=c._elements,ie.length>0&&(N=c._hasZ,ae=c._hasM,Ae=c.get(0).spatialReference);else if(Ve(c)){for(const Pe of c.toArray())pt(ie,Pe);ie.length>0&&(Ae=c.get(0).spatialReference,N=!0===c.get(0).hasZ,ae=!0===c.get(0).hasM)}return 0===ie.length?null:new m.Z({paths:[ie],spatialReference:Ae,hasZ:N,hasM:ae})}return c}function Et(c,C){if(De(c)||Ve(c)){let N=!1,ae=!1,ie=[],Ae=C;if(De(c)){for(const Pe of c)pt(ie,Pe);ie.length>0&&(Ae=c[0].spatialReference,N=!0===c[0].hasZ,ae=!0===c[0].hasM)}else if(c instanceof l.Z)ie=c._elements,ie.length>0&&(N=c._hasZ,ae=c._hasM,Ae=c.get(0).spatialReference);else if(Ve(c)){for(const Pe of c.toArray())pt(ie,Pe);ie.length>0&&(Ae=c.get(0).spatialReference,N=!0===c.get(0).hasZ,ae=!0===c.get(0).hasM)}return 0===ie.length?null:new D.Z({points:ie,spatialReference:Ae,hasZ:N,hasM:ae})}return c}function Le(c,C=!1){const N=[];if(null===c)return N;if(!0===De(c)){for(let ae=0;ae<c.length;ae++){const ie=et(c[ae]);""===ie&&!0!==C||N.push(ie)}return N}if(c instanceof R.Z){for(let ae=0;ae<c.length();ae++){const ie=et(c.get(ae));""===ie&&!0!==C||N.push(ie)}return N}if(V(c)){const ae=et(c);return""===ae&&!0!==C||N.push(ae),N}return[]}let At=0;function v(c){return At++,At%100==0?(At=0,new Promise(C=>{setTimeout(()=>{C(c)},0)})):c}function x(c,C,N){switch(N){case"&":return c&C;case"|":return c|C;case"^":return c^C;case"<<":return c<<C;case">>":return c>>C;case">>>":return c>>>C}}function F(c,C=null){return null==c?null:Q(c)||Ce(c)||se(c)?c:c instanceof J.Z?!0===C?.keepGeometryType?c:c.toJSON():c instanceof R.Z?c.toArray().map(N=>F(N,C)):Array.isArray(c)?c.map(N=>F(N,C)):Te(c)?c:_e(c)?c.toJSDate():He(c)?c.toString():Ne(c)?c.toJSDate():null!==c&&"object"==typeof c&&void 0!==c.castAsJson?c.castAsJson(C):null}function S(c,C,N,ae,ie){return j.apply(this,arguments)}function j(){return(j=(0,k.Z)(function*(c,C,N,ae,ie){const Ae=yield q(c,C,N);ie[ae]=Ae})).apply(this,arguments)}function q(c){return b.apply(this,arguments)}function b(){return(b=(0,k.Z)(function*(c,C=null,N=null){if(c instanceof R.Z&&(c=c.toArray()),null==c)return null;if(V(c)||c instanceof J.Z||Te(c)||_e(c))return F(c,N);if(Array.isArray(c)){const ae=[],ie=[];for(const Ae of c)null===Ae||V(Ae)||Ae instanceof J.Z||Te(Ae)||_e(Ae)?ie.push(F(Ae,N)):(ie.push(null),ae.push(S(Ae,C,N,ie.length-1,ie)));return ae.length>0&&(yield Promise.all(ae)),ie}return null!==c&&"object"==typeof c&&void 0!==c.castAsJsonAsync?c.castAsJsonAsync(C,N):null})).apply(this,arguments)}function B(c){return re(c)?c.parent:c}function re(c){return c&&"declaredClass"in c&&"esri.layers.support.SubtypeSublayer"===c.declaredClass}function Me(c,C,N){const ae=B(c.fullSchema());return null!==ae&&ae.fields?ut(C,ae,c,N):null}function Ie(c){const C=B(c.fullSchema());return null===C?null:C.fields?C.subtypeField?{subtypeField:C.subtypeField,subtypes:C.subtypes?C.subtypes.map(N=>({name:N.name,code:N.code})):[]}:C.typeIdField?{subtypeField:C.typeIdField,subtypes:C.types?C.types.map(N=>({name:N.name,code:N.id})):[]}:null:null}function lt(c,C,N,ae){const ie=B(c.fullSchema());if(null===ie||!ie.fields)return null;const Ae=ut(C,ie,c,ae);if(void 0===N)try{N=c.field(C)}catch{return null}return ft(Ae,N)}function We(c,C,N,ae){const ie=B(c.fullSchema());if(null===ie||!ie.fields)return null;if(void 0===N){try{N=c.field(C)}catch{return null}return N}return mt(ut(C,ie,c,ae),N)}function le(c){return c?.timeZone??"system"}function ct(c){const C=B(c.fullSchema());if(null===C||!C.fields)return null;const N=[];for(const ae of C.fields)N.push((0,z.Sh)(ae));return{objectIdField:C.objectIdField,globalIdField:C.globalIdField??"",geometryType:void 0===z.q2[C.geometryType]?"":z.q2[C.geometryType],fields:N}}function ue(c,C){return"system"===c&&(c=H.iG.systemTimeZoneCanonicalName),{version:Rt,engineVersion:p.i8,timeZone:c,spatialReference:C instanceof y.Z?C.toJSON():C,application:L.default.applicationName??"",engine:"web",locale:(0,I.Kd)()}}const Rt="1.24",Mt=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResultE:G,ReturnResultE:U,absRound:Tt,arcadeVersion:Rt,autoCastArrayOfPointsToMultiPoint:Et,autoCastArrayOfPointsToPolygon:Ht,autoCastArrayOfPointsToPolyline:Ct,autoCastFeatureToGeometry:at,binaryOperator:x,breakResult:Fe,castAsJson:F,castAsJsonAsync:q,continueResult:Re,defaultExecutingContext:ue,defaultTimeZone:le,defaultUndefined:P,equalityTest:_t,featureDomainCodeLookup:We,featureDomainValueLookup:lt,featureFullDomain:Me,featureSchema:ct,featureSubtypes:Ie,fixNullGeometry:Qe,fixSpatialReference:ze,formatDate:xt,formatNumber:vt,getDomain:ut,getDomainCode:mt,getDomainValue:ft,getType:oe,greaterThanLessThan:Ft,implicitResult:te,isArray:De,isBoolean:Q,isDate:_e,isDateOnly:Ne,isDictionary:st,isFeature:Ze,isFeatureSet:ve,isFeatureSetCollection:ke,isFunctionParameter:Y,isGeometry:Ge,isImmutableArray:Ve,isInteger:be,isJsDate:Te,isKnowledgeGraph:$e,isModule:X,isNumber:Ce,isObject:Dt,isSimpleType:V,isString:se,isSubtypeGrouplayer:function he(c){return c&&"declaredClass"in c&&"esri.layers.SubtypeGroupLayer"===c.declaredClass},isSubtypeSublayer:re,isTime:He,multiReplace:W,parseGeometryFromJson:function Ye(c,C){const N=JSON.parse(c);return N&&!N.spatialReference&&(N.spatialReference=C),(0,f.im)(N)},pcCheck:yt,returnResult:ce,stableStringify:Nt,standardiseDateFormat:St,tick:v,toBoolean:Oe,toDate:bt,toNumber:we,toNumberArray:Ot,toString:et,toStringArray:Le,toStringExplicit:tt,voidOperation:de},Symbol.toStringTag,{value:"Module"}))},15398:(Be,pe,_)=>{_.d(pe,{A4:()=>p,L9:()=>H,yV:()=>L});var k=_(25037);class L{}function p(E){return E instanceof k.ld?E===L.instance:"unknown"===E?.toString().toLowerCase()}function H(E){return p(E)?L.instance:E}L.instance=new k.vF("Etc/UTC")},40100:(Be,pe,_)=>{_.d(pe,{Z:()=>$});var k=_(57964),L=_(89317),p=_(4703),H=_(8611),g=_(15398),E=_(85295),o=_(764),R=_(25037);const T=new Map;class ${static fromJSON(a){return new $(a.fields,a.timeZoneByFieldName)}static fromLayer(a){return new $(a.fields??[],D(a))}static fromLayerJSON(a){return new $(a.fields??[],D(a))}constructor(a=[],m){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=a||[],this._timeZoneByFieldName=m?new Map(m):null;const y=[];for(const s of this.fields){const f=s?.name,I=K(f);if(f&&I){const M=ee(f);this._fieldsMap.set(f,s),this._fieldsMap.set(M,s),this._normalizedFieldsMap.set(I,s),y.push(`${M}:${s.type}:${this._timeZoneByFieldName?.get(f)}`),(0,E.y2)(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):(0,E.H7)(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),(0,E.Dl)(s)||(0,E.Se)(s)||(s.editable=null==s.editable||!!s.editable,s.nullable=null==s.nullable||!!s.nullable)}}y.sort(),this.uid=y.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const a of this.fields)(0,E.Dl)(a)||(0,E.Se)(a)||a.nullable||void 0!==(0,E.os)(a)||this._requiredFields.push(a)}return this._requiredFields}equals(a){return this.uid===a?.uid}has(a){return null!=this.get(a)}get(a){if(!a)return;let m=this._fieldsMap.get(a);return m||(m=this._fieldsMap.get(ee(a))??this._normalizedFieldsMap.get(K(a)),m&&this._fieldsMap.set(a,m),m)}getTimeZone(a){const m=this.get(a&&"string"!=typeof a?a.name:a);return m?this._timeZoneByFieldName?this._timeZoneByFieldName.get(m.name):"date"===m.type||"esriFieldTypeDate"===m.type?(p.Z.getLogger("esri.layers.support.FieldsIndex").error(new k.Z("getTimeZone:no-timezone-information",`no time zone information for field '${m.name}'`)),o.pt):J.has(m.type)?o._4:null:null}getLuxonTimeZone(a){const m=this.getTimeZone(a);return m?m===o._4?g.yV.instance:m===o.pt?R.Qf.utcInstance:(0,H.s1)(T,m,()=>R.vF.create(m)):null}isDateField(a){return this._dateFieldsSet.has(this.get(a))}isTimeOnlyField(a){return(0,E.sX)(this.get(a))}isNumericField(a){return this._numericFieldsSet.has(this.get(a))}normalizeFieldName(a){return this.get(a)?.name??void 0}toJSON(){return{fields:this.fields.map(a=>(0,L.AK)(a)?a.toJSON():a),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function ee(h){return h.trim().toLowerCase()}function K(h){return(0,E.q6)(h)?.toLowerCase()??""}const J=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function D(h){const a=new Map;if(!h.fields)return a;const m=!0===h.datesInUnknownTimezone,{timeInfo:y,editFieldsInfo:s}=h,f=(y?"startField"in y?y.startField:y.startTimeField:"")??"",I=(y?"endField"in y?y.endField:y.endTimeField:"")??"",M=function z(h){return"dateFieldsTimeZone"in h}(h)?h.dateFieldsTimeZone??null:h.dateFieldsTimeReference?(0,o.Jv)(h.dateFieldsTimeReference):null,U=s?function w(h){return"timeZone"in h}(s)?s.timeZone??M:s.dateFieldsTimeReference?(0,o.Jv)(s.dateFieldsTimeReference):M??o.pt:null,G=y?function l(h){return"timeZone"in h}(y)?y.timeZone??M:y.timeReference?(0,o.Jv)(y.timeReference):M:null,te=new Map([[ee(s?.creationDateField??""),U],[ee(s?.editDateField??""),U],[ee(f),G],[ee(I),G]]);for(const{name:ce,type:de}of h.fields)if(J.has(de))a.set(ce,o._4);else if("date"!==de&&"esriFieldTypeDate"!==de)a.set(ce,null);else if(m)a.set(ce,o._4);else{const Fe=te.get(ee(ce??""))??M;a.set(ce,Fe)}return a}},57027:(Be,pe,_)=>{_.r(pe),_.d(pe,{Dictionary:()=>E.Z,arcade:()=>Hr,arcadeFeature:()=>R.Z,convertFeatureLayerToFeatureSet:()=>ti,convertJsonToArcade:()=>ri,convertMapToFeatureSetCollection:()=>ni,convertServiceUrlToWorkspace:()=>ei,createExecContext:()=>Gr,createFeature:()=>zr,createFunction:()=>jr,createSyntaxTree:()=>Ut,dependsOnView:()=>Qr,enableFeatureSetOperations:()=>si,enableGeometryOperations:()=>ai,evalSyntaxTree:()=>Wr,executeAsyncFunction:()=>$r,executeFunction:()=>Jr,extractFieldNames:()=>Yr,getArcadeType:()=>Vr,getViewInfo:()=>qr,hasGeometryFunctions:()=>di,hasGeometryOperations:()=>fi,hasVariable:()=>Xr,loadScriptDependencies:()=>ii,updateExecContext:()=>Kr}),_(2189);var L=_(15861),p=_(31816),H=_(66224),g=_(33692),E=_(70430),o=_(53570),R=_(860),w=_(59243),l=_(89018),z=_(42442),T=_(16049),$=_(26484),ee=_(96479),K=_(26152),J=_(25137),D=_(29673),h=_(93530),a=_(49602),m=_(26894),y=_(32184),s=_(12628),f=_(44107),I=_(5391),M=_(64222),U=_(40637);let G=null;function te(t){return 0===K.i8.indexOf("4.")?I.Z.fromExtent(t):new I.Z({spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})}function de(t,n){if("polygon"!==t.type&&"polyline"!==t.type&&"extent"!==t.type)return 0;let r=1;(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(r=(0,D._R)(t.spatialReference)/(0,a.c9)(t.spatialReference));let i=0;if("polyline"===t.type)for(const A of t.paths)for(let O=1;O<A.length;O++)i+=(0,D.AW)(A[O],A[O-1],r);else if("polygon"===t.type)for(const A of t.rings){for(let O=1;O<A.length;O++)i+=(0,D.AW)(A[O],A[O-1],r);(A[0][0]!==A[A.length-1][0]||A[0][1]!==A[A.length-1][1]||void 0!==A[0][2]&&A[0][2]!==A[A.length-1][2])&&(i+=(0,D.AW)(A[0],A[A.length-1],r))}else"extent"===t.type&&(i+=2*(0,D.AW)([t.xmin,t.ymin,0],[t.xmax,t.ymin,0],r),i+=2*(0,D.AW)([t.xmin,t.ymin,0],[t.xmin,t.ymax,0],r),i*=2,i+=4*Math.abs((0,l.K)(t.zmax,0)*r-(0,l.K)(t.zmin,0)*r));const u=new M.Z({hasZ:!1,hasM:!1,spatialReference:t.spatialReference,paths:[[0,0],[0,i]]});return G.planarLength(u,n)}function Fe(t,n){function r(i,u,A){if((0,l.H)(A,2,2,i,u),!(A[0]instanceof y.Z&&A[1]instanceof y.Z||A[0]instanceof y.Z&&null===A[1]||A[1]instanceof y.Z&&null===A[0]||null===A[0]&&null===A[1]))throw new o.aV(i,o.rH.InvalidParameter,u)}t.disjoint=function(i,u){return n(i,u,(A,O,d)=>(d=(0,l.I)(d),r(i,u,d),null===d[0]||null===d[1]||G.disjoint(d[0],d[1])))},t.intersects=function(i,u){return n(i,u,(A,O,d)=>(d=(0,l.I)(d),r(i,u,d),null!==d[0]&&null!==d[1]&&G.intersects(d[0],d[1])))},t.touches=function(i,u){return n(i,u,(A,O,d)=>(d=(0,l.I)(d),r(i,u,d),null!==d[0]&&null!==d[1]&&G.touches(d[0],d[1])))},t.crosses=function(i,u){return n(i,u,(A,O,d)=>(d=(0,l.I)(d),r(i,u,d),null!==d[0]&&null!==d[1]&&G.crosses(d[0],d[1])))},t.within=function(i,u){return n(i,u,(A,O,d)=>(d=(0,l.I)(d),r(i,u,d),null!==d[0]&&null!==d[1]&&G.within(d[0],d[1])))},t.contains=function(i,u){return n(i,u,(A,O,d)=>(d=(0,l.I)(d),r(i,u,d),null!==d[0]&&null!==d[1]&&G.contains(d[0],d[1])))},t.overlaps=function(i,u){return n(i,u,(A,O,d)=>(d=(0,l.I)(d),r(i,u,d),null!==d[0]&&null!==d[1]&&G.overlaps(d[0],d[1])))},t.equals=function(i,u){return n(i,u,(A,O,d)=>((0,l.H)(d,2,2,i,u),d[0]===d[1]||(d[0]instanceof y.Z&&d[1]instanceof y.Z?G.equals(d[0],d[1]):((0,l.k)(d[0])&&(0,l.k)(d[1])||(0,l.n)(d[0])&&(0,l.n)(d[1])||!(!(0,l.m)(d[0])||!(0,l.m)(d[1])))&&d[0].equals(d[1]))))},t.relate=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,3,3,i,u),d[0]instanceof y.Z&&d[1]instanceof y.Z)return G.relate(d[0],d[1],(0,l.j)(d[2]));if(d[0]instanceof y.Z&&null===d[1]||d[1]instanceof y.Z&&null===d[0]||null===d[0]&&null===d[1])return!1;throw new o.aV(i,o.rH.InvalidParameter,u)})},t.intersection=function(i,u){return n(i,u,(A,O,d)=>(d=(0,l.I)(d),r(i,u,d),null===d[0]||null===d[1]?null:G.intersect(d[0],d[1])))},t.union=function(i,u){return n(i,u,(A,O,d)=>{const Z=[];if(0===(d=(0,l.I)(d)).length)throw new o.aV(i,o.rH.WrongNumberOfParameters,u);if(1===d.length)if((0,l.o)(d[0])){const ne=(0,l.I)(d[0]);for(let ge=0;ge<ne.length;ge++)if(null!==ne[ge]){if(!(ne[ge]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);Z.push(ne[ge])}}else{if(!(0,l.q)(d[0])){if(d[0]instanceof y.Z)return(0,l.x)((0,J.r1)(d[0]),i.spatialReference);if(null===d[0])return null;throw new o.aV(i,o.rH.InvalidParameter,u)}{const ne=(0,l.I)(d[0].toArray());for(let ge=0;ge<ne.length;ge++)if(null!==ne[ge]){if(!(ne[ge]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);Z.push(ne[ge])}}}else for(let ne=0;ne<d.length;ne++)if(null!==d[ne]){if(!(d[ne]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);Z.push(d[ne])}return 0===Z.length?null:G.union(Z)})},t.difference=function(i,u){return n(i,u,(A,O,d)=>(d=(0,l.I)(d),r(i,u,d),null===d[0]?null:null===d[1]?(0,J.r1)(d[0]):G.difference(d[0],d[1])))},t.symmetricdifference=function(i,u){return n(i,u,(A,O,d)=>(d=(0,l.I)(d),r(i,u,d),null===d[0]&&null===d[1]?null:null===d[0]?(0,J.r1)(d[1]):null===d[1]?(0,J.r1)(d[0]):G.symmetricDifference(d[0],d[1])))},t.clip=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,2,i,u),!(d[1]instanceof m.Z)&&null!==d[1])throw new o.aV(i,o.rH.InvalidParameter,u);if(null===d[0])return null;if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);return null===d[1]?null:G.clip(d[0],d[1])})},t.cut=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,2,i,u),!(d[1]instanceof M.Z)&&null!==d[1])throw new o.aV(i,o.rH.InvalidParameter,u);if(null===d[0])return[];if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);return null===d[1]?[(0,J.r1)(d[0])]:G.cut(d[0],d[1])})},t.area=function(i,u){return n(i,u,(A,O,d)=>{if((0,l.H)(d,1,2,i,u),null===(d=(0,l.I)(d))[0])return 0;if((0,l.o)(d[0])||(0,l.q)(d[0])){const Z=(0,l.J)(d[0],i.spatialReference);return null===Z?0:G.planarArea(Z,(0,J.EI)((0,l.K)(d[1],-1)))}if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);return G.planarArea(d[0],(0,J.EI)((0,l.K)(d[1],-1)))})},t.areageodetic=function(i,u){return n(i,u,(A,O,d)=>{if((0,l.H)(d,1,2,i,u),null===(d=(0,l.I)(d))[0])return 0;if((0,l.o)(d[0])||(0,l.q)(d[0])){const Z=(0,l.J)(d[0],i.spatialReference);return null===Z?0:G.geodesicArea(Z,(0,J.EI)((0,l.K)(d[1],-1)))}if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);return G.geodesicArea(d[0],(0,J.EI)((0,l.K)(d[1],-1)))})},t.length=function(i,u){return n(i,u,(A,O,d)=>{if((0,l.H)(d,1,2,i,u),null===(d=(0,l.I)(d))[0])return 0;if((0,l.o)(d[0])||(0,l.q)(d[0])){const Z=(0,l.L)(d[0],i.spatialReference);return null===Z?0:G.planarLength(Z,(0,J.Lz)((0,l.K)(d[1],-1)))}if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);return G.planarLength(d[0],(0,J.Lz)((0,l.K)(d[1],-1)))})},t.length3d=function(i,u){return n(i,u,(A,O,d)=>{if((0,l.H)(d,1,2,i,u),null===(d=(0,l.I)(d))[0])return 0;if((0,l.o)(d[0])||(0,l.q)(d[0])){const Z=(0,l.L)(d[0],i.spatialReference);return null===Z?0:!0===Z.hasZ?de(Z,(0,J.Lz)((0,l.K)(d[1],-1))):G.planarLength(Z,(0,J.Lz)((0,l.K)(d[1],-1)))}if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);return!0===d[0].hasZ?de(d[0],(0,J.Lz)((0,l.K)(d[1],-1))):G.planarLength(d[0],(0,J.Lz)((0,l.K)(d[1],-1)))})},t.lengthgeodetic=function(i,u){return n(i,u,(A,O,d)=>{if((0,l.H)(d,1,2,i,u),null===(d=(0,l.I)(d))[0])return 0;if((0,l.o)(d[0])||(0,l.q)(d[0])){const Z=(0,l.L)(d[0],i.spatialReference);return null===Z?0:G.geodesicLength(Z,(0,J.Lz)((0,l.K)(d[1],-1)))}if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);return G.geodesicLength(d[0],(0,J.Lz)((0,l.K)(d[1],-1)))})},t.distance=function(i,u){return n(i,u,(A,O,d)=>{d=(0,l.I)(d),(0,l.H)(d,2,3,i,u);let Z=d[0];((0,l.o)(d[0])||(0,l.q)(d[0]))&&(Z=(0,l.M)(d[0],i.spatialReference));let ne=d[1];if(((0,l.o)(d[1])||(0,l.q)(d[1]))&&(ne=(0,l.M)(d[1],i.spatialReference)),!(Z instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);if(!(ne instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);return G.distance(Z,ne,(0,J.Lz)((0,l.K)(d[2],-1)))})},t.distancegeodetic=function(i,u){return n(i,u,(A,O,d)=>{d=(0,l.I)(d),(0,l.H)(d,2,3,i,u);const Z=d[0],ne=d[1];if(!(Z instanceof f.Z))throw new o.aV(i,o.rH.InvalidParameter,u);if(!(ne instanceof f.Z))throw new o.aV(i,o.rH.InvalidParameter,u);const ge=new M.Z({paths:[],spatialReference:Z.spatialReference});return ge.addPath([Z,ne]),G.geodesicLength(ge,(0,J.Lz)((0,l.K)(d[2],-1)))})},t.densify=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,3,i,u),null===d[0])return null;if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);const Z=(0,l.g)(d[1]);if(isNaN(Z))throw new o.aV(i,o.rH.InvalidParameter,u);if(Z<=0)throw new o.aV(i,o.rH.InvalidParameter,u);return d[0]instanceof I.Z||d[0]instanceof M.Z?G.densify(d[0],Z,(0,J.Lz)((0,l.K)(d[2],-1))):d[0]instanceof m.Z?G.densify(te(d[0]),Z,(0,J.Lz)((0,l.K)(d[2],-1))):d[0]})},t.densifygeodetic=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,3,i,u),null===d[0])return null;if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);const Z=(0,l.g)(d[1]);if(isNaN(Z))throw new o.aV(i,o.rH.InvalidParameter,u);if(Z<=0)throw new o.aV(i,o.rH.InvalidParameter,u);return d[0]instanceof I.Z||d[0]instanceof M.Z?G.geodesicDensify(d[0],Z,(0,J.Lz)((0,l.K)(d[2],-1))):d[0]instanceof m.Z?G.geodesicDensify(te(d[0]),Z,(0,J.Lz)((0,l.K)(d[2],-1))):d[0]})},t.generalize=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,4,i,u),null===d[0])return null;if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);const Z=(0,l.g)(d[1]);if(isNaN(Z))throw new o.aV(i,o.rH.InvalidParameter,u);return G.generalize(d[0],Z,(0,l.h)((0,l.K)(d[2],!0)),(0,J.Lz)((0,l.K)(d[3],-1)))})},t.buffer=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,3,i,u),null===d[0])return null;if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);const Z=(0,l.g)(d[1]);if(isNaN(Z))throw new o.aV(i,o.rH.InvalidParameter,u);return 0===Z?(0,J.r1)(d[0]):G.buffer(d[0],Z,(0,J.Lz)((0,l.K)(d[2],-1)))})},t.buffergeodetic=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,3,i,u),null===d[0])return null;if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);const Z=(0,l.g)(d[1]);if(isNaN(Z))throw new o.aV(i,o.rH.InvalidParameter,u);return 0===Z?(0,J.r1)(d[0]):G.geodesicBuffer(d[0],Z,(0,J.Lz)((0,l.K)(d[2],-1)))})},t.offset=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,6,i,u),null===d[0])return null;if(!(d[0]instanceof I.Z||d[0]instanceof M.Z))throw new o.aV(i,o.rH.InvalidParameter,u);const Z=(0,l.g)(d[1]);if(isNaN(Z))throw new o.aV(i,o.rH.InvalidParameter,u);const ne=(0,l.g)((0,l.K)(d[4],10));if(isNaN(ne))throw new o.aV(i,o.rH.InvalidParameter,u);const ge=(0,l.g)((0,l.K)(d[5],0));if(isNaN(ge))throw new o.aV(i,o.rH.InvalidParameter,u);return G.offset(d[0],Z,(0,J.Lz)((0,l.K)(d[2],-1)),(0,l.j)((0,l.K)(d[3],"round")).toLowerCase(),ne,ge)})},t.rotate=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,3,i,u),null===d[0])return null;if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);const Z=d[0]instanceof m.Z?I.Z.fromExtent(d[0]):d[0],ne=(0,l.g)(d[1]);if(isNaN(ne))throw new o.aV(i,o.rH.InvalidParameter,u);const ge=(0,l.K)(d[2],null);if(null===ge)return G.rotate(Z,ne);if(ge instanceof f.Z)return G.rotate(Z,ne,ge);throw new o.aV(i,o.rH.InvalidParameter,u)})},t.centroid=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,1,1,i,u),null===d[0])return null;let Z=d[0];if(((0,l.o)(d[0])||(0,l.q)(d[0]))&&(Z=(0,l.M)(d[0],i.spatialReference)),null===Z)return null;if(!(Z instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);return Z instanceof f.Z?(0,l.x)((0,J.r1)(Z),i.spatialReference):Z instanceof I.Z?Z.centroid:Z instanceof M.Z?(0,D.s9)(Z):Z instanceof s.Z?(0,D.Ay)(Z):Z instanceof m.Z?Z.center:null})},t.measuretocoordinate=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,2,i,u),null===d[0])return null;let Z=d[0];if(((0,l.o)(d[0])||(0,l.q)(d[0]))&&(Z=(0,l.L)(d[0],i.spatialReference)),null===Z)return null;if(!(Z instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);if(!(Z instanceof M.Z))throw new o.aV(i,o.rH.InvalidParameter,u);if((0,l.b)(!1===d[1]))throw new o.aV(i,o.rH.InvalidParameter,u);const ne=(0,h.Tv)(Z,d[1]);return ne?E.Z.convertObjectToArcadeDictionary(ne,(0,l.N)(i),!1,!0):null})},t.pointtocoordinate=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,2,i,u),null===d[0])return null;let Z=d[0];if(((0,l.o)(d[0])||(0,l.q)(d[0]))&&(Z=(0,l.L)(d[0],i.spatialReference)),null===Z)return null;if(!(Z instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);if(!(Z instanceof M.Z))throw new o.aV(i,o.rH.InvalidParameter,u);const ne=d[1];if(null===ne)return null;if(!(ne instanceof f.Z))throw new o.aV(i,o.rH.InvalidParameter,u);if((0,l.b)(!1===d[1]))throw new o.aV(i,o.rH.InvalidParameter,u);const ge=(0,h.zq)(Z,ne);return ge?E.Z.convertObjectToArcadeDictionary(ge,(0,l.N)(i),!1,!0):null})},t.distancetocoordinate=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,2,i,u),null===d[0])return null;let Z=d[0];if(((0,l.o)(d[0])||(0,l.q)(d[0]))&&(Z=(0,l.L)(d[0],i.spatialReference)),null===Z)return null;if(!(Z instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);if(!(Z instanceof M.Z))throw new o.aV(i,o.rH.InvalidParameter,u);if((0,l.b)(!1===d[1]))throw new o.aV(i,o.rH.InvalidParameter,u);const ne=(0,h.qt)(Z,d[1]);return ne?E.Z.convertObjectToArcadeDictionary(ne,(0,l.N)(i),!1,!0):null})},t.multiparttosinglepart=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,1,1,i,u),null===d[0])return null;if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);if(d[0]instanceof f.Z)return[(0,l.x)((0,J.r1)(d[0]),i.spatialReference)];if(d[0]instanceof m.Z)return[(0,l.x)((0,J.r1)(d[0]),i.spatialReference)];const Z=G.simplify(d[0]);if(Z instanceof I.Z){const ne=[],ge=[];for(let ye=0;ye<Z.rings.length;ye++)if(Z.isClockwise(Z.rings[ye])){const xe=(0,U.im)({rings:[Z.rings[ye]],hasZ:!0===Z.hasZ,hasM:!0===Z.hasM,spatialReference:Z.spatialReference.toJSON()});ne.push(xe)}else ge.push({ring:Z.rings[ye],pt:Z.getPoint(ye,0)});for(let ye=0;ye<ge.length;ye++)for(let xe=0;xe<ne.length;xe++)if(ne[xe].contains(ge[ye].pt)){ne[xe].addRing(ge[ye].ring);break}return ne}if(Z instanceof M.Z){const ne=[];for(let ge=0;ge<Z.paths.length;ge++){const ye=(0,U.im)({paths:[Z.paths[ge]],hasZ:!0===Z.hasZ,hasM:!0===Z.hasM,spatialReference:Z.spatialReference.toJSON()});ne.push(ye)}return ne}if(d[0]instanceof s.Z){const ne=[],ge=(0,l.x)((0,J.r1)(d[0]),i.spatialReference);for(let ye=0;ye<ge.points.length;ye++)ne.push(ge.getPoint(ye));return ne}return null})},t.issimple=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,1,1,i,u),null===d[0])return!0;if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);return G.isSimple(d[0])})},t.simplify=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,1,1,i,u),null===d[0])return null;if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);return G.simplify(d[0])})},t.convexhull=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,1,1,i,u),null===d[0])return null;if(!(d[0]instanceof y.Z))throw new o.aV(i,o.rH.InvalidParameter,u);return G.convexHull(d[0])})},t.nearestcoordinate=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,2,i,u),!(d[0]instanceof y.Z||null===d[0]))throw new o.aV(i,o.rH.InvalidParameter,u);if(!(d[1]instanceof f.Z||null===d[1]))throw new o.aV(i,o.rH.InvalidParameter,u);if(null===d[0]||null===d[1])return null;const Z=G.nearestCoordinate(d[0],d[1]);return null===Z||Z.isEmpty?null:E.Z.convertObjectToArcadeDictionary({coordinate:Z.coordinate,distance:Z.distance,sideOfLine:0===Z.distance?"straddle":Z.isRightSide?"right":"left"},(0,l.N)(i),!1,!0)})},t.nearestvertex=function(i,u){return n(i,u,(A,O,d)=>{if(d=(0,l.I)(d),(0,l.H)(d,2,2,i,u),!(d[0]instanceof y.Z||null===d[0]))throw new o.aV(i,o.rH.InvalidParameter,u);if(!(d[1]instanceof f.Z||null===d[1]))throw new o.aV(i,o.rH.InvalidParameter,u);if(null===d[0]||null===d[1])return null;const Z=G.nearestVertex(d[0],d[1]);return null===Z||Z.isEmpty?null:E.Z.convertObjectToArcadeDictionary({coordinate:Z.coordinate,distance:Z.distance,sideOfLine:0===Z.distance?"straddle":Z.isRightSide?"right":"left"},(0,l.N)(i),!1,!0)})}}var Re=_(89325),W=_(18780),Y=_(40801),X=_(79412),V=_(43814);function se(t,n,r){try{return r(t,null,n.arguments)}catch(i){throw i}}function Q(t,n){try{switch(n.type){case"EmptyStatement":return"lc.voidOperation";case"VariableDeclarator":return function vt(t,n){let r=null===n.init?null:Q(t,n.init);r===l.B&&(r=null);const i=n.id.name.toLowerCase();if(Te(i),null!==t.localScope){if(void 0!==t.localScope[i])return"lscope['"+i+"']="+r+"; ";if(void 0!==t.localScope._SymbolsMap[i])return"lscope['"+t.localScope._SymbolsMap[i]+"']="+r+"; ";{const A=Ye(t);return t.localScope._SymbolsMap[i]=A,t.mangleMap[i]=A,"lscope['"+A+"']="+r+"; "}}if(void 0!==t.globalScope[i])return"gscope['"+i+"']="+r+"; ";if(void 0!==t.globalScope._SymbolsMap[i])return"gscope['"+t.globalScope._SymbolsMap[i]+"']="+r+"; ";if(t.undeclaredGlobalsInFunctions.has(i)){const A=t.undeclaredGlobalsInFunctions.get(i).manglename;return t.globalScope._SymbolsMap[i]=A,t.mangleMap[i]=A,t.undeclaredGlobalsInFunctions.delete(i),"gscope[lang.setAssig('"+A+"', runtimeCtx)]="+r+"; "}const u=Ye(t);return t.globalScope._SymbolsMap[i]=u,t.mangleMap[i]=u,"gscope['"+u+"']="+r+"; "}(t,n);case"VariableDeclaration":return function Tt(t,n){const r=[];for(let i=0;i<n.declarations.length;i++)r.push(Q(t,n.declarations[i]));return r.join("\n")+" \n lastStatement=  lc.voidOperation; \n"}(t,n);case"BlockStatement":case"Program":return _e(t,n);case"FunctionDeclaration":return function yt(t,n){const r=n.id.name.toLowerCase();Te(r);let i="",u=!1;void 0!==t.globalScope[r]?i=r:void 0!==t.globalScope._SymbolsMap[r]?i=t.globalScope._SymbolsMap[r]:t.undeclaredGlobalsInFunctions.has(r)?(i=t.undeclaredGlobalsInFunctions.get(r).manglename,t.globalScope._SymbolsMap[r]=i,t.mangleMap[r]=i,t.undeclaredGlobalsInFunctions.delete(r),u=!0):(i=Ye(t),t.globalScope._SymbolsMap[r]=i,t.mangleMap[r]=i);const A={isAsync:t.isAsync,console:t.console,exports:t.exports,undeclaredGlobalsInFunctions:t.undeclaredGlobalsInFunctions,customfunctions:t.customfunctions,moduleFactory:t.moduleFactory,moduleFactoryMap:t.moduleFactoryMap,libraryResolver:t.libraryResolver,lrucache:t.lrucache,interceptor:t.interceptor,services:t.services,symbols:t.symbols,mangleMap:t.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:t.depthCounter,globalScope:t.globalScope};let O="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement = lc.voidOperation; \n   var lscope = runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";for(let d=0;d<n.params.length;d++){const Z=n.params[d].name.toLowerCase();Te(Z);const ne=Ye(t);A.localScope._SymbolsMap[Z]=ne,A.mangleMap[Z]=ne,O+="lscope['"+ne+"']=arguments["+d.toString()+"];\n"}return!0===t.isAsync?(O+="return lang.__awaiter(this, void 0, void 0, function* () {\n",O+=_e(A,n.body)+"\n return lastStatement; ",O+="});  }",O+=", runtimeCtx),"+n.params.length+")",O+="\n lastStatement = lc.voidOperation; \n"):(O+=_e(A,n.body)+"\n return lastStatement; }, runtimeCtx),"+n.params.length+")",O+="\n lastStatement = lc.voidOperation; \n"),u?"gscope[lang.setAssig('"+i+"', runtimeCtx)]="+O:"gscope['"+i+"']="+O}(t,n);case"ImportDeclaration":return function He(t,n){const r=n.specifiers[0].local.name.toLowerCase();Te(r);const i=t.libraryResolver?.loadLibrary(r),u=Ye(t);void 0===t.moduleFactory[i.uri]&&(t.moduleFactory[i.uri]=function S(t,n,r=!1){const i={isAsync:r,moduleFactory:n.moduleFactory,moduleFactoryMap:{},libraryResolver:new H.s(null,t.loadedModules),globalScope:ut(n.vars,r?Qe:Oe,n.customfunctions),customfunctions:n.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:Le,lrucache:n.lrucache,timeZone:n.timeZone??null,interceptor:n.interceptor,services:n.services,symbols:{symbolCounter:0}};let u=Q(i,t);""===u&&(u="lc.voidOperation; ");let A="";A=r?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+u+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+u+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ";const O=i.moduleFactory,d=i.moduleFactoryMap,Z=i.exports,ne={};for(const ye in Z)ne[ye]=void 0!==i.mangleMap[ye]?i.mangleMap[ye]:ye;const ge={lc:l.y,lang:Et,mangles:i.mangleMap,prepareModule:ye=>new F(ye),prepare(ye,xe){let qe=ye.spatialReference;null==qe&&(qe=new V.Z({wkid:102100}));const ht=It(ye.vars,ye.customfunctions,xe,ye.timeZone);return{localStack:[],isAsync:xe,exports:Z,exportmangle:ne,gdefs:{},moduleFactory:O,moduleFactoryMap:d,moduleSingletons:ye.moduleSingletons,mangleMap:this.mangles,spatialReference:qe,globalScope:ht,abortSignal:null==ye.abortSignal?{aborted:!1}:ye.abortSignal,localScope:null,services:ye.services,console:ye.console??Le,lrucache:ye.lrucache,timeZone:ye.timeZone??null,interceptor:ye.interceptor,symbols:{symbolCounter:0},depthCounter:ye.depthCounter}}};return new Function("context","spatialReference",A).bind(ge)}(i.syntax,{interceptor:t.interceptor,services:t.services,moduleFactory:t.moduleFactory,lrucache:t.lrucache,timeZone:t.timeZone??null,libraryResolver:t.libraryResolver,customfunctions:t.customfunctions,vars:{}},t.isAsync)),t.moduleFactoryMap[u]=i.uri;let A="";if(A=t.isAsync?"(yield lang.loadModule('"+u+"', runtimeCtx) ); ":"lang.loadModule('"+u+"', runtimeCtx); ",void 0!==t.globalScope[r])return"gscope['"+r+"']="+A;if(void 0!==t.globalScope._SymbolsMap[r])return"gscope['"+t.globalScope._SymbolsMap[r]+"']="+A;let O="";return t.undeclaredGlobalsInFunctions.has(r)?(O=t.undeclaredGlobalsInFunctions.get(r).manglename,t.undeclaredGlobalsInFunctions.delete(r)):O=Ye(t),t.globalScope._SymbolsMap[r]=O,t.mangleMap[r]=O,"gscope[lang.setAssig('"+O+"', runtimeCtx)]="+A}(t,n);case"ExportNamedDeclaration":return function Dt(t,n){const r=Q(t,n.declaration);if("FunctionDeclaration"===n.declaration.type)t.exports[n.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===n.declaration.type)for(const i of n.declaration.declarations)t.exports[i.id.name.toLowerCase()]="variable";return r}(t,n);case"ReturnStatement":return function Ne(t,n){return null===n.argument?"return lc.voidOperation":"return "+Q(t,n.argument)}(t,n);case"IfStatement":return Ve(t,n);case"ExpressionStatement":return function ke(t,n){return"AssignmentExpression"===n.expression.type?"lastStatement = lc.voidOperation; "+Q(t,n.expression)+"; \n ":"lastStatement = "+Q(t,n.expression)+"; "}(t,n);case"AssignmentExpression":return function st(t,n){const r=Q(t,n.right);let i=null,u="";if("MemberExpression"===n.left.type)return i=Q(t,n.left.object),!0===n.left.computed?u=Q(t,n.left.property):(u="'"+n.left.property.name+"'",Te(n.left.property.name)),"lang.assignmember("+i+","+u+",'"+n.operator+"',"+r+")";if(i=n.left.name.toLowerCase(),Te(i),null!==t.localScope){if(void 0!==t.localScope[i])return"lscope['"+i+"']=lang.assign("+r+",'"+n.operator+"', lscope['"+i+"'])";if(void 0!==t.localScope._SymbolsMap[i])return"lscope['"+t.localScope._SymbolsMap[i]+"']=lang.assign("+r+",'"+n.operator+"', lscope['"+t.localScope._SymbolsMap[i]+"'])"}if(void 0!==t.globalScope[i])return"gscope['"+i+"']=lang.assign("+r+",'"+n.operator+"', gscope['"+i+"'])";if(void 0!==t.globalScope._SymbolsMap[i])return"gscope['"+t.globalScope._SymbolsMap[i]+"']=lang.assign("+r+",'"+n.operator+"', gscope['"+t.globalScope._SymbolsMap[i]+"'])";if(null!==t.localScope){if(t.undeclaredGlobalsInFunctions.has(i))return"gscope[lang.chkAssig('"+t.undeclaredGlobalsInFunctions.get(i).manglename+"',runtimeCtx)]=lang.assign("+r+",'"+n.operator+"', gscope['"+t.undeclaredGlobalsInFunctions.get(i).manglename+"'])";const A={manglename:Ye(t),node:n.argument};return t.undeclaredGlobalsInFunctions.set(i,A),"gscope[lang.chkAssig('"+A.manglename+"',runtimeCtx)]=lang.assign("+r+",'"+n.operator+"', gscope['"+A.manglename+"'])"}throw new o.aV(t,o.rH.InvalidIdentifier,n)}(t,n);case"UpdateExpression":return function Ze(t,n){let r=null,i="";if("MemberExpression"===n.argument.type)return r=Q(t,n.argument.object),!0===n.argument.computed?i=Q(t,n.argument.property):(i="'"+n.argument.property.name+"'",Te(n.argument.property.name)),"lang.memberupdate("+r+","+i+",'"+n.operator+"',"+n.prefix+")";if(r=n.argument.name.toLowerCase(),Te(r),null!==t.localScope){if(void 0!==t.localScope[r])return"lang.update(lscope, '"+r+"','"+n.operator+"',"+n.prefix+")";if(void 0!==t.localScope._SymbolsMap[r])return"lang.update(lscope, '"+t.localScope._SymbolsMap[r]+"','"+n.operator+"',"+n.prefix+")"}if(void 0!==t.globalScope[r])return"lang.update(gscope, '"+r+"','"+n.operator+"',"+n.prefix+")";if(void 0!==t.globalScope._SymbolsMap[r])return"lang.update(gscope, '"+t.globalScope._SymbolsMap[r]+"','"+n.operator+"',"+n.prefix+")";if(null!==t.localScope){if(t.undeclaredGlobalsInFunctions.has(r))return"lang.update(gscope,lang.chkAssig( '"+t.undeclaredGlobalsInFunctions.get(r).manglename+"',runtimeCtx),'"+n.operator+"',"+n.prefix+")";const u={manglename:Ye(t),node:n.argument};return t.undeclaredGlobalsInFunctions.set(r,u),"lang.update(gscope, lang.chkAssig('"+u.manglename+"',runtimeCtx),'"+n.operator+"',"+n.prefix+")"}throw new o.aV(t,o.rH.InvalidIdentifier,n)}(t,n);case"BreakStatement":return"break";case"ContinueStatement":return"continue";case"TemplateLiteral":return function Ft(t,n){try{const r=[];let i=0;for(const u of n.quasis)r.push(u.value?JSON.stringify(u.value.cooked):JSON.stringify("")),!1===u.tail&&(r.push(n.expressions[i]?"lang.castString(lang.aCheck("+Q(t,n.expressions[i])+", 'TemplateLiteral'))":""),i++);return"(["+r.join(",")+"]).join('')"}catch(r){throw r}}(t,n);case"TemplateElement":return JSON.stringify(n.value?n.value.cooked:"");case"ForStatement":return function De(t,n){let r="lastStatement = lc.voidOperation; \n";null!==n.init&&(r+=Q(t,n.init)+"; ");const i=ze(t),u=ze(t);return r+="var "+i+" = true; ",r+="\n do { ",null!==n.update&&(r+=" if ("+i+"===false) {\n "+Q(t,n.update)+"  \n}\n "+i+"=false; \n"),null!==n.test&&(r+="var "+u+" = "+Q(t,n.test)+"; ",r+="if ("+u+"===false) { break; } else if ("+u+"!==true) { lang.error('"+o.rH.BooleanConditionRequired+"');   }\n"),r+=Q(t,n.body),null!==n.update&&(r+="\n "+Q(t,n.update)),r+="\n"+i+" = true; \n} while(true);  lastStatement = lc.voidOperation; ",r}(t,n);case"ForInStatement":return function Ge(t,n){const r=ze(t),i=ze(t),u=ze(t);let A="var "+r+" = "+Q(t,n.right)+";\n";"VariableDeclaration"===n.left.type&&(A+=Q(t,n.left));let O="VariableDeclaration"===n.left.type?n.left.declarations[0].id.name:n.left.name;O=O.toLowerCase(),Te(O);let d="";null!==t.localScope&&(void 0!==t.localScope[O]?d="lscope['"+O+"']":void 0!==t.localScope._SymbolsMap[O]&&(d="lscope['"+t.localScope._SymbolsMap[O]+"']"));let Z="";if(""===d)if(void 0!==t.globalScope[O])d="gscope['"+O+"']";else if(void 0!==t.globalScope._SymbolsMap[O])d="gscope['"+t.globalScope._SymbolsMap[O]+"']";else if(null!==t.localScope)if(t.undeclaredGlobalsInFunctions.has(O))d="gscope['"+t.undeclaredGlobalsInFunctions.get(O).manglename+"']",Z=t.undeclaredGlobalsInFunctions.get(O).manglename;else{const ne={manglename:Ye(t),node:n.left};t.undeclaredGlobalsInFunctions.set(O,ne),d="gscope['"+ne.manglename+"']",Z=ne.manglename}return Z&&(A+="lang.chkAssig('"+Z+"',runtimeCtx); \n"),A+="if ("+r+"===null) {  lastStatement = lc.voidOperation; }\n ",A+="else if (lc.isArray("+r+") || lc.isString("+r+")) {",A+="var "+i+"="+r+".length; \n",A+="for(var "+u+"=0; "+u+"<"+i+"; "+u+"++) {\n",A+=d+"="+u+";\n",A+=Q(t,n.body),A+="\n}\n",A+=" lastStatement = lc.voidOperation; \n",A+=" \n}\n",A+="else if (lc.isImmutableArray("+r+")) {",A+="var "+i+"="+r+".length(); \n",A+="for(var "+u+"=0; "+u+"<"+i+"; "+u+"++) {\n",A+=d+"="+u+";\n",A+=Q(t,n.body),A+="\n}\n",A+=" lastStatement = lc.voidOperation; \n",A+=" \n}\n",A+="else if (( "+r+" instanceof lang.Dictionary) || ( "+r+" instanceof lang.Feature)) {",A+="var "+i+"="+r+".keys(); \n",A+="for(var "+u+"=0; "+u+"<"+i+".length; "+u+"++) {\n",A+=d+"="+i+"["+u+"];\n",A+=Q(t,n.body),A+="\n}\n",A+=" lastStatement = lc.voidOperation; \n",A+=" \n}\n",t.isAsync&&(A+="else if (lc.isFeatureSet("+r+")) {",A+="var "+i+"="+r+".iterator(runtimeCtx.abortSignal); \n",A+="for(var "+u+"=lang. graphicToFeature( yield "+i+".next(),"+r+", runtimeCtx); "+u+"!=null; "+u+"=lang. graphicToFeature( yield "+i+".next(),"+r+", runtimeCtx)) {\n",A+=d+"="+u+";\n",A+=Q(t,n.body),A+="\n}\n",A+=" lastStatement = lc.voidOperation; \n",A+=" \n}\n"),A+="else { lastStatement = lc.voidOperation; } \n",A}(t,n);case"WhileStatement":return function ve(t,n){let r="lastStatement = lc.voidOperation; \n";const i=ze(t);return r+=`\n  var ${i} = true;\n    do {\n      ${i} = ${Q(t,n.test)};\n      if (${i}==false) {\n        break;\n      }\n      if (${i}!==true) {\n        lang.error('${o.rH.BooleanConditionRequired}');\n      }\n      ${Q(t,n.body)}\n    }\n    while (${i} !== false);\n    lastStatement = lc.voidOperation;\n  `,r}(t,n);case"Identifier":return function Ot(t,n){try{const r=n.name.toLowerCase();if(Te(r),null!==t.localScope){if(void 0!==t.localScope[r])return"lscope['"+r+"']";if(void 0!==t.localScope._SymbolsMap[r])return"lscope['"+t.localScope._SymbolsMap[r]+"']"}if(void 0!==t.globalScope[r])return"gscope['"+r+"']";if(void 0!==t.globalScope._SymbolsMap[r])return"gscope['"+t.globalScope._SymbolsMap[r]+"']";if(null!==t.localScope){if(t.undeclaredGlobalsInFunctions.has(r))return"gscope[lang.chkAssig('"+t.undeclaredGlobalsInFunctions.get(r).manglename+"',runtimeCtx)]";const i={manglename:Ye(t),node:n.argument};return t.undeclaredGlobalsInFunctions.set(r,i),"gscope[lang.chkAssig('"+i.manglename+"',runtimeCtx)]"}throw new o.OF(t,o.rH.InvalidIdentifier,n)}catch(r){throw r}}(t,n);case"MemberExpression":return function xt(t,n){try{let r;return!0===n.computed?r=Q(t,n.property):(r="'"+n.property.name+"'",Te(n.property.name)),"lang.member("+Q(t,n.object)+","+r+")"}catch(r){throw r}}(t,n);case"Literal":return null==n.value?"null":JSON.stringify(n.value);case"CallExpression":return function tt(t,n){try{if("MemberExpression"===n.callee.type){let u;!0===n.callee.computed?u=Q(t,n.callee.property):(u="'"+n.callee.property.name+"'",Te(n.callee.property.name));let A="[";for(let O=0;O<n.arguments.length;O++)O>0&&(A+=", "),A+=Q(t,n.arguments[O]);return A+="]",t.isAsync?"(yield lang.callModuleFunction("+Q(t,n.callee.object)+","+A+","+u+",runtimeCtx))":"lang.callModuleFunction("+Q(t,n.callee.object)+","+A+","+u+",runtimeCtx)"}if("Identifier"!==n.callee.type)throw new o.OF(t,o.rH.FunctionNotFound,n);const r=n.callee.name.toLowerCase();if("iif"===r)return function rt(t,n){try{if(3!==n.arguments.length)throw new o.OF(t,o.rH.WrongNumberOfParameters,n);const r=ze(t);return`${t.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${r} = ${Q(t,n.arguments[0])};\n\n        if (${r} === true) {\n          return  ${Q(t,n.arguments[1])};\n        }\n        else if (${r} === false) {\n          return ${Q(t,n.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${t.isAsync?"})}()))":"}()"}`}catch(r){throw r}}(t,n);if("when"===r)return function bt(t,n){try{if(n.arguments.length<3)throw new o.OF(t,o.rH.WrongNumberOfParameters,n);if(n.arguments.length%2==0)throw new o.OF(t,o.rH.WrongNumberOfParameters,n);const r=ze(t);let i="var ";for(let u=0;u<n.arguments.length-1;u+=2)i+=`${r} = lang.mustBoolean(${Q(t,n.arguments[u])}, runtimeCtx);\n      if (${r} === true ) {\n        return ${Q(t,n.arguments[u+1])}\n      }\n`;return`${t.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        ${i}\n        return ${Q(t,n.arguments[n.arguments.length-1])}\n        ${t.isAsync?"})}()))":"}()"}`}catch(r){throw r}}(t,n);if("defaultvalue"===r)return function we(t,n){try{if(n.arguments.length<2||n.arguments.length>3)throw new o.OF(t,o.rH.WrongNumberOfParameters,n);const r=ze(t),i=ze(t);return 3===n.arguments.length?`${t.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n      var ${r} = ${Q(t,n.arguments[0])};\n      var ${i} = ${Q(t,n.arguments[1])};\n      ${r} = lang.getNestedOptionalValue(${r}, ${i});\n      return ${r} != null && ${r} !== "" ? ${r} : ${Q(t,n.arguments[2])};\n      ${t.isAsync?"})}()))":"}()"}`:`${t.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${r} = ${Q(t,n.arguments[0])};\n        if (${r} === null) {\n          return  ${Q(t,n.arguments[1])};\n        }\n        if (${r} === "") {\n          return  ${Q(t,n.arguments[1])};\n        }\n        if (${r} === undefined) {\n          return  ${Q(t,n.arguments[1])};\n        }\n        return ${r};\n      ${t.isAsync?"})}()))":"}()"}`}catch(r){throw r}}(t,n);if("decode"===r)return function Pt(t,n){try{if(n.arguments.length<2)throw new o.OF(t,o.rH.WrongNumberOfParameters,n);if(2===n.arguments.length)return`(${Q(t,n.arguments[1])})`;if((n.arguments.length-1)%2==0)throw new o.OF(t,o.rH.WrongNumberOfParameters,n);const r=ze(t),i=ze(t);let u="var ";for(let A=1;A<n.arguments.length-1;A+=2)u+=`${i} = ${Q(t,n.arguments[A])};\n      if (lang.binary(${i}, ${r}, "==") === true ) {\n        return ${Q(t,n.arguments[A+1])}\n      }\n`;return`${t.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${r} = ${Q(t,n.arguments[0])};\n        ${u}\n        return ${Q(t,n.arguments[n.arguments.length-1])}\n        ${t.isAsync?"})}()))":"}()"}`}catch(r){throw r}}(t,n);let i="";if(null!==t.localScope&&(void 0!==t.localScope[r]?i="lscope['"+r+"']":void 0!==t.localScope._SymbolsMap[r]&&(i="lscope['"+t.localScope._SymbolsMap[r]+"']")),""===i)if(void 0!==t.globalScope[r])i="gscope['"+r+"']";else if(void 0!==t.globalScope._SymbolsMap[r])i="gscope['"+t.globalScope._SymbolsMap[r]+"']";else if(null!==t.localScope)if(t.undeclaredGlobalsInFunctions.has(r))i="gscope[lang.chkAssig('"+t.undeclaredGlobalsInFunctions.get(r).manglename+"',runtimeCtx)]";else{const u={manglename:Ye(t),node:n.argument};t.undeclaredGlobalsInFunctions.set(r,u),i="gscope[lang.chkAssig('"+u.manglename+"',runtimeCtx)]"}if(""!==i){let u="[";for(let A=0;A<n.arguments.length;A++)A>0&&(u+=", "),u+=Q(t,n.arguments[A]);return u+="]",t.isAsync?"(yield lang.callfunc("+i+","+u+",runtimeCtx) )":"lang.callfunc("+i+","+u+",runtimeCtx)"}throw new o.OF(t,o.rH.FunctionNotFound,n)}catch(r){throw r}}(t,n);case"UnaryExpression":return function St(t,n){try{return"lang.unary("+Q(t,n.argument)+",'"+n.operator+"')"}catch(r){throw r}}(t,n);case"BinaryExpression":return function _t(t,n){try{return"lang.binary("+Q(t,n.left)+","+Q(t,n.right)+",'"+n.operator+"')"}catch(r){throw r}}(t,n);case"LogicalExpression":return function et(t,n){try{if("AssignmentExpression"===n.left.type||"UpdateExpression"===n.left.type)throw new o.OF(t,o.rH.LogicalExpressionOnlyBoolean,n);if("AssignmentExpression"===n.right.type||"UpdateExpression"===n.right.type)throw new o.OF(t,o.rH.LogicalExpressionOnlyBoolean,n);if("&&"===n.operator||"||"===n.operator)return"(lang.logicalCheck("+Q(t,n.left)+") "+n.operator+" lang.logicalCheck("+Q(t,n.right)+"))";throw new o.OF(null,o.rH.LogicExpressionOrAnd,null)}catch(r){throw r}}(t,n);case"ArrayExpression":return function me(t,n){try{const r=[];for(let i=0;i<n.elements.length;i++)r.push("Literal"===n.elements[i].type?Q(t,n.elements[i]):"lang.aCheck("+Q(t,n.elements[i])+",'ArrayExpression')");return"["+r.join(",")+"]"}catch(r){throw r}}(t,n);case"ObjectExpression":return function Ce(t,n){let r="lang.dictionary([";for(let i=0;i<n.properties.length;i++){const u=n.properties[i];Te(u.key.name),i>0&&(r+=","),r+="lang.strCheck("+("Identifier"===u.key.type?"'"+u.key.name+"'":Q(t,u.key))+",'ObjectExpression'),lang.aCheck("+Q(t,u.value)+", 'ObjectExpression')"}return r+="])",r}(t,n);case"Property":return function be(t,n){throw new o.OF(t,o.rH.NeverReach,n)}(t,n);case"Array":throw new o.OF(t,o.rH.NeverReach,n);default:throw new o.OF(t,o.rH.Unrecognized,n)}}catch(r){throw r}}function $e(t,n){return"BlockStatement"===n.type?Q(t,n):"ReturnStatement"===n.type||"BreakStatement"===n.type||"ContinueStatement"===n.type?Q(t,n)+"; ":"UpdateExpression"===n.type?"lastStatement = "+Q(t,n)+"; ":"ExpressionStatement"===n.type?Q(t,n):"ObjectExpression"===n.type?"lastStatement = "+Q(t,n)+"; ":Q(t,n)+"; "}function Ve(t,n){if("AssignmentExpression"===n.test.type||"UpdateExpression"===n.test.type)throw new o.OF(t,o.rH.BooleanConditionRequired,n);return`if (lang.mustBoolean(${Q(t,n.test)}, runtimeCtx) === true) {\n    ${$e(t,n.consequent)}\n  } `+(null!==n.alternate?"IfStatement"===n.alternate.type?" else "+Ve(t,n.alternate):` else {\n      ${$e(t,n.alternate)}\n    }\n`:" else {\n      lastStatement = lc.voidOperation;\n    }\n")}function _e(t,n){let r="";for(let i=0;i<n.body.length;i++)"EmptyStatement"!==n.body[i].type&&(r+="ReturnStatement"===n.body[i].type||"BreakStatement"===n.body[i].type||"ContinueStatement"===n.body[i].type?Q(t,n.body[i])+"; \n":"UpdateExpression"===n.body[i].type||"ObjectExpression"===n.body[i].type?"lastStatement = "+Q(t,n.body[i])+"; \n":Q(t,n.body[i])+" \n");return r}function Te(t){if("iif"===t)throw new o.kq;if("decode"===t)throw new o.kq;if("when"===t)throw new o.kq;if("defaultvalue"===t)throw new o.kq}const Oe={};function Ye(t){return t.symbols.symbolCounter++,"_T"+t.symbols.symbolCounter.toString()}function ze(t){return t.symbols.symbolCounter++,"_Tvar"+t.symbols.symbolCounter.toString()}(0,$.r)(Oe,se),(0,Y.r)(Oe,se),(0,Re.r)(Oe,se),(0,ee.r)(Oe,se),(0,W.r)(Oe,se),Oe.iif=function(t,n){try{return se(t,n,(r,i,u)=>{throw new o.aV(t,o.rH.Unrecognized,n)})}catch(r){throw r}},Oe.decode=function(t,n){try{return se(t,n,(r,i,u)=>{throw new o.aV(t,o.rH.Unrecognized,n)})}catch(r){throw r}},Oe.when=function(t,n){try{return se(t,n,(r,i,u)=>{throw new o.aV(t,o.rH.Unrecognized,n)})}catch(r){throw r}},Oe.defaultvalue=function(t,n){try{return se(t,n,(r,i,u)=>{throw new o.aV(t,o.rH.Unrecognized,n)})}catch(r){throw r}};const Qe={};for(const t in Oe)Qe[t]=new w.Bx(Oe[t]);Fe(Oe,se);for(const t in Oe)Oe[t]=new w.Bx(Oe[t]);const ft=function(){};ft.prototype=Oe;const mt=function(){};function ut(t,n,r){const i={};t||(t={}),r||(r={}),i._SymbolsMap={},i.textformatting=1,i.infinity=1,i.pi=1;for(const u in n)i[u]=1;for(const u in r)i[u]=1;for(const u in t)i[u]=1;return i}function It(t,n,r,i){const u=r?new mt:new ft;t||(t={}),n||(n={});const A=new E.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});A.immutable=!1,u._SymbolsMap={textformatting:1,infinity:1,pi:1},u.textformatting=A,u.infinity=Number.POSITIVE_INFINITY,u.pi=Math.PI;for(const O in n)u[O]=n[O],u._SymbolsMap[O]=1;for(const O in t)u._SymbolsMap[O]=1,u[O]=t[O]&&"esri.Graphic"===t[O].declaredClass?R.Z.createFromGraphic(t[O],i??null):t[O];return u}function at(t,n){const r={mode:n,compiled:!0,functions:{},signatures:[],standardFunction:se,standardFunctionAsync:se,evaluateIdentifier:Ht};for(let i=0;i<t.length;i++)t[i].registerFunctions(r);if("sync"===n){for(const i in r.functions)Oe[i]=new w.Bx(r.functions[i]),ft.prototype[i]=Oe[i];for(let i=0;i<r.signatures.length;i++)(0,z.gW)(r.signatures[i],"sync")}else{for(const i in r.functions)Qe[i]=new w.Bx(r.functions[i]),mt.prototype[i]=Qe[i];for(let i=0;i<r.signatures.length;i++)(0,z.gW)(r.signatures[i],"async")}}function Ht(t,n){const r=n.name;if("_SymbolsMap"===r)throw new o.aV(t,o.rH.InvalidIdentifier,null);if(t.localStack.length>0){if("_t"!==r.substr(0,2).toLowerCase()&&void 0!==t.localStack[t.localStack.length-1][r])return t.localStack[t.localStack.length-1][r];const u=t.mangleMap[r];if(void 0!==u&&void 0!==t.localStack[t.localStack.length-1][u])return t.localStack[t.localStack.length-1][u]}if("_t"!==r.substr(0,2).toLowerCase()&&void 0!==t.globalScope[r]||1===t.globalScope._SymbolsMap[r])return t.globalScope[r];const i=t.mangleMap[r];return void 0!==i?t.globalScope[i]:void 0}mt.prototype=Qe,at([T.A],"sync"),at([T.A],"async");let Ct=0;const Et={isNumber:t=>(0,l.b)(t),isArray:t=>(0,l.o)(t),isImmutableArray:t=>(0,l.q)(t),isFeature:t=>(0,l.r)(t),isString:t=>(0,l.c)(t),isDictionary:t=>(0,l.v)(t),isGeometry:t=>(0,l.p)(t),geometryMember:(t,n,r,i,u=1)=>(0,g.Z)(t,n,r,i,u),error(t){throw new o.aV(null,t,null)},__awaiter:(t,n,r,i)=>new Promise((u,A)=>{function O(ne){try{Z(i.next(ne))}catch(ge){A(ge)}}function d(ne){try{Z(i.throw(ne))}catch(ge){A(ge)}}function Z(ne){ne.done?u(ne.value):ne.value?.then?ne.value.then(O,d):(Ct++,Ct%100==0?setTimeout(()=>{Ct=0,O(ne.value)},0):O(ne.value))}Z((i=i.apply(t,n||[])).next())}),functionDepthchecker:(t,n)=>function(){if(n.depthCounter.depth++,n.localStack.push([]),n.depthCounter.depth>64)throw new o.aV(null,o.rH.MaximumCallDepth,null);const r=t.apply(this,arguments);return(0,X.y8)(r)?r.then(i=>(n.depthCounter.depth--,n.localStack.length=n.localStack.length-1,i)):(n.depthCounter.depth--,n.localStack.length=n.localStack.length-1,r)},chkAssig(t,n){if(void 0===n.gdefs[t])throw new o.aV(n,o.rH.InvalidIdentifier,null);return t},mustBoolean(t,n){if(!0===t||!1===t)return t;throw new o.aV(n,o.rH.BooleanConditionRequired,null)},setAssig:(t,n)=>(n.gdefs[t]=1,t),castString:t=>(0,l.j)(t),aCheck(t,n){if((0,l.i)(t))throw new o.aV(null,"ArrayExpression"===n?o.rH.NoFunctionInArray:"ObjectExpression"===n?o.rH.NoFunctionInDictionary:o.rH.NoFunctionInTemplateLiteral,null);return t===l.B?null:t},Dictionary:E.Z,Feature:R.Z,UserDefinedCompiledFunction:class P extends w.Rm{constructor(n,r){super(),this.paramCount=r,this.fn=n}createFunction(n){return(...r)=>{if(r.length!==this.paramCount)throw new o.aV(n,o.rH.WrongNumberOfParameters,null);return this.fn(...r)}}call(n,r){return this.fn(...r.arguments)}marshalledCall(n,r,i,u){return u(n,r,(A,O,d)=>{d=d.map(ne=>!(0,l.i)(ne)||ne instanceof w.Vg?ne:(0,w.aq)(ne,n,u));const Z=this.call(i,{arguments:d});return(0,X.y8)(Z)?Z.then(ne=>(0,w.aq)(ne,i,u)):Z})}},dictionary(t){const n={},r=new Map;for(let u=0;u<t.length;u+=2){if((0,l.i)(t[u+1]))throw new o.aV(null,o.rH.NoFunctionInDictionary,null);if(!1===(0,l.c)(t[u]))throw new o.aV(null,o.rH.KeyMustBeString,null);let A=t[u].toString();const O=A.toLowerCase();r.has(O)?A=r.get(O):r.set(O,A),n[A]=t[u+1]===l.B?null:t[u+1]}const i=new E.Z(n);return i.immutable=!1,i},strCheck(t){if(!1===(0,l.c)(t))throw new o.aV(null,o.rH.KeyMustBeString,null);return t},unary(t,n){if((0,l.a)(t)){if("!"===n)return!t;if("-"===n)return-1*(0,l.g)(t);if("+"===n)return 1*(0,l.g)(t);if("~"===n)return~(0,l.g)(t);throw new o.aV(null,o.rH.UnsupportedUnaryOperator,null)}if("-"===n)return-1*(0,l.g)(t);if("+"===n)return 1*(0,l.g)(t);if("~"===n)return~(0,l.g)(t);throw new o.aV(null,o.rH.UnsupportedUnaryOperator,null)},logicalCheck(t){if(!1===(0,l.a)(t))throw new o.aV(null,o.rH.LogicExpressionOrAnd,null);return t},logical(t,n,r){if((0,l.a)(t)&&(0,l.a)(n))switch(r){case"||":return t||n;case"&&":return t&&n;default:throw new o.aV(null,o.rH.LogicExpressionOrAnd,null)}throw new o.aV(null,o.rH.LogicExpressionOrAnd,null)},binary(t,n,r){switch(r){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,l.G)((0,l.g)(t),(0,l.g)(n),r);case"==":case"=":return(0,l.F)(t,n);case"!=":return!(0,l.F)(t,n);case"<":case">":case"<=":case">=":return(0,l.E)(t,n,r);case"+":return(0,l.c)(t)||(0,l.c)(n)?(0,l.j)(t)+(0,l.j)(n):(0,l.g)(t)+(0,l.g)(n);case"-":return(0,l.g)(t)-(0,l.g)(n);case"*":return(0,l.g)(t)*(0,l.g)(n);case"/":return(0,l.g)(t)/(0,l.g)(n);case"%":return(0,l.g)(t)%(0,l.g)(n);default:throw new o.aV(null,o.rH.UnsupportedOperator,null)}},assign(t,n,r){switch(n){case"=":return t===l.B?null:t;case"/=":return(0,l.g)(r)/(0,l.g)(t);case"*=":return(0,l.g)(r)*(0,l.g)(t);case"-=":return(0,l.g)(r)-(0,l.g)(t);case"+=":return(0,l.c)(r)||(0,l.c)(t)?(0,l.j)(r)+(0,l.j)(t):(0,l.g)(r)+(0,l.g)(t);case"%=":return(0,l.g)(r)%(0,l.g)(t);default:throw new o.aV(null,o.rH.UnsupportedOperator,null)}},update(t,n,r,i){const u=(0,l.g)(t[n]);return t[n]="++"===r?u+1:u-1,!1===i?u:"++"===r?u+1:u-1},graphicToFeature:(t,n,r)=>null===t?null:R.Z.createFromGraphicLikeObject(t.geometry,t.attributes,n,r.timeZone),memberupdate(t,n,r,i){let u;if((0,l.o)(t)){if(!(0,l.b)(n))throw new o.aV(null,o.rH.ArrayAccessorMustBeNumber,null);if(n<0&&(n=t.length+n),n<0||n>=t.length)throw new o.aV(null,o.rH.OutOfBounds,null);u=(0,l.g)(t[n]),t[n]="++"===r?u+1:u-1}else if(t instanceof E.Z){if(!1===(0,l.c)(n))throw new o.aV(null,o.rH.KeyAccessorMustBeString,null);if(!0!==t.hasField(n))throw new o.aV(null,o.rH.FieldNotFound,null,{key:n});u=(0,l.g)(t.field(n)),t.setField(n,"++"===r?u+1:u-1)}else if((0,l.r)(t)){if(!1===(0,l.c)(n))throw new o.aV(null,o.rH.KeyAccessorMustBeString,null);if(!0!==t.hasField(n))throw new o.aV(null,o.rH.FieldNotFound,null);u=(0,l.g)(t.field(n)),t.setField(n,"++"===r?u+1:u-1)}else{if((0,l.q)(t))throw new o.aV(null,o.rH.Immutable,null);if(!(t instanceof F))throw new o.aV(null,o.rH.InvalidIdentifier,null);if(!1===(0,l.c)(n))throw new o.aV(null,o.rH.ModuleAccessorMustBeString,null);if(!0!==t.hasGlobal(n))throw new o.aV(null,o.rH.ModuleExportNotFound,null);u=(0,l.g)(t.global(n)),t.setGlobal(n,"++"===r?u+1:u-1)}return!1===i?u:"++"===r?u+1:u-1},assignmember(t,n,r,i){if((0,l.o)(t)){if(!(0,l.b)(n))throw new o.aV(null,o.rH.ArrayAccessorMustBeNumber,null);if(n<0&&(n=t.length+n),n<0||n>t.length)throw new o.aV(null,o.rH.OutOfBounds,null);if(n===t.length){if("="!==r)throw new o.aV(null,o.rH.OutOfBounds,null);t[n]=this.assign(i,r,t[n])}else t[n]=this.assign(i,r,t[n])}else if(t instanceof E.Z){if(!1===(0,l.c)(n))throw new o.aV(null,o.rH.KeyAccessorMustBeString,null);if(!0===t.hasField(n))t.setField(n,this.assign(i,r,t.field(n)));else{if("="!==r)throw new o.aV(null,o.rH.FieldNotFound,null);t.setField(n,this.assign(i,r,null))}}else if((0,l.r)(t)){if(!1===(0,l.c)(n))throw new o.aV(null,o.rH.KeyAccessorMustBeString,null);if(!0===t.hasField(n))t.setField(n,this.assign(i,r,t.field(n)));else{if("="!==r)throw new o.aV(null,o.rH.FieldNotFound,null);t.setField(n,this.assign(i,r,null))}}else{if((0,l.q)(t))throw new o.aV(null,o.rH.Immutable,null);if(!(t instanceof F))throw new o.aV(null,o.rH.InvalidIdentifier,null);if(!1===(0,l.c)(n))throw new o.aV(null,o.rH.ModuleAccessorMustBeString,null);if(!t.hasGlobal(n))throw new o.aV(null,o.rH.ModuleExportNotFound,null);t.setGlobal(n,this.assign(i,r,t.global(n)))}},member(t,n){if(null===t)throw new o.aV(null,o.rH.MemberOfNull,null);if(t instanceof E.Z||(0,l.r)(t)){if((0,l.c)(n))return t.field(n);throw new o.aV(null,o.rH.InvalidMemberAccessKey,null)}if(t instanceof y.Z){if((0,l.c)(n))return(0,g.Z)(t,n,null,null);throw new o.aV(null,o.rH.InvalidMemberAccessKey,null)}if((0,l.o)(t)){if((0,l.b)(n)&&isFinite(n)&&Math.floor(n)===n){if(n<0&&(n=t.length+n),n>=t.length||n<0)throw new o.aV(null,o.rH.OutOfBounds,null);return t[n]}throw new o.aV(null,o.rH.InvalidMemberAccessKey,null)}if((0,l.c)(t)){if((0,l.b)(n)&&isFinite(n)&&Math.floor(n)===n){if(n<0&&(n=t.length+n),n>=t.length||n<0)throw new o.aV(null,o.rH.OutOfBounds,null);return t[n]}throw new o.aV(null,o.rH.InvalidMemberAccessKey,null)}if((0,l.q)(t)){if((0,l.b)(n)&&isFinite(n)&&Math.floor(n)===n){if(n<0&&(n=t.length()+n),n>=t.length()||n<0)throw new o.aV(null,o.rH.OutOfBounds,null);return t.get(n)}throw new o.aV(null,o.rH.InvalidMemberAccessKey,null)}if(t instanceof F){if((0,l.c)(n))return t.global(n);throw new o.aV(null,o.rH.InvalidMemberAccessKey,null)}throw new o.aV(null,o.rH.InvalidMemberAccessKey,null)},callfunc:(t,n,r)=>t.call(r,{arguments:n,preparsed:!0}),loadModule(t,n){const r=n.moduleFactoryMap[t];if(n.moduleSingletons[r])return n.moduleSingletons[r];const i=n.moduleFactory[r]({vars:{},moduleSingletons:n.moduleSingletons,depthCounter:n.depthCounter,console:n.console,abortSignal:n.abortSignal,isAsync:n.isAsync,services:n.services,lrucache:n.lrucache,timeZone:n.timeZone??null,interceptor:n.interceptor},n.spatialReference);return n.moduleSingletons[r]=i,i},callModuleFunction(t,n,r,i){if(!(t instanceof F))throw new o.aV(null,o.rH.FunctionNotFound,null);const u=t.global(r);if(!1===(0,l.i)(u))throw new o.aV(null,o.rH.CallNonFunction,null);return u.call(i,{preparsed:!0,arguments:n})},getNestedOptionalValue:(t,n)=>(0,g.u)(t,n)};function Le(t){console.log(t)}function At(t,n,r=!1){null===n&&(n={vars:{},customfunctions:{}});let i=null;t.usesModules&&(i=new H.s(null,t.loadedModules));const u={isAsync:r,globalScope:ut(n.vars,r?Qe:Oe,n.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:n.customfunctions,libraryResolver:i,localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:Le,lrucache:n.lrucache,timeZone:n.timeZone??null,interceptor:n.interceptor,services:n.services,symbols:{symbolCounter:0}};let A=Q(u,t);""===A&&(A="lc.voidOperation; "),u.undeclaredGlobalsInFunctions.size>0&&u.undeclaredGlobalsInFunctions.forEach(xe=>{throw new o.OF(n,o.rH.InvalidIdentifier,xe.node)});let O="";O=r?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+A+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+A+"\n return lastStatement; } \n return this.postProcess(mainBody()); ";const d=u.moduleFactory,Z=u.moduleFactoryMap,ne=u.exports,ge={};for(const xe in ne)ge[xe]=void 0!==u.mangleMap[xe]?u.mangleMap[xe]:xe;const ye={lc:l.y,lang:Et,mangles:u.mangleMap,postProcess(xe){if(xe instanceof l.z&&(xe=xe.value),xe instanceof l.A&&(xe=xe.value),xe===l.B&&(xe=null),xe===l.C)throw new o.aV(null,o.rH.IllegalResult,null);if(xe===l.D)throw new o.aV(null,o.rH.IllegalResult,null);if((0,l.i)(xe))throw new o.aV(null,o.rH.IllegalResult,null);return xe},prepare(xe,qe){let ht=xe.spatialReference;null==ht&&(ht=V.Z.WebMercator);const Jt=It(xe.vars,xe.customfunctions,qe,xe.timeZone);return{localStack:[],isAsync:qe,moduleFactory:d,moduleFactoryMap:Z,mangleMap:this.mangles,moduleSingletons:{},exports:ne,gdefs:{},exportmangle:ge,spatialReference:ht,globalScope:Jt,abortSignal:null==xe.abortSignal?{aborted:!1}:xe.abortSignal,localScope:null,services:xe.services,console:xe.console??Le,lrucache:xe.lrucache,timeZone:xe.timeZone??null,interceptor:xe.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return new Function("context","spatialReference",O).bind(ye)}function x(){return(x=(0,L.Z)(function*(){return at([yield _.e(6212).then(_.bind(_,56212))],"async"),!0})).apply(this,arguments)}class F extends p.P{constructor(n){super(null),this.moduleContext=n}hasGlobal(n){return void 0===this.moduleContext.exports[n]&&(n=n.toLowerCase()),void 0!==this.moduleContext.exports[n]}setGlobal(n,r){const i=this.moduleContext.globalScope,u=n.toLowerCase();if((0,l.i)(r))throw new o.aV(null,o.rH.AssignModuleFunction,null);i[this.moduleContext.exportmangle[u]]=r}global(n){const r=this.moduleContext.globalScope;n=n.toLowerCase();const i=r[this.moduleContext.exportmangle[n]];if(void 0===i)throw new o.aV(null,o.rH.InvalidIdentifier,null);if((0,l.i)(i)&&!(i instanceof w.Vg)){const u=new w.Vg;return u.fn=i,u.parameterEvaluator=se,u.context=this.moduleContext,r[this.moduleContext.exportmangle[n]]=u,u}return i}}var j=_(66476),re=["++","--"],he=["-","+","!","~"],Me=["=","/=","*=","%=","+=","-="],Ie=["||","&&"],We={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},ct=["Unknown","Boolean","<end>","Identifier","Keyword","Null","Numeric","Punctuator","String","RegularExpression","Template"],ue={InvalidModuleUri:"InvalidModuleUri",ForInOfLoopInitializer:"ForInOfLoopInitializer",IdentiferExpected:"IdentiferExpected",InvalidEscapedReservedWord:"InvalidEscapedReservedWord",InvalidExpression:"InvalidExpression",InvalidFunctionIdentifier:"InvalidFunctionIdentifier",InvalidHexEscapeSequence:"InvalidHexEscapeSequence",InvalidLeftHandSideInAssignment:"InvalidLeftHandSideInAssignment",InvalidLeftHandSideInForIn:"InvalidLeftHandSideInForIn",InvalidTemplateHead:"InvalidTemplateHead",InvalidVariableAssignment:"InvalidVariableAssignment",KeyMustBeString:"KeyMustBeString",NoFunctionInsideBlock:"NoFunctionInsideBlock",NoFunctionInsideFunction:"NoFunctionInsideFunction",ModuleExportRootOnly:"ModuleExportRootOnly",ModuleImportRootOnly:"ModuleImportRootOnly",PunctuatorExpected:"PunctuatorExpected",TemplateOctalLiteral:"TemplateOctalLiteral",UnexpectedBoolean:"UnexpectedBoolean",UnexpectedEndOfScript:"UnexpectedEndOfScript",UnexpectedIdentifier:"UnexpectedIdentifier",UnexpectedKeyword:"UnexpectedKeyword",UnexpectedNull:"UnexpectedNull",UnexpectedNumber:"UnexpectedNumber",UnexpectedPunctuator:"UnexpectedPunctuator",UnexpectedString:"UnexpectedString",UnexpectedTemplate:"UnexpectedTemplate",UnexpectedToken:"UnexpectedToken"},Rt={[ue.InvalidModuleUri]:"Module uri must be a text literal.",[ue.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[ue.IdentiferExpected]:"'${value}' is an invalid identifier.",[ue.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[ue.InvalidExpression]:"Invalid expression.",[ue.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[ue.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[ue.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[ue.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",[ue.InvalidTemplateHead]:"Invalid template structure.",[ue.InvalidVariableAssignment]:"Invalid variable assignment.",[ue.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[ue.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[ue.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[ue.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",[ue.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",[ue.PunctuatorExpected]:"'${value}' expected.",[ue.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[ue.UnexpectedBoolean]:"Unexpected boolean literal.",[ue.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[ue.UnexpectedIdentifier]:"Unexpected identifier.",[ue.UnexpectedKeyword]:"Unexpected keyword.",[ue.UnexpectedNull]:"Unexpected null literal.",[ue.UnexpectedNumber]:"Unexpected number.",[ue.UnexpectedPunctuator]:"Unexpected ponctuator.",[ue.UnexpectedString]:"Unexpected text literal.",[ue.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[ue.UnexpectedToken]:"Unexpected token '${value}'."},Mt=class Jn extends Error{constructor({code:n,index:r,line:i,column:u,len:A=0,description:O,data:d}){super(O??n),this.declaredRootClass="esri.arcade.lib.diagnostic",this.name="ParsingError",this.code=n,this.index=r,this.line=i,this.column=u,this.len=A,this.data=d,this.description=O,this.range={start:{line:i,column:u-1},end:{line:i,column:u+A}},Error.captureStackTrace?.(this,Jn)}};function C(t){return!!t&&"object"==typeof t&&"type"in t&&"BlockStatement"===t.type}function N(t){return!!t&&"object"==typeof t&&"type"in t&&"BlockComment"===t.type}function ae(t){return!!t&&"object"==typeof t&&"type"in t&&"EmptyStatement"===t.type}function Pe(t){return!!t&&"object"==typeof t&&"type"in t&&"VariableDeclarator"===t.type}function Se(t,n){return n.loc.end.line===t.loc.start.line&&n.loc.end.column<=t.loc.start.column}function Ue(t,n){return t.range[0]>=n.range[0]&&t.range[1]<=n.range[1]}var Ke=/\$\{(.*?)\}/gu;function nt(t,n){let r=Rt[t];return n?r.replace(Ke,(i,u)=>n[u]?.toString()??""):r}function Zt(t,n){if(!t)throw new Error(`ASSERT: ${n}`)}var gn={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/u,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/u},Ee={fromCodePoint:t=>t<65536?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10))+String.fromCharCode(56320+(t-65536&1023)),isWhiteSpace:t=>32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(t),isLineTerminator:t=>10===t||13===t||8232===t||8233===t,isIdentifierStart:t=>36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&gn.NonAsciiIdentifierStart.test(Ee.fromCodePoint(t)),isIdentifierPart:t=>36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&gn.NonAsciiIdentifierPart.test(Ee.fromCodePoint(t)),isDecimalDigit:t=>t>=48&&t<=57,isHexDigit:t=>t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102,isOctalDigit:t=>t>=48&&t<=55};function Dn(t){return"0123456789abcdef".indexOf(t.toLowerCase())}function $t(t){return"01234567".indexOf(t)}var Bt=[[],[],[]];re.forEach(t=>Bt[t.length-1]?.push(t)),he.forEach(t=>Bt[t.length-1]?.push(t)),Ie.forEach(t=>Bt[t.length-1]?.push(t)),Me.forEach(t=>Bt[t.length-1]?.push(t)),["|","&",">>","<<",">>>","^","==","!=","<","<=",">",">=","+","-","*","/","%"].forEach(t=>Bt[t.length-1]?.push(t));function yn(t,n=0){let r=t.start-t.lineStart,i=t.lineNumber;return r<0&&(r+=n,i-=1),{index:t.start,line:i,column:r}}function xn(t){return[{index:t.range[0],...t.loc.start},{index:t.range[1],...t.loc.end}]}function Fn(t){return t in We?We[t]:0}var Yn=class{constructor(t,n={},r){this.delegate=r,this.hasLineTerminator=!1,this.options={tokens:"boolean"==typeof n.tokens&&n.tokens,comments:"boolean"==typeof n.comments&&n.comments,tolerant:"boolean"==typeof n.tolerant&&n.tolerant},this.options.comments&&(this.commentHandler=new class{constructor(){this.comments=[],this._nodeStack=[],this._newComments=[]}insertInnerComments(t){if(!C(t)||0!==t.body.length)return;let n=[];for(let r=this._newComments.length-1;r>=0;r--){let i=this._newComments[r];t.range[1]>=i.range[0]&&(n.unshift(i),this._newComments.splice(r,1))}n.length&&(t.innerComments=n)}attachTrailingComments(t){let n=this._nodeStack.at(-1);if(!n)return;if(C(t)&&Ue(n,t))for(let i=this._newComments.length-1;i>=0;i--){let u=this._newComments[i];Ue(u,t)&&(n.trailingComments=[...n.trailingComments??[],u],this._newComments.splice(i,1))}let r=[];if(this._newComments.length>0)for(let i=this._newComments.length-1;i>=0;i--){let u=this._newComments[i];Se(u,n)?(n.trailingComments=[...n.trailingComments??[],u],this._newComments.splice(i,1)):Se(u,t)&&(r.unshift(u),this._newComments.splice(i,1))}n.trailingComments&&Se(n.trailingComments[0],t)&&(r=[...r,...n.trailingComments],delete n.trailingComments),r.length>0&&(t.trailingComments=r)}attachLeadingComments(t){let n;for(;this._nodeStack.length>0;){let u=this._nodeStack[this._nodeStack.length-1];if(!(t.range[0]<=u.range[0]))break;n=u,this._nodeStack.pop()}let r=[],i=[];if(null!=n){if(!n.leadingComments)return;for(let u=n.leadingComments.length-1;u>=0;u--){let A=n.leadingComments[u];t.range[0]>=A.range[1]?(r.unshift(A),n.leadingComments.splice(u,1)):Pe(t)&&!N(A)&&(i.unshift(A),n.leadingComments.splice(u,1))}return 0===n.leadingComments.length&&delete n.leadingComments,r.length&&(t.leadingComments=r),void(i.length&&(t.trailingComments=[...i,...t.trailingComments??[]]))}for(let u=this._newComments.length-1;u>=0;u--){let A=this._newComments[u];t.range[0]>=A.range[0]&&(r.unshift(A),this._newComments.splice(u,1))}r.length&&(t.leadingComments=r)}attachComments(t){if(function c(t){return!!t&&"object"==typeof t&&"type"in t&&"Program"===t.type}(t)&&t.body.length>0){let n=this._nodeStack.at(-1);return n?(n.trailingComments=[...n.trailingComments??[],...this._newComments],this._newComments.length=0,void this._nodeStack.pop()):(t.trailingComments=[...this._newComments],void(this._newComments.length=0))}this.attachTrailingComments(t),this.attachLeadingComments(t),this.insertInnerComments(t),this._nodeStack.push(t)}collectComment(t){this.comments.push(t),this._newComments.push(t)}}),this.errorHandler=new class{constructor(t=!1){this.tolerant=t,this.errors=[]}recordError(t){this.errors.push(t)}tolerate(t){if(!this.tolerant)throw t;this.recordError(t)}throwError(t){throw t.description??(t.description=nt(t.code,t.data)),new Mt(t)}tolerateError(t){t.description??(t.description=nt(t.code,t.data));let n=new Mt(t);if(!this.tolerant)throw n;this.recordError(n)}}(this.options.tolerant),this.scanner=new class{constructor(t,n){this.source=t,this.errorHandler=n,this._length=t.length,this.index=0,this.lineNumber=1,this.lineStart=0,this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(t){this.index=t.index,this.lineNumber=t.lineNumber,this.lineStart=t.lineStart,this.curlyStack=t.curlyStack}eof(){return this.index>=this._length}throwUnexpectedToken(t=ue.UnexpectedToken){this.errorHandler.throwError({code:t,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1,data:{value:this.source.charAt(this.index)}})}tolerateUnexpectedToken(t=ue.UnexpectedToken){this.errorHandler.tolerateError({code:t,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}skipSingleLineComment(t){let n=[],r=this.index-t,i={start:{line:this.lineNumber,column:this.index-this.lineStart-t},end:{line:0,column:0}};for(;!this.eof();){let A=this.source.charCodeAt(this.index);if(this.index+=1,Ee.isLineTerminator(A))return i.end={line:this.lineNumber,column:this.index-this.lineStart-1},n.push({multiLine:!1,start:r+t,end:this.index-1,range:[r,this.index-1],loc:i}),13===A&&10===this.source.charCodeAt(this.index)&&(this.index+=1),this.lineNumber+=1,this.lineStart=this.index,n}return i.end={line:this.lineNumber,column:this.index-this.lineStart},n.push({multiLine:!1,start:r+t,end:this.index,range:[r,this.index],loc:i}),n}skipMultiLineComment(){let t=[],n=this.index-2,r={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){let u=this.source.charCodeAt(this.index);if(Ee.isLineTerminator(u))13===u&&10===this.source.charCodeAt(this.index+1)&&(this.index+=1),this.lineNumber+=1,this.index+=1,this.lineStart=this.index;else if(42===u){if(47===this.source.charCodeAt(this.index+1))return this.index+=2,r.end={line:this.lineNumber,column:this.index-this.lineStart},t.push({multiLine:!0,start:n+2,end:this.index-2,range:[n,this.index],loc:r}),t;this.index+=1}else this.index+=1}return r.end={line:this.lineNumber,column:this.index-this.lineStart},t.push({multiLine:!0,start:n+2,end:this.index,range:[n,this.index],loc:r}),this.tolerateUnexpectedToken(),t}scanComments(){let t=[];for(;!this.eof();){let n=this.source.charCodeAt(this.index);if(Ee.isWhiteSpace(n))this.index+=1;else if(Ee.isLineTerminator(n))this.index+=1,13===n&&10===this.source.charCodeAt(this.index)&&(this.index+=1),this.lineNumber+=1,this.lineStart=this.index;else{if(47!==n)break;if(n=this.source.charCodeAt(this.index+1),47===n){this.index+=2;let r=this.skipSingleLineComment(2);t=[...t,...r]}else{if(42!==n)break;{this.index+=2;let r=this.skipMultiLineComment();t=[...t,...r]}}}}return t}isKeyword(t){switch((t=t.toLowerCase()).length){case 2:return"if"===t||"in"===t;case 3:return"var"===t||"for"===t;case 4:return"else"===t;case 5:return"break"===t||"while"===t;case 6:return"return"===t||"import"===t||"export"===t;case 8:return"function"===t||"continue"===t;default:return!1}}codePointAt(t){let n=this.source.charCodeAt(t);if(n>=55296&&n<=56319){let r=this.source.charCodeAt(t+1);r>=56320&&r<=57343&&(n=1024*(n-55296)+r-56320+65536)}return n}scanHexEscape(t){let n="u"===t?4:2,r=0;for(let i=0;i<n;i++){if(this.eof()||!Ee.isHexDigit(this.source.charCodeAt(this.index)))return null;r=16*r+Dn(this.source[this.index]??""),this.index+=1}return String.fromCharCode(r)}scanUnicodeCodePointEscape(){let t=this.source[this.index],n=0;for("}"===t&&this.throwUnexpectedToken();!this.eof()&&(t=this.source[this.index]??"",this.index+=1,Ee.isHexDigit(t.charCodeAt(0)));)n=16*n+Dn(t);return(n>1114111||"}"!==t)&&this.throwUnexpectedToken(),Ee.fromCodePoint(n)}getIdentifier(){let t=this.index;for(this.index+=1;!this.eof();){let n=this.source.charCodeAt(this.index);if(92===n)return this.index=t,this.getComplexIdentifier();if(n>=55296&&n<57343)return this.index=t,this.getComplexIdentifier();if(!Ee.isIdentifierPart(n))break;this.index+=1}return this.source.slice(t,this.index)}getComplexIdentifier(){let t,n=this.codePointAt(this.index),r=Ee.fromCodePoint(n);for(this.index+=r.length,92===n&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),this.index+=1,"{"===this.source[this.index]?(this.index+=1,t=this.scanUnicodeCodePointEscape()):(t=this.scanHexEscape("u"),(null===t||"\\"===t||!Ee.isIdentifierStart(t.charCodeAt(0)))&&this.throwUnexpectedToken()),r=t);!this.eof()&&(n=this.codePointAt(this.index),Ee.isIdentifierPart(n));)t=Ee.fromCodePoint(n),r+=t,this.index+=t.length,92===n&&(r=r.substring(0,r.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),this.index+=1,"{"===this.source[this.index]?(this.index+=1,t=this.scanUnicodeCodePointEscape()):(t=this.scanHexEscape("u"),(null===t||"\\"===t||!Ee.isIdentifierPart(t.charCodeAt(0)))&&this.throwUnexpectedToken()),r+=t);return r}octalToDecimal(t){let n="0"!==t,r=$t(t);return!this.eof()&&Ee.isOctalDigit(this.source.charCodeAt(this.index))&&(n=!0,r=8*r+$t(this.source[this.index]??""),this.index+=1,"0123".includes(t)&&!this.eof()&&Ee.isOctalDigit(this.source.charCodeAt(this.index))&&(r=8*r+$t(this.source[this.index]??""),this.index+=1)),{code:r,octal:n}}scanIdentifier(){let t,n=this.index,r=92===this.source.charCodeAt(n)?this.getComplexIdentifier():this.getIdentifier();if(t=1===r.length?3:this.isKeyword(r)?4:"null"===r.toLowerCase()?5:"true"===r.toLowerCase()||"false"===r.toLowerCase()?1:3,3!==t&&n+r.length!==this.index){let i=this.index;this.index=n,this.tolerateUnexpectedToken(ue.InvalidEscapedReservedWord),this.index=i}return{type:t,value:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}}scanPunctuator(){let t=this.index,n=this.source[this.index]??"";switch(n){case"(":case"{":"{"===n&&this.curlyStack.push("{"),this.index+=1;break;case".":case")":case";":case",":case"[":case"]":case":":case"?":case"~":this.index+=1;break;case"}":this.index+=1,this.curlyStack.pop();break;default:for(let r=Bt.length;r>0;r--)if(n=this.source.substring(this.index,this.index+r),Bt[r-1]?.includes(n)){this.index+=r;break}}return this.index===t&&this.throwUnexpectedToken(),{type:7,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}}scanHexLiteral(t){let n="";for(;!this.eof()&&Ee.isHexDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index],this.index+=1;return 0===n.length&&this.throwUnexpectedToken(),Ee.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:Number.parseInt(`0x${n}`,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}}scanBinaryLiteral(t){let n="";for(;!this.eof();){let r=this.source[this.index];if("0"!==r&&"1"!==r)break;n+=this.source[this.index],this.index+=1}if(0===n.length&&this.throwUnexpectedToken(),!this.eof()){let r=this.source.charCodeAt(this.index);(Ee.isIdentifierStart(r)||Ee.isDecimalDigit(r))&&this.throwUnexpectedToken()}return{type:6,value:Number.parseInt(n,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}}scanOctalLiteral(t,n){let r="",i=!1;for(Ee.isOctalDigit(t.charCodeAt(0))&&(i=!0,r=`0${this.source[this.index]}`),this.index+=1;!this.eof()&&Ee.isOctalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index],this.index+=1;return!i&&0===r.length&&this.throwUnexpectedToken(),(Ee.isIdentifierStart(this.source.charCodeAt(this.index))||Ee.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:Number.parseInt(r,8),lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}}scanNumericLiteral(){let t=this.index,n=this.source[t]??"";Zt(Ee.isDecimalDigit(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point");let r="";if("."!==n){if(r=this.source[this.index]??"",this.index+=1,n=this.source[this.index]??"","0"===r){if("x"===n||"X"===n)return this.index+=1,this.scanHexLiteral(t);if("b"===n||"B"===n)return this.index+=1,this.scanBinaryLiteral(t);if("o"===n||"O"===n)return this.scanOctalLiteral(n,t)}for(;Ee.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index],this.index+=1;n=this.source[this.index]??""}if("."===n){for(r+=this.source[this.index],this.index+=1;Ee.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index],this.index+=1;n=this.source[this.index]??""}if("e"===n||"E"===n)if(r+=this.source[this.index],this.index+=1,n=this.source[this.index]??"",("+"===n||"-"===n)&&(r+=this.source[this.index],this.index+=1),Ee.isDecimalDigit(this.source.charCodeAt(this.index)))for(;Ee.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index],this.index+=1;else this.throwUnexpectedToken();return Ee.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:Number.parseFloat(r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}}scanStringLiteral(){let t=this.index,n=this.source[t];Zt("'"===n||'"'===n,"String literal must starts with a quote"),this.index+=1;let r=!1,i="";for(;!this.eof();){let u=this.source[this.index]??"";if(this.index+=1,u===n){n="";break}if("\\"===u)if(u=this.source[this.index]??"",this.index+=1,u&&Ee.isLineTerminator(u.charCodeAt(0)))this.lineNumber+=1,"\r"===u&&"\n"===this.source[this.index]&&(this.index+=1),this.lineStart=this.index;else switch(u){case"u":if("{"===this.source[this.index])this.index+=1,i+=this.scanUnicodeCodePointEscape();else{let A=this.scanHexEscape(u);null===A&&this.throwUnexpectedToken(),i+=A}break;case"x":{let A=this.scanHexEscape(u);null===A&&this.throwUnexpectedToken(ue.InvalidHexEscapeSequence),i+=A;break}case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;case"8":case"9":i+=u,this.tolerateUnexpectedToken();break;default:if(u&&Ee.isOctalDigit(u.charCodeAt(0))){let A=this.octalToDecimal(u);r=A.octal||r,i+=String.fromCharCode(A.code)}else i+=u}else{if(Ee.isLineTerminator(u.charCodeAt(0)))break;i+=u}}return""!==n&&(this.index=t,this.throwUnexpectedToken()),{type:8,value:i,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}}scanTemplate(){let t="",n=!1,r=this.index,i="`"===this.source[r],u=!1,A=2;for(this.index+=1;!this.eof();){let O=this.source[this.index]??"";if(this.index+=1,"`"===O){A=1,u=!0,n=!0;break}if("$"!==O)if("\\"!==O)Ee.isLineTerminator(O.charCodeAt(0))?(this.lineNumber+=1,"\r"===O&&"\n"===this.source[this.index]&&(this.index+=1),this.lineStart=this.index,t+="\n"):t+=O;else if(O=this.source[this.index]??"",this.index+=1,Ee.isLineTerminator(O.charCodeAt(0)))this.lineNumber+=1,"\r"===O&&"\n"===this.source[this.index]&&(this.index+=1),this.lineStart=this.index;else switch(O){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"u":if("{"===this.source[this.index])this.index+=1,t+=this.scanUnicodeCodePointEscape();else{let d=this.index,Z=this.scanHexEscape(O);null!==Z?t+=Z:(this.index=d,t+=O)}break;case"x":{let d=this.scanHexEscape(O);null===d&&this.throwUnexpectedToken(ue.InvalidHexEscapeSequence),t+=d;break}case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:"0"===O?(Ee.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(ue.TemplateOctalLiteral),t+="\0"):Ee.isOctalDigit(O.charCodeAt(0))?this.throwUnexpectedToken(ue.TemplateOctalLiteral):t+=O}else{if("{"===this.source[this.index]){this.curlyStack.push("${"),this.index+=1,n=!0;break}t+=O}}return n||this.throwUnexpectedToken(),i||this.curlyStack.pop(),{type:10,value:this.source.slice(r+1,this.index-A),cooked:t,head:i,tail:u,lineNumber:this.lineNumber,lineStart:this.lineStart,start:r,end:this.index}}lex(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};let t=this.source.charCodeAt(this.index);return Ee.isIdentifierStart(t)?this.scanIdentifier():40===t||41===t||59===t?this.scanPunctuator():39===t||34===t?this.scanStringLiteral():46===t?Ee.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():Ee.isDecimalDigit(t)?this.scanNumericLiteral():96===t||125===t&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():t>=55296&&t<57343&&Ee.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()}}(t,this.errorHandler),this.context={isAssignmentTarget:!1,blockContext:0,curlyParsingType:0},this.rawToken={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.endMarker={index:0,line:this.scanner.lineNumber,column:0},this.readNextRawToken(),this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}throwIfInvalidType(t,n,{validTypes:r,invalidTypes:i}){r?.some(u=>t.type===u)||i?.some(u=>t.type===u)&&this.throwError(ue.InvalidExpression,n)}throwError(t,n,r=this.endMarker){let{index:i,line:u,column:A}=n;this.errorHandler.throwError({code:t,index:i,line:u,column:A+1,len:r.index-i-1})}tolerateError(t,n){throw new Error("######################################### !!!")}unexpectedTokenError(t={}){let n,{rawToken:r}=t,{code:i,data:u}=t;if(r){if(!i)switch(r.type){case 2:i=ue.UnexpectedEndOfScript;break;case 3:i=ue.UnexpectedIdentifier;break;case 6:i=ue.UnexpectedNumber;break;case 8:i=ue.UnexpectedString;break;case 10:i=ue.UnexpectedTemplate}n=r.value.toString()}else n="ILLEGAL";i??(i=ue.UnexpectedToken),u||(u={value:n});let A=nt(i,u);if(r)return new Mt({code:i,index:r.start,line:r.lineNumber,column:r.start-r.lineStart+1,len:r.end-r.start-1,data:u,description:A});let{index:O,line:d}=this.endMarker;return new Mt({code:i,index:O,line:d,column:this.endMarker.column+1,data:u,description:A})}throwUnexpectedToken(t={}){throw t.rawToken??(t.rawToken=this.rawToken),this.unexpectedTokenError(t)}collectComments(t){let{commentHandler:n}=this;!n||!t.length||t.forEach(r=>{let i={type:r.multiLine?"BlockComment":"LineComment",value:this.getSourceValue(r),range:r.range,loc:r.loc};n.collectComment(i)})}peekAhead(t){let r=this.scanner.saveState(),i=t.call(this,()=>(this.scanner.scanComments(),this.scanner.lex()));return this.scanner.restoreState(r),i}getSourceValue(t){return this.scanner.source.slice(t.start,t.end)}convertToToken(t){return{type:ct[t.type],value:this.getSourceValue(t),range:[t.start,t.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}}readNextRawToken(){this.endMarker.index=this.scanner.index,this.endMarker.line=this.scanner.lineNumber,this.endMarker.column=this.scanner.index-this.scanner.lineStart;let t=this.rawToken;this.collectComments(this.scanner.scanComments()),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart),this.rawToken=this.scanner.lex(),this.hasLineTerminator=t.lineNumber!==this.rawToken.lineNumber,this.options.tokens&&2!==this.rawToken.type&&this.tokens.push(this.convertToToken(this.rawToken))}captureStartMarker(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}getItemLocation(t){return{range:[t.index,this.endMarker.index],loc:{start:{line:t.line,column:t.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}}finalize(t){return(this.delegate??this.commentHandler)&&(this.commentHandler?.attachComments(t),this.delegate?.(t)),t}expectPunctuator(t){let n=this.rawToken;this.matchPunctuator(t)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:n,code:ue.PunctuatorExpected,data:{value:t}})}expectKeyword(t){4!==this.rawToken.type||this.rawToken.value.toLowerCase()!==t.toString()?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}expectContextualKeyword(t){3!==this.rawToken.type||this.rawToken.value.toLowerCase()!==t?this.throwUnexpectedToken({rawToken:this.rawToken}):this.readNextRawToken()}matchKeyword(t){return 4===this.rawToken.type&&this.rawToken.value.toLowerCase()===t}matchContextualKeyword(t){return 3===this.rawToken.type&&this.rawToken.value===t}matchPunctuator(t){return 7===this.rawToken.type&&this.rawToken.value===t}getMatchingPunctuator(t){if("string"==typeof t&&(t=t.split("")),7===this.rawToken.type&&t.length)return t.find(this.matchPunctuator.bind(this))}isolateCoverGrammar(t){let n=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;let r=t.call(this);return this.context.isAssignmentTarget=n,r}inheritCoverGrammar(t){var n;let r=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;let i=t.call(this);return(n=this.context).isAssignmentTarget&&(n.isAssignmentTarget=r),i}withBlockContext(t,n){let r=this.context.blockContext;this.context.blockContext|=t;let i=this.context.curlyParsingType;this.context.curlyParsingType=1;let u=n.call(this);return this.context.blockContext=r,this.context.curlyParsingType=i,u}consumeSemicolon(){if(this.matchPunctuator(";"))this.readNextRawToken();else if(!this.hasLineTerminator){if(2===this.rawToken.type||this.matchPunctuator("}"))return this.endMarker.index=this.startMarker.index,this.endMarker.line=this.startMarker.line,void(this.endMarker.column=this.startMarker.column);this.throwUnexpectedToken({rawToken:this.rawToken})}}parsePrimaryExpression(){let t=this.captureStartMarker(),n=this.rawToken;switch(n.type){case 3:return this.readNextRawToken(),this.finalize({type:"Identifier",name:n.value,...this.getItemLocation(t)});case 6:case 8:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:"Literal",value:n.value,raw:this.getSourceValue(n),isString:"string"==typeof n.value,...this.getItemLocation(t)});case 1:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:"Literal",value:"true"===n.value.toLowerCase(),raw:this.getSourceValue(n),isString:!1,...this.getItemLocation(t)});case 5:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:"Literal",value:null,raw:this.getSourceValue(n),isString:!1,...this.getItemLocation(t)});case 10:return this.parseTemplateLiteral();case 7:switch(n.value){case"(":return this.inheritCoverGrammar(this.parseGroupExpression.bind(this));case"[":return this.inheritCoverGrammar(this.parseArrayInitializer.bind(this));case"{":return this.inheritCoverGrammar(this.parseObjectExpression.bind(this));default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case 4:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseArrayInitializer(){let t=this.captureStartMarker();this.expectPunctuator("[");let n=[];for(;!this.matchPunctuator("]");){let r=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(ue.InvalidExpression,r)):(n.push(this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this))),this.matchPunctuator("]")||this.expectPunctuator(","))}return this.expectPunctuator("]"),this.finalize({type:"ArrayExpression",elements:n,...this.getItemLocation(t)})}parseObjectPropertyKey(){let t=this.captureStartMarker(),n=this.rawToken;switch(n.type){case 8:return this.readNextRawToken(),this.finalize({type:"Literal",value:n.value,raw:this.getSourceValue(n),isString:!0,...this.getItemLocation(t)});case 3:case 1:case 5:case 4:return this.readNextRawToken(),this.finalize({type:"Identifier",name:n.value,...this.getItemLocation(t)});default:this.throwError(ue.KeyMustBeString,t)}}parseObjectProperty(){let t=this.rawToken,n=this.captureStartMarker(),r=this.parseObjectPropertyKey(),i=!1,u=null;return this.matchPunctuator(":")?(this.readNextRawToken(),u=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this))):3===t.type?(i=!0,u=this.finalize({type:"Identifier",name:t.value,...this.getItemLocation(n)})):this.throwUnexpectedToken({rawToken:this.rawToken}),this.finalize({type:"Property",kind:"init",key:r,value:u,shorthand:i,...this.getItemLocation(n)})}parseObjectExpression(){let t=this.captureStartMarker();this.expectPunctuator("{");let n=[];for(;!this.matchPunctuator("}");)n.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");return this.expectPunctuator("}"),this.finalize({type:"ObjectExpression",properties:n,...this.getItemLocation(t)})}parseTemplateElement(t=!1){let n=this.rawToken;10!==n.type&&this.throwUnexpectedToken({rawToken:n}),t&&!n.head&&this.throwUnexpectedToken({code:ue.InvalidTemplateHead,rawToken:n});let r=this.captureStartMarker();this.readNextRawToken();let{value:i,cooked:u,tail:A}=n,O=this.finalize({type:"TemplateElement",value:{raw:i,cooked:u},tail:A,...this.getItemLocation(r)});return O.loc.start.column+=1,O.loc.end.column-=A?1:2,O}parseTemplateLiteral(){let t=this.captureStartMarker(),n=[],r=[],i=this.parseTemplateElement(!0);for(r.push(i);!i.tail;)n.push(this.parseExpression()),i=this.parseTemplateElement(),r.push(i);return this.finalize({type:"TemplateLiteral",quasis:r,expressions:n,...this.getItemLocation(t)})}parseGroupExpression(){this.expectPunctuator("(");let t=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this));return this.expectPunctuator(")"),t}parseArguments(){this.expectPunctuator("(");let t=[];if(!this.matchPunctuator(")"))for(;;){let n=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));if(t.push(n),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),t}parseMemberName(){let t=this.rawToken,n=this.captureStartMarker();return this.readNextRawToken(),5!==t.type&&3!==t.type&&4!==t.type&&1!==t.type&&this.throwUnexpectedToken({rawToken:t}),this.finalize({type:"Identifier",name:t.value,...this.getItemLocation(n)})}parseLeftHandSideExpression(){let t,n=this.captureStartMarker(),r=this.inheritCoverGrammar(this.parsePrimaryExpression.bind(this)),i=this.captureStartMarker();for(;t=this.getMatchingPunctuator("([.");)switch(t){case"(":{this.context.isAssignmentTarget=!1,"Identifier"!==r.type&&"MemberExpression"!==r.type&&this.throwError(ue.IdentiferExpected,n,i);let u=this.parseArguments();r=this.finalize({type:"CallExpression",callee:r,arguments:u,...this.getItemLocation(n)});continue}case"[":{this.context.isAssignmentTarget=!0,this.expectPunctuator("[");let u=this.isolateCoverGrammar(()=>this.parseExpression());this.expectPunctuator("]"),r=this.finalize({type:"MemberExpression",computed:!0,object:r,property:u,...this.getItemLocation(n)});continue}case".":{this.context.isAssignmentTarget=!0,this.expectPunctuator(".");let u=this.parseMemberName();r=this.finalize({type:"MemberExpression",computed:!1,object:r,property:u,...this.getItemLocation(n)});continue}}return r}parseUpdateExpression(){let t=this.captureStartMarker(),n=this.getMatchingPunctuator(re);if(n){this.readNextRawToken();let A=this.captureStartMarker(),O=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));return"Identifier"!==O.type&&"MemberExpression"!==O.type&&"CallExpression"!==O.type&&this.throwError(ue.InvalidExpression,A),this.context.isAssignmentTarget||this.tolerateError(ue.InvalidLeftHandSideInAssignment,t),this.context.isAssignmentTarget=!1,this.finalize({type:"UpdateExpression",operator:n,argument:O,prefix:!0,...this.getItemLocation(t)})}let r=this.captureStartMarker(),i=this.inheritCoverGrammar(this.parseLeftHandSideExpression.bind(this)),u=this.captureStartMarker();return this.hasLineTerminator||(n=this.getMatchingPunctuator(re),!n)?i:("Identifier"!==i.type&&"MemberExpression"!==i.type&&this.throwError(ue.InvalidExpression,r,u),this.context.isAssignmentTarget||this.tolerateError(ue.InvalidLeftHandSideInAssignment,t),this.readNextRawToken(),this.context.isAssignmentTarget=!1,this.finalize({type:"UpdateExpression",operator:n,argument:i,prefix:!1,...this.getItemLocation(t)}))}parseUnaryExpression(){let t=this.getMatchingPunctuator(he);if(t){let n=this.captureStartMarker();this.readNextRawToken();let r=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));return this.context.isAssignmentTarget=!1,this.finalize({type:"UnaryExpression",operator:t,argument:r,prefix:!0,...this.getItemLocation(n)})}return this.parseUpdateExpression()}parseBinaryExpression(){let t=this.rawToken,n=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this));if(7!==this.rawToken.type)return n;let r=this.rawToken.value,i=Fn(r);if(0===i)return n;this.readNextRawToken(),this.context.isAssignmentTarget=!1;let u=[t,this.rawToken],A=n,O=this.inheritCoverGrammar(this.parseUnaryExpression.bind(this)),d=[A,r,O],Z=[i];for(;7===this.rawToken.type&&(i=Fn(this.rawToken.value))>0;){for(;d.length>2&&i<=Z[Z.length-1];){O=d.pop();let ye=d.pop();Z.pop(),A=d.pop(),u.pop();let xe=u[u.length-1],qe=yn(xe,xe.lineStart);d.push(this.finalize(this.createBinaryOrLogicalExpression(qe,ye,A,O)))}d.push(this.rawToken.value),Z.push(i),u.push(this.rawToken),this.readNextRawToken(),d.push(this.inheritCoverGrammar(this.parseUnaryExpression.bind(this)))}let ne=d.length-1;n=d[ne];let ge=u.pop();for(;ne>1;){let ye=u.pop();if(!ye)break;let xe=ge?.lineStart,qe=yn(ye,xe);n=this.finalize(this.createBinaryOrLogicalExpression(qe,d[ne-1],d[ne-2],n)),ne-=2,ge=ye}return n}createBinaryOrLogicalExpression(t,n,r,i){let u=Ie.includes(n)?"LogicalExpression":"BinaryExpression";return"BinaryExpression"===u||(("AssignmentExpression"===r.type||"UpdateExpression"===r.type)&&this.throwError(ue.InvalidExpression,...xn(r)),("AssignmentExpression"===i.type||"UpdateExpression"===i.type)&&this.throwError(ue.InvalidExpression,...xn(r))),{type:u,operator:n,left:r,right:i,...this.getItemLocation(t)}}parseAssignmentExpression(){let t=this.captureStartMarker(),n=this.inheritCoverGrammar(this.parseBinaryExpression.bind(this)),r=this.captureStartMarker(),i=this.getMatchingPunctuator(Me);if(!i)return n;"Identifier"!==n.type&&"MemberExpression"!==n.type&&this.throwError(ue.InvalidExpression,t,r),this.context.isAssignmentTarget||this.tolerateError(ue.InvalidLeftHandSideInAssignment,t),this.matchPunctuator("=")||(this.context.isAssignmentTarget=!1),this.readNextRawToken();let u=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this));return this.finalize({type:"AssignmentExpression",left:n,operator:i,right:u,...this.getItemLocation(t)})}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this))}parseStatements(t){let n=[];for(;2!==this.rawToken.type&&!this.matchPunctuator(t);){let r=this.parseStatementListItem();ae(r)||n.push(r)}return n}parseStatementListItem(){return this.context.isAssignmentTarget=!0,this.matchKeyword("function")?this.parseFunctionDeclaration():this.matchKeyword("export")?this.parseExportDeclaration():this.matchKeyword("import")?this.parseImportDeclaration():this.parseStatement()}parseBlock(){let t=this.captureStartMarker();this.expectPunctuator("{");let n=this.parseStatements("}");return this.expectPunctuator("}"),this.finalize({type:"BlockStatement",body:n,...this.getItemLocation(t)})}parseObjectStatement(){let t=this.captureStartMarker(),n=this.parseObjectExpression();return this.finalize({type:"ExpressionStatement",expression:n,...this.getItemLocation(t)})}parseBlockOrObjectStatement(){return 0===this.context.curlyParsingType||this.peekAhead(t=>{let n=t();return!(3!==n.type&&8!==n.type||(n=t(),7!==n.type||":"!==n.value))})?this.parseObjectStatement():this.parseBlock()}parseIdentifier(){let t=this.rawToken;if(3!==t.type)return null;let n=this.captureStartMarker();return this.readNextRawToken(),this.finalize({type:"Identifier",name:t.value,...this.getItemLocation(n)})}parseVariableDeclarator(){let t=this.captureStartMarker(),n=this.parseIdentifier();n||this.throwUnexpectedToken({code:ue.IdentiferExpected});let r=null;if(this.matchPunctuator("=")){this.readNextRawToken();let i=this.rawToken;try{r=this.isolateCoverGrammar(this.parseAssignmentExpression.bind(this))}catch{this.throwUnexpectedToken({rawToken:i,code:ue.InvalidVariableAssignment})}}return this.finalize({type:"VariableDeclarator",id:n,init:r,...this.getItemLocation(t)})}parseVariableDeclarationList(){let t=[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),t.push(this.parseVariableDeclarator());return t}parseVariableDeclaration(){let t=this.captureStartMarker();this.expectKeyword("var");let n=this.parseVariableDeclarationList();return this.consumeSemicolon(),this.finalize({type:"VariableDeclaration",declarations:n,kind:"var",...this.getItemLocation(t)})}parseEmptyStatement(){let t=this.captureStartMarker();return this.expectPunctuator(";"),this.finalize({type:"EmptyStatement",...this.getItemLocation(t)})}parseExpressionStatement(){let t=this.captureStartMarker(),n=this.parseExpression();return this.consumeSemicolon(),this.finalize({type:"ExpressionStatement",expression:n,...this.getItemLocation(t)})}parseIfClause(){return this.withBlockContext(2,this.parseStatement.bind(this))}parseIfStatement(){let t=this.captureStartMarker();this.expectKeyword("if"),this.expectPunctuator("(");let n=this.captureStartMarker(),r=this.parseExpression(),i=this.captureStartMarker();this.expectPunctuator(")"),("AssignmentExpression"===r.type||"UpdateExpression"===r.type)&&this.throwError(ue.InvalidExpression,n,i);let u=this.parseIfClause(),A=null;return this.matchKeyword("else")&&(this.readNextRawToken(),A=this.parseIfClause()),this.finalize({type:"IfStatement",test:r,consequent:u,alternate:A,...this.getItemLocation(t)})}parseWhileStatement(){let t=this.captureStartMarker();this.expectKeyword("while"),this.expectPunctuator("(");let n=this.captureStartMarker(),r=this.parseExpression(),i=this.captureStartMarker();this.expectPunctuator(")"),("AssignmentExpression"===r.type||"UpdateExpression"===r.type)&&this.throwError(ue.InvalidExpression,n,i);let u=this.withBlockContext(8,this.parseStatement.bind(this));return this.finalize({type:"WhileStatement",test:r,body:u,...this.getItemLocation(t)})}parseForStatement(){let t=null,n=null,r=null,i=null,u=null,A=this.captureStartMarker();if(this.expectKeyword("for"),this.expectPunctuator("("),this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword("var")){let d=this.captureStartMarker();this.readNextRawToken();let Z=this.parseVariableDeclarationList();1===Z.length&&this.matchKeyword("in")?(Z[0].init&&this.throwError(ue.ForInOfLoopInitializer,d),i=this.finalize({type:"VariableDeclaration",declarations:Z,kind:"var",...this.getItemLocation(d)}),this.readNextRawToken(),u=this.parseExpression()):(this.matchKeyword("in")&&this.throwError(ue.InvalidLeftHandSideInForIn,d),t=this.finalize({type:"VariableDeclaration",declarations:Z,kind:"var",...this.getItemLocation(d)}),this.expectPunctuator(";"))}else{let d=this.context.isAssignmentTarget,Z=this.captureStartMarker();t=this.inheritCoverGrammar(this.parseAssignmentExpression.bind(this)),this.matchKeyword("in")?(this.context.isAssignmentTarget||this.tolerateError(ue.InvalidLeftHandSideInForIn,Z),"Identifier"!==t.type&&this.throwError(ue.InvalidLeftHandSideInForIn,Z),this.readNextRawToken(),i=t,u=this.parseExpression(),t=null):(this.context.isAssignmentTarget=d,this.expectPunctuator(";"))}i||(this.matchPunctuator(";")||(n=this.isolateCoverGrammar(this.parseExpression.bind(this))),this.expectPunctuator(";"),this.matchPunctuator(")")||(r=this.isolateCoverGrammar(this.parseExpression.bind(this)))),this.expectPunctuator(")");let O=this.withBlockContext(4,()=>this.isolateCoverGrammar(this.parseStatement.bind(this)));return this.finalize(i&&u?{type:"ForInStatement",left:i,right:u,body:O,...this.getItemLocation(A)}:{type:"ForStatement",init:t,test:n,update:r,body:O,...this.getItemLocation(A)})}parseContinueStatement(){let t=this.captureStartMarker();return this.expectKeyword("continue"),this.consumeSemicolon(),this.finalize({type:"ContinueStatement",...this.getItemLocation(t)})}parseBreakStatement(){let t=this.captureStartMarker();return this.expectKeyword("break"),this.consumeSemicolon(),this.finalize({type:"BreakStatement",...this.getItemLocation(t)})}parseReturnStatement(){let t=this.captureStartMarker();this.expectKeyword("return");let n=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||2===this.rawToken.type)&&8!==this.rawToken.type&&10!==this.rawToken.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize({type:"ReturnStatement",argument:n,...this.getItemLocation(t)})}parseStatement(){switch(this.rawToken.type){case 1:case 5:case 6:case 8:case 10:case 3:return this.parseExpressionStatement();case 7:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case 4:switch(this.rawToken.value.toLowerCase()){case"break":return this.parseBreakStatement();case"continue":return this.parseContinueStatement();case"for":return this.parseForStatement();case"function":return this.parseFunctionDeclaration();case"if":return this.parseIfStatement();case"return":return this.parseReturnStatement();case"var":return this.parseVariableDeclaration();case"while":return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseFormalParameters(){let t=[];if(this.expectPunctuator("("),!this.matchPunctuator(")"))for(;2!==this.rawToken.type;){let n=this.parseIdentifier();if(n||this.throwUnexpectedToken({rawToken:this.rawToken,code:ue.IdentiferExpected}),t.push(n),this.matchPunctuator(")")||(this.expectPunctuator(","),this.matchPunctuator(")")))break}return this.expectPunctuator(")"),t}parseFunctionDeclaration(){1==(1&this.context.blockContext)&&this.throwUnexpectedToken({code:ue.NoFunctionInsideFunction}),(8==(8&this.context.blockContext)||2==(2&this.context.blockContext))&&this.throwUnexpectedToken({code:ue.NoFunctionInsideBlock});let t=this.captureStartMarker();this.expectKeyword("function");let n=this.parseIdentifier();n||this.throwUnexpectedToken({code:ue.InvalidFunctionIdentifier});let r=this.parseFormalParameters(),i=this.context.blockContext;this.context.blockContext|=1;let u=this.parseBlock();return this.context.blockContext=i,this.finalize({type:"FunctionDeclaration",id:n,params:r,body:u,...this.getItemLocation(t)})}parseScript(){let t=this.captureStartMarker(),n=this.parseStatements(),r=this.finalize({type:"Program",body:n,...this.getItemLocation(t)});return this.options.tokens&&(r.tokens=this.tokens),this.options.tolerant&&(r.errors=this.errorHandler.errors),r}parseExportDeclaration(){0!==this.context.blockContext&&this.throwUnexpectedToken({code:ue.ModuleExportRootOnly});let t=null,n=this.captureStartMarker();return this.expectKeyword("export"),this.matchKeyword("var")?t=this.parseVariableDeclaration():this.matchKeyword("function")?t=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:ue.InvalidExpression}),this.finalize({type:"ExportNamedDeclaration",declaration:t,specifiers:[],source:null,...this.getItemLocation(n)})}parseModuleSpecifier(){let t=this.captureStartMarker(),n=this.rawToken;if(8===n.type)return this.readNextRawToken(),this.finalize({type:"Literal",value:n.value,raw:this.getSourceValue(n),isString:!0,...this.getItemLocation(t)});this.throwError(ue.InvalidModuleUri,t)}parseDefaultSpecifier(){let t=this.captureStartMarker(),n=this.parseIdentifier();return n||this.throwUnexpectedToken({code:ue.IdentiferExpected}),this.finalize({type:"ImportDefaultSpecifier",local:n,...this.getItemLocation(t)})}parseImportDeclaration(){0!==this.context.blockContext&&this.throwUnexpectedToken({code:ue.ModuleImportRootOnly});let t=this.captureStartMarker();this.expectKeyword("import");let n=this.parseDefaultSpecifier();this.expectContextualKeyword("from");let r=this.parseModuleSpecifier();return this.finalize({type:"ImportDeclaration",specifiers:[n],source:r,...this.getItemLocation(t)})}};function jt(t,n=[]){const r=function Qn(t,n,r){return new Yn(t,n,r).parseScript()}(t);if(null==r.body)throw new Mt({index:0,line:0,column:0,data:null,description:"",code:ue.InvalidExpression});return r.loadedModules={},(0,z.dN)(r,n),r}class Gt{constructor(n){const r=this;r._keys=[],r._values=[],r.length=0,n&&n.forEach(i=>{r.set(i[0],i[1])})}entries(){return[].slice.call(this.keys().map((n,r)=>[n,this._values[r]]))}keys(){return[].slice.call(this._keys)}values(){return[].slice.call(this._values)}has(n){return this._keys.includes(n)}get(n){const r=this._keys.indexOf(n);return r>-1?this._values[r]:null}deepGet(n){if(!n?.length)return null;const r=(i,u)=>null==i?null:u.length?r(i instanceof Gt?i.get(u[0]):i[u[0]],u.slice(1)):i;return r(this.get(n[0]),n.slice(1))}set(n,r){const i=this,u=this._keys.indexOf(n);return u>-1?i._values[u]=r:(i._keys.push(n),i._values.push(r),i.length=i._values.length),this}sortedSet(n,r,i,u){const A=this,O=this._keys.length,d=i||0,Z=void 0!==u?u:O-1;if(0===O)return A._keys.push(n),A._values.push(r),A;if(n===this._keys[d])return this._values.splice(d,0,r),this;if(n===this._keys[Z])return this._values.splice(Z,0,r),this;if(n>this._keys[Z])return this._keys.splice(Z+1,0,n),this._values.splice(Z+1,0,r),this;if(n<this._keys[d])return this._values.splice(d,0,r),this._keys.splice(d,0,n),this;if(d>=Z)return this;const ne=d+Math.floor((Z-d)/2);return n<this._keys[ne]?this.sortedSet(n,r,d,ne-1):n>this._keys[ne]?this.sortedSet(n,r,ne+1,Z):this}size(){return this.length}clear(){const n=this;return n._keys.length=n.length=n._values.length=0,this}delete(n){const r=this,i=r._keys.indexOf(n);return i>-1&&(r._keys.splice(i,1),r._values.splice(i,1),r.length=r._keys.length,!0)}forEach(n){this._keys.forEach((r,i)=>{n(this._values[i],r,i)})}map(n){return this.keys().map((r,i)=>n(this._values[i],r,i))}filter(n){const r=this;return r._keys.forEach((i,u)=>{!1===n(r._values[u],i,u)&&r.delete(i)}),this}clone(){return new Gt(this.entries())}}class wt{constructor(n=20){this._maxEntries=n,this._values=new Gt}delete(n){this._values.has(n)&&this._values.delete(n)}get(n){let r=null;return this._values.has(n)&&(r=this._values.get(n),this._values.delete(n),this._values.set(n,r)),r}put(n,r){if(this._values.size()>=this._maxEntries){const i=this._values.keys()[0];this._values.delete(i)}this._values.set(n,r)}}var Cn=_(61018);class Xe{constructor(n){this.portalUri=n}normalizeModuleUri(n){const r=/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([?|/].*)?$/gi,i=/(?<portalurl>.+)\/home\/item\.html\?id=(?<itemid>.+)$/gi,u=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,A=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi,O=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([?|/].*)?$/gi;if(n.startsWith("portal+")){let d=n.substring(7),Z="",ne=d,ge=!1;for(const qe of[i,A,u]){const ht=qe.exec(d);if(null!==ht){const Jt=ht.groups;ne=Jt.itemid,Z=Jt.portalurl,ge=!0;break}}if(!1===ge){if(!r.test(d))throw new o.Tu(o.TD.UnsupportedUriProtocol,{uri:n});ne=d,Z=this.portalUri}ne.includes("/")&&(ne=ne.split("/")[0]),ne.includes("?")&&(ne=ne.split("?")[0]);let ye="current";const xe=O.exec(ne);if(null!==xe){const qe=xe.groups;ne=qe.itemid,ye=qe.versionstring}return d=new Cn.Z({url:Z}).restUrl+"/content/items/"+ne+"/resources/"+ye+".arc",{url:d,scheme:"portal",uri:"PO:"+d}}if(n.startsWith("mock")){if("mock"===n)return{url:"",scheme:"mock",data:'\n      export var hello = 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',uri:"mock"};const d=n.replace("mock:","");if(void 0!==Xe.mocks[d])return{url:"",scheme:"mock",data:Xe.mocks[d],uri:n}}throw new o.Tu(o.TD.UnrecognizedUri,{uri:n})}fetchModule(n){var r=this;return(0,L.Z)(function*(){const i=Xe.cachedModules.getFromCache(n.uri);if(i)return i;const u=r.fetchSource(n);Xe.cachedModules.addToCache(n.uri,u);let A=null;try{A=yield u}catch(O){throw Xe.cachedModules.removeFromCache(n.uri),O}return A})()}fetchSource(n){return(0,L.Z)(function*(){if("portal"===n.scheme){const r=yield(0,j.Z)(n.url,{responseType:"text",query:{}});if(r.data)return jt(r.data,[])}if("mock"===n.scheme)return jt(n.data??"",[]);throw new o.Tu(o.TD.UnsupportedUriProtocol)})()}static create(n){return new Xe(n)}static getDefault(){return this._default??(Xe._default=Xe._moduleResolverFactory())}static set moduleResolverClass(n){this._moduleResolverFactory=n,this._default=null}}Xe.mocks={},Xe.cachedModules=new class Xn{constructor(n=20){this._maxEntries=n,this._cache=new wt(this._maxEntries),this._layerMetadata=new wt(this._maxEntries),this._serviceMetadata=new wt(this._maxEntries),this._portalItems=new wt(this._maxEntries)}clear(){this._cache=new wt(this._maxEntries),this._layerMetadata=new wt(this._maxEntries),this._serviceMetadata=new wt(this._maxEntries),this._portalItems=new wt(this._maxEntries)}addToCache(n,r){this._cache.put(n,r)}removeFromCache(n){this._cache.delete(n)}getFromCache(n){return this._cache.get(n)}getCachedLayerMetadata(n){return this._layerMetadata.get(n)}setCachedLayerMetadata(n,r){this._layerMetadata.put(n,r)}removeCachedLayerMetadata(n,r){this._layerMetadata.get(n)===r&&this._layerMetadata.delete(n)}getCachedServiceMetadata(n){return this._serviceMetadata.get(n)}setCachedServiceMetadata(n,r){this._serviceMetadata.put(n,r)}removeCachedServiceMetadata(n,r){this._serviceMetadata.get(n)===r&&this._serviceMetadata.delete(n)}getCachedPortalItem(n,r){return this._portalItems.get(`${r}:${n}`)}setCachedPortalItem(n,r,i){this._portalItems.put(`${r}:${n}`,i)}removeCachedPortalItem(n,r,i){const u=`${r}:${n}`;this._portalItems.get(u)===i&&this._portalItems.delete(u)}}(30),Xe._default=null,Xe._moduleResolverFactory=()=>{const t=Cn.Z.getDefault();return new Xe(t.url)};class qn extends w.Rm{constructor(n,r){super(),this.definition=null,this.context=null,this.definition=n,this.context=r}createFunction(n){return(...r)=>{const i={spatialReference:this.context.spatialReference,console:this.context.console,services:this.context.services,timeZone:this.context.timeZone??null,lrucache:this.context.lrucache,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:n.depthCounter.depth+1},globalScope:this.context.globalScope};if(i.depthCounter.depth>64)throw new o.aV(n,o.rH.MaximumCallDepth,null);return Qt(this.definition,i,r,null)}}call(n,r){return dt(n,r,(i,u,A)=>{const O={spatialReference:n.spatialReference,services:n.services,globalScope:n.globalScope,depthCounter:{depth:n.depthCounter.depth+1},libraryResolver:n.libraryResolver,exports:n.exports,timeZone:n.timeZone??null,console:n.console,lrucache:n.lrucache,interceptor:n.interceptor,localScope:{}};if(O.depthCounter.depth>64)throw new o.aV(n,o.rH.MaximumCallDepth,r);return Qt(this.definition,O,A,r)})}marshalledCall(n,r,i,u){return u(n,r,(A,O,d)=>{const Z={spatialReference:n.spatialReference,globalScope:i.globalScope,services:n.services,depthCounter:{depth:n.depthCounter.depth+1},libraryResolver:n.libraryResolver,exports:n.exports,console:n.console,timeZone:n.timeZone??null,lrucache:n.lrucache,interceptor:n.interceptor,localScope:{}};return d=d.map(ne=>!(0,l.i)(ne)||ne instanceof w.Vg?ne:(0,w.aq)(ne,n,u)),(0,w.aq)(Qt(this.definition,Z,d,r),i,u)})}}class kt extends p.P{constructor(n){super(n)}global(n){const r=this.executingContext.globalScope[n.toLowerCase()];if(r.valueset||(r.value=fe(this.executingContext,r.node),r.valueset=!0),(0,l.i)(r.value)&&!(r.value instanceof w.Vg)){const i=new w.Vg;i.fn=r.value,i.parameterEvaluator=dt,i.context=this.executingContext,r.value=i}return r.value}setGlobal(n,r){if((0,l.i)(r))throw new o.aV(null,o.rH.AssignModuleFunction,null);this.executingContext.globalScope[n.toLowerCase()]={value:r,valueset:!0,node:null}}hasGlobal(n){return void 0===this.executingContext.exports[n]&&(n=n.toLowerCase()),void 0!==this.executingContext.exports[n]}loadModule(n){let r=n.spatialReference;null==r&&(r=new V.Z({wkid:102100})),this.moduleScope=Sn({},n.customfunctions,n.timeZone),this.executingContext={spatialReference:r,globalScope:this.moduleScope,localScope:null,libraryResolver:new H.s(n.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},services:n.services,console:n.console??_n,timeZone:n.timeZone??null,lrucache:n.lrucache,interceptor:n.interceptor,depthCounter:{depth:1}},fe(this.executingContext,this.source.syntax)}}function dt(t,n,r){try{return!0===n.preparsed?r(t,null,n.arguments):r(t,n,function En(t,n){const r=[];for(let i=0;i<n.arguments.length;i++)r.push(fe(t,n.arguments[i]));return r}(t,n))}catch(i){throw i}}function fe(t,n){try{switch(n?.type){case"EmptyStatement":return l.B;case"VariableDeclarator":return function gr(t,n){let r=null===n.init?null:fe(t,n.init);if(r===l.B&&(r=null),"Identifier"!==n.id.type)throw new o.aV(t,o.rH.InvalidIdentifier,n);const i=n.id.name.toLowerCase();return null!=t.localScope?t.localScope[i]={value:r,valueset:!0,node:n.init}:t.globalScope[i]={value:r,valueset:!0,node:n.init},l.B}(t,n);case"VariableDeclaration":return function pr(t,n){for(let r=0;r<n.declarations.length;r++)fe(t,n.declarations[r]);return l.B}(t,n);case"ImportDeclaration":return function fr(t,n){const r=n.specifiers[0].local.name.toLowerCase(),i=t.libraryResolver.loadLibrary(r);let u=null;return t.libraryResolver._moduleSingletons?.has(i.uri)?u=t.libraryResolver._moduleSingletons.get(i.uri):(u=new kt(i),u.loadModule(t),t.libraryResolver._moduleSingletons?.set(i.uri,u)),t.globalScope[r]={value:u,valueset:!0,node:n},l.B}(t,n);case"ExportNamedDeclaration":return function mr(t,n){if(fe(t,n.declaration),"FunctionDeclaration"===n.declaration.type)t.exports[n.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===n.declaration.type)for(const r of n.declaration.declarations)t.exports[r.id.name.toLowerCase()]="variable";return l.B}(t,n);case"BlockStatement":case"Program":return function cr(t,n){let r=l.B;for(let i=0;i<n.body.length;i++)if(r=fe(t,n.body[i]),r instanceof l.z||r===l.C||r===l.D)return r;return r}(t,n);case"FunctionDeclaration":return function hr(t,n){const r=n.id.name.toLowerCase();return t.globalScope[r]={valueset:!0,node:null,value:new qn(n,t)},l.B}(t,n);case"ReturnStatement":return function dr(t,n){if(null===n.argument)return new l.z(l.B);const r=fe(t,n.argument);return new l.z(r)}(t,n);case"IfStatement":return function lr(t,n){const r=fe(t,n.test);if(!0===r)return fe(t,n.consequent);if(!1===r)return null!==n.alternate?fe(t,n.alternate):l.B;throw new o.aV(t,o.rH.BooleanConditionRequired,n)}(t,n);case"ExpressionStatement":return function ur(t,n){if("AssignmentExpression"===n.expression.type||"UpdateExpression"===n.expression.type)return fe(t,n.expression);if("CallExpression"===n.expression.type){const r=fe(t,n.expression);return r===l.B?l.B:new l.A(r)}{const r=fe(t,n.expression);return r===l.B?l.B:new l.A(r)}}(t,n);case"AssignmentExpression":return function or(t,n){let r=null,i="";if("MemberExpression"===n.left.type){if(r=fe(t,n.left.object),!0===n.left.computed)i=fe(t,n.left.property);else{if("Identifier"!==n.left.property.type)throw new o.aV(t,o.rH.InvalidIdentifier,n);i=n.left.property.name}const A=fe(t,n.right);if((0,l.o)(r)){if(!(0,l.b)(i))throw new o.aV(t,o.rH.ArrayAccessorMustBeNumber,n);if(i<0&&(i=r.length+i),i<0||i>r.length)throw new o.aV(t,o.rH.OutOfBounds,n);if(i===r.length){if("="!==n.operator)throw new o.aV(t,o.rH.OutOfBounds,n);r[i]=gt(A,n.operator,r[i],n,t)}else r[i]=gt(A,n.operator,r[i],n,t)}else if(r instanceof E.Z){if(!1===(0,l.c)(i))throw new o.aV(t,o.rH.KeyAccessorMustBeString,n);if(!0===r.hasField(i))r.setField(i,gt(A,n.operator,r.field(i),n,t));else{if("="!==n.operator)throw new o.aV(t,o.rH.FieldNotFound,n,{key:i});r.setField(i,gt(A,n.operator,null,n,t))}}else if((0,l.r)(r)){if(!1===(0,l.c)(i))throw new o.aV(t,o.rH.KeyAccessorMustBeString,n);if(!0===r.hasField(i))r.setField(i,gt(A,n.operator,r.field(i),n,t));else{if("="!==n.operator)throw new o.aV(t,o.rH.FieldNotFound,n,{key:i});r.setField(i,gt(A,n.operator,null,n,t))}}else{if((0,l.q)(r))throw new o.aV(t,o.rH.Immutable,n);if(!(r instanceof kt))throw new o.aV(t,o.rH.InvalidIdentifier,n);if(!1===(0,l.c)(i))throw new o.aV(t,o.rH.ModuleAccessorMustBeString,n);if(!0!==r.hasGlobal(i))throw new o.aV(t,o.rH.ModuleExportNotFound,n);r.setGlobal(i,gt(A,n.operator,r.global(i),n,t))}return l.B}r=n.left.name.toLowerCase();const u=fe(t,n.right);if(null!=t.localScope&&void 0!==t.localScope[r])return t.localScope[r]={value:gt(u,n.operator,t.localScope[r].value,n,t),valueset:!0,node:n.right},l.B;if(void 0!==t.globalScope[r])return t.globalScope[r]={value:gt(u,n.operator,t.globalScope[r].value,n,t),valueset:!0,node:n.right},l.B;throw new o.aV(t,o.rH.InvalidIdentifier,n)}(t,n);case"UpdateExpression":return function sr(t,n){let r,i=null,u="";if("MemberExpression"===n.argument.type){if(i=fe(t,n.argument.object),!0===n.argument.computed?u=fe(t,n.argument.property):"Identifier"===n.argument.property.type&&(u=n.argument.property.name),(0,l.o)(i)){if(!(0,l.b)(u))throw new o.aV(t,o.rH.ArrayAccessorMustBeNumber,n);if(u<0&&(u=i.length+u),u<0||u>=i.length)throw new o.aV(t,o.rH.OutOfBounds,n);r=(0,l.g)(i[u]),i[u]="++"===n.operator?r+1:r-1}else if(i instanceof E.Z){if(!1===(0,l.c)(u))throw new o.aV(t,o.rH.KeyAccessorMustBeString,n);if(!0!==i.hasField(u))throw new o.aV(t,o.rH.FieldNotFound,n);r=(0,l.g)(i.field(u)),i.setField(u,"++"===n.operator?r+1:r-1)}else if((0,l.r)(i)){if(!1===(0,l.c)(u))throw new o.aV(t,o.rH.KeyAccessorMustBeString,n);if(!0!==i.hasField(u))throw new o.aV(t,o.rH.FieldNotFound,n);r=(0,l.g)(i.field(u)),i.setField(u,"++"===n.operator?r+1:r-1)}else{if((0,l.q)(i))throw new o.aV(t,o.rH.Immutable,n);if(!(i instanceof kt))throw new o.aV(t,o.rH.InvalidParameter,n);if(!1===(0,l.c)(u))throw new o.aV(t,o.rH.ModuleAccessorMustBeString,n);if(!0!==i.hasGlobal(u))throw new o.aV(t,o.rH.ModuleExportNotFound,n);r=(0,l.g)(i.global(u)),i.setGlobal(u,"++"===n.operator?r+1:r-1)}return!1===n.prefix?r:"++"===n.operator?r+1:r-1}if(i="Identifier"===n.argument.type?n.argument.name.toLowerCase():"",!i)throw new o.aV(t,o.rH.InvalidIdentifier,n);if(null!=t.localScope&&void 0!==t.localScope[i])return r=(0,l.g)(t.localScope[i].value),t.localScope[i]={value:"++"===n.operator?r+1:r-1,valueset:!0,node:n},!1===n.prefix?r:"++"===n.operator?r+1:r-1;if(void 0!==t.globalScope[i])return r=(0,l.g)(t.globalScope[i].value),t.globalScope[i]={value:"++"===n.operator?r+1:r-1,valueset:!0,node:n},!1===n.prefix?r:"++"===n.operator?r+1:r-1;throw new o.aV(t,o.rH.InvalidIdentifier,n)}(t,n);case"BreakStatement":return l.C;case"ContinueStatement":return l.D;case"TemplateElement":return function Er(t,n){return n.value?n.value.cooked:""}(0,n);case"TemplateLiteral":return function wr(t,n){let r="",i=0;for(const u of n.quasis)r+=u.value?u.value.cooked:"",!1===u.tail&&(r+=n.expressions[i]?(0,l.j)(Ar(fe(t,n.expressions[i]),t,n)):"",i++);return r}(t,n);case"ForStatement":return function rr(t,n){null!==n.init&&fe(t,n.init);const r={testResult:!0,lastAction:l.B};do{ar(t,n,r)}while(!0===r.testResult);return r.lastAction instanceof l.z?r.lastAction:l.B}(t,n);case"ForInStatement":return function nr(t,n){const r=fe(t,n.right);"VariableDeclaration"===n.left.type&&fe(t,n.left);let i=null,u="";if("VariableDeclaration"===n.left.type){const A=n.left.declarations[0].id;"Identifier"===A.type&&(u=A.name)}else"Identifier"===n.left.type&&(u=n.left.name);if(!u)throw new o.aV(t,o.rH.InvalidIdentifier,n);if(u=u.toLowerCase(),null!=t.localScope&&void 0!==t.localScope[u]&&(i=t.localScope[u]),null===i&&void 0!==t.globalScope[u]&&(i=t.globalScope[u]),null===i)throw new o.aV(t,o.rH.InvalidIdentifier,n);if((0,l.o)(r)||(0,l.c)(r)){const A=r.length;for(let O=0;O<A;O++){i.value=O;const d=fe(t,n.body);if(d===l.C)break;if(d instanceof l.z)return d}return l.B}if((0,l.q)(r)){for(let A=0;A<r.length();A++){i.value=A;const O=fe(t,n.body);if(O===l.C)break;if(O instanceof l.z)return O}return l.B}if(!(r instanceof E.Z||(0,l.r)(r)))return l.B;{const A=r.keys();for(let O=0;O<A.length;O++){i.value=A[O];const d=fe(t,n.body);if(d===l.C)break;if(d instanceof l.z)return d}}}(t,n);case"WhileStatement":return function ir(t,n){const r={testResult:!0,lastAction:l.B};if(r.testResult=fe(t,n.test),!1===r.testResult)return l.B;if(!0!==r.testResult)throw new o.aV(t,o.rH.BooleanConditionRequired,n);for(;!0===r.testResult&&(r.lastAction=fe(t,n.body),r.lastAction!==l.C)&&!(r.lastAction instanceof l.z);)if(r.testResult=fe(t,n.test),!0!==r.testResult&&!1!==r.testResult)throw new o.aV(t,o.rH.BooleanConditionRequired,n);return r.lastAction instanceof l.z?r.lastAction:l.B}(t,n);case"Identifier":return An(t,n);case"MemberExpression":return function Dr(t,n){try{const r=fe(t,n.object);if(null===r)throw new o.aV(t,o.rH.MemberOfNull,n);if(!1===n.computed){if("Identifier"===n.property.type){if(r instanceof E.Z||(0,l.r)(r))return r.field(n.property.name);if(r instanceof y.Z)return(0,g.Z)(r,n.property.name,t,n);if(r instanceof kt){if(!r.hasGlobal(n.property.name))throw new o.aV(t,o.rH.InvalidIdentifier,n);return r.global(n.property.name)}}throw new o.aV(t,o.rH.InvalidMemberAccessKey,n)}{let i=fe(t,n.property);if(r instanceof E.Z||(0,l.r)(r)){if((0,l.c)(i))return r.field(i);throw new o.aV(t,o.rH.InvalidMemberAccessKey,n)}if(r instanceof kt){if((0,l.c)(i))return r.global(i);throw new o.aV(t,o.rH.InvalidMemberAccessKey,n)}if(r instanceof y.Z){if((0,l.c)(i))return(0,g.Z)(r,i,t,n);throw new o.aV(t,o.rH.InvalidMemberAccessKey,n)}if((0,l.o)(r)){if((0,l.b)(i)&&isFinite(i)&&Math.floor(i)===i){if(i<0&&(i=r.length+i),i>=r.length||i<0)throw new o.aV(t,o.rH.OutOfBounds,n);return r[i]}throw new o.aV(t,o.rH.InvalidMemberAccessKey,n)}if((0,l.c)(r)){if((0,l.b)(i)&&isFinite(i)&&Math.floor(i)===i){if(i<0&&(i=r.length+i),i>=r.length||i<0)throw new o.aV(t,o.rH.OutOfBounds,n);return r[i]}throw new o.aV(t,o.rH.InvalidMemberAccessKey,n)}if((0,l.q)(r)){if((0,l.b)(i)&&isFinite(i)&&Math.floor(i)===i){if(i<0&&(i=r.length()+i),i>=r.length()||i<0)throw new o.aV(t,o.rH.OutOfBounds,n);return r.get(i)}throw new o.aV(t,o.rH.InvalidMemberAccessKey,n)}throw new o.aV(t,o.rH.InvalidMemberAccessKey,n)}}catch(r){throw r}}(t,n);case"Literal":return n.value;case"CallExpression":return function vr(t,n){try{if("MemberExpression"===n.callee.type){const r=fe(t,n.callee.object);if(!(r instanceof kt))throw new o.aV(t,o.rH.FunctionNotFound,n);const i=!1===n.callee.computed?n.callee.property.name:fe(t,n.callee.property);if(!r.hasGlobal(i))throw new o.aV(t,o.rH.FunctionNotFound,n);const u=r.global(i);if(!(0,l.i)(u))throw new o.aV(t,o.rH.CallNonFunction,n);return u.call(t,n)}if("Identifier"!==n.callee.type)throw new o.aV(t,o.rH.FunctionNotFound,n);if(null!=t.localScope&&void 0!==t.localScope[n.callee.name.toLowerCase()]){const r=t.localScope[n.callee.name.toLowerCase()];if((0,l.i)(r.value))return r.value.call(t,n);throw new o.aV(t,o.rH.CallNonFunction,n)}if(void 0!==t.globalScope[n.callee.name.toLowerCase()]){const r=t.globalScope[n.callee.name.toLowerCase()];if((0,l.i)(r.value))return r.value.call(t,n);throw new o.aV(t,o.rH.CallNonFunction,n)}throw new o.aV(t,o.rH.FunctionNotFound,n)}catch(r){throw r}}(t,n);case"UnaryExpression":return function yr(t,n){try{const r=fe(t,n.argument);if((0,l.a)(r)){if("!"===n.operator)return!r;if("-"===n.operator)return-1*(0,l.g)(r);if("+"===n.operator)return 1*(0,l.g)(r);if("~"===n.operator)return~(0,l.g)(r);throw new o.aV(t,o.rH.UnsupportedUnaryOperator,n)}if("~"===n.operator)return~(0,l.g)(r);if("-"===n.operator)return-1*(0,l.g)(r);if("+"===n.operator)return 1*(0,l.g)(r);throw new o.aV(t,o.rH.UnsupportedUnaryOperator,n)}catch(r){throw r}}(t,n);case"BinaryExpression":return function Fr(t,n){try{const r=[fe(t,n.left),fe(t,n.right)],i=r[0],u=r[1];switch(n.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,l.G)((0,l.g)(i),(0,l.g)(u),n.operator);case"==":return(0,l.F)(i,u);case"!=":return!(0,l.F)(i,u);case"<":case">":case"<=":case">=":return(0,l.E)(i,u,n.operator);case"+":return(0,l.c)(i)||(0,l.c)(u)?(0,l.j)(i)+(0,l.j)(u):(0,l.g)(i)+(0,l.g)(u);case"-":return(0,l.g)(i)-(0,l.g)(u);case"*":return(0,l.g)(i)*(0,l.g)(u);case"/":return(0,l.g)(i)/(0,l.g)(u);case"%":return(0,l.g)(i)%(0,l.g)(u);default:throw new o.aV(t,o.rH.UnsupportedOperator,n)}}catch(r){throw r}}(t,n);case"LogicalExpression":return function Cr(t,n){try{const r=fe(t,n.left);if((0,l.a)(r))switch(n.operator){case"||":if(!0===r)return r;{const i=fe(t,n.right);if((0,l.a)(i))return i;throw new o.aV(t,o.rH.LogicExpressionOrAnd,n)}case"&&":if(!1===r)return r;{const i=fe(t,n.right);if((0,l.a)(i))return i;throw new o.aV(t,o.rH.LogicExpressionOrAnd,n)}default:throw new o.aV(t,o.rH.LogicExpressionOrAnd,n)}throw new o.aV(t,o.rH.LogicalExpressionOnlyBoolean,n)}catch(r){throw r}}(t,n);case"ArrayExpression":return function xr(t,n){try{const r=[];for(let i=0;i<n.elements.length;i++){const u=fe(t,n.elements[i]);if((0,l.i)(u))throw new o.aV(t,o.rH.NoFunctionInArray,n);r.push(u===l.B?null:u)}return r}catch(r){throw r}}(t,n);case"ObjectExpression":return function er(t,n){const r={},i=new Map;for(let A=0;A<n.properties.length;A++){const O=fe(t,n.properties[A]);if((0,l.i)(O.value))throw new o.aV(t,o.rH.NoFunctionInDictionary,n);if(!1===(0,l.c)(O.key))throw new o.aV(t,o.rH.KeyMustBeString,n);let d=O.key.toString();const Z=d.toLowerCase();i.has(Z)?d=i.get(Z):i.set(Z,d),r[d]=O.value===l.B?null:O.value}const u=new E.Z(r);return u.immutable=!1,u}(t,n);case"Property":return function tr(t,n){return{key:"Identifier"===n.key.type?n.key.name:fe(t,n.key),value:fe(t,n.value)}}(t,n);default:throw new o.aV(t,o.rH.Unrecognized,n)}}catch(r){throw(0,o.VO)(t,n,r)}}function ar(t,n,r){if(null!==n.test){if(r.testResult=fe(t,n.test),!1===r.testResult)return;if(!0!==r.testResult)throw new o.aV(t,o.rH.BooleanConditionRequired,n)}r.lastAction=fe(t,n.body),r.lastAction!==l.C?r.lastAction instanceof l.z?r.testResult=!1:null!==n.update&&fe(t,n.update):r.testResult=!1}function gt(t,n,r,i,u){switch(n){case"=":return t===l.B?null:t;case"/=":return(0,l.g)(r)/(0,l.g)(t);case"*=":return(0,l.g)(r)*(0,l.g)(t);case"-=":return(0,l.g)(r)-(0,l.g)(t);case"+=":return(0,l.c)(r)||(0,l.c)(t)?(0,l.j)(r)+(0,l.j)(t):(0,l.g)(r)+(0,l.g)(t);case"%=":return(0,l.g)(r)%(0,l.g)(t);default:throw new o.aV(u,o.rH.UnsupportedOperator,i)}}function Ar(t,n,r){if((0,l.i)(t))throw new o.aV(n,o.rH.NoFunctionInTemplateLiteral,r);return t}function An(t,n){let r;try{const i=n.name.toLowerCase();if(null!=t.localScope&&void 0!==t.localScope[i])return r=t.localScope[i],!0===r.valueset||(r.value=fe(t,r.node),r.valueset=!0),r.value;if(void 0!==t.globalScope[i])return r=t.globalScope[i],!0===r.valueset||(r.value=fe(t,r.node),r.valueset=!0),r.value;throw new o.aV(t,o.rH.InvalidIdentifier,n)}catch(i){throw i}}const Je={};function wn(t,n,r,i){try{const u=n.arguments,A=fe(t,u[r]);if((0,l.F)(A,i))return fe(t,u[r+1]);{const O=u.length-r;return 1===O?fe(t,u[r]):2===O?null:3===O?fe(t,u[r+2]):wn(t,n,r+2,i)}}catch(u){throw u}}function vn(t,n,r,i){try{const u=n.arguments;if(!0===i)return fe(t,u[r+1]);if(u.length-r==3)return fe(t,u[r+2]);{const A=fe(t,u[r+2]);if(!1===(0,l.a)(A))throw new o.aV(t,o.rH.BooleanConditionRequired,u[r+2]);return vn(t,n,r+2,A)}}catch(u){throw u}}function Qt(t,n,r,i){try{const u=t.body;if(r.length!==t.params.length)throw new o.aV(n,o.rH.WrongNumberOfParameters,i);if(null!=n.localScope)for(let O=0;O<r.length;O++)n.localScope[t.params[O].name.toLowerCase()]={value:r[O],valueset:!0,node:null};const A=fe(n,u);if(A instanceof l.z)return A.value;if(A===l.C)throw new o.aV(n,o.rH.UnexpectedToken,i);if(A===l.D)throw new o.aV(n,o.rH.UnexpectedToken,i);return A instanceof l.A?A.value:A}catch(u){throw u}}(0,$.r)(Je,dt),(0,Y.r)(Je,dt),(0,Re.r)(Je,dt),(0,ee.r)(Je,dt),(0,W.r)(Je,dt),Fe(Je,dt),Je.iif=function(t,n){try{const r=n.arguments;(0,l.H)(null===r?[]:r,3,3,t,n);const i=fe(t,r[0]);if(!1===(0,l.a)(i))throw new o.aV(t,o.rH.BooleanConditionRequired,n);return fe(t,!0===i?r[1]:r[2])}catch(r){throw r}},Je.defaultvalue=function(t,n){try{const r=n.arguments;(0,l.H)(null===r?[]:r,2,3,t,n);const i=fe(t,r[0]);if(3===r.length){const u=fe(t,r[1]),A=(0,g.u)(i,u);return null!=A&&""!==A?A:fe(t,r[2])}return null===i||""===i||void 0===i?fe(t,r[1]):i}catch(r){throw r}},Je.decode=function(t,n){try{const r=n.arguments;if(r.length<2)throw new o.aV(t,o.rH.WrongNumberOfParameters,n);if(2===r.length)return fe(t,r[1]);if((r.length-1)%2==0)throw new o.aV(t,o.rH.WrongNumberOfParameters,n);return wn(t,n,1,fe(t,r[0]))}catch(r){throw r}},Je.when=function(t,n){try{const r=n.arguments;if(r.length<3)throw new o.aV(t,o.rH.WrongNumberOfParameters,n);if(r.length%2==0)throw new o.aV(t,o.rH.WrongNumberOfParameters,n);const i=fe(t,r[0]);if(!1===(0,l.a)(i))throw new o.aV(t,o.rH.BooleanConditionRequired,r[0]);return vn(t,n,0,i)}catch(r){throw r}};for(const t in Je)Je[t]={value:new w.Bx(Je[t]),valueset:!0,node:null};const Lt=function(){};function Sn(t,n,r){const i=new Lt;t||(t={}),n||(n={});const u=new E.Z({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});u.immutable=!1,i.textformatting={value:u,valueset:!0,node:null};for(const A in n)i[A]={value:new w.Bx(n[A]),native:!0,valueset:!0,node:null};for(const A in t)i[A]=t[A]&&"esri.Graphic"===t[A].declaredClass?{value:R.Z.createFromGraphic(t[A],r),valueset:!0,node:null}:{value:t[A],valueset:!0,node:null};return i}function _n(t){console.log(t)}function bn(t){const n={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:dt,evaluateIdentifier:An};for(let r=0;r<t.length;r++)t[r].registerFunctions(n);for(const r in n.functions)Je[r]={value:new w.Bx(n.functions[r]),valueset:!0,node:null},Lt.prototype[r]=Je[r];for(let r=0;r<n.signatures.length;r++)(0,z.gW)(n.signatures[r],"sync")}function Xt(t,n){let r=n.spatialReference;null==r&&(r=new V.Z({wkid:102100}));let i=null;t.usesModules&&(i=new H.s(new Map,t.loadedModules));const u={spatialReference:r,globalScope:Sn(n.vars,n.customfunctions,n.timeZone),localScope:null,services:n.services??null,exports:{},libraryResolver:i,console:n.console??_n,timeZone:n.timeZone??null,lrucache:n.lrucache,interceptor:n.interceptor,depthCounter:{depth:1}};let A=fe(u,t);if(A instanceof l.z&&(A=A.value),A instanceof l.A&&(A=A.value),A===l.B&&(A=null),A===l.C)throw new o.aV(u,o.rH.IllegalResult,null);if(A===l.D)throw new o.aV(u,o.rH.IllegalResult,null);if((0,l.i)(A))throw new o.aV(u,o.rH.IllegalResult,null);return A}Lt.prototype=Je,Lt.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},Lt.prototype.pi={value:Math.PI,valueset:!0,node:null},bn([T.A]);var In=_(14007),Sr=_(51172);const _r=new Set(["feature","angle","bearing","centroid","envelopeintersects","extent","geometry","isselfintersecting","ringisclockwise"]);let Mn=!1,Bn=!1,ot=null,qt=[];function Tn(t,n){if(!0===n.useAsync||!0===t.isAsync)return function br(t,n){if(null===ot)throw new o.aV(null,o.rH.AsyncNotEnabled,null);if((0,In.Z)("esri-csp-restrictions"))return function(r){return ot.executeScript(t,r)};try{return At(t,n,!0)}catch(r){if("esri.arcade.arcadeuncompilableerror"===r.declaredRootClass)return function(i){return ot.executeScript(t,i)};throw r}}(t,n);if((0,In.Z)("esri-csp-restrictions"))return function(r){return Xt(t,r)};try{return At(t,n)}catch(r){if("esri.arcade.arcadeuncompilableerror"===r.declaredRootClass)return function(i){return Xt(t,i)};throw r}}function en(t,n=[]){return jt(t,n)}function tn(t,n){if(!0===n.useAsync||!0===t.isAsync){if(null===ot)throw new o.aV(null,o.rH.AsyncNotEnabled,null);return ot.executeScript(t,n)}return Xt(t,n)}function zt(t,n){return(0,z.bV)(t,n)}function On(t){return(0,z.Kq)(t)}function Kt(t,n=[]){return void 0===t.usesGeometry&&(0,z.dN)(t,n),!0===t.usesGeometry}let nn=null;function rn(){return nn||(nn=Pn(),nn)}function Pn(){return an.apply(this,arguments)}function an(){return(an=(0,L.Z)(function*(){const t=yield Promise.all([_.e(9465),_.e(8592),_.e(4994)]).then(_.bind(_,34994));return Bn=!0,function ce(t){G=t}(t),!0})).apply(this,arguments)}let sn=null;function on(){return null!==sn||(sn=Nn()),sn}function Nn(){return un.apply(this,arguments)}function un(){return un=(0,L.Z)(function*(){yield function v(){return x.apply(this,arguments)}(),ot=yield Promise.all([_.e(6212),_.e(4485)]).then(_.bind(_,14485));for(const t of qt)ot.extend(t),at(t,"async");return qt=null,!0}),un.apply(this,arguments)}function Hn(){return Mn}function Rn(){return!!ot}function kn(){return Bn}let ln=null;function cn(){return ln||(ln=Zn(),ln)}function Zn(){return dn.apply(this,arguments)}function dn(){return(dn=(0,L.Z)(function*(){yield on();const[t,n,r,i,u,A]=yield Promise.all([Promise.all([_.e(3754),_.e(9370),_.e(638),_.e(1963),_.e(4271),_.e(8410),_.e(5904),_.e(7512),_.e(5594),_.e(2784),_.e(373),_.e(5367),_.e(3539)]).then(_.bind(_,33086)),Promise.all([_.e(3754),_.e(9370),_.e(638),_.e(1963),_.e(4271),_.e(8410),_.e(5904),_.e(7512),_.e(5594),_.e(2784),_.e(373),_.e(5367),_.e(3539),_.e(3108)]).then(_.bind(_,53108)),Promise.all([_.e(5904),_.e(5367),_.e(3599)]).then(_.bind(_,93599)),Promise.all([_.e(5904),_.e(6596)]).then(_.bind(_,26596)),_.e(4598).then(_.bind(_,4598)),Promise.all([_.e(8592),_.e(7958)]).then(_.bind(_,77958))]);return Gn=t,ot.extend([n,r,i,u,A]),at([n,r,i,u,A],"async"),Mn=!0,!0})).apply(this,arguments)}function Ln(t,n=[]){return void 0===t.usesFeatureSet&&(0,z.dN)(t,n),!0===t.usesFeatureSet}function Un(t,n){return hn.apply(this,arguments)}function hn(){return(hn=(0,L.Z)(function*(t,n,r=[],i=!1,u=null){return fn(new Set,t,n,r,i,u)})).apply(this,arguments)}function fn(t,n,r){return mn.apply(this,arguments)}function mn(){return(mn=(0,L.Z)(function*(t,n,r,i=[],u=!1,A=null){const O="string"==typeof n?en(n):n,d=[];return O&&(!1===kn()&&(Kt(O)||u)&&d.push(rn()),!1===Rn()&&(!0===O.isAsync||r)&&d.push(on()),!1===Hn()&&(Ln(O)||function Pr(t,n){if(n){for(const r of n)if(zt(t,r))return!0;return!1}return!1}(O,i))&&d.push(cn())),d.length&&(yield Promise.all(d)),yield Vn(t,O,A,r,u),!0})).apply(this,arguments)}function Vn(t,n){return pn.apply(this,arguments)}function pn(){return(pn=(0,L.Z)(function*(t,n,r=null,i=!1,u=!1){const A=(0,z.x5)(n);null===r&&A.length>0&&(r=Xe.getDefault()),n.loadedModules={};for(const O of A){(0,Sr.O3)(r);const d=r.normalizeModuleUri(O.source);if(t.has(d.uri))throw new o.aV(null,o.rH.CircularModules,null);t.add(d.uri);const Z=yield r.fetchModule(d);yield fn(t,Z,i,[],u,r),t.delete(d.uri),Z.isAsync&&(n.isAsync=!0),Z.usesFeatureSet&&(n.usesFeatureSet=!0),Z.usesGeometry&&(n.usesGeometry=!0),n.loadedModules[O.libname]={uri:d.uri,script:Z}}})).apply(this,arguments)}function jn(t){if(Kt(t))return!0;const n=(0,z.Vf)(t);let r=!1;for(let i=0;i<n.length;i++)if(_r.has(n[i])){r=!0;break}return r}let Gn=null;function Wt(){return Gn}const Hr=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:fn,compileScript:Tn,enableAsyncSupport:on,enableAsyncSupportImpl:Nn,enableFeatureSetSupport:cn,enableFeatureSetSupportImpl:Zn,enableGeometrySupport:rn,enableGeometrySupportImpl:Pn,executeScript:tn,extend:function Ir(t){bn(t),at(t,"sync"),null===ot?qt.push(t):(at(t,"async"),ot.extend(t))},extractExpectedFieldLiterals:On,extractFieldLiterals:function Tr(t,n=!1){return void 0===n&&(n=!1),(0,z.mb)(t)},featureSetUtils:Wt,isAsyncEnabled:Rn,isFeatureSetSupportEnabled:Hn,isGeometryEnabled:kn,loadDependentModules:Vn,loadScriptDependencies:Un,parseAndExecuteScript:function Mr(t,n,r=[]){return tn(jt(t,r),n)},parseScript:en,referencesFunction:function Br(t,n){return(0,z.w8)(t,n)},referencesMember:zt,scriptIsAsync:function Or(t,n=[]){return void 0===t.isAsync&&(0,z.dN)(t,n),!0===t.isAsync},scriptTouchesGeometry:jn,scriptUsesFeatureSet:Ln,scriptUsesGeometryEngine:Kt,scriptUsesModules:function Nr(t,n=[]){return void 0===t.usesModules&&(0,z.dN)(t,n),!0===t.usesModules}},Symbol.toStringTag,{value:"Module"}));var Rr=_(34222),kr=_(88781),Zr=_(81429);const zn=/^\$(feature|aggregatedFeatures)\./i,Lr={vars:{$feature:"any",$view:"any"},spatialReference:null};function Ur(t){return t.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function Vr(t){return null==t?null:(0,l.o)(t)||(0,l.q)(t)?"array":(0,l.k)(t)?"date":(0,l.c)(t)?"text":(0,l.a)(t)?"boolean":(0,l.b)(t)?"number":t instanceof E.Z?"dictionary":(0,l.r)(t)?"feature":t instanceof f.Z?"point":t instanceof I.Z?"polygon":t instanceof M.Z?"polyline":t instanceof s.Z?"multipoint":t instanceof m.Z?"extent":t instanceof kr.u?"dateOnly":t instanceof Zr.n?"time":(0,l.u)(t)?"featureSet":(0,l.s)(t)?"featureSetCollection":null}function Ut(t){if(!t)return null;try{return en(t)}catch{}return null}function jr(t,n){const r="string"==typeof t?Ut(t):t;if(!r)return null;try{return Tn(r,n=n||(0,Rr.d9)(Lr))}catch{}return null}function Gr(t,n,r){return{vars:{$feature:null==t?new R.Z:R.Z.createFromGraphic(t,r),$view:n?.view},spatialReference:n?.sr,timeZone:r??null}}function zr(t,n,r){return R.Z.createFromGraphicLikeObject(n,t,r,null)}function Kr(t,n){null!=t.vars&&(t.vars.$feature=n)}function Wr(t,n){let r;try{r=tn(t,n)}catch{r=null}return r}function Jr(t,n){let r;try{r=t?t(n):null}catch{r=null}return r}function $r(t,n){try{return t?t(n):Promise.resolve(null)}catch{return Promise.resolve(null)}}function Yr(t,n){if(!t)return[];const r="string"==typeof t?Ut(t):t;if(!r)return[];const i=On(r);let u=new Array;i.forEach(O=>{zn.test(O)&&(O=O.replace(zn,""),u.push(O))});const A=u.filter(O=>O.includes("*"));return u=u.filter(O=>!A.includes(O)),n&&A.forEach(O=>{const d=new RegExp(`^${O.split(/\*+/).map(Ur).join(".*")}$`,"i");n.forEach(Z=>d.test(Z)?u.push(Z):null)}),[...new Set(u.sort())]}function Qr(t){return zt(t,"$view")}function Xr(t,n){return!!t&&zt(t,n)}function qr(t){if(t&&(null!=t.spatialReference||null!=t.scale&&null!=t.viewingMode))return{view:t.viewingMode&&null!=t.scale?new E.Z({viewingMode:t.viewingMode,scale:t.scale}):null,sr:t.spatialReference}}function ei({url:t,spatialReference:n,lrucache:r,interceptor:i}){const u=Wt();return u?u.createFeatureSetCollectionFromService(t,n,r,i):null}function ti({layer:t,spatialReference:n,outFields:r,returnGeometry:i,lrucache:u,interceptor:A}){if(null===t)return null;const O=Wt();return O?O.constructFeatureSet(t,n,r,i??!0,u,A):null}function ni(t){if(null===t?.map)return null;const n=Wt();return n?n.createFeatureSetCollectionFromMap(t.map,t.spatialReference,t.lrucache,t.interceptor):null}function ri(t,n){return E.Z.convertJsonToArcade(t,n)}function ii(t,n,r=[]){return Un(t,n,r)}function ai(){return rn()}function si(){return cn()}function Kn(t,n){if(!t)return!1;if("string"==typeof t)return n(t);const r=t;if(function oi(t){return"simple"===t.type||"class-breaks"===t.type||"unique-value"===t.type||"dot-density"===t.type||"dictionary"===t.type||"pie-chart"===t.type}(r)){if("dot-density"===r.type){const A=r.attributes?.some(O=>n(O.valueExpression));if(A)return A}const i=r.visualVariables,u=!!i&&i.some(A=>{let O=n(A.valueExpression);return"size"===A.type&&(Wn(A.minSize)&&(O=O||n(A.minSize.valueExpression)),Wn(A.maxSize)&&(O=O||n(A.maxSize.valueExpression))),O});return!(!("valueExpression"in r)||!n(r.valueExpression))||u}if(function ui(t){return"esri.layers.support.LabelClass"===t.declaredClass}(r)){const i=r.labelExpressionInfo?.expression;return!(!i||!n(i))||!1}return!!function li(t){return"esri.PopupTemplate"===t.declaredClass}(r)&&(!!r.expressionInfos&&r.expressionInfos.some(i=>n(i.expression))||Array.isArray(r.content)&&r.content.some(i=>"expression"===i.type&&n(i.expressionInfo?.expression)))}function ci(t){const n=Ut(t);return!!n&&jn(n)}function di(t){return Kn(t,ci)}function hi(t){const n=Ut(t);return!!n&&Kt(n)}function fi(t){return Kn(t,hi)}function Wn(t){return t&&"esri.renderers.visualVariables.SizeVariable"===t.declaredClass}}}]);